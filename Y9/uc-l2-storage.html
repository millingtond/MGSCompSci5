<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 2: Storage Devices</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        
        /* Disable all text selection and copy/paste */
        * {
            -webkit-user-select: none !important;
            -moz-user-select: none !important;
            -ms-user-select: none !important;
            user-select: none !important;
        }
        
        /* Disable copy/paste in input areas too */
        input, textarea, select {
            -webkit-user-select: none !important;
            -moz-user-select: none !important;
            -ms-user-select: none !important;
            user-select: none !important;
        }
        
        .draggable {
            cursor: move;
            transition: all 0.3s ease;
            user-select: none;
        }
        
        .draggable:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .drop-zone {
            min-height: 60px;
            transition: all 0.3s ease;
        }
        
        .drop-zone.drag-over {
            background-color: #e0f2fe;
            border-color: #0ea5e9;
            transform: scale(1.02);
        }
        
        .correct-answer {
            animation: correctPulse 0.6s ease;
        }
        
        @keyframes correctPulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }
        
        .memory-card {
            transition: all 0.3s ease;
            cursor: pointer;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .memory-card:hover:not(.matched) {
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }
        
        .flip-card {
            background-color: transparent;
            width: 100%;
            height: 250px;
            perspective: 1000px;
        }
        
        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        
        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }
        
        .flip-card-front,
        .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .flip-card-back {
            transform: rotateY(180deg);
        }
        
        .progress-fill {
            transition: width 0.5s ease;
        }
        
        @keyframes spin {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }
        
        @keyframes sweep {
            0% {
                transform: rotate(-20deg);
            }
            100% {
                transform: rotate(20deg);
            }
        }
        
        @keyframes pulse {
            0%,
            100% {
                opacity: 0.3;
            }
            50% {
                opacity: 1;
            }
        }
        
        .storage-animation {
            transition: all 0.3s ease;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen p-4 md:p-8">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-2">
                Lesson 2: Storage Devices
            </h1>
            <p class="text-gray-600 text-lg">Understanding how computers store and retrieve data</p>
            
            <!-- Progress Bar -->
            <div class="mt-6 bg-gray-200 rounded-full h-4 overflow-hidden max-w-md mx-auto">
                <div id="progressBar" class="progress-fill bg-gradient-to-r from-blue-500 to-purple-500 h-full rounded-full" style="width: 0%"></div>
            </div>
            <p class="text-sm text-gray-600 mt-2">Progress: <span id="progressText">0%</span></p>
        </header>

        <!-- Starter Activity -->
        <section class="bg-white rounded-xl shadow-lg p-6 md:p-8 mb-6">
            <h2 class="text-2xl md:text-3xl font-bold text-purple-600 mb-4">üöÄ Starter: Quick Knowledge Check</h2>
            <p class="text-gray-700 mb-4">Test your existing knowledge about storage!</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="bg-blue-50 p-4 rounded-lg">
                    <label class="font-semibold block mb-2">What is the difference between RAM and secondary storage?</label>
                    <textarea class="w-full p-2 border-2 border-blue-200 rounded-md focus:border-blue-400 focus:outline-none h-20"></textarea>
                </div>
                <div class="bg-purple-50 p-4 rounded-lg">
                    <label class="font-semibold block mb-2">Why do computers need secondary storage?</label>
                    <textarea class="w-full p-2 border-2 border-purple-200 rounded-md focus:border-purple-400 focus:outline-none h-20"></textarea>
                </div>
            </div>
        </section>

        <!-- Task 1: Hardware vs Software Sorting -->
        <section class="bg-white rounded-xl shadow-lg p-6 md:p-8 mb-6">
            <h2 class="text-2xl md:text-3xl font-bold text-blue-600 mb-4">üì¶ Task 1: Hardware vs Software Classification</h2>
            <p class="text-gray-700 mb-6">Drag and drop each item into the correct category. Remember: Hardware is physical, Software is programs!</p>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Items to Sort -->
                <div class="md:col-span-3">
                    <h3 class="font-bold text-lg mb-3 text-gray-700">Items to Sort:</h3>
                    <div id="itemsToSort" class="flex flex-wrap gap-3">
                        <div class="draggable bg-yellow-100 p-3 rounded-lg border-2 border-yellow-300" draggable="true" data-type="hardware">üíæ Hard Drive</div>
                        <div class="draggable bg-yellow-100 p-3 rounded-lg border-2 border-yellow-300" draggable="true" data-type="software">üñ•Ô∏è Windows 11</div>
                        <div class="draggable bg-yellow-100 p-3 rounded-lg border-2 border-yellow-300" draggable="true" data-type="hardware">üñ±Ô∏è Mouse</div>
                        <div class="draggable bg-yellow-100 p-3 rounded-lg border-2 border-yellow-300" draggable="true" data-type="software">üéÆ Minecraft</div>
                        <div class="draggable bg-yellow-100 p-3 rounded-lg border-2 border-yellow-300" draggable="true" data-type="hardware">‚å®Ô∏è Keyboard</div>
                        <div class="draggable bg-yellow-100 p-3 rounded-lg border-2 border-yellow-300" draggable="true" data-type="software">üìù Microsoft Word</div>
                        <div class="draggable bg-yellow-100 p-3 rounded-lg border-2 border-yellow-300" draggable="true" data-type="hardware">üìÄ DVD Drive</div>
                        <div class="draggable bg-yellow-100 p-3 rounded-lg border-2 border-yellow-300" draggable="true" data-type="software">üéµ Spotify</div>
                        <div class="draggable bg-yellow-100 p-3 rounded-lg border-2 border-yellow-300" draggable="true" data-type="hardware">üîå USB Drive</div>
                        <div class="draggable bg-yellow-100 p-3 rounded-lg border-2 border-yellow-300" draggable="true" data-type="software">üõ°Ô∏è Antivirus</div>
                    </div>
                </div>
                
                <!-- Drop Zones -->
                <div class="md:col-span-3 grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                    <div>
                        <h3 class="font-bold text-lg mb-3 text-blue-600">Hardware üîß</h3>
                        <div id="hardwareZone" class="drop-zone bg-blue-50 border-2 border-dashed border-blue-300 rounded-lg p-4 min-h-[200px]"></div>
                    </div>
                    
                    <div>
                        <h3 class="font-bold text-lg mb-3 text-purple-600">Software üíø</h3>
                        <div id="softwareZone" class="drop-zone bg-purple-50 border-2 border-dashed border-purple-300 rounded-lg p-4 min-h-[200px]"></div>
                    </div>
                </div>
            </div>
            
            <button onclick="checkSorting()" class="mt-6 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-2 rounded-lg hover:from-blue-600 hover:to-purple-600 transition-all">
                Check Answers
            </button>
            <button onclick="resetTask1()" class="mt-6 ml-3 bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-all">
                Reset Task
            </button>
            <div id="sortingFeedback" class="mt-4 text-center font-semibold"></div>
        </section>

        <!-- Task 2: Storage Comparison Table -->
        <section class="bg-white rounded-xl shadow-lg p-6 md:p-8 mb-6">
            <h2 class="text-2xl md:text-3xl font-bold text-green-600 mb-4">üìä Task 2: Storage Comparison Challenge</h2>
            <p class="text-gray-700 mb-6">Complete the comparison table by selecting the correct characteristics for each storage type!</p>
            
            <div class="overflow-x-auto">
                <table class="w-full border-collapse">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="border-2 border-gray-300 p-3 text-left">Storage Type</th>
                            <th class="border-2 border-gray-300 p-3">Cost per GB</th>
                            <th class="border-2 border-gray-300 p-3">Speed</th>
                            <th class="border-2 border-gray-300 p-3">Durability</th>
                            <th class="border-2 border-gray-300 p-3">Capacity</th>
                            <th class="border-2 border-gray-300 p-3">Portability</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="border-2 border-gray-300 p-3 font-semibold bg-red-50">
                                <div class="flex items-center gap-2">
                                    <span class="text-2xl">üíæ</span>
                                    <span>HDD (Magnetic)</span>
                                </div>
                            </td>
                            <td class="border-2 border-gray-300 p-3">
                                <select class="w-full p-2 border rounded" data-answer="low">
                                    <option value="">Select...</option>
                                    <option value="lowest">Lowest</option>
                                    <option value="low">Low</option>
                                    <option value="medium">Medium</option>
                                    <option value="high">High</option>
                                    <option value="highest">Highest</option>
                                </select>
                            </td>
                            <td class="border-2 border-gray-300 p-3">
                                <select class="w-full p-2 border rounded" data-answer="medium">
                                    <option value="">Select...</option>
                                    <option value="slowest">Slowest</option>
                                    <option value="slow">Slow</option>
                                    <option value="medium">Medium</option>
                                    <option value="fast">Fast</option>
                                    <option value="fastest">Fastest</option>
                                </select>
                            </td>
                            <td class="border-2 border-gray-300 p-3">
                                <select class="w-full p-2 border rounded" data-answer="low">
                                    <option value="">Select...</option>
                                    <option value="low">Low (moving parts)</option>
                                    <option value="medium">Medium</option>
                                    <option value="high">High (no moving parts)</option>
                                </select>
                            </td>
                            <td class="border-2 border-gray-300 p-3">
                                <select class="w-full p-2 border rounded" data-answer="highest">
                                    <option value="">Select...</option>
                                    <option value="lowest">Lowest</option>
                                    <option value="medium">Medium</option>
                                    <option value="high">High</option>
                                    <option value="highest">Highest</option>
                                </select>
                            </td>
                            <td class="border-2 border-gray-300 p-3">
                                <select class="w-full p-2 border rounded" data-answer="low">
                                    <option value="">Select...</option>
                                    <option value="low">Low</option>
                                    <option value="medium">Medium</option>
                                    <option value="high">High</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-2 border-gray-300 p-3 font-semibold bg-blue-50">
                                <div class="flex items-center gap-2">
                                    <span class="text-2xl">‚ö°</span>
                                    <span>SSD (Solid State)</span>
                                </div>
                            </td>
                            <td class="border-2 border-gray-300 p-3">
                                <select class="w-full p-2 border rounded" data-answer="high">
                                    <option value="">Select...</option>
                                    <option value="lowest">Lowest</option>
                                    <option value="low">Low</option>
                                    <option value="medium">Medium</option>
                                    <option value="high">High</option>
                                    <option value="highest">Highest</option>
                                </select>
                            </td>
                            <td class="border-2 border-gray-300 p-3">
                                <select class="w-full p-2 border rounded" data-answer="fastest">
                                    <option value="">Select...</option>
                                    <option value="slowest">Slowest</option>
                                    <option value="slow">Slow</option>
                                    <option value="medium">Medium</option>
                                    <option value="fast">Fast</option>
                                    <option value="fastest">Fastest</option>
                                </select>
                            </td>
                            <td class="border-2 border-gray-300 p-3">
                                <select class="w-full p-2 border rounded" data-answer="high">
                                    <option value="">Select...</option>
                                    <option value="low">Low (moving parts)</option>
                                    <option value="medium">Medium</option>
                                    <option value="high">High (no moving parts)</option>
                                </select>
                            </td>
                            <td class="border-2 border-gray-300 p-3">
                                <select class="w-full p-2 border rounded" data-answer="medium">
                                    <option value="">Select...</option>
                                    <option value="lowest">Lowest</option>
                                    <option value="medium">Medium</option>
                                    <option value="high">High</option>
                                    <option value="highest">Highest</option>
                                </select>
                            </td>
                            <td class="border-2 border-gray-300 p-3">
                                <select class="w-full p-2 border rounded" data-answer="high">
                                    <option value="">Select...</option>
                                    <option value="low">Low</option>
                                    <option value="medium">Medium</option>
                                    <option value="high">High</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-2 border-gray-300 p-3 font-semibold bg-purple-50">
                                <div class="flex items-center gap-2">
                                    <span class="text-2xl">üíø</span>
                                    <span>Optical (CD/DVD)</span>
                                </div>
                            </td>
                            <td class="border-2 border-gray-300 p-3">
                                <select class="w-full p-2 border rounded" data-answer="lowest">
                                    <option value="">Select...</option>
                                    <option value="lowest">Lowest</option>
                                    <option value="low">Low</option>
                                    <option value="medium">Medium</option>
                                    <option value="high">High</option>
                                    <option value="highest">Highest</option>
                                </select>
                            </td>
                            <td class="border-2 border-gray-300 p-3">
                                <select class="w-full p-2 border rounded" data-answer="slowest">
                                    <option value="">Select...</option>
                                    <option value="slowest">Slowest</option>
                                    <option value="slow">Slow</option>
                                    <option value="medium">Medium</option>
                                    <option value="fast">Fast</option>
                                    <option value="fastest">Fastest</option>
                                </select>
                            </td>
                            <td class="border-2 border-gray-300 p-3">
                                <select class="w-full p-2 border rounded" data-answer="low">
                                    <option value="">Select...</option>
                                    <option value="low">Low (easily scratched)</option>
                                    <option value="medium">Medium</option>
                                    <option value="high">High</option>
                                </select>
                            </td>
                            <td class="border-2 border-gray-300 p-3">
                                <select class="w-full p-2 border rounded" data-answer="lowest">
                                    <option value="">Select...</option>
                                    <option value="lowest">Lowest</option>
                                    <option value="medium">Medium</option>
                                    <option value="high">High</option>
                                    <option value="highest">Highest</option>
                                </select>
                            </td>
                            <td class="border-2 border-gray-300 p-3">
                                <select class="w-full p-2 border rounded" data-answer="high">
                                    <option value="">Select...</option>
                                    <option value="low">Low</option>
                                    <option value="medium">Medium</option>
                                    <option value="high">High</option>
                                </select>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <button onclick="checkComparison()" class="mt-6 bg-gradient-to-r from-green-500 to-blue-500 text-white px-6 py-2 rounded-lg hover:from-green-600 hover:to-blue-600 transition-all">
                Check Answers
            </button>
            <button onclick="resetTask2()" class="mt-6 ml-3 bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-all">
                Reset Task
            </button>
            <div id="comparisonFeedback" class="mt-4 text-center font-semibold"></div>
        </section>

        <!-- Task 3: File Size Challenge -->
        <section class="bg-white rounded-xl shadow-lg p-6 md:p-8 mb-6">
            <h2 class="text-2xl md:text-3xl font-bold text-orange-600 mb-4">üìè Task 3: File Size Hierarchy</h2>
            <p class="text-gray-700 mb-6">Arrange these file sizes from smallest to largest. Remember: Each unit is 1000 times larger than the previous!</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <h3 class="font-bold text-lg mb-3">Scrambled Sizes:</h3>
                    <div id="scrambledSizes" class="space-y-2">
                        <div class="draggable bg-orange-100 p-3 rounded-lg border-2 border-orange-300" draggable="true">Gigabyte (GB)</div>
                        <div class="draggable bg-orange-100 p-3 rounded-lg border-2 border-orange-300" draggable="true">Bit</div>
                        <div class="draggable bg-orange-100 p-3 rounded-lg border-2 border-orange-300" draggable="true">Terabyte (TB)</div>
                        <div class="draggable bg-orange-100 p-3 rounded-lg border-2 border-orange-300" draggable="true">Kilobyte (KB)</div>
                        <div class="draggable bg-orange-100 p-3 rounded-lg border-2 border-orange-300" draggable="true">Byte</div>
                        <div class="draggable bg-orange-100 p-3 rounded-lg border-2 border-orange-300" draggable="true">Megabyte (MB)</div>
                        <div class="draggable bg-orange-100 p-3 rounded-lg border-2 border-orange-300" draggable="true">Petabyte (PB)</div>
                    </div>
                </div>
                
                <div>
                    <h3 class="font-bold text-lg mb-3">Correct Order (Smallest ‚Üí Largest):</h3>
                    <div id="sizeOrder" class="space-y-2">
                        <div class="drop-zone bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-3" data-position="1">
                            <span class="text-gray-500">1. Drop here...</span>
                        </div>
                        <div class="drop-zone bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-3" data-position="2">
                            <span class="text-gray-500">2. Drop here...</span>
                        </div>
                        <div class="drop-zone bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-3" data-position="3">
                            <span class="text-gray-500">3. Drop here...</span>
                        </div>
                        <div class="drop-zone bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-3" data-position="4">
                            <span class="text-gray-500">4. Drop here...</span>
                        </div>
                        <div class="drop-zone bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-3" data-position="5">
                            <span class="text-gray-500">5. Drop here...</span>
                        </div>
                        <div class="drop-zone bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-3" data-position="6">
                            <span class="text-gray-500">6. Drop here...</span>
                        </div>
                        <div class="drop-zone bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-3" data-position="7">
                            <span class="text-gray-500">7. Drop here...</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <button onclick="checkSizes()" class="mt-6 bg-gradient-to-r from-orange-500 to-red-500 text-white px-6 py-2 rounded-lg hover:from-orange-600 hover:to-red-600 transition-all">
                Check Order
            </button>
            <button onclick="resetTask3()" class="mt-6 ml-3 bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-all">
                Reset Task
            </button>
            <div id="sizeFeedback" class="mt-4 text-center font-semibold"></div>
        </section>

        <!-- Task 4: Storage Technology Challenge -->
        <section class="bg-white rounded-xl shadow-lg p-6 md:p-8 mb-6">
            <h2 class="text-2xl md:text-3xl font-bold text-indigo-600 mb-4">üéØ Task 4: Storage Technology Challenge</h2>
            <p class="text-gray-700 mb-6">Complete these interactive activities to test your understanding of storage technologies!</p>
            
            <!-- Activity 1: Storage Scenario Solver -->
            <div class="mb-8 bg-indigo-50 p-6 rounded-lg">
                <h3 class="text-xl font-bold text-indigo-700 mb-4">üß© Activity 1: Storage Scenario Solver</h3>
                <p class="text-gray-700 mb-4">Drag the best storage solution to each scenario!</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Scenarios -->
                    <div>
                        <h4 class="font-semibold mb-3">Scenarios:</h4>
                        <div class="space-y-3">
                            <div class="drop-zone bg-white p-4 rounded-lg border-2 border-dashed border-indigo-300 min-h-[80px]" data-answer="ssd">
                                <p class="text-sm font-semibold mb-2">1. Gaming laptop needs fast boot times</p>
                            </div>
                            <div class="drop-zone bg-white p-4 rounded-lg border-2 border-dashed border-indigo-300 min-h-[80px]" data-answer="hdd">
                                <p class="text-sm font-semibold mb-2">2. Server needs 10TB of affordable storage</p>
                            </div>
                            <div class="drop-zone bg-white p-4 rounded-lg border-2 border-dashed border-indigo-300 min-h-[80px]" data-answer="optical">
                                <p class="text-sm font-semibold mb-2">3. Distributing software to customers</p>
                            </div>
                            <div class="drop-zone bg-white p-4 rounded-lg border-2 border-dashed border-indigo-300 min-h-[80px]" data-answer="cloud">
                                <p class="text-sm font-semibold mb-2">4. Team needs to share files remotely</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Storage Options -->
                    <div>
                        <h4 class="font-semibold mb-3">Storage Options:</h4>
                        <div id="storageOptions" class="grid grid-cols-2 gap-3">
                            <div class="draggable bg-blue-100 p-3 rounded-lg border-2 border-blue-300 text-center" draggable="true" data-type="ssd">
                                <div class="text-2xl mb-1">‚ö°</div>
                                <p class="text-sm font-semibold">SSD</p>
                            </div>
                            <div class="draggable bg-red-100 p-3 rounded-lg border-2 border-red-300 text-center" draggable="true" data-type="hdd">
                                <div class="text-2xl mb-1">üíæ</div>
                                <p class="text-sm font-semibold">HDD</p>
                            </div>
                            <div class="draggable bg-purple-100 p-3 rounded-lg border-2 border-purple-300 text-center" draggable="true" data-type="optical">
                                <div class="text-2xl mb-1">üíø</div>
                                <p class="text-sm font-semibold">Optical</p>
                            </div>
                            <div class="draggable bg-green-100 p-3 rounded-lg border-2 border-green-300 text-center" draggable="true" data-type="cloud">
                                <div class="text-2xl mb-1">‚òÅÔ∏è</div>
                                <p class="text-sm font-semibold">Cloud</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <button onclick="checkScenarios()" class="mt-4 bg-indigo-500 text-white px-6 py-2 rounded-lg hover:bg-indigo-600 transition-all">
                    Check Solutions
                </button>
                <button onclick="resetActivity1()" class="mt-4 ml-3 bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-all">
                    Reset Activity
                </button>
                <div id="scenarioFeedback" class="mt-4 text-center font-semibold"></div>
            </div>
            
            <!-- Activity 2: RAM vs ROM Sorter -->
            <div class="mb-8 bg-yellow-50 p-6 rounded-lg">
                <h3 class="text-xl font-bold text-yellow-700 mb-4">üîÑ Activity 2: RAM vs ROM Characteristics</h3>
                <p class="text-gray-700 mb-4">Sort these characteristics into the correct category!</p>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <!-- Characteristics to sort -->
                    <div>
                        <h4 class="font-semibold mb-3">Characteristics:</h4>
                        <div id="memoryCharacteristics" class="space-y-2">
                            <div class="draggable bg-gray-100 p-2 rounded text-sm" draggable="true" data-type="ram">Stores running programs</div>
                            <div class="draggable bg-gray-100 p-2 rounded text-sm" draggable="true" data-type="rom">Stores boot instructions</div>
                            <div class="draggable bg-gray-100 p-2 rounded text-sm" draggable="true" data-type="ram">Volatile memory</div>
                            <div class="draggable bg-gray-100 p-2 rounded text-sm" draggable="true" data-type="rom">Non-volatile memory</div>
                            <div class="draggable bg-gray-100 p-2 rounded text-sm" draggable="true" data-type="ram">Loses data when powered off</div>
                            <div class="draggable bg-gray-100 p-2 rounded text-sm" draggable="true" data-type="rom">Cannot be changed</div>
                            <div class="draggable bg-gray-100 p-2 rounded text-sm" draggable="true" data-type="ram">Stores clipboard data</div>
                            <div class="draggable bg-gray-100 p-2 rounded text-sm" draggable="true" data-type="rom">Contains BIOS/UEFI</div>
                        </div>
                    </div>
                    
                    <!-- RAM Box -->
                    <div>
                        <h4 class="font-semibold mb-3 text-blue-600">üöÄ RAM</h4>
                        <div id="ramBox" class="drop-zone bg-blue-50 border-2 border-dashed border-blue-300 rounded-lg p-4 min-h-[200px]"></div>
                    </div>
                    
                    <!-- ROM Box -->
                    <div>
                        <h4 class="font-semibold mb-3 text-purple-600">üîí ROM</h4>
                        <div id="romBox" class="drop-zone bg-purple-50 border-2 border-dashed border-purple-300 rounded-lg p-4 min-h-[200px]"></div>
                    </div>
                </div>
                
                <button onclick="checkMemorySort()" class="mt-4 bg-yellow-500 text-white px-6 py-2 rounded-lg hover:bg-yellow-600 transition-all">
                    Check Answers
                </button>
                <button onclick="resetActivity2()" class="mt-4 ml-3 bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-all">
                    Reset Activity
                </button>
                <div id="memorySortFeedback" class="mt-4 text-center font-semibold"></div>
            </div>
            
            <!-- Activity 3: Storage Speed Race -->
            <div class="bg-green-50 p-6 rounded-lg">
                <h3 class="text-xl font-bold text-green-700 mb-4">üèÅ Activity 3: Storage Speed Race</h3>
                <p class="text-gray-700 mb-4">Rank these storage types from FASTEST to SLOWEST access speed!</p>
                
                <div class="flex flex-wrap gap-4 justify-center mb-6">
                    <div id="speedRace" class="flex gap-2">
                        <div class="draggable bg-white p-4 rounded-lg border-2 border-gray-300 text-center cursor-move" draggable="true" data-speed="3">
                            <div class="text-3xl mb-1">üíæ</div>
                            <p class="text-sm font-semibold">HDD</p>
                        </div>
                        <div class="draggable bg-white p-4 rounded-lg border-2 border-gray-300 text-center cursor-move" draggable="true" data-speed="1">
                            <div class="text-3xl mb-1">‚ö°</div>
                            <p class="text-sm font-semibold">SSD</p>
                        </div>
                        <div class="draggable bg-white p-4 rounded-lg border-2 border-gray-300 text-center cursor-move" draggable="true" data-speed="4">
                            <div class="text-3xl mb-1">üíø</div>
                            <p class="text-sm font-semibold">Optical</p>
                        </div>
                        <div class="draggable bg-white p-4 rounded-lg border-2 border-gray-300 text-center cursor-move" draggable="true" data-speed="2">
                            <div class="text-3xl mb-1">üöÄ</div>
                            <p class="text-sm font-semibold">RAM</p>
                        </div>
                    </div>
                </div>
                
                <div class="flex justify-center items-center gap-2 mb-4">
                    <span class="text-green-600 font-bold">FASTEST</span>
                    <div class="flex-1 h-2 bg-gradient-to-r from-green-400 to-red-400 rounded"></div>
                    <span class="text-red-600 font-bold">SLOWEST</span>
                </div>
                
                <button onclick="checkSpeedRace()" class="w-full bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition-all">
                    Check Speed Order
                </button>
                <button onclick="resetActivity3()" class="w-full mt-2 bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-all">
                    Reset Activity
                </button>
                <div id="speedFeedback" class="mt-4 text-center font-semibold"></div>
            </div>
        </section>

        <!-- Extension 1: Beyond Petabyte -->
        <section class="bg-gradient-to-r from-purple-100 to-blue-100 rounded-xl shadow-lg p-6 md:p-8 mb-6">
            <h2 class="text-2xl md:text-3xl font-bold text-purple-700 mb-4">üåå Extension 1: Beyond the Petabyte!</h2>
            <p class="text-gray-700 mb-4">Research and identify the next three units larger than a Petabyte. Each is 1000x larger!</p>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="bg-white p-4 rounded-lg shadow">
                    <label class="font-semibold block mb-2">1. After Petabyte (1000 PB):</label>
                    <input type="text" id="ext1-1" class="w-full p-2 border-2 border-purple-200 rounded-md focus:border-purple-400 focus:outline-none">
                    <button onclick="checkExtension1(1)" class="mt-2 bg-purple-500 text-white px-4 py-1 rounded text-sm">Check</button>
                    <div id="ext1-feedback-1" class="mt-2 text-sm"></div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow">
                    <label class="font-semibold block mb-2">2. Then comes (1000 EB):</label>
                    <input type="text" id="ext1-2" class="w-full p-2 border-2 border-purple-200 rounded-md focus:border-purple-400 focus:outline-none">
                    <button onclick="checkExtension1(2)" class="mt-2 bg-purple-500 text-white px-4 py-1 rounded text-sm">Check</button>
                    <div id="ext1-feedback-2" class="mt-2 text-sm"></div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow">
                    <label class="font-semibold block mb-2">3. Finally (1000 ZB):</label>
                    <input type="text" id="ext1-3" class="w-full p-2 border-2 border-purple-200 rounded-md focus:border-purple-400 focus:outline-none">
                    <button onclick="checkExtension1(3)" class="mt-2 bg-purple-500 text-white px-4 py-1 rounded text-sm">Check</button>
                    <div id="ext1-feedback-3" class="mt-2 text-sm"></div>
                </div>
            </div>
        </section>

        <!-- Extension 2: Cloud Storage Analysis -->
        <section class="bg-gradient-to-r from-blue-100 to-green-100 rounded-xl shadow-lg p-6 md:p-8 mb-6">
            <h2 class="text-2xl md:text-3xl font-bold text-blue-700 mb-4">‚òÅÔ∏è Extension 2: Cloud Storage Critical Analysis</h2>
            <p class="text-gray-700 mb-6">Analyze the implications of cloud storage for businesses and individuals.</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="font-bold text-green-600 mb-3">Scenario 1: Small Business</h3>
                    <p class="text-sm text-gray-600 mb-3">A small business is considering moving all their data to cloud storage.</p>
                    <label class="font-semibold block mb-2">What factors should they consider?</label>
                    <textarea class="w-full p-2 border-2 border-green-200 rounded-md focus:border-green-400 focus:outline-none h-32"></textarea>
                </div>
                
                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="font-bold text-red-600 mb-3">Scenario 2: Personal Use</h3>
                    <p class="text-sm text-gray-600 mb-3">A student wants to store all their schoolwork in the cloud.</p>
                    <label class="font-semibold block mb-2">What are the risks and benefits?</label>
                    <textarea class="w-full p-2 border-2 border-red-200 rounded-md focus:border-red-400 focus:outline-none h-32"></textarea>
                </div>
            </div>
            
            <div class="mt-6 bg-yellow-50 p-4 rounded-lg">
                <p class="font-semibold text-yellow-800 mb-2">Key Exam Points to Remember:</p>
                <ul class="text-sm text-gray-700 list-disc list-inside">
                    <li>Cloud storage requires internet connection</li>
                    <li>Data Protection Act implications</li>
                    <li>Security is managed by provider</li>
                    <li>Can be more cost-effective than physical storage</li>
                </ul>
            </div>
        </section>

        <!-- Extension 3: How Storage Works - Enhanced -->
        <section class="bg-gradient-to-r from-indigo-100 to-purple-100 rounded-xl shadow-lg p-6 md:p-8 mb-6">
            <h2 class="text-2xl md:text-3xl font-bold text-indigo-700 mb-4">‚öôÔ∏è Extension 3: How Storage Technologies Work</h2>
            <p class="text-gray-700 mb-6">Explore how different storage technologies read and write data!</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- HDD Animation -->
                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="font-bold text-lg mb-3 text-red-600">Hard Disk Drive (HDD)</h3>
                    <div class="bg-gray-100 h-48 rounded-lg flex items-center justify-center mb-3 relative overflow-hidden">
                        <!-- Disk platters -->
                        <div id="hddDisk" class="w-36 h-36 bg-gray-400 rounded-full absolute border-4 border-gray-500">
                            <!-- Tracks -->
                            <div class="absolute inset-4 border-2 border-gray-600 rounded-full"></div>
                            <div class="absolute inset-8 border-2 border-gray-600 rounded-full"></div>
                            <div class="absolute inset-12 border-2 border-gray-600 rounded-full"></div>
                            <!-- Sectors -->
                            <div class="w-full h-0.5 bg-gray-600 absolute top-1/2 transform -translate-y-1/2"></div>
                            <div class="w-0.5 h-full bg-gray-600 absolute left-1/2 transform -translate-x-1/2"></div>
                        </div>
                        <!-- Read/Write Arm -->
                        <div id="hddArm" class="w-20 h-2 bg-blue-600 absolute left-1/2 top-1/2 transform origin-left rounded">
                            <div class="w-3 h-3 bg-blue-800 rounded-full absolute right-0 -top-0.5"></div>
                        </div>
                        <!-- Data visualization -->
                        <div id="dataFlow" class="absolute bottom-2 left-2 text-xs text-gray-600"></div>
                    </div>
                    <button onclick="animateHDD()" class="w-full bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-all mb-2">
                        Show Read/Write Process
                    </button>
                    <div class="text-xs text-gray-600 p-3 bg-red-50 rounded">
                        <p class="font-semibold mb-1">How it works:</p>
                        <p>‚Ä¢ Disk spins at high speed (5400-7200 RPM)</p>
                        <p>‚Ä¢ Read/write head moves to correct track</p>
                        <p>‚Ä¢ Data stored magnetically in sectors</p>
                        <p>‚Ä¢ Mechanical movement = slower access</p>
                    </div>
                </div>
                
                <!-- SSD Animation -->
                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="font-bold text-lg mb-3 text-blue-600">Solid State Drive (SSD)</h3>
                    <div class="bg-gray-100 h-48 rounded-lg flex items-center justify-center mb-3 relative p-4">
                        <div class="grid grid-cols-4 gap-2">
                            <div class="ssd-chip w-14 h-14 bg-gray-400 rounded flex items-center justify-center text-xs font-bold text-white">NAND</div>
                            <div class="ssd-chip w-14 h-14 bg-gray-400 rounded flex items-center justify-center text-xs font-bold text-white">NAND</div>
                            <div class="ssd-chip w-14 h-14 bg-gray-400 rounded flex items-center justify-center text-xs font-bold text-white">NAND</div>
                            <div class="ssd-chip w-14 h-14 bg-gray-400 rounded flex items-center justify-center text-xs font-bold text-white">CTRL</div>
                        </div>
                        <!-- Electron flow visualization -->
                        <div id="electronFlow" class="absolute inset-0 pointer-events-none"></div>
                    </div>
                    <button onclick="animateSSD()" class="w-full bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-all mb-2">
                        Show Electronic Process
                    </button>
                    <div class="text-xs text-gray-600 p-3 bg-blue-50 rounded">
                        <p class="font-semibold mb-1">How it works:</p>
                        <p>‚Ä¢ No moving parts - pure electronics</p>
                        <p>‚Ä¢ Data stored in NAND flash cells</p>
                        <p>‚Ä¢ Controller manages data flow</p>
                        <p>‚Ä¢ Instant access = very fast speeds</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Exam Style Questions -->
        <section class="bg-gradient-to-r from-red-100 to-orange-100 rounded-xl shadow-lg p-6 md:p-8 mb-6">
            <h2 class="text-2xl md:text-3xl font-bold text-red-700 mb-4">üìù Exam Style Questions</h2>
            <p class="text-gray-700 mb-6">Answer these exam-style questions. You must write a detailed answer and self-assess before viewing the mark scheme!</p>
            
            <!-- Question 1 -->
            <div class="bg-white p-6 rounded-lg shadow mb-6">
                <div class="flex justify-between items-start mb-4">
                    <h3 class="text-lg font-bold text-gray-800">Question 1</h3>
                    <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm font-semibold">[4 marks]</span>
                </div>
                <p class="text-gray-700 mb-4">Explain why a computer needs both RAM and secondary storage. Include the key differences between them.</p>
                
                <textarea id="q1-answer" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-400 focus:outline-none h-32 mb-4" 
                    placeholder="Write your answer here..."></textarea>
                
                <div class="flex gap-4 mb-4">
                    <div class="flex-1">
                        <label class="block text-sm font-semibold mb-2">How many marks do you think you earned?</label>
                        <select id="q1-marks" class="w-full p-2 border rounded">
                            <option value="">Select...</option>
                            <option value="0">0 marks</option>
                            <option value="1">1 mark</option>
                            <option value="2">2 marks</option>
                            <option value="3">3 marks</option>
                            <option value="4">4 marks</option>
                        </select>
                    </div>
                </div>
                
                <button onclick="checkExamAnswer(1)" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition-all mb-4">
                    Show Mark Scheme
                </button>
                <button onclick="getWritingMetrics(1)" class="ml-3 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition-all mb-4">
                    Check Writing Quality
                </button>
                <button onclick="getAIMarking(1)" class="ml-3 bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600 transition-all mb-4">
                    Get AI Marking
                </button>
                
                <div id="q1-markscheme" class="hidden bg-green-50 p-4 rounded-lg">
                    <h4 class="font-bold text-green-700 mb-2">Mark Scheme:</h4>
                    <ul class="text-sm space-y-2 list-disc list-inside">
                        <li><strong>[1 mark]</strong> RAM is volatile/temporary storage OR loses data when power is off</li>
                        <li><strong>[1 mark]</strong> Secondary storage is non-volatile/permanent OR keeps data when power is off</li>
                        <li><strong>[1 mark]</strong> RAM stores currently running programs/OS/data being used</li>
                        <li><strong>[1 mark]</strong> Secondary storage needed for long-term storage of files/programs/OS when not in use</li>
                    </ul>
                </div>
            </div>
            
            <!-- Question 2 -->
            <div class="bg-white p-6 rounded-lg shadow mb-6">
                <div class="flex justify-between items-start mb-4">
                    <h3 class="text-lg font-bold text-gray-800">Question 2</h3>
                    <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm font-semibold">[6 marks]</span>
                </div>
                <p class="text-gray-700 mb-4">A school is choosing between HDD and SSD storage for their new computers. Discuss the advantages and disadvantages of each option.</p>
                
                <textarea id="q2-answer" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-400 focus:outline-none h-40 mb-4" 
                    placeholder="Write your answer here..."></textarea>
                
                <div class="flex gap-4 mb-4">
                    <div class="flex-1">
                        <label class="block text-sm font-semibold mb-2">How many marks do you think you earned?</label>
                        <select id="q2-marks" class="w-full p-2 border rounded">
                            <option value="">Select...</option>
                            <option value="0">0 marks</option>
                            <option value="1">1 mark</option>
                            <option value="2">2 marks</option>
                            <option value="3">3 marks</option>
                            <option value="4">4 marks</option>
                            <option value="5">5 marks</option>
                            <option value="6">6 marks</option>
                        </select>
                    </div>
                </div>
                
                <button onclick="checkExamAnswer(2)" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition-all mb-4">
                    Show Mark Scheme
                </button>
                <button onclick="getWritingMetrics(2)" class="ml-3 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition-all mb-4">
                    Check Writing Quality
                </button>
                
                <div id="q2-markscheme" class="hidden bg-green-50 p-4 rounded-lg">
                    <h4 class="font-bold text-green-700 mb-2">Mark Scheme:</h4>
                    <p class="text-sm font-semibold mb-2">HDD Advantages (any 2):</p>
                    <ul class="text-sm space-y-1 list-disc list-inside mb-3">
                        <li><strong>[1 mark]</strong> Cheaper per GB / more cost-effective for large storage</li>
                        <li><strong>[1 mark]</strong> Larger capacities available</li>
                        <li><strong>[1 mark]</strong> Reliable for long-term storage</li>
                    </ul>
                    <p class="text-sm font-semibold mb-2">HDD Disadvantages (any 1):</p>
                    <ul class="text-sm space-y-1 list-disc list-inside mb-3">
                        <li><strong>[1 mark]</strong> Moving parts can fail / less durable</li>
                        <li><strong>[1 mark]</strong> Slower read/write speeds</li>
                        <li><strong>[1 mark]</strong> Can be noisy</li>
                    </ul>
                    <p class="text-sm font-semibold mb-2">SSD Advantages (any 2):</p>
                    <ul class="text-sm space-y-1 list-disc list-inside mb-3">
                        <li><strong>[1 mark]</strong> Much faster read/write speeds</li>
                        <li><strong>[1 mark]</strong> No moving parts / more durable</li>
                        <li><strong>[1 mark]</strong> Silent operation</li>
                        <li><strong>[1 mark]</strong> Lower power consumption</li>
                    </ul>
                    <p class="text-sm font-semibold mb-2">SSD Disadvantages (any 1):</p>
                    <ul class="text-sm space-y-1 list-disc list-inside">
                        <li><strong>[1 mark]</strong> More expensive per GB</li>
                        <li><strong>[1 mark]</strong> Limited write cycles / can degrade over time</li>
                        <li><strong>[1 mark]</strong> Generally smaller capacities available</li>
                    </ul>
                </div>
            </div>
            
            <!-- Question 3 -->
            <div class="bg-white p-6 rounded-lg shadow">
                <div class="flex justify-between items-start mb-4">
                    <h3 class="text-lg font-bold text-gray-800">Question 3</h3>
                    <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm font-semibold">[3 marks]</span>
                </div>
                <p class="text-gray-700 mb-4">Describe how data is stored on optical storage devices.</p>
                
                <textarea id="q3-answer" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-400 focus:outline-none h-32 mb-4" 
                    placeholder="Write your answer here..."></textarea>
                
                <div class="flex gap-4 mb-4">
                    <div class="flex-1">
                        <label class="block text-sm font-semibold mb-2">How many marks do you think you earned?</label>
                        <select id="q3-marks" class="w-full p-2 border rounded">
                            <option value="">Select...</option>
                            <option value="0">0 marks</option>
                            <option value="1">1 mark</option>
                            <option value="2">2 marks</option>
                            <option value="3">3 marks</option>
                        </select>
                    </div>
                </div>
                
                <button onclick="checkExamAnswer(3)" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition-all mb-4">
                    Show Mark Scheme
                </button>
                <button onclick="getWritingMetrics(3)" class="ml-3 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition-all mb-4">
                    Check Writing Quality
                </button>
                
                <div id="q3-markscheme" class="hidden bg-green-50 p-4 rounded-lg">
                    <h4 class="font-bold text-green-700 mb-2">Mark Scheme:</h4>
                    <ul class="text-sm space-y-2 list-disc list-inside">
                        <li><strong>[1 mark]</strong> Data is stored as pits and lands</li>
                        <li><strong>[1 mark]</strong> Burnt/created in a spiral track from center outwards</li>
                        <li><strong>[1 mark]</strong> Laser reads the reflection to determine 1s and 0s OR reflections = 1, no reflections = 0</li>
                    </ul>
                </div>
            </div>
        </section>
    </div>

    <script>
        // Progress tracking
        let progress = 0;
        const totalTasks = 10;
        
        function updateProgress() {
            progress++;
            const percentage = Math.round((progress / totalTasks) * 100);
            document.getElementById('progressBar').style.width = percentage + '%';
            document.getElementById('progressText').textContent = percentage + '%';
        }

        // Drag and Drop functionality
        let draggedElement = null;

        // Disable copy, cut, and paste everywhere
        document.addEventListener('DOMContentLoaded', function() {
            // Disable copy
            document.addEventListener('copy', function(e) {
                e.preventDefault();
                return false;
            });
            
            // Disable cut
            document.addEventListener('cut', function(e) {
                e.preventDefault();
                return false;
            });
            
            // Disable paste
            document.addEventListener('paste', function(e) {
                e.preventDefault();
                alert('Copy and paste is disabled. Please type your answer.');
                return false;
            });
            
            // Disable context menu everywhere
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                return false;
            });
            
            // Disable keyboard shortcuts for copy/paste
            document.addEventListener('keydown', function(e) {
                // Disable Ctrl+A, Ctrl+C, Ctrl+V, Ctrl+X
                if (e.ctrlKey && (e.keyCode === 65 || e.keyCode === 67 || e.keyCode === 86 || e.keyCode === 88)) {
                    e.preventDefault();
                    return false;
                }
                // Disable Cmd+A, Cmd+C, Cmd+V, Cmd+X on Mac
                if (e.metaKey && (e.keyCode === 65 || e.keyCode === 67 || e.keyCode === 86 || e.keyCode === 88)) {
                    e.preventDefault();
                    return false;
                }
            });
            
            // Initialize drag and drop
            initializeDragAndDrop();
            initializeTask4DragDrop();
        });

        function initializeDragAndDrop() {
            const draggables = document.querySelectorAll('.draggable');
            const dropZones = document.querySelectorAll('.drop-zone');

            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', function(e) {
                    draggedElement = this;
                    this.style.opacity = '0.5';
                    e.dataTransfer.effectAllowed = 'move';
                    e.dataTransfer.setData('text/html', this.innerHTML);
                });

                draggable.addEventListener('dragend', function(e) {
                    this.style.opacity = '';
                    draggedElement = null;
                });
            });

            dropZones.forEach(zone => {
                zone.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.classList.add('drag-over');
                });

                zone.addEventListener('dragleave', function(e) {
                    this.classList.remove('drag-over');
                });

                zone.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.classList.remove('drag-over');
                    
                    if (draggedElement) {
                        const placeholder = this.querySelector('.text-gray-500');
                        if (placeholder) {
                            this.innerHTML = '';
                        }
                        
                        const clone = draggedElement.cloneNode(true);
                        this.appendChild(clone);
                        
                        initializeDragForElement(clone);
                        
                        if (draggedElement.parentElement.id === 'itemsToSort' || 
                            draggedElement.parentElement.id === 'scrambledSizes') {
                            draggedElement.remove();
                        }
                    }
                });
            });

            ['itemsToSort', 'scrambledSizes'].forEach(containerId => {
                const container = document.getElementById(containerId);
                if (container) {
                    container.addEventListener('dragover', function(e) {
                        e.preventDefault();
                    });
                    
                    container.addEventListener('drop', function(e) {
                        e.preventDefault();
                        if (draggedElement) {
                            this.appendChild(draggedElement);
                        }
                    });
                }
            });
        }

        function initializeDragForElement(element) {
            element.addEventListener('dragstart', function(e) {
                draggedElement = this;
                this.style.opacity = '0.5';
                e.dataTransfer.effectAllowed = 'move';
                e.dataTransfer.setData('text/html', this.innerHTML);
            });

            element.addEventListener('dragend', function(e) {
                this.style.opacity = '';
                draggedElement = null;
            });
        }

        function initializeTask4DragDrop() {
            const storageOptions = document.querySelectorAll('#storageOptions .draggable');
            const scenarioDropZones = document.querySelectorAll('.drop-zone[data-answer]');
            const memoryCharacteristics = document.querySelectorAll('#memoryCharacteristics .draggable');
            const memoryDropZones = document.querySelectorAll('#ramBox, #romBox');
            const speedRaceItems = document.querySelectorAll('#speedRace .draggable');

            [...storageOptions, ...memoryCharacteristics, ...speedRaceItems].forEach(draggable => {
                draggable.addEventListener('dragstart', function(e) {
                    draggedElement = this;
                    this.style.opacity = '0.5';
                    e.dataTransfer.effectAllowed = 'move';
                });

                draggable.addEventListener('dragend', function(e) {
                    this.style.opacity = '';
                    draggedElement = null;
                });
            });

            scenarioDropZones.forEach(zone => {
                zone.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.classList.add('drag-over');
                });

                zone.addEventListener('dragleave', function(e) {
                    this.classList.remove('drag-over');
                });

                zone.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.classList.remove('drag-over');
                    
                    if (draggedElement && draggedElement.dataset.type) {
                        if (this.dataset.answer) {
                            const existingStorage = this.querySelector('.draggable');
                            if (existingStorage) {
                                document.getElementById('storageOptions').appendChild(existingStorage);
                            }
                            
                            const clone = draggedElement.cloneNode(true);
                            this.appendChild(clone);
                            draggedElement.remove();
                            
                            initializeDragForElement(clone);
                        } else {
                            this.appendChild(draggedElement);
                        }
                    }
                });
            });

            memoryDropZones.forEach(zone => {
                zone.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.classList.add('drag-over');
                });

                zone.addEventListener('dragleave', function(e) {
                    this.classList.remove('drag-over');
                });

                zone.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.classList.remove('drag-over');
                    
                    if (draggedElement && draggedElement.dataset.type) {
                        this.appendChild(draggedElement);
                    }
                });
            });
            
            const memCharContainer = document.getElementById('memoryCharacteristics');
            if (memCharContainer) {
                memCharContainer.addEventListener('dragover', function(e) {
                    e.preventDefault();
                });
                
                memCharContainer.addEventListener('drop', function(e) {
                    e.preventDefault();
                    if (draggedElement && draggedElement.dataset.type) {
                        this.appendChild(draggedElement);
                    }
                });
            }

            const speedRaceContainer = document.getElementById('speedRace');
            speedRaceContainer.addEventListener('dragover', function(e) {
                e.preventDefault();
                const afterElement = getDragAfterElement(speedRaceContainer, e.clientX);
                if (afterElement == null) {
                    speedRaceContainer.appendChild(draggedElement);
                } else {
                    speedRaceContainer.insertBefore(draggedElement, afterElement);
                }
            });
        }

        function getDragAfterElement(container, x) {
            const draggableElements = [...container.querySelectorAll('.draggable:not(.dragging)')];
            
            return draggableElements.reduce((closest, child) => {
                const box = child.getBoundingClientRect();
                const offset = x - box.left - box.width / 2;
                
                if (offset < 0 && offset > closest.offset) {
                    return { offset: offset, element: child };
                } else {
                    return closest;
                }
            }, { offset: Number.NEGATIVE_INFINITY }).element;
        }

        // Task 1: Check Hardware/Software sorting
        function checkSorting() {
            const hardwareZone = document.getElementById('hardwareZone');
            const softwareZone = document.getElementById('softwareZone');
            const feedback = document.getElementById('sortingFeedback');
            
            let correct = true;
            let hardwareCount = 0;
            let softwareCount = 0;
            
            hardwareZone.querySelectorAll('.draggable').forEach(item => {
                if (item.dataset.type === 'hardware') {
                    item.style.backgroundColor = '#dcfce7';
                    item.classList.add('correct-answer');
                    hardwareCount++;
                } else {
                    item.style.backgroundColor = '#fee2e2';
                    correct = false;
                }
            });
            
            softwareZone.querySelectorAll('.draggable').forEach(item => {
                if (item.dataset.type === 'software') {
                    item.style.backgroundColor = '#dcfce7';
                    item.classList.add('correct-answer');
                    softwareCount++;
                } else {
                    item.style.backgroundColor = '#fee2e2';
                    correct = false;
                }
            });
            
            if (correct && hardwareCount === 5 && softwareCount === 5) {
                feedback.textContent = 'üéâ Perfect! You correctly sorted all items!';
                feedback.className = 'mt-4 text-center font-semibold text-green-600';
                updateProgress();
            } else {
                feedback.textContent = `‚ùå Not quite right. Remember: Hardware = physical, Software = programs. You got ${hardwareCount}/5 hardware and ${softwareCount}/5 software correct.`;
                feedback.className = 'mt-4 text-center font-semibold text-red-600';
            }
        }

        // Task 2: Check comparison table
        function checkComparison() {
            const selects = document.querySelectorAll('select[data-answer]');
            const feedback = document.getElementById('comparisonFeedback');
            let correct = 0;
            
            selects.forEach(select => {
                if (select.value === select.dataset.answer) {
                    select.style.backgroundColor = '#dcfce7';
                    correct++;
                } else if (select.value) {
                    select.style.backgroundColor = '#fee2e2';
                }
            });
            
            if (correct === 15) {
                feedback.textContent = 'üéâ Perfect! You understand all the storage characteristics!';
                feedback.className = 'mt-4 text-center font-semibold text-green-600';
                updateProgress();
            } else {
                feedback.textContent = `‚úÖ ${correct}/15 correct. Review the flashcard information about storage characteristics.`;
                feedback.className = 'mt-4 text-center font-semibold text-orange-600';
            }
        }

        // Task 3: Check file sizes
        function checkSizes() {
            const sizeOrder = document.getElementById('sizeOrder');
            const feedback = document.getElementById('sizeFeedback');
            const correctOrder = ['Bit', 'Byte', 'Kilobyte (KB)', 'Megabyte (MB)', 'Gigabyte (GB)', 'Terabyte (TB)', 'Petabyte (PB)'];
            
            let allCorrect = true;
            const dropZones = sizeOrder.querySelectorAll('.drop-zone');
            
            dropZones.forEach((zone, index) => {
                const item = zone.querySelector('.draggable');
                if (item && item.textContent === correctOrder[index]) {
                    item.style.backgroundColor = '#dcfce7';
                    item.classList.add('correct-answer');
                } else if (item) {
                    item.style.backgroundColor = '#fee2e2';
                    allCorrect = false;
                } else {
                    allCorrect = false;
                }
            });
            
            if (allCorrect) {
                feedback.textContent = 'üéâ Excellent! Remember: 8 bits = 1 byte, then each unit is 1000x larger!';
                feedback.className = 'mt-4 text-center font-semibold text-green-600';
                updateProgress();
            } else {
                feedback.textContent = '‚ùå Not quite right. Remember: 8 bits = 1 byte, 1000 bytes = 1KB, and so on...';
                feedback.className = 'mt-4 text-center font-semibold text-red-600';
            }
        }

        // Task 4 Activity 1: Check scenarios
        function checkScenarios() {
            const scenarios = document.querySelectorAll('.drop-zone[data-answer]');
            const feedback = document.getElementById('scenarioFeedback');
            let correct = 0;
            
            scenarios.forEach(scenario => {
                const dropped = scenario.querySelector('.draggable');
                if (dropped && dropped.dataset.type === scenario.dataset.answer) {
                    dropped.style.backgroundColor = '#dcfce7';
                    correct++;
                } else if (dropped) {
                    dropped.style.backgroundColor = '#fee2e2';
                }
            });
            
            if (correct === 4) {
                feedback.textContent = 'üéâ Perfect! You matched all scenarios correctly!';
                feedback.className = 'mt-4 text-center font-semibold text-green-600';
                updateProgress();
            } else {
                feedback.textContent = `‚ùå ${correct}/4 correct. Think about the requirements of each scenario.`;
                feedback.className = 'mt-4 text-center font-semibold text-red-600';
            }
        }

        // Task 4 Activity 2: Check memory sort
        function checkMemorySort() {
            const ramBox = document.getElementById('ramBox');
            const romBox = document.getElementById('romBox');
            const feedback = document.getElementById('memorySortFeedback');
            
            let ramCorrect = true;
            let romCorrect = true;
            
            ramBox.querySelectorAll('.draggable').forEach(item => {
                if (item.dataset.type === 'ram') {
                    item.style.backgroundColor = '#dcfce7';
                } else {
                    item.style.backgroundColor = '#fee2e2';
                    ramCorrect = false;
                }
            });
            
            romBox.querySelectorAll('.draggable').forEach(item => {
                if (item.dataset.type === 'rom') {
                    item.style.backgroundColor = '#dcfce7';
                } else {
                    item.style.backgroundColor = '#fee2e2';
                    romCorrect = false;
                }
            });
            
            if (ramCorrect && romCorrect && 
                ramBox.children.length === 4 && romBox.children.length === 4) {
                feedback.textContent = 'üéâ Excellent! You understand RAM and ROM characteristics!';
                feedback.className = 'mt-4 text-center font-semibold text-green-600';
                updateProgress();
            } else {
                feedback.textContent = '‚ùå Not quite right. Remember: RAM is volatile, ROM is permanent.';
                feedback.className = 'mt-4 text-center font-semibold text-red-600';
            }
        }

        // Task 4 Activity 3: Check speed race
        function checkSpeedRace() {
            const speedItems = document.querySelectorAll('#speedRace .draggable');
            const feedback = document.getElementById('speedFeedback');
            const correctOrder = ['2', '1', '3', '4']; // RAM, SSD, HDD, Optical
            
            let isCorrect = true;
            speedItems.forEach((item, index) => {
                if (item.dataset.speed === correctOrder[index]) {
                    item.style.backgroundColor = '#dcfce7';
                } else {
                    item.style.backgroundColor = '#fee2e2';
                    isCorrect = false;
                }
            });
            
            if (isCorrect) {
                feedback.textContent = 'üéâ Perfect! RAM ‚Üí SSD ‚Üí HDD ‚Üí Optical is the correct speed order!';
                feedback.className = 'mt-4 text-center font-semibold text-green-600';
                updateProgress();
            } else {
                feedback.textContent = '‚ùå Not quite. Think about which has moving parts and electronic speeds.';
                feedback.className = 'mt-4 text-center font-semibold text-red-600';
            }
        }

        // Extension 1 checking
        function checkExtension1(num) {
            const answers = ['exabyte', 'zettabyte', 'yottabyte'];
            const input = document.getElementById(`ext1-${num}`).value.toLowerCase().trim();
            const feedback = document.getElementById(`ext1-feedback-${num}`);
            
            if (input === answers[num-1] || input === answers[num-1].replace('byte', '') + 'b') {
                feedback.textContent = '‚úÖ Correct!';
                feedback.className = 'mt-2 text-sm text-green-600';
            } else {
                feedback.textContent = '‚ùå Try again!';
                feedback.className = 'mt-2 text-sm text-red-600';
            }
        }

        // Enhanced Storage animations
        function animateHDD() {
            const disk = document.getElementById('hddDisk');
            const arm = document.getElementById('hddArm');
            const dataFlow = document.getElementById('dataFlow');
            
            disk.style.animation = 'spin 2s linear infinite';
            arm.style.animation = 'sweep 1s ease-in-out infinite alternate';
            
            let step = 0;
            const messages = [
                'üìç Seeking track...',
                'üíæ Reading sector...',
                '‚úÖ Data retrieved!'
            ];
            
            const interval = setInterval(() => {
                if (step < messages.length) {
                    dataFlow.textContent = messages[step];
                    step++;
                } else {
                    clearInterval(interval);
                }
            }, 1000);
            
            setTimeout(() => {
                disk.style.animation = '';
                arm.style.animation = '';
                dataFlow.textContent = '';
                updateProgress();
            }, 4000);
        }

        function animateSSD() {
            const chips = document.querySelectorAll('.ssd-chip');
            
            chips.forEach((chip, index) => {
                setTimeout(() => {
                    chip.style.backgroundColor = '#3b82f6';
                    chip.style.transform = 'scale(1.1)';
                    chip.style.boxShadow = '0 0 20px rgba(59, 130, 246, 0.5)';
                    
                    chip.style.animation = 'pulse 0.5s ease-in-out';
                    
                    setTimeout(() => {
                        chip.style.backgroundColor = '#9ca3af';
                        chip.style.transform = 'scale(1)';
                        chip.style.boxShadow = '';
                        chip.style.animation = '';
                    }, 500);
                }, index * 300);
            });
            
            setTimeout(() => {
                updateProgress();
            }, 2000);
        }

        // Reset functions for each task
        function resetTask1() {
            // Clear drop zones
            document.getElementById('hardwareZone').innerHTML = '';
            document.getElementById('softwareZone').innerHTML = '';
            
            // Reset feedback
            document.getElementById('sortingFeedback').textContent = '';
            document.getElementById('sortingFeedback').className = '';
            
            // Recreate original items
            const itemsContainer = document.getElementById('itemsToSort');
            itemsContainer.innerHTML = `
                <div class="draggable bg-yellow-100 p-3 rounded-lg border-2 border-yellow-300" draggable="true" data-type="hardware">üíæ Hard Drive</div>
                <div class="draggable bg-yellow-100 p-3 rounded-lg border-2 border-yellow-300" draggable="true" data-type="software">üñ•Ô∏è Windows 11</div>
                <div class="draggable bg-yellow-100 p-3 rounded-lg border-2 border-yellow-300" draggable="true" data-type="hardware">üñ±Ô∏è Mouse</div>
                <div class="draggable bg-yellow-100 p-3 rounded-lg border-2 border-yellow-300" draggable="true" data-type="software">üéÆ Minecraft</div>
                <div class="draggable bg-yellow-100 p-3 rounded-lg border-2 border-yellow-300" draggable="true" data-type="hardware">‚å®Ô∏è Keyboard</div>
                <div class="draggable bg-yellow-100 p-3 rounded-lg border-2 border-yellow-300" draggable="true" data-type="software">üìù Microsoft Word</div>
                <div class="draggable bg-yellow-100 p-3 rounded-lg border-2 border-yellow-300" draggable="true" data-type="hardware">üìÄ DVD Drive</div>
                <div class="draggable bg-yellow-100 p-3 rounded-lg border-2 border-yellow-300" draggable="true" data-type="software">üéµ Spotify</div>
                <div class="draggable bg-yellow-100 p-3 rounded-lg border-2 border-yellow-300" draggable="true" data-type="hardware">üîå USB Drive</div>
                <div class="draggable bg-yellow-100 p-3 rounded-lg border-2 border-yellow-300" draggable="true" data-type="software">üõ°Ô∏è Antivirus</div>
            `;
            
            // Reinitialize drag and drop
            initializeDragAndDrop();
        }

        function resetTask2() {
            // Reset all select boxes
            const selects = document.querySelectorAll('select[data-answer]');
            selects.forEach(select => {
                select.value = '';
                select.style.backgroundColor = '';
            });
            
            // Reset feedback
            document.getElementById('comparisonFeedback').textContent = '';
            document.getElementById('comparisonFeedback').className = '';
        }

        function resetTask3() {
            // Clear drop zones
            const sizeOrder = document.getElementById('sizeOrder');
            sizeOrder.innerHTML = `
                <div class="drop-zone bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-3" data-position="1">
                    <span class="text-gray-500">1. Drop here...</span>
                </div>
                <div class="drop-zone bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-3" data-position="2">
                    <span class="text-gray-500">2. Drop here...</span>
                </div>
                <div class="drop-zone bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-3" data-position="3">
                    <span class="text-gray-500">3. Drop here...</span>
                </div>
                <div class="drop-zone bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-3" data-position="4">
                    <span class="text-gray-500">4. Drop here...</span>
                </div>
                <div class="drop-zone bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-3" data-position="5">
                    <span class="text-gray-500">5. Drop here...</span>
                </div>
                <div class="drop-zone bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-3" data-position="6">
                    <span class="text-gray-500">6. Drop here...</span>
                </div>
                <div class="drop-zone bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-3" data-position="7">
                    <span class="text-gray-500">7. Drop here...</span>
                </div>
            `;
            
            // Reset scrambled sizes
            const scrambledSizes = document.getElementById('scrambledSizes');
            scrambledSizes.innerHTML = `
                <div class="draggable bg-orange-100 p-3 rounded-lg border-2 border-orange-300" draggable="true">Gigabyte (GB)</div>
                <div class="draggable bg-orange-100 p-3 rounded-lg border-2 border-orange-300" draggable="true">Bit</div>
                <div class="draggable bg-orange-100 p-3 rounded-lg border-2 border-orange-300" draggable="true">Terabyte (TB)</div>
                <div class="draggable bg-orange-100 p-3 rounded-lg border-2 border-orange-300" draggable="true">Kilobyte (KB)</div>
                <div class="draggable bg-orange-100 p-3 rounded-lg border-2 border-orange-300" draggable="true">Byte</div>
                <div class="draggable bg-orange-100 p-3 rounded-lg border-2 border-orange-300" draggable="true">Megabyte (MB)</div>
                <div class="draggable bg-orange-100 p-3 rounded-lg border-2 border-orange-300" draggable="true">Petabyte (PB)</div>
            `;
            
            // Reset feedback
            document.getElementById('sizeFeedback').textContent = '';
            document.getElementById('sizeFeedback').className = '';
            
            // Reinitialize drag and drop
            initializeDragAndDrop();
        }

        function resetActivity1() {
            // Clear scenario drop zones
            const scenarios = document.querySelectorAll('.drop-zone[data-answer]');
            scenarios.forEach((scenario, index) => {
                const text = scenario.querySelector('p').textContent;
                scenario.innerHTML = `<p class="text-sm font-semibold mb-2">${text}</p>`;
            });
            
            // Reset storage options
            const storageOptions = document.getElementById('storageOptions');
            storageOptions.innerHTML = `
                <div class="draggable bg-blue-100 p-3 rounded-lg border-2 border-blue-300 text-center" draggable="true" data-type="ssd">
                    <div class="text-2xl mb-1">‚ö°</div>
                    <p class="text-sm font-semibold">SSD</p>
                </div>
                <div class="draggable bg-red-100 p-3 rounded-lg border-2 border-red-300 text-center" draggable="true" data-type="hdd">
                    <div class="text-2xl mb-1">üíæ</div>
                    <p class="text-sm font-semibold">HDD</p>
                </div>
                <div class="draggable bg-purple-100 p-3 rounded-lg border-2 border-purple-300 text-center" draggable="true" data-type="optical">
                    <div class="text-2xl mb-1">üíø</div>
                    <p class="text-sm font-semibold">Optical</p>
                </div>
                <div class="draggable bg-green-100 p-3 rounded-lg border-2 border-green-300 text-center" draggable="true" data-type="cloud">
                    <div class="text-2xl mb-1">‚òÅÔ∏è</div>
                    <p class="text-sm font-semibold">Cloud</p>
                </div>
            `;
            
            // Reset feedback
            document.getElementById('scenarioFeedback').textContent = '';
            document.getElementById('scenarioFeedback').className = '';
            
            // Reinitialize Task 4 drag and drop
            initializeTask4DragDrop();
        }

        function resetActivity2() {
            // Clear RAM and ROM boxes
            document.getElementById('ramBox').innerHTML = '';
            document.getElementById('romBox').innerHTML = '';
            
            // Reset characteristics
            const memoryCharacteristics = document.getElementById('memoryCharacteristics');
            memoryCharacteristics.innerHTML = `
                <div class="draggable bg-gray-100 p-2 rounded text-sm" draggable="true" data-type="ram">Stores running programs</div>
                <div class="draggable bg-gray-100 p-2 rounded text-sm" draggable="true" data-type="rom">Stores boot instructions</div>
                <div class="draggable bg-gray-100 p-2 rounded text-sm" draggable="true" data-type="ram">Volatile memory</div>
                <div class="draggable bg-gray-100 p-2 rounded text-sm" draggable="true" data-type="rom">Non-volatile memory</div>
                <div class="draggable bg-gray-100 p-2 rounded text-sm" draggable="true" data-type="ram">Loses data when powered off</div>
                <div class="draggable bg-gray-100 p-2 rounded text-sm" draggable="true" data-type="rom">Cannot be changed</div>
                <div class="draggable bg-gray-100 p-2 rounded text-sm" draggable="true" data-type="ram">Stores clipboard data</div>
                <div class="draggable bg-gray-100 p-2 rounded text-sm" draggable="true" data-type="rom">Contains BIOS/UEFI</div>
            `;
            
            // Reset feedback
            document.getElementById('memorySortFeedback').textContent = '';
            document.getElementById('memorySortFeedback').className = '';
            
            // Reinitialize Task 4 drag and drop
            initializeTask4DragDrop();
        }

        function resetActivity3() {
            // Reset speed race items to original order
            const speedRace = document.getElementById('speedRace');
            speedRace.innerHTML = `
                <div class="draggable bg-white p-4 rounded-lg border-2 border-gray-300 text-center cursor-move" draggable="true" data-speed="3">
                    <div class="text-3xl mb-1">üíæ</div>
                    <p class="text-sm font-semibold">HDD</p>
                </div>
                <div class="draggable bg-white p-4 rounded-lg border-2 border-gray-300 text-center cursor-move" draggable="true" data-speed="1">
                    <div class="text-3xl mb-1">‚ö°</div>
                    <p class="text-sm font-semibold">SSD</p>
                </div>
                <div class="draggable bg-white p-4 rounded-lg border-2 border-gray-300 text-center cursor-move" draggable="true" data-speed="4">
                    <div class="text-3xl mb-1">üíø</div>
                    <p class="text-sm font-semibold">Optical</p>
                </div>
                <div class="draggable bg-white p-4 rounded-lg border-2 border-gray-300 text-center cursor-move" draggable="true" data-speed="2">
                    <div class="text-3xl mb-1">üöÄ</div>
                    <p class="text-sm font-semibold">RAM</p>
                </div>
            `;
            
            // Reset feedback
            document.getElementById('speedFeedback').textContent = '';
            document.getElementById('speedFeedback').className = '';
            
            // Reset all background colors
            speedRace.querySelectorAll('.draggable').forEach(item => {
                item.style.backgroundColor = '';
            });
            
            // Reinitialize Task 4 drag and drop
            initializeTask4DragDrop();
        }

        // Enhanced exam question checking with gibberish detection
        function checkExamAnswer(questionNum) {
            const answer = document.getElementById(`q${questionNum}-answer`).value.trim();
            const marks = document.getElementById(`q${questionNum}-marks`).value;
            const markscheme = document.getElementById(`q${questionNum}-markscheme`);
            
            // Basic length check
            if (answer.length < 50) {
                alert('Please write a more detailed answer before viewing the mark scheme. Aim for at least a few sentences.');
                return;
            }
            
            // Word count check
            const wordCount = answer.split(/\s+/).filter(word => word.length > 0).length;
            if (wordCount < 15) {
                alert('Your answer is too short. Please provide more detail (at least 15 words).');
                return;
            }
            
            // Check for repetitive text
            const words = answer.toLowerCase().split(/\s+/);
            const uniqueWords = new Set(words);
            const repetitionRatio = uniqueWords.size / words.length;
            
            if (repetitionRatio < 0.3) {
                alert('Your answer appears to contain too much repetitive text. Please write a meaningful response.');
                return;
            }
            
            // Check for gibberish patterns
            const gibberishPatterns = [
                /(.)\1{4,}/,  // Same character repeated 5+ times
                /(asdf|qwerty|zxcv|hjkl|ghjk|dfgh|sdfg|wert|erty|rtyu|tyui|yuio|uiop)/i,  // Keyboard patterns
                /^[^aeiou\s]{15,}/i,  // 15+ consonants in a row (no vowels)
                /(abc|xyz|123|789|000|111|222|333|444|555|666|777|888|999)/i,  // Simple sequences
                /^(.{1,3})\1{5,}$/i,  // Short pattern repeated many times
            ];
            
            let isGibberish = false;
            for (let pattern of gibberishPatterns) {
                if (pattern.test(answer)) {
                    isGibberish = true;
                    break;
                }
            }
            
            // Check if answer is just random characters
            const avgWordLength = answer.replace(/\s+/g, '').length / wordCount;
            if (avgWordLength > 15) {  // Average English word is ~5 letters
                isGibberish = true;
            }
            
            if (isGibberish) {
                alert('Please write a meaningful answer related to the question, not random text.');
                return;
            }
            
            if (!marks) {
                alert('Please self-assess how many marks you think you earned before viewing the mark scheme.');
                return;
            }
            
            // If all validation passes, show mark scheme
            markscheme.classList.remove('hidden');
            
            const button = document.querySelector(`button[onclick="checkExamAnswer(${questionNum})"]`);
            if (button) {
                button.disabled = true;
                button.textContent = 'Mark Scheme Shown';
                button.classList.remove('bg-red-500', 'hover:bg-red-600');
                button.classList.add('bg-gray-400');
            }
            
            updateProgress();
        }
        
        // AI Marking Configuration
        // To use this, you need to:
        // 1. Get a Gemini API key from https://makersuite.google.com/app/apikey
        // 2. Replace 'YOUR_GEMINI_API_KEY' below with your actual key
        // 3. For production, store the API key securely (not in client-side code)
        
        const GEMINI_API_KEY = 'YOUR_GEMINI_API_KEY'; // Replace this!
        const GEMINI_API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent';
        
        // AI Marking Function
        async function getAIMarking(questionNum) {
            const answer = document.getElementById(`q${questionNum}-answer`).value.trim();
            const button = event.target;
            
            if (answer.length < 30) {
                alert('Please write more before requesting AI marking.');
                return;
            }
            
            // Check if API key is set
            if (GEMINI_API_KEY === 'YOUR_GEMINI_API_KEY') {
                alert('AI marking is not configured. Please add your Gemini API key to use this feature.');
                return;
            }
            
            // Get question and mark scheme
            const questionData = getQuestionData(questionNum);
            
            // Show loading state
            button.disabled = true;
            button.textContent = 'AI is marking...';
            
            try {
                const response = await fetch(`${GEMINI_API_URL}?key=${GEMINI_API_KEY}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `You are marking a Year 9 Computer Science exam answer. 
                                
Question: ${questionData.question}

Student Answer: ${answer}

Mark Scheme:
${questionData.markScheme}

Please provide:
1. A mark out of ${questionData.totalMarks}
2. Which mark scheme points the student achieved
3. What was missing from their answer
4. One specific improvement suggestion

Format your response as JSON like this:
{
  "mark": 2,
  "achieved": ["Point about RAM being volatile", "Point about secondary storage being permanent"],
  "missing": ["No mention of what RAM stores", "No explanation of why both are needed"],
  "improvement": "Try to explain what types of data are stored in each type of memory"
}`
                            }]
                        }]
                    })
                });
                
                if (!response.ok) {
                    throw new Error('API request failed');
                }
                
                const data = await response.json();
                const aiResponse = data.candidates[0].content.parts[0].text;
                
                // Parse the JSON response
                const marking = JSON.parse(aiResponse);
                
                // Display the AI marking
                displayAIMarking(questionNum, marking, questionData.totalMarks);
                
            } catch (error) {
                console.error('AI Marking Error:', error);
                alert('AI marking failed. Please try again or check your API key.');
            } finally {
                button.textContent = 'Get AI Marking';
                button.disabled = false;
            }
        }
        
        // Helper function to get question data
        function getQuestionData(questionNum) {
            const questions = {
                1: {
                    question: "Explain why a computer needs both RAM and secondary storage. Include the key differences between them.",
                    totalMarks: 4,
                    markScheme: `[1 mark] RAM is volatile/temporary storage OR loses data when power is off
[1 mark] Secondary storage is non-volatile/permanent OR keeps data when power is off
[1 mark] RAM stores currently running programs/OS/data being used
[1 mark] Secondary storage needed for long-term storage of files/programs/OS when not in use`
                },
                2: {
                    question: "A school is choosing between HDD and SSD storage for their new computers. Discuss the advantages and disadvantages of each option.",
                    totalMarks: 6,
                    markScheme: `HDD Advantages (any 2): [1 mark each]
- Cheaper per GB / more cost-effective for large storage
- Larger capacities available
- Reliable for long-term storage

HDD Disadvantages (any 1): [1 mark]
- Moving parts can fail / less durable
- Slower read/write speeds
- Can be noisy

SSD Advantages (any 2): [1 mark each]
- Much faster read/write speeds
- No moving parts / more durable
- Silent operation
- Lower power consumption

SSD Disadvantages (any 1): [1 mark]
- More expensive per GB
- Limited write cycles / can degrade over time
- Generally smaller capacities available`
                },
                3: {
                    question: "Describe how data is stored on optical storage devices.",
                    totalMarks: 3,
                    markScheme: `[1 mark] Data is stored as pits and lands
[1 mark] Burnt/created in a spiral track from center outwards
[1 mark] Laser reads the reflection to determine 1s and 0s OR reflections = 1, no reflections = 0`
                }
            };
            
            return questions[questionNum];
        }
        
        // Display AI marking results
        function displayAIMarking(questionNum, marking, totalMarks) {
            let markingDiv = document.getElementById(`q${questionNum}-ai-marking`);
            if (!markingDiv) {
                markingDiv = document.createElement('div');
                markingDiv.id = `q${questionNum}-ai-marking`;
                markingDiv.className = 'mt-4 p-4 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg border border-purple-200';
                document.querySelector(`button[onclick="getAIMarking(${questionNum})"]`).parentElement.appendChild(markingDiv);
            }
            
            const percentage = Math.round((marking.mark / totalMarks) * 100);
            const gradeColor = percentage >= 70 ? 'green' : percentage >= 50 ? 'yellow' : 'red';
            
            markingDiv.innerHTML = `
                <h4 class="font-bold text-purple-700 mb-3">ü§ñ AI Marking Result</h4>
                
                <div class="bg-white p-4 rounded-lg mb-3">
                    <div class="flex items-center justify-between mb-3">
                        <span class="text-2xl font-bold text-${gradeColor}-600">${marking.mark}/${totalMarks}</span>
                        <span class="text-lg font-semibold text-${gradeColor}-600">${percentage}%</span>
                    </div>
                    
                    <div class="w-full bg-gray-200 rounded-full h-3 overflow-hidden">
                        <div class="h-full bg-gradient-to-r from-${gradeColor}-400 to-${gradeColor}-600 rounded-full transition-all duration-500" 
                             style="width: ${percentage}%"></div>
                    </div>
                </div>
                
                <div class="space-y-3">
                    <div class="bg-green-50 p-3 rounded">
                        <p class="font-semibold text-green-700 mb-1">‚úÖ Points Achieved:</p>
                        <ul class="text-sm text-gray-700 list-disc list-inside">
                            ${marking.achieved.map(point => `<li>${point}</li>`).join('')}
                        </ul>
                    </div>
                    
                    <div class="bg-orange-50 p-3 rounded">
                        <p class="font-semibold text-orange-700 mb-1">‚ùå Missing Points:</p>
                        <ul class="text-sm text-gray-700 list-disc list-inside">
                            ${marking.missing.map(point => `<li>${point}</li>`).join('')}
                        </ul>
                    </div>
                    
                    <div class="bg-blue-50 p-3 rounded">
                        <p class="font-semibold text-blue-700 mb-1">üí° Improvement Tip:</p>
                        <p class="text-sm text-gray-700">${marking.improvement}</p>
                    </div>
                </div>
                
                <p class="text-xs text-gray-600 mt-3">
                    This is AI-generated feedback. For official marking, consult your teacher.
                </p>
            `;
        }
        function getWritingMetrics(questionNum) {
            const answer = document.getElementById(`q${questionNum}-answer`).value.trim();
            
            if (answer.length < 20) {
                alert('Please write more before checking your writing quality.');
                return;
            }
            
            // Calculate various metrics
            const metrics = calculateWritingMetrics(answer);
            
            // Create or update metrics display
            let metricsDiv = document.getElementById(`q${questionNum}-metrics`);
            if (!metricsDiv) {
                metricsDiv = document.createElement('div');
                metricsDiv.id = `q${questionNum}-metrics`;
                metricsDiv.className = 'mt-4 p-4 bg-gradient-to-r from-green-50 to-blue-50 rounded-lg border border-green-200';
                document.querySelector(`button[onclick="getWritingMetrics(${questionNum})"]`).parentElement.appendChild(metricsDiv);
            }
            
            // Generate visual metrics display
            metricsDiv.innerHTML = `
                <h4 class="font-bold text-green-700 mb-3">Writing Quality Metrics (Year 9 Level)</h4>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-white p-3 rounded">
                        <p class="text-sm font-semibold text-gray-700">Word Count</p>
                        <p class="text-2xl font-bold ${metrics.wordCount >= 30 ? 'text-green-600' : 'text-orange-600'}">${metrics.wordCount}</p>
                        <p class="text-xs text-gray-500">Target: 30-100 words</p>
                    </div>
                    
                    <div class="bg-white p-3 rounded">
                        <p class="text-sm font-semibold text-gray-700">Sentence Count</p>
                        <p class="text-2xl font-bold ${metrics.sentenceCount >= 3 ? 'text-green-600' : 'text-orange-600'}">${metrics.sentenceCount}</p>
                        <p class="text-xs text-gray-500">Target: 3-6 sentences</p>
                    </div>
                    
                    <div class="bg-white p-3 rounded">
                        <p class="text-sm font-semibold text-gray-700">Average Sentence Length</p>
                        <p class="text-2xl font-bold ${metrics.avgSentenceLength >= 8 && metrics.avgSentenceLength <= 20 ? 'text-green-600' : 'text-orange-600'}">${metrics.avgSentenceLength}</p>
                        <p class="text-xs text-gray-500">Target: 8-20 words</p>
                    </div>
                    
                    <div class="bg-white p-3 rounded">
                        <p class="text-sm font-semibold text-gray-700">Vocabulary Variety</p>
                        <p class="text-2xl font-bold ${metrics.vocabularyScore >= 60 ? 'text-green-600' : 'text-orange-600'}">${metrics.vocabularyScore}%</p>
                        <p class="text-xs text-gray-500">Unique words used</p>
                    </div>
                </div>
                
                <div class="mt-4 bg-white p-3 rounded">
                    <p class="text-sm font-semibold text-gray-700 mb-2">Technical Terms Used</p>
                    <div class="flex flex-wrap gap-2">
                        ${metrics.technicalTerms.length > 0 
                            ? metrics.technicalTerms.map(term => `<span class="bg-blue-100 text-blue-700 px-2 py-1 rounded text-sm">${term}</span>`).join('')
                            : '<span class="text-gray-500 text-sm">No technical terms found</span>'
                        }
                    </div>
                </div>
                
                <div class="mt-4 bg-white p-3 rounded">
                    <p class="text-sm font-semibold text-gray-700 mb-2">Overall Writing Score</p>
                    <div class="w-full bg-gray-200 rounded-full h-6 overflow-hidden">
                        <div class="h-full bg-gradient-to-r from-green-400 to-green-600 rounded-full flex items-center justify-center text-white text-sm font-bold transition-all duration-500" 
                             style="width: ${metrics.overallScore}%">
                            ${metrics.overallScore}%
                        </div>
                    </div>
                    <p class="text-xs text-gray-600 mt-2">${metrics.feedback}</p>
                </div>
                
                <div class="mt-3 text-xs text-gray-600">
                    <p><strong>Tips for Year 9 writing:</strong></p>
                    <ul class="list-disc list-inside mt-1">
                        <li>Use technical vocabulary from your lessons</li>
                        <li>Write in complete sentences</li>
                        <li>Explain your points clearly</li>
                        <li>Aim for 3-6 sentences per answer</li>
                    </ul>
                </div>
            `;
        }
        
        function calculateWritingMetrics(text) {
            // Basic metrics
            const words = text.split(/\s+/).filter(word => word.length > 0);
            const wordCount = words.length;
            
            // Sentence detection (simple approach)
            const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 10);
            const sentenceCount = Math.max(1, sentences.length);
            
            // Average sentence length
            const avgSentenceLength = Math.round(wordCount / sentenceCount);
            
            // Vocabulary variety
            const uniqueWords = new Set(words.map(w => w.toLowerCase()));
            const vocabularyScore = Math.round((uniqueWords.size / wordCount) * 100);
            
            // Check for technical terms (storage-related)
            const technicalKeywords = [
                'ram', 'rom', 'volatile', 'non-volatile', 'storage', 'memory',
                'permanent', 'temporary', 'secondary', 'primary', 'hard drive',
                'ssd', 'hdd', 'solid state', 'magnetic', 'optical', 'capacity',
                'speed', 'durability', 'cost', 'gigabyte', 'terabyte', 'byte',
                'data', 'files', 'programs', 'boot', 'power', 'access'
            ];
            
            const technicalTerms = [];
            const lowerText = text.toLowerCase();
            technicalKeywords.forEach(term => {
                if (lowerText.includes(term)) {
                    technicalTerms.push(term);
                }
            });
            
            // Calculate overall score
            let score = 0;
            
            // Word count score (max 25%)
            if (wordCount >= 30 && wordCount <= 100) score += 25;
            else if (wordCount >= 20 && wordCount <= 150) score += 15;
            else if (wordCount >= 15) score += 10;
            
            // Sentence structure score (max 25%)
            if (sentenceCount >= 3 && sentenceCount <= 6) score += 25;
            else if (sentenceCount >= 2 && sentenceCount <= 8) score += 15;
            else if (sentenceCount >= 1) score += 10;
            
            // Sentence length score (max 25%)
            if (avgSentenceLength >= 8 && avgSentenceLength <= 20) score += 25;
            else if (avgSentenceLength >= 5 && avgSentenceLength <= 25) score += 15;
            else score += 10;
            
            // Technical vocabulary score (max 25%)
            const techScore = Math.min(25, technicalTerms.length * 5);
            score += techScore;
            
            // Generate feedback
            let feedback = '';
            if (score >= 80) feedback = 'Excellent writing for Year 9! Well structured with good technical vocabulary.';
            else if (score >= 60) feedback = 'Good writing! Try to include more technical terms and vary your sentences.';
            else if (score >= 40) feedback = 'Keep improving! Focus on writing complete sentences and using subject vocabulary.';
            else feedback = 'More practice needed. Remember to write in full sentences and explain your ideas clearly.';
            
            return {
                wordCount,
                sentenceCount,
                avgSentenceLength,
                vocabularyScore,
                technicalTerms,
                overallScore: score,
                feedback
            };
        }
    </script>
</body>
</html>