<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 4: Understanding LLMs - Year 9 Computer Science</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        
        * {
            -webkit-user-select: none !important;
            -moz-user-select: none !important;
            -ms-user-select: none !important;
            user-select: none !important;
        }
        
        input, textarea, select {
            -webkit-user-select: text !important;
            -moz-user-select: text !important;
            -ms-user-select: text !important;
            user-select: text !important;
        }
        
        .chat-bubble {
            animation: bubbleIn 0.3s ease-out;
        }
        
        @keyframes bubbleIn {
            0% { transform: scale(0); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .typing-indicator {
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            background-color: #6b7280;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }
        
        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes typing {
            0%, 60%, 100% { transform: scale(1); opacity: 0.5; }
            30% { transform: scale(1.3); opacity: 1; }
        }
        
        .word-glow {
            animation: wordGlow 2s ease-in-out infinite;
        }
        
        @keyframes wordGlow {
            0%, 100% { box-shadow: 0 0 10px rgba(99, 102, 241, 0.5); }
            50% { box-shadow: 0 0 30px rgba(99, 102, 241, 0.8); }
        }
        
        .token-flow {
            animation: tokenFlow 3s linear infinite;
        }
        
        @keyframes tokenFlow {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .draggable {
            cursor: move;
            transition: all 0.3s ease;
        }
        
        .draggable:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .drop-zone {
            min-height: 60px;
            transition: all 0.3s ease;
        }
        
        .drop-zone.drag-over {
            background-color: #e0e7ff;
            border-color: #6366f1;
            transform: scale(1.02);
        }
        
        .flip-card {
            background-color: transparent;
            width: 100%;
            height: 100%;
            perspective: 1000px;
        }
        
        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        
        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }
        
        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .flip-card-back {
            transform: rotateY(180deg);
        }
        
        .safety-pulse {
            animation: safetyPulse 2s ease-in-out infinite;
        }
        
        @keyframes safetyPulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }
        
        .token {
            display: inline-block;
            padding: 4px 8px;
            margin: 2px;
            background-color: #e0e7ff;
            border-radius: 4px;
            font-size: 14px;
            animation: tokenAppear 0.3s ease-out;
        }
        
        @keyframes tokenAppear {
            0% { transform: scale(0); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .correct-answer {
            background-color: #10b981 !important;
            color: white !important;
        }
        
        .wrong-answer {
            background-color: #ef4444 !important;
            color: white !important;
        }
        
        @keyframes pulseGlow {
            0% { box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(147, 51, 234, 0); }
            100% { box-shadow: 0 0 0 0 rgba(147, 51, 234, 0); }
        }
        
        .pulse-glow {
            animation: pulseGlow 1s;
        }
        
        .bg-gold-50 {
            background-color: #fffbeb;
        }
        
        .bg-silver-50 {
            background-color: #f9fafb;
        }
        
        .bg-bronze-50 {
            background-color: #fef3c7;
        }
        
        .hover\:scale-102:hover {
            transform: scale(1.02);
        }
        
        @keyframes celebrationPop {
            0% { transform: translate(-50%, -50%) scale(0) rotate(0deg); opacity: 1; }
            50% { transform: translate(-50%, -50%) scale(1.5) rotate(180deg); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(2) rotate(360deg); opacity: 0; }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-50 via-blue-50 to-purple-50 min-h-screen p-4 md:p-8">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <header class="text-center mb-8 relative">
            <div class="absolute inset-0 flex justify-center items-center opacity-10">
                <div class="text-[200px] word-glow">üí¨</div>
            </div>
            <h1 class="text-4xl md:text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600 mb-2 relative z-10">
                Understanding LLMs ü§ñüí¨
            </h1>
            <p class="text-gray-600 text-lg relative z-10">Build your own chatbot and learn how ChatGPT works!</p>
            
            <!-- XP Bar -->
            <div class="mt-6 bg-white rounded-full p-2 shadow-lg max-w-md mx-auto relative z-10">
                <div class="flex items-center justify-between">
                    <span class="text-sm font-bold text-gray-700 ml-3">Level 1 LLM Explorer</span>
                    <span class="text-sm font-bold text-indigo-600 mr-3"><span id="xpPoints">0</span> XP</span>
                </div>
                <div class="bg-gray-200 rounded-full h-3 mt-2">
                    <div id="xpBar" class="bg-gradient-to-r from-indigo-500 to-purple-500 h-full rounded-full transition-all duration-500" style="width: 0%"></div>
                </div>
            </div>
        </header>

        <!-- Starter: What Do You Already Know? -->
        <section class="bg-white rounded-xl shadow-lg p-6 md:p-8 mb-6 relative overflow-hidden">
            <div class="absolute top-0 right-0 p-4">
                <span class="text-4xl">ü§î</span>
            </div>
            <h2 class="text-2xl md:text-3xl font-bold text-indigo-600 mb-4">ü§î Starter: What Do You Already Know?</h2>
            <p class="text-gray-700 mb-6">Let's explore what you already know about AI chatbots!</p>
            
            <!-- Prior Knowledge Assessment -->
            <div class="bg-indigo-50 p-6 rounded-lg mb-6">
                <h3 class="font-bold text-indigo-700 mb-4">Quick Knowledge Check</h3>
                
                <!-- Question 1 -->
                <div class="mb-4">
                    <p class="font-semibold mb-2">1. Have you used any AI chatbots before? (e.g., ChatGPT, Siri, Alexa)</p>
                    <div class="flex gap-2">
                        <button onclick="priorKnowledge(1, 'yes')" class="bg-indigo-100 hover:bg-indigo-200 px-3 py-2 rounded text-sm">
                            Yes, I have
                        </button>
                        <button onclick="priorKnowledge(1, 'no')" class="bg-indigo-100 hover:bg-indigo-200 px-3 py-2 rounded text-sm">
                            No, I haven't
                        </button>
                        <button onclick="priorKnowledge(1, 'unsure')" class="bg-indigo-100 hover:bg-indigo-200 px-3 py-2 rounded text-sm">
                            Not sure
                        </button>
                    </div>
                    <div id="prior1-feedback" class="mt-2"></div>
                </div>
                
                <!-- Question 2 -->
                <div class="mb-4">
                    <p class="font-semibold mb-2">2. What do you think AI chatbots are good at?</p>
                    <textarea id="prior2-answer" class="w-full p-2 border-2 border-indigo-200 rounded" rows="2" 
                        placeholder="Type your answer here..."></textarea>
                    <button onclick="checkPrior2()" class="mt-2 bg-indigo-500 text-white px-4 py-2 rounded hover:bg-indigo-600">
                        Submit
                    </button>
                    <div id="prior2-feedback" class="mt-2"></div>
                </div>
                
                <!-- Question 3 -->
                <div class="mb-4">
                    <p class="font-semibold mb-2">3. How do you think chatbots understand what we say?</p>
                    <div class="space-y-2">
                        <button onclick="priorKnowledge(3, 'magic')" class="w-full bg-indigo-100 hover:bg-indigo-200 p-2 rounded text-sm text-left">
                            They use magic or are actually thinking
                        </button>
                        <button onclick="priorKnowledge(3, 'patterns')" class="w-full bg-indigo-100 hover:bg-indigo-200 p-2 rounded text-sm text-left">
                            They learn patterns from lots of text
                        </button>
                        <button onclick="priorKnowledge(3, 'programmed')" class="w-full bg-indigo-100 hover:bg-indigo-200 p-2 rounded text-sm text-left">
                            Someone programmed every possible answer
                        </button>
                    </div>
                    <div id="prior3-feedback" class="mt-2"></div>
                </div>
            </div>
            
            <!-- What is an LLM -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <div class="flip-card h-48" onclick="flipCard(this, 'oldai'); addXP(10, 'flip-oldai')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front bg-gradient-to-br from-red-400 to-red-600 text-white">
                            <div class="text-3xl mb-2">üî¢</div>
                            <p class="font-bold">Old AI</p>
                            <p class="text-sm mt-2">Rule-based systems</p>
                        </div>
                        <div class="flip-card-back bg-red-50 text-gray-800">
                            <p class="text-sm font-semibold mb-2">Traditional AI:</p>
                            <p class="text-xs">If user says "hello" ‚Üí Reply "hi"</p>
                            <p class="text-xs mt-2">Very limited and rigid!</p>
                        </div>
                    </div>
                </div>
                
                <div class="flip-card h-48" onclick="flipCard(this, 'llms'); addXP(10, 'flip-llms')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front bg-gradient-to-br from-indigo-400 to-indigo-600 text-white">
                            <div class="text-3xl mb-2">üß†</div>
                            <p class="font-bold">LLMs</p>
                            <p class="text-sm mt-2">Pattern learning</p>
                        </div>
                        <div class="flip-card-back bg-indigo-50 text-gray-800">
                            <p class="text-sm font-semibold mb-2">Modern LLMs:</p>
                            <p class="text-xs">Learns from billions of texts</p>
                            <p class="text-xs mt-2">Understands context & meaning!</p>
                        </div>
                    </div>
                </div>
                
                <div class="flip-card h-48" onclick="flipCard(this, 'training'); addXP(10, 'flip-training')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front bg-gradient-to-br from-green-400 to-green-600 text-white">
                            <div class="text-3xl mb-2">üìö</div>
                            <p class="font-bold">Training Data</p>
                            <p class="text-sm mt-2">Internet-scale learning</p>
                        </div>
                        <div class="flip-card-back bg-green-50 text-gray-800">
                            <p class="text-sm font-semibold mb-2">LLM Training:</p>
                            <p class="text-xs">Books, websites, articles</p>
                            <p class="text-xs mt-2">Learns language patterns!</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="bg-purple-50 p-4 rounded-lg">
                <p class="font-bold text-purple-700 mb-2">ü§î Understanding Check:</p>
                <p class="text-sm text-gray-700 mb-3">What does LLM stand for?</p>
                <div class="flex gap-2">
                    <button onclick="checkLLM('large')" class="bg-purple-100 hover:bg-purple-200 px-3 py-2 rounded text-sm">
                        Large Language Model
                    </button>
                    <button onclick="checkLLM('little')" class="bg-purple-100 hover:bg-purple-200 px-3 py-2 rounded text-sm">
                        Little Learning Machine
                    </button>
                    <button onclick="checkLLM('loud')" class="bg-purple-100 hover:bg-purple-200 px-3 py-2 rounded text-sm">
                        Loud Laughing Module
                    </button>
                </div>
                <div id="llmFeedback" class="mt-2"></div>
            </div>
        </section>

        <!-- Task 1: How LLMs Predict Words -->
        <section class="bg-white rounded-xl shadow-lg p-6 md:p-8 mb-6">
            <h2 class="text-2xl md:text-3xl font-bold text-purple-600 mb-4">üîÆ Task 1: Word Prediction Magic</h2>
            <p class="text-gray-700 mb-6">See how LLMs predict the next word, just like your phone keyboard!</p>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Word Predictor -->
                <div class="bg-gradient-to-br from-purple-50 to-pink-50 p-6 rounded-lg">
                    <h3 class="font-bold text-lg mb-4">üéØ Next Word Predictor</h3>
                    <p class="text-sm text-gray-600 mb-4">Think about what word fits best based on context and meaning!</p>
                    
                    <div class="flex justify-end mb-2">
                        <button onclick="resetPredictions()" class="bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded text-sm text-gray-700">
                            üîÑ Reset Examples
                        </button>
                    </div>
                    
                    <!-- Example 1 -->
                    <div class="bg-white p-4 rounded-lg mb-4">
                        <p class="text-sm text-gray-600 mb-2">Example 1: <span class="text-purple-600 font-semibold">(Think: What would make sense?)</span></p>
                        <p class="text-lg font-semibold mb-3">"The cat sat on the..."</p>
                        
                        <div class="space-y-2">
                            <button onclick="predictWord('mat', 85, 1)" class="w-full bg-purple-100 hover:bg-purple-200 hover:scale-105 p-3 rounded text-center transition-all cursor-pointer group shadow hover:shadow-md">
                                <span class="group-hover:font-semibold">mat</span>
                            </button>
                            <button onclick="predictWord('chair', 70, 1)" class="w-full bg-purple-100 hover:bg-purple-200 hover:scale-105 p-3 rounded text-center transition-all cursor-pointer group shadow hover:shadow-md">
                                <span class="group-hover:font-semibold">chair</span>
                            </button>
                            <button onclick="predictWord('moon', 5, 1)" class="w-full bg-purple-100 hover:bg-purple-200 hover:scale-105 p-3 rounded text-center transition-all cursor-pointer group shadow hover:shadow-md">
                                <span class="group-hover:font-semibold">moon</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Example 2 -->
                    <div class="bg-white p-4 rounded-lg mb-4">
                        <p class="text-sm text-gray-600 mb-2">Example 2: <span class="text-purple-600 font-semibold">(Consider the context!)</span></p>
                        <p class="text-lg font-semibold mb-3">"I love eating pizza with..."</p>
                        
                        <div class="space-y-2">
                            <button onclick="predictWord('cheese', 80, 2)" class="w-full bg-purple-100 hover:bg-purple-200 hover:scale-105 p-3 rounded text-center transition-all cursor-pointer group shadow hover:shadow-md">
                                <span class="group-hover:font-semibold">cheese</span>
                            </button>
                            <button onclick="predictWord('friends', 65, 2)" class="w-full bg-purple-100 hover:bg-purple-200 hover:scale-105 p-3 rounded text-center transition-all cursor-pointer group shadow hover:shadow-md">
                                <span class="group-hover:font-semibold">friends</span>
                            </button>
                            <button onclick="predictWord('scissors', 2, 2)" class="w-full bg-purple-100 hover:bg-purple-200 hover:scale-105 p-3 rounded text-center transition-all cursor-pointer group shadow hover:shadow-md">
                                <span class="group-hover:font-semibold">scissors</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Example 3 -->
                    <div class="bg-white p-4 rounded-lg mb-4">
                        <p class="text-sm text-gray-600 mb-2">Example 3: <span class="text-purple-600 font-semibold">(What fits naturally?)</span></p>
                        <p class="text-lg font-semibold mb-3">"The weather today is..."</p>
                        
                        <div class="space-y-2">
                            <button onclick="predictWord('sunny', 75, 3)" class="w-full bg-purple-100 hover:bg-purple-200 hover:scale-105 p-3 rounded text-center transition-all cursor-pointer group shadow hover:shadow-md">
                                <span class="group-hover:font-semibold">sunny</span>
                            </button>
                            <button onclick="predictWord('beautiful', 60, 3)" class="w-full bg-purple-100 hover:bg-purple-200 hover:scale-105 p-3 rounded text-center transition-all cursor-pointer group shadow hover:shadow-md">
                                <span class="group-hover:font-semibold">beautiful</span>
                            </button>
                            <button onclick="predictWord('purple', 3, 3)" class="w-full bg-purple-100 hover:bg-purple-200 hover:scale-105 p-3 rounded text-center transition-all cursor-pointer group shadow hover:shadow-md">
                                <span class="group-hover:font-semibold">purple</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="text-center mb-2">
                        <span class="text-purple-600 font-bold text-sm animate-pulse">‚¨áÔ∏è Results appear here! ‚¨áÔ∏è</span>
                    </div>
                    
                    <div id="predictionResult" class="bg-gradient-to-r from-purple-50 to-pink-50 p-4 rounded-lg border-2 border-purple-300 shadow-lg relative overflow-hidden">
                        <div class="absolute -top-3 -right-3 bg-purple-500 text-white rounded-full w-8 h-8 flex items-center justify-center animate-bounce">
                            <span class="text-lg">‚Üì</span>
                        </div>
                        <div class="absolute inset-0 bg-purple-200 opacity-20 animate-pulse"></div>
                        <p class="text-sm text-purple-700 font-semibold text-center relative z-10">üëÜ Click a word above to see how LLMs choose!</p>
                    </div>
                </div>
                
                <!-- How It Works & Assessment -->
                <div>
                    <h3 class="font-bold text-lg mb-4">üß† How LLMs Think</h3>
                    
                    <div class="space-y-3">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <div class="flex items-start gap-3">
                                <span class="text-2xl">1Ô∏è‚É£</span>
                                <div>
                                    <p class="font-semibold">Look at Context</p>
                                    <p class="text-sm text-gray-600">Reads all the words before</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-green-50 p-4 rounded-lg">
                            <div class="flex items-start gap-3">
                                <span class="text-2xl">2Ô∏è‚É£</span>
                                <div>
                                    <p class="font-semibold">Calculate Probabilities</p>
                                    <p class="text-sm text-gray-600">What usually comes next?</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-purple-50 p-4 rounded-lg">
                            <div class="flex items-start gap-3">
                                <span class="text-2xl">3Ô∏è‚É£</span>
                                <div>
                                    <p class="font-semibold">Choose Best Word</p>
                                    <p class="text-sm text-gray-600">Picks most likely option</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Token Visualization -->
                    <div class="mt-4 bg-gray-50 p-4 rounded-lg">
                        <p class="font-semibold mb-2">üß© Breaking into Tokens:</p>
                        <div id="tokenDisplay" class="flex flex-wrap gap-1">
                            <span class="token">The</span>
                            <span class="token">cat</span>
                            <span class="token">sat</span>
                            <span class="token">on</span>
                            <span class="token">the</span>
                            <span class="token bg-yellow-200">?</span>
                        </div>
                    </div>
                    
                    <!-- Assessment Question -->
                    <div class="mt-4 bg-yellow-50 p-4 rounded-lg">
                        <p class="font-bold text-yellow-700 mb-2">üìù Understanding Check:</p>
                        <p class="text-sm mb-3">Why do LLMs sometimes predict unlikely words?</p>
                        <textarea id="task1-assessment" class="w-full p-2 border-2 border-yellow-200 rounded" rows="3" 
                            placeholder="Type your answer here..."></textarea>
                        <button onclick="checkTask1Assessment()" class="mt-2 bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600">
                            Submit Answer
                        </button>
                        <div id="task1-feedback" class="mt-2"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Game: Token Prediction Race -->
        <section class="bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl shadow-lg p-6 md:p-8 mb-6 relative overflow-hidden">
            <div class="absolute top-0 right-0 p-4 opacity-20">
                <span class="text-[100px]">üèÉ‚Äç‚ôÇÔ∏è</span>
            </div>
            <h2 class="text-2xl md:text-3xl font-bold text-purple-700 mb-4">üèÉ‚Äç‚ôÇÔ∏è Game: Token Prediction Challenge!</h2>
            <p class="text-gray-700 mb-6">How fast can you predict like an LLM? Use your knowledge of language and context to choose the best words!</p>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Game Area -->
                <div class="bg-white rounded-lg p-6 shadow-lg">
                    <div id="gameArea" class="min-h-[400px]">
                        <!-- Start Screen -->
                        <div id="startScreen" class="text-center">
                            <div class="mb-6">
                                <span class="text-6xl">üéÆ</span>
                            </div>
                            <h3 class="text-2xl font-bold text-purple-600 mb-4">Token Prediction Challenge</h3>
                            <p class="text-gray-600 mb-6">Choose the word that best completes each sentence!</p>
                            
                            <div class="bg-purple-50 p-4 rounded-lg mb-6">
                                <p class="font-semibold text-purple-700 mb-2">How to Play:</p>
                                <ul class="text-sm text-gray-600 text-left space-y-1">
                                    <li>‚Ä¢ Read the incomplete sentence</li>
                                    <li>‚Ä¢ Click the most likely next word</li>
                                    <li>‚Ä¢ Think about context and grammar</li>
                                    <li>‚Ä¢ Beat the clock for bonus points!</li>
                                </ul>
                            </div>
                            
                            <button onclick="startPredictionGame()" class="bg-purple-600 text-white px-8 py-3 rounded-lg text-lg font-bold hover:bg-purple-700 transition-all transform hover:scale-105">
                                Start Game
                            </button>
                        </div>
                        
                        <!-- Game Screen -->
                        <div id="gameScreen" class="hidden">
                            <!-- Stats Bar -->
                            <div class="flex justify-between items-center mb-6 flex-wrap gap-2">
                                <div class="bg-green-100 px-4 py-2 rounded-lg">
                                    <span class="text-sm font-semibold text-green-700">Score:</span>
                                    <span id="gameScore" class="text-xl font-bold text-green-600 ml-1 transition-all duration-300">0</span>
                                </div>
                                <div class="bg-purple-100 px-4 py-2 rounded-lg">
                                    <span class="text-sm font-semibold text-purple-700">Streak:</span>
                                    <span id="gameStreak" class="text-xl font-bold text-purple-600 ml-1">0</span>
                                    <span class="text-sm">üî•</span>
                                </div>
                                <div class="bg-blue-100 px-4 py-2 rounded-lg">
                                    <span class="text-sm font-semibold text-blue-700">Round:</span>
                                    <span id="gameRound" class="text-xl font-bold text-blue-600 ml-1">1/10</span>
                                </div>
                                <div class="bg-red-100 px-4 py-2 rounded-lg">
                                    <span class="text-sm font-semibold text-red-700">Time:</span>
                                    <span id="gameTimer" class="text-xl font-bold text-red-600 ml-1">30</span>
                                </div>
                            </div>
                            
                            <!-- Question Area -->
                            <div class="bg-gradient-to-r from-purple-50 to-pink-50 p-6 rounded-lg mb-6">
                                <p class="text-lg text-gray-600 mb-2">Complete the sentence:</p>
                                <p id="gameSentence" class="text-xl font-semibold text-gray-800"></p>
                            </div>
                            
                            <!-- Answer Options -->
                            <div id="gameOptions" class="space-y-3">
                                <!-- Options will be dynamically inserted here -->
                            </div>
                            
                            <!-- Feedback -->
                            <div id="gameFeedback" class="mt-4 hidden">
                                <!-- Feedback will appear here -->
                            </div>
                        </div>
                        
                        <!-- End Screen -->
                        <div id="endScreen" class="hidden text-center">
                            <div class="mb-6">
                                <span id="endEmoji" class="text-6xl">üèÜ</span>
                            </div>
                            <h3 class="text-2xl font-bold text-purple-600 mb-4">Game Over!</h3>
                            
                            <div class="bg-purple-50 p-6 rounded-lg mb-6">
                                <p class="text-3xl font-bold text-purple-700 mb-2">Final Score: <span id="finalScore">0</span></p>
                                <p class="text-lg text-gray-600 mb-2">You completed <span id="roundsCompleted">0</span> rounds!</p>
                                <p class="text-lg text-gray-600 mb-4">Best streak: <span id="bestStreak">0</span> üî•</p>
                                
                                <div id="performanceMessage" class="text-sm text-gray-700">
                                    <!-- Performance message will appear here -->
                                </div>
                            </div>
                            
                            <button onclick="startPredictionGame()" class="bg-purple-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-purple-700 transition-all mr-2">
                                Play Again
                            </button>
                            <button onclick="resetToStart()" class="bg-gray-500 text-white px-6 py-2 rounded-lg font-bold hover:bg-gray-600 transition-all">
                                Back to Start
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Leaderboard & Tips -->
                <div>
                    <!-- High Scores -->
                    <div class="bg-white rounded-lg p-6 shadow-lg mb-6">
                        <h3 class="font-bold text-lg text-purple-600 mb-4">üèÖ High Scores</h3>
                        <div id="highScores" class="space-y-2">
                            <div class="flex justify-between items-center p-2 bg-gold-50 rounded">
                                <span class="font-semibold">ü•á 1st Place</span>
                                <span id="score1" class="font-bold text-purple-600">---</span>
                            </div>
                            <div class="flex justify-between items-center p-2 bg-silver-50 rounded">
                                <span class="font-semibold">ü•à 2nd Place</span>
                                <span id="score2" class="font-bold text-purple-600">---</span>
                            </div>
                            <div class="flex justify-between items-center p-2 bg-bronze-50 rounded">
                                <span class="font-semibold">ü•â 3rd Place</span>
                                <span id="score3" class="font-bold text-purple-600">---</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Strategy Tips -->
                    <div class="bg-gradient-to-br from-yellow-50 to-orange-50 p-6 rounded-lg">
                        <h3 class="font-bold text-lg text-orange-600 mb-4">üí° Pro Tips</h3>
                        <ul class="text-sm text-gray-700 space-y-2">
                            <li>‚Ä¢ <strong>Think context:</strong> What makes sense in the sentence?</li>
                            <li>‚Ä¢ <strong>Common patterns:</strong> "The cat sat on the..." (usually furniture!)</li>
                            <li>‚Ä¢ <strong>Grammar rules:</strong> Verbs follow subjects, adjectives before nouns</li>
                            <li>‚Ä¢ <strong>Speed bonus:</strong> Answer quickly for extra points!</li>
                            <li>‚Ä¢ <strong>Learn from feedback:</strong> See why AI chose certain words</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Additional Mini Games -->
        <section class="bg-gradient-to-r from-yellow-100 to-orange-100 rounded-xl shadow-lg p-6 md:p-8 mb-6 relative overflow-hidden">
            <div class="absolute top-0 right-0 p-4 opacity-20">
                <span class="text-[100px]">üéÆ</span>
            </div>
            <h2 class="text-2xl md:text-3xl font-bold text-orange-700 mb-4">üéÆ More LLM Mini Games!</h2>
            <p class="text-gray-700 mb-6">Choose a game to deepen your understanding of how LLMs work!</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <!-- AI vs Human Game -->
                <div class="bg-white rounded-lg p-6 shadow-lg hover:shadow-xl transition-shadow cursor-pointer" onclick="startAIvsHuman()">
                    <div class="text-center mb-4">
                        <span class="text-4xl">ü§ñ</span>
                        <span class="text-2xl mx-2">vs</span>
                        <span class="text-4xl">üë§</span>
                    </div>
                    <h3 class="font-bold text-lg text-center mb-2">AI or Human?</h3>
                    <p class="text-sm text-gray-600 text-center">Can you tell which text was written by AI?</p>
                    <button class="mt-3 w-full bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600">
                        Play Game
                    </button>
                </div>
                
                <!-- Hallucination Hunter -->
                <div class="bg-white rounded-lg p-6 shadow-lg hover:shadow-xl transition-shadow cursor-pointer" onclick="startHallucinationHunter()">
                    <div class="text-center mb-4">
                        <span class="text-5xl">üîç</span>
                    </div>
                    <h3 class="font-bold text-lg text-center mb-2">Hallucination Hunter</h3>
                    <p class="text-sm text-gray-600 text-center">Find the fake facts that AI made up!</p>
                    <button class="mt-3 w-full bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">
                        Hunt Errors
                    </button>
                </div>
                
                <!-- Prompt Master -->
                <div class="bg-white rounded-lg p-6 shadow-lg hover:shadow-xl transition-shadow cursor-pointer" onclick="startPromptMaster()">
                    <div class="text-center mb-4">
                        <span class="text-5xl">‚úçÔ∏è</span>
                    </div>
                    <h3 class="font-bold text-lg text-center mb-2">Prompt Master</h3>
                    <p class="text-sm text-gray-600 text-center">Write better prompts for better AI answers!</p>
                    <button class="mt-3 w-full bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600">
                        Master Prompts
                    </button>
                </div>
                
                <!-- Context Builder -->
                <div class="bg-white rounded-lg p-6 shadow-lg hover:shadow-xl transition-shadow cursor-pointer" onclick="startContextBuilder()">
                    <div class="text-center mb-4">
                        <span class="text-5xl">üß©</span>
                    </div>
                    <h3 class="font-bold text-lg text-center mb-2">Context Builder</h3>
                    <p class="text-sm text-gray-600 text-center">Give AI enough context to answer correctly!</p>
                    <button class="mt-3 w-full bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">
                        Build Context
                    </button>
                </div>
                
                <!-- Temperature Slider -->
                <div class="bg-white rounded-lg p-6 shadow-lg hover:shadow-xl transition-shadow cursor-pointer" onclick="startTemperatureGame()">
                    <div class="text-center mb-4">
                        <span class="text-5xl">üå°Ô∏è</span>
                    </div>
                    <h3 class="font-bold text-lg text-center mb-2">Temperature Control</h3>
                    <p class="text-sm text-gray-600 text-center">See how randomness affects AI creativity!</p>
                    <button class="mt-3 w-full bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                        Control AI
                    </button>
                </div>
                
                <!-- Bias Detective -->
                <div class="bg-white rounded-lg p-6 shadow-lg hover:shadow-xl transition-shadow cursor-pointer" onclick="startBiasDetective()">
                    <div class="text-center mb-4">
                        <span class="text-5xl">üïµÔ∏è</span>
                    </div>
                    <h3 class="font-bold text-lg text-center mb-2">Bias Detective</h3>
                    <p class="text-sm text-gray-600 text-center">Spot hidden biases in AI responses!</p>
                    <button class="mt-3 w-full bg-indigo-500 text-white px-4 py-2 rounded hover:bg-indigo-600">
                        Find Biases
                    </button>
                </div>
            </div>
            
            <!-- Game Area (hidden by default) -->
            <div id="miniGameArea" class="hidden mt-6 bg-white rounded-lg p-6 shadow-lg">
                <!-- Game content will be dynamically inserted here -->
            </div>
        </section>

        <!-- Task 2: Build Your Chatbot -->
        <section class="bg-white rounded-xl shadow-lg p-6 md:p-8 mb-6">
            <h2 class="text-2xl md:text-3xl font-bold text-blue-600 mb-4">ü§ñ Task 2: Build Your School Chatbot!</h2>
            <p class="text-gray-700 mb-6">Design a helpful AI assistant for your school by training it with the right responses!</p>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Chatbot Interface -->
                <div>
                    <h3 class="font-bold text-lg mb-4">üí¨ School Assistant Bot</h3>
                    <div class="flex justify-end mb-2">
                        <button onclick="resetChatbot()" class="bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded text-sm text-gray-700">
                            üîÑ Clear Chat
                        </button>
                    </div>
                    <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-4 h-96 overflow-y-auto" id="chatWindow">
                        <div class="chat-bubble bg-blue-500 text-white p-3 rounded-lg mb-3 max-w-[80%]">
                            <p class="text-sm">Hi! I'm your school assistant. Ask me anything about school!</p>
                        </div>
                    </div>
                    
                    <div class="mt-4 flex gap-2">
                        <input type="text" id="userInput" class="flex-1 p-3 border-2 border-blue-200 rounded-lg focus:border-blue-400 focus:outline-none" 
                            placeholder="Type your message..." onkeypress="if(event.key==='Enter')sendMessage()">
                        <button onclick="sendMessage()" class="bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition-all">
                            Send
                        </button>
                    </div>
                    
                    <!-- Quick Questions -->
                    <div class="mt-3 flex flex-wrap gap-2">
                        <button onclick="quickQuestion('homework')" class="bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded text-sm">
                            üìö Homework help
                        </button>
                        <button onclick="quickQuestion('lunch')" class="bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded text-sm">
                            üçï Lunch menu
                        </button>
                        <button onclick="quickQuestion('clubs')" class="bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded text-sm">
                            ‚öΩ School clubs
                        </button>
                        <button onclick="quickQuestion('uniform')" class="bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded text-sm">
                            üëî Uniform policy
                        </button>
                        <button onclick="quickQuestion('library')" class="bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded text-sm">
                            üìñ Library hours
                        </button>
                        <button onclick="quickQuestion('sports')" class="bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded text-sm">
                            üèÉ Sports day
                        </button>
                        <button onclick="quickQuestion('exams')" class="bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded text-sm">
                            üìù Exam schedule
                        </button>
                        <button onclick="quickQuestion('teacher')" class="bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded text-sm">
                            üë©‚Äçüè´ Find teacher
                        </button>
                    </div>
                </div>
                
                <!-- Training Panel -->
                <div>
                    <h3 class="font-bold text-lg mb-4">üéì Train Your Bot</h3>
                    <p class="text-sm text-gray-600 mb-4">Drag response types to train your bot! Watch out for bad traits!</p>
                    
                    <!-- Response Builder -->
                    <div class="space-y-3 mb-4" id="traitsContainer">
                        <!-- Traits will be randomly ordered here -->
                    </div>
                    
                    <!-- Training Zones -->
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <div class="flex justify-between items-center mb-3">
                            <p class="font-semibold">Bot Personality:</p>
                            <button onclick="resetTraining()" class="bg-gray-200 hover:bg-gray-300 px-2 py-1 rounded text-xs text-gray-700">
                                üîÑ Clear
                            </button>
                        </div>
                        <div id="personalityZone" class="drop-zone bg-white border-2 border-dashed border-gray-300 rounded-lg p-4 min-h-[100px]">
                            <p class="text-gray-400 text-center text-sm">Drop traits here...</p>
                        </div>
                        
                        <button onclick="trainBot()" class="mt-3 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition-all w-full">
                            Train Bot
                        </button>
                        <div id="trainingFeedback" class="mt-2"></div>
                    </div>
                    
                    <!-- Written Question -->
                    <div class="mt-4 bg-blue-50 p-4 rounded-lg">
                        <p class="font-bold text-blue-700 mb-2">üìù Design Question:</p>
                        <p class="text-sm mb-2">What makes a school chatbot helpful vs unhelpful?</p>
                        <textarea id="task2-assessment" class="w-full p-2 border-2 border-blue-200 rounded" rows="3" 
                            placeholder="Type your answer here..."></textarea>
                        <button onclick="checkTask2Assessment()" class="mt-2 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                            Submit Answer
                        </button>
                        <div id="task2-feedback" class="mt-2"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Task 3: LLM Safety & Education -->
        <section class="bg-white rounded-xl shadow-lg p-6 md:p-8 mb-6">
            <h2 class="text-2xl md:text-3xl font-bold text-green-600 mb-4">üõ°Ô∏è Task 3: Using AI Safely in School</h2>
            <p class="text-gray-700 mb-6">Learn how to use AI tools like ChatGPT responsibly for learning!</p>
            
            <!-- Good vs Bad Use Cases -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <div class="bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-lg">
                    <h3 class="font-bold text-green-700 text-xl mb-4">‚úÖ Good Uses of AI</h3>
                    <div class="space-y-3">
                        <div class="bg-white p-3 rounded-lg shadow-sm">
                            <p class="font-semibold text-green-600">üìñ Understanding concepts</p>
                            <p class="text-sm text-gray-600">"Explain photosynthesis in simple terms"</p>
                        </div>
                        <div class="bg-white p-3 rounded-lg shadow-sm">
                            <p class="font-semibold text-green-600">üí° Getting study ideas</p>
                            <p class="text-sm text-gray-600">"How can I practice French verbs?"</p>
                        </div>
                        <div class="bg-white p-3 rounded-lg shadow-sm">
                            <p class="font-semibold text-green-600">üîç Research starting points</p>
                            <p class="text-sm text-gray-600">"What should I research about climate change?"</p>
                        </div>
                        <div class="bg-white p-3 rounded-lg shadow-sm">
                            <p class="font-semibold text-green-600">‚úèÔ∏è Improving your writing</p>
                            <p class="text-sm text-gray-600">"How can I make this paragraph clearer?"</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gradient-to-br from-red-50 to-orange-50 p-6 rounded-lg">
                    <h3 class="font-bold text-red-700 text-xl mb-4">‚ùå Bad Uses of AI</h3>
                    <div class="space-y-3">
                        <div class="bg-white p-3 rounded-lg shadow-sm">
                            <p class="font-semibold text-red-600">üìù Copying homework</p>
                            <p class="text-sm text-gray-600">"Write my essay for me"</p>
                        </div>
                        <div class="bg-white p-3 rounded-lg shadow-sm">
                            <p class="font-semibold text-red-600">üéØ Not learning</p>
                            <p class="text-sm text-gray-600">"Do all my math problems"</p>
                        </div>
                        <div class="bg-white p-3 rounded-lg shadow-sm">
                            <p class="font-semibold text-red-600">üìã Plagiarism</p>
                            <p class="text-sm text-gray-600">Pretending AI work is yours</p>
                        </div>
                        <div class="bg-white p-3 rounded-lg shadow-sm">
                            <p class="font-semibold text-red-600">üö´ Harmful content</p>
                            <p class="text-sm text-gray-600">Asking for inappropriate things</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Extended Interactive Scenarios -->
            <div class="bg-blue-50 p-6 rounded-lg">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="font-bold text-blue-700">üéØ AI Use Scenarios - You Decide & Justify!</h3>
                    <button onclick="resetScenarios()" class="bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded text-sm text-gray-700">
                        üîÑ Reset All
                    </button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Scenario 1 -->
                    <div class="bg-white p-4 rounded-lg">
                        <p class="font-semibold mb-2">Scenario 1:</p>
                        <p class="text-sm text-gray-700 mb-3">Using ChatGPT to check if your math answer is correct</p>
                        <div class="flex gap-2 mb-2">
                            <button onclick="checkScenario(1, 'good')" class="bg-green-100 hover:bg-green-200 px-3 py-1 rounded text-sm">
                                ‚úÖ Good
                            </button>
                            <button onclick="checkScenario(1, 'bad')" class="bg-red-100 hover:bg-red-200 px-3 py-1 rounded text-sm">
                                ‚ùå Bad
                            </button>
                        </div>
                        <textarea id="scenario1-justify" class="w-full p-2 border rounded text-sm" rows="2" 
                            placeholder="Why did you choose this?"></textarea>
                        <div id="scenario1-result" class="mt-2 text-sm"></div>
                    </div>
                    
                    <!-- Scenario 2 -->
                    <div class="bg-white p-4 rounded-lg">
                        <p class="font-semibold mb-2">Scenario 2:</p>
                        <p class="text-sm text-gray-700 mb-3">Asking AI to write your entire book report</p>
                        <div class="flex gap-2 mb-2">
                            <button onclick="checkScenario(2, 'good')" class="bg-green-100 hover:bg-green-200 px-3 py-1 rounded text-sm">
                                ‚úÖ Good
                            </button>
                            <button onclick="checkScenario(2, 'bad')" class="bg-red-100 hover:bg-red-200 px-3 py-1 rounded text-sm">
                                ‚ùå Bad
                            </button>
                        </div>
                        <textarea id="scenario2-justify" class="w-full p-2 border rounded text-sm" rows="2" 
                            placeholder="Why did you choose this?"></textarea>
                        <div id="scenario2-result" class="mt-2 text-sm"></div>
                    </div>
                    
                    <!-- Scenario 3 -->
                    <div class="bg-white p-4 rounded-lg">
                        <p class="font-semibold mb-2">Scenario 3:</p>
                        <p class="text-sm text-gray-700 mb-3">Getting ideas for a science project topic</p>
                        <div class="flex gap-2 mb-2">
                            <button onclick="checkScenario(3, 'good')" class="bg-green-100 hover:bg-green-200 px-3 py-1 rounded text-sm">
                                ‚úÖ Good
                            </button>
                            <button onclick="checkScenario(3, 'bad')" class="bg-red-100 hover:bg-red-200 px-3 py-1 rounded text-sm">
                                ‚ùå Bad
                            </button>
                        </div>
                        <textarea id="scenario3-justify" class="w-full p-2 border rounded text-sm" rows="2" 
                            placeholder="Why did you choose this?"></textarea>
                        <div id="scenario3-result" class="mt-2 text-sm"></div>
                    </div>
                    
                    <!-- Scenario 4 -->
                    <div class="bg-white p-4 rounded-lg">
                        <p class="font-semibold mb-2">Scenario 4:</p>
                        <p class="text-sm text-gray-700 mb-3">Learning how to cite sources properly</p>
                        <div class="flex gap-2 mb-2">
                            <button onclick="checkScenario(4, 'good')" class="bg-green-100 hover:bg-green-200 px-3 py-1 rounded text-sm">
                                ‚úÖ Good
                            </button>
                            <button onclick="checkScenario(4, 'bad')" class="bg-red-100 hover:bg-red-200 px-3 py-1 rounded text-sm">
                                ‚ùå Bad
                            </button>
                        </div>
                        <textarea id="scenario4-justify" class="w-full p-2 border rounded text-sm" rows="2" 
                            placeholder="Why did you choose this?"></textarea>
                        <div id="scenario4-result" class="mt-2 text-sm"></div>
                    </div>
                    
                    <!-- Scenario 5 -->
                    <div class="bg-white p-4 rounded-lg">
                        <p class="font-semibold mb-2">Scenario 5:</p>
                        <p class="text-sm text-gray-700 mb-3">Using AI to explain a poem you don't understand</p>
                        <div class="flex gap-2 mb-2">
                            <button onclick="checkScenario(5, 'good')" class="bg-green-100 hover:bg-green-200 px-3 py-1 rounded text-sm">
                                ‚úÖ Good
                            </button>
                            <button onclick="checkScenario(5, 'bad')" class="bg-red-100 hover:bg-red-200 px-3 py-1 rounded text-sm">
                                ‚ùå Bad
                            </button>
                        </div>
                        <textarea id="scenario5-justify" class="w-full p-2 border rounded text-sm" rows="2" 
                            placeholder="Why did you choose this?"></textarea>
                        <div id="scenario5-result" class="mt-2 text-sm"></div>
                    </div>
                    
                    <!-- Scenario 6 -->
                    <div class="bg-white p-4 rounded-lg">
                        <p class="font-semibold mb-2">Scenario 6:</p>
                        <p class="text-sm text-gray-700 mb-3">Copying AI's answer for a take-home test</p>
                        <div class="flex gap-2 mb-2">
                            <button onclick="checkScenario(6, 'good')" class="bg-green-100 hover:bg-green-200 px-3 py-1 rounded text-sm">
                                ‚úÖ Good
                            </button>
                            <button onclick="checkScenario(6, 'bad')" class="bg-red-100 hover:bg-red-200 px-3 py-1 rounded text-sm">
                                ‚ùå Bad
                            </button>
                        </div>
                        <textarea id="scenario6-justify" class="w-full p-2 border rounded text-sm" rows="2" 
                            placeholder="Why did you choose this?"></textarea>
                        <div id="scenario6-result" class="mt-2 text-sm"></div>
                    </div>
                </div>
            </div>
            
            <!-- AI Study Assistant Guidelines -->
            <div class="mt-6 bg-gradient-to-r from-indigo-50 to-purple-50 p-6 rounded-lg">
                <h3 class="font-bold text-indigo-700 mb-4">üìö Your AI Study Guidelines</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-white p-4 rounded-lg">
                        <p class="font-semibold text-indigo-600 mb-2">üéØ DO:</p>
                        <ul class="text-sm text-gray-700 space-y-1">
                            <li>‚Ä¢ Use AI to understand difficult topics</li>
                            <li>‚Ä¢ Ask for study strategies</li>
                            <li>‚Ä¢ Get feedback on your ideas</li>
                            <li>‚Ä¢ Learn new perspectives</li>
                        </ul>
                    </div>
                    <div class="bg-white p-4 rounded-lg">
                        <p class="font-semibold text-purple-600 mb-2">üö´ DON'T:</p>
                        <ul class="text-sm text-gray-700 space-y-1">
                            <li>‚Ä¢ Submit AI work as your own</li>
                            <li>‚Ä¢ Skip the learning process</li>
                            <li>‚Ä¢ Rely only on AI answers</li>
                            <li>‚Ä¢ Use for tests or exams</li>
                        </ul>
                    </div>
                </div>
                
                <!-- Reflection Question -->
                <div class="mt-4 bg-white p-4 rounded-lg">
                    <p class="font-bold text-indigo-700 mb-2">üìù Reflection:</p>
                    <p class="text-sm mb-2">Write your own rule for using AI in school:</p>
                    <textarea id="task3-assessment" class="w-full p-2 border-2 border-indigo-200 rounded" rows="2" 
                        placeholder="My AI rule: ..."></textarea>
                    <button onclick="checkTask3Assessment()" class="mt-2 bg-indigo-500 text-white px-4 py-2 rounded hover:bg-indigo-600">
                        Submit Rule
                    </button>
                    <div id="task3-feedback" class="mt-2"></div>
                </div>
            </div>
        </section>

        <!-- Task 4: LLM Limitations -->
        <section class="bg-white rounded-xl shadow-lg p-6 md:p-8 mb-6">
            <h2 class="text-2xl md:text-3xl font-bold text-orange-600 mb-4">‚ö†Ô∏è Task 4: Understanding AI Limitations</h2>
            <p class="text-gray-700 mb-6">Even smart AI has limits! Let's investigate what LLMs can and can't do.</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Limitation Cards -->
                <div class="space-y-4">
                    <div class="flip-card h-40" onclick="flipCard(this); revealLimit(1)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front bg-gradient-to-br from-orange-400 to-orange-600 text-white">
                                <div class="text-3xl mb-2">üìÖ</div>
                                <p class="font-bold">Knowledge Cutoff</p>
                                <p class="text-sm">Click to learn more!</p>
                            </div>
                            <div class="flip-card-back bg-orange-50 text-gray-800">
                                <p class="text-sm font-semibold mb-2">Limited to training date!</p>
                                <p class="text-xs">LLMs don't know about events after their training. Can't tell you today's weather!</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flip-card h-40" onclick="flipCard(this); revealLimit(2)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front bg-gradient-to-br from-red-400 to-red-600 text-white">
                                <div class="text-3xl mb-2">üéØ</div>
                                <p class="font-bold">Can Make Mistakes</p>
                                <p class="text-sm">Click to learn more!</p>
                            </div>
                            <div class="flip-card-back bg-red-50 text-gray-800">
                                <p class="text-sm font-semibold mb-2">Not always accurate!</p>
                                <p class="text-xs">LLMs can "hallucinate" - make up facts that sound real but aren't true!</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="space-y-4">
                    <div class="flip-card h-40" onclick="flipCard(this); revealLimit(3)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front bg-gradient-to-br from-purple-400 to-purple-600 text-white">
                                <div class="text-3xl mb-2">üî¢</div>
                                <p class="font-bold">Math Challenges</p>
                                <p class="text-sm">Click to learn more!</p>
                            </div>
                            <div class="flip-card-back bg-purple-50 text-gray-800">
                                <p class="text-sm font-semibold mb-2">Not a calculator!</p>
                                <p class="text-xs">LLMs predict words, not calculate. They can make math errors, especially with big numbers!</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flip-card h-40" onclick="flipCard(this); revealLimit(4)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front bg-gradient-to-br from-blue-400 to-blue-600 text-white">
                                <div class="text-3xl mb-2">ü§∑</div>
                                <p class="font-bold">No Real Understanding</p>
                                <p class="text-sm">Click to learn more!</p>
                            </div>
                            <div class="flip-card-back bg-blue-50 text-gray-800">
                                <p class="text-sm font-semibold mb-2">Pattern matching, not thinking!</p>
                                <p class="text-xs">LLMs don't truly "understand" - they predict likely responses based on patterns!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Limitation Investigation Activity -->
            <div class="mt-6 bg-yellow-50 p-6 rounded-lg">
                <h3 class="font-bold text-yellow-700 mb-4">üî¨ Limitation Investigation Lab</h3>
                
                <!-- Fact Checking Exercise -->
                <div class="mb-6">
                    <div class="flex justify-between items-center mb-3">
                        <p class="font-semibold">Part 1: Spot the AI Mistakes</p>
                        <button onclick="resetFactChecking()" class="bg-gray-200 hover:bg-gray-300 px-2 py-1 rounded text-xs text-gray-700">
                            üîÑ Reset
                        </button>
                    </div>
                    <div class="space-y-3">
                        <div class="bg-white p-4 rounded-lg">
                            <p class="font-semibold text-sm mb-2">AI says: "The Great Wall of China is 21,196 km long"</p>
                            <div class="flex gap-2">
                                <button onclick="checkFact(1, true)" class="bg-green-100 hover:bg-green-200 px-3 py-1 rounded text-sm">
                                    ‚úÖ Probably True
                                </button>
                                <button onclick="checkFact(1, false)" class="bg-red-100 hover:bg-red-200 px-3 py-1 rounded text-sm">
                                    ‚ùå Could Be Wrong
                                </button>
                            </div>
                            <div id="fact1-result" class="mt-2 text-sm"></div>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg">
                            <p class="font-semibold text-sm mb-2">AI says: "Yesterday's football match ended 3-2"</p>
                            <div class="flex gap-2">
                                <button onclick="checkFact(2, true)" class="bg-green-100 hover:bg-green-200 px-3 py-1 rounded text-sm">
                                    ‚úÖ Probably True
                                </button>
                                <button onclick="checkFact(2, false)" class="bg-red-100 hover:bg-red-200 px-3 py-1 rounded text-sm">
                                    ‚ùå Could Be Wrong
                                </button>
                            </div>
                            <div id="fact2-result" class="mt-2 text-sm"></div>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg">
                            <p class="font-semibold text-sm mb-2">AI says: "The square root of 144 is 12"</p>
                            <div class="flex gap-2">
                                <button onclick="checkFact(3, true)" class="bg-green-100 hover:bg-green-200 px-3 py-1 rounded text-sm">
                                    ‚úÖ Probably True
                                </button>
                                <button onclick="checkFact(3, false)" class="bg-red-100 hover:bg-red-200 px-3 py-1 rounded text-sm">
                                    ‚ùå Could Be Wrong
                                </button>
                            </div>
                            <div id="fact3-result" class="mt-2 text-sm"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Test AI Limits Activity -->
                <div class="bg-white p-4 rounded-lg">
                    <p class="font-semibold mb-3">Part 2: Test AI Limits Yourself</p>
                    <p class="text-sm text-gray-700 mb-3">Think of questions that would be hard for an AI to answer correctly:</p>
                    
                    <div class="space-y-3">
                        <div>
                            <label class="text-sm font-semibold">Question 1 (about recent events):</label>
                            <input type="text" id="limit-q1" class="w-full p-2 border rounded mt-1" 
                                placeholder="e.g., Who won today's match?">
                        </div>
                        <div>
                            <label class="text-sm font-semibold">Question 2 (requires real understanding):</label>
                            <input type="text" id="limit-q2" class="w-full p-2 border rounded mt-1" 
                                placeholder="e.g., How do I feel right now?">
                        </div>
                        <div>
                            <label class="text-sm font-semibold">Question 3 (complex calculation):</label>
                            <input type="text" id="limit-q3" class="w-full p-2 border rounded mt-1" 
                                placeholder="e.g., What's 7,892 √ó 4,567?">
                        </div>
                    </div>
                    
                    <button onclick="submitLimitQuestions()" class="mt-3 bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600">
                        Submit Questions
                    </button>
                    <div id="limit-feedback" class="mt-2"></div>
                </div>
                
                <!-- Critical Thinking Question -->
                <div class="mt-6 bg-orange-50 p-4 rounded-lg">
                    <p class="font-bold text-orange-700 mb-2">üìù Critical Thinking:</p>
                    <p class="text-sm mb-2">If AI can make mistakes, how should we use it for schoolwork?</p>
                    <textarea id="task4-assessment" class="w-full p-2 border-2 border-orange-200 rounded" rows="3" 
                        placeholder="Type your answer here..."></textarea>
                    <button onclick="checkTask4Assessment()" class="mt-2 bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600">
                        Submit Answer
                    </button>
                    <div id="task4-feedback" class="mt-2"></div>
                </div>
            </div>
        </section>

        <!-- Extension: Future of LLMs -->
        <section class="bg-gradient-to-r from-indigo-100 to-purple-100 rounded-xl shadow-lg p-6 md:p-8 mb-6">
            <h2 class="text-2xl md:text-3xl font-bold text-indigo-700 mb-4">üöÄ Extension: The Future of AI Chat</h2>
            <p class="text-gray-700 mb-6">Imagine how AI assistants might help us in the future!</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="font-bold text-indigo-600 mb-3">üéì AI Study Buddy</h3>
                    <p class="text-sm text-gray-700 mb-4">
                        Design your perfect AI study companion. What features would it have?
                    </p>
                    <textarea class="w-full p-3 border-2 border-indigo-200 rounded-md focus:border-indigo-400 focus:outline-none h-24" 
                        placeholder="My AI study buddy would..."></textarea>
                </div>
                
                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="font-bold text-purple-600 mb-3">üåç Universal Translator</h3>
                    <p class="text-sm text-gray-700 mb-4">
                        How could LLMs break down language barriers?
                    </p>
                    <textarea class="w-full p-3 border-2 border-purple-200 rounded-md focus:border-purple-400 focus:outline-none h-24" 
                        placeholder="Ideas for translation AI..."></textarea>
                </div>
                
                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="font-bold text-green-600 mb-3">üìù Writing Helper</h3>
                    <p class="text-sm text-gray-700 mb-4">
                        How should AI help with writing without doing it for you?
                    </p>
                    <textarea class="w-full p-3 border-2 border-green-200 rounded-md focus:border-green-400 focus:outline-none h-24" 
                        placeholder="Good ways AI could help..."></textarea>
                </div>
                
                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="font-bold text-orange-600 mb-3">‚ö†Ô∏è AI Safety Rules</h3>
                    <p class="text-sm text-gray-700 mb-4">
                        What rules should all AI chatbots follow?
                    </p>
                    <textarea class="w-full p-3 border-2 border-orange-200 rounded-md focus:border-orange-400 focus:outline-none h-24" 
                        placeholder="Important AI rules..."></textarea>
                </div>
            </div>
        </section>

        <!-- Achievement Gallery -->
        <section class="bg-gradient-to-r from-yellow-100 to-orange-100 rounded-xl shadow-lg p-6 md:p-8 mb-6">
            <h2 class="text-2xl md:text-3xl font-bold text-orange-700 mb-4">üèÜ Your LLM Achievements</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div id="achieve-explorer" class="achievement-unlock bg-white p-4 rounded-lg text-center shadow opacity-50">
                    <span class="text-3xl">üîç</span>
                    <p class="font-bold text-sm mt-2">LLM Explorer</p>
                    <p class="text-xs text-gray-600">Discovered LLM basics</p>
                </div>
                <div id="achieve-predictor" class="achievement-unlock bg-white p-4 rounded-lg text-center shadow opacity-50">
                    <span class="text-3xl">üîÆ</span>
                    <p class="font-bold text-sm mt-2">Word Predictor</p>
                    <p class="text-xs text-gray-600">Understood prediction</p>
                </div>
                <div id="achieve-builder" class="achievement-unlock bg-white p-4 rounded-lg text-center shadow opacity-50">
                    <span class="text-3xl">ü§ñ</span>
                    <p class="font-bold text-sm mt-2">Bot Builder</p>
                    <p class="text-xs text-gray-600">Created a chatbot</p>
                </div>
                <div id="achieve-safety" class="achievement-unlock bg-white p-4 rounded-lg text-center shadow opacity-50">
                    <span class="text-3xl">üõ°Ô∏è</span>
                    <p class="font-bold text-sm mt-2">Safety Expert</p>
                    <p class="text-xs text-gray-600">Learned safe AI use</p>
                </div>
            </div>
        </section>
    </div>

    <script>
        // Token Prediction Race Game
        let gameState = {
            score: 0,
            round: 0,
            timer: 30,
            timerInterval: null,
            isPlaying: false,
            streak: 0,
            bestStreak: 0,
            sentences: [
                {
                    text: "The student forgot their...",
                    options: [
                        { word: "homework", probability: 85 },
                        { word: "banana", probability: 5 },
                        { word: "password", probability: 60 }
                    ]
                },
                {
                    text: "She opened the door and saw a...",
                    options: [
                        { word: "person", probability: 75 },
                        { word: "dragon", probability: 10 },
                        { word: "room", probability: 65 }
                    ]
                },
                {
                    text: "The best way to learn is by...",
                    options: [
                        { word: "practicing", probability: 90 },
                        { word: "sleeping", probability: 20 },
                        { word: "reading", probability: 70 }
                    ]
                },
                {
                    text: "In the morning, I always drink...",
                    options: [
                        { word: "coffee", probability: 80 },
                        { word: "paint", probability: 2 },
                        { word: "water", probability: 75 }
                    ]
                },
                {
                    text: "The teacher wrote on the...",
                    options: [
                        { word: "board", probability: 95 },
                        { word: "ceiling", probability: 5 },
                        { word: "paper", probability: 60 }
                    ]
                },
                {
                    text: "My favorite subject at school is...",
                    options: [
                        { word: "mathematics", probability: 70 },
                        { word: "lunch", probability: 30 },
                        { word: "science", probability: 75 }
                    ]
                },
                {
                    text: "The dog started to...",
                    options: [
                        { word: "bark", probability: 85 },
                        { word: "fly", probability: 3 },
                        { word: "run", probability: 70 }
                    ]
                },
                {
                    text: "For dinner, we had delicious...",
                    options: [
                        { word: "pizza", probability: 75 },
                        { word: "homework", probability: 2 },
                        { word: "pasta", probability: 70 }
                    ]
                },
                {
                    text: "The library is a quiet place to...",
                    options: [
                        { word: "study", probability: 90 },
                        { word: "shout", probability: 5 },
                        { word: "read", probability: 85 }
                    ]
                },
                {
                    text: "After school, I like to...",
                    options: [
                        { word: "relax", probability: 80 },
                        { word: "teleport", probability: 1 },
                        { word: "play", probability: 85 }
                    ]
                }
            ],
            highScores: [0, 0, 0]
        };
        
        function startPredictionGame() {
            // Reset game state
            gameState.score = 0;
            gameState.round = 0;
            gameState.timer = 30;
            gameState.streak = 0;
            gameState.bestStreak = 0;
            gameState.isPlaying = true;
            
            // Update streak display
            document.getElementById('gameStreak').textContent = '0';
            
            // Shuffle sentences
            gameState.sentences = shuffleArray([...gameState.sentences]);
            
            // Show game screen
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('endScreen').classList.add('hidden');
            document.getElementById('gameScreen').classList.remove('hidden');
            
            // Start timer
            startGameTimer();
            
            // Load first question
            loadNextQuestion();
        }
        
        function startGameTimer() {
            updateTimerDisplay();
            gameState.timerInterval = setInterval(() => {
                gameState.timer--;
                updateTimerDisplay();
                
                if (gameState.timer <= 0) {
                    endGame();
                }
            }, 1000);
        }
        
        function updateTimerDisplay() {
            const timerEl = document.getElementById('gameTimer');
            timerEl.textContent = gameState.timer;
            
            // Change color based on time left
            if (gameState.timer <= 10) {
                timerEl.classList.add('text-red-600');
                timerEl.classList.remove('text-yellow-600');
            } else if (gameState.timer <= 20) {
                timerEl.classList.add('text-yellow-600');
                timerEl.classList.remove('text-green-600');
            } else {
                timerEl.classList.add('text-green-600');
            }
        }
        
        function loadNextQuestion() {
            if (gameState.round >= 10 || gameState.round >= gameState.sentences.length) {
                endGame();
                return;
            }
            
            gameState.round++;
            document.getElementById('gameRound').textContent = `${gameState.round}/10`;
            
            const currentSentence = gameState.sentences[gameState.round - 1];
            document.getElementById('gameSentence').textContent = currentSentence.text;
            
            // Shuffle and display options
            const shuffledOptions = shuffleArray([...currentSentence.options]);
            const optionsContainer = document.getElementById('gameOptions');
            optionsContainer.innerHTML = '';
            
            shuffledOptions.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'w-full p-4 bg-purple-100 hover:bg-purple-200 rounded-lg text-center transition-all hover:scale-102 group';
                button.innerHTML = `
                    <span class="font-semibold group-hover:text-purple-700 text-lg">${option.word}</span>
                `;
                button.onclick = () => selectAnswer(option, currentSentence.options);
                optionsContainer.appendChild(button);
            });
            
            // Hide feedback from previous round
            document.getElementById('gameFeedback').classList.add('hidden');
        }
        
        function selectAnswer(selected, allOptions) {
            if (!gameState.isPlaying) return;
            
            // Find the best option (highest probability)
            const bestOption = allOptions.reduce((best, current) => 
                current.probability > best.probability ? current : best
            );
            
            // Calculate points
            let points = selected.probability;
            const isCorrect = selected.word === bestOption.word;
            
            // Speed bonus
            if (gameState.timer > 20) points += 10;
            else if (gameState.timer > 10) points += 5;
            
            if (isCorrect) {
                points += 20; // Correct answer bonus
                gameState.streak++;
                
                // Update best streak
                if (gameState.streak > gameState.bestStreak) {
                    gameState.bestStreak = gameState.streak;
                }
                
                // Streak bonus
                if (gameState.streak > 1) {
                    const streakBonus = Math.min(gameState.streak * 5, 25);
                    points += streakBonus;
                }
                
                document.getElementById('gameStreak').textContent = gameState.streak;
                
                // Animate streak counter
                if (gameState.streak > 2) {
                    const streakEl = document.getElementById('gameStreak').parentElement;
                    streakEl.classList.add('transform', 'scale-110', 'bg-yellow-100');
                    setTimeout(() => {
                        streakEl.classList.remove('transform', 'scale-110', 'bg-yellow-100');
                    }, 300);
                }
            } else {
                gameState.streak = 0;
                document.getElementById('gameStreak').textContent = '0';
            }
            
            gameState.score += points;
            document.getElementById('gameScore').textContent = gameState.score;
            
            // Animate score change
            const scoreEl = document.getElementById('gameScore');
            scoreEl.classList.add('transform', 'scale-125', 'text-yellow-500');
            setTimeout(() => {
                scoreEl.classList.remove('transform', 'scale-125', 'text-yellow-500');
            }, 300);
            
            // Show feedback
            const feedback = document.getElementById('gameFeedback');
            feedback.classList.remove('hidden');
            
            if (isCorrect) {
                let bonusText = `${selected.probability}% probability`;
                if (gameState.timer > 20) bonusText += ' + speed bonus';
                if (gameState.streak > 1) bonusText += ` + ${Math.min(gameState.streak * 5, 25)} streak bonus`;
                
                feedback.innerHTML = `
                    <div class="bg-green-100 p-4 rounded-lg border-2 border-green-300">
                        <p class="font-bold text-green-700">‚úÖ Excellent! "${selected.word}" was the most likely!</p>
                        <p class="text-sm text-gray-600 mt-1">+${points} points (${bonusText})</p>
                        ${gameState.streak > 2 ? `<p class="text-sm font-bold text-orange-600 mt-1">üî• ${gameState.streak} in a row!</p>` : ''}
                    </div>
                `;
                
                // Celebration effect
                showCelebration();
            } else {
                feedback.innerHTML = `
                    <div class="bg-orange-100 p-4 rounded-lg border-2 border-orange-300">
                        <p class="font-bold text-orange-700">ü§î Good try! But "${bestOption.word}" was more likely.</p>
                        <p class="text-sm text-gray-600 mt-1">+${points} points ‚Ä¢ The best choice had ${bestOption.probability}% probability</p>
                    </div>
                `;
            }
            
            // Disable all buttons
            const buttons = document.querySelectorAll('#gameOptions button');
            buttons.forEach(btn => {
                btn.disabled = true;
                btn.classList.add('opacity-50', 'cursor-not-allowed');
            });
            
            // Load next question after delay
            setTimeout(() => {
                loadNextQuestion();
            }, 2000);
        }
        
        function endGame() {
            gameState.isPlaying = false;
            clearInterval(gameState.timerInterval);
            
            // Update high scores
            updateHighScores(gameState.score);
            
            // Show end screen
            document.getElementById('gameScreen').classList.add('hidden');
            document.getElementById('endScreen').classList.remove('hidden');
            
            // Update final score display
            document.getElementById('finalScore').textContent = gameState.score;
            document.getElementById('roundsCompleted').textContent = gameState.round;
            document.getElementById('bestStreak').textContent = gameState.bestStreak;
            
            // Performance message
            const performanceMsg = document.getElementById('performanceMessage');
            let emoji, message;
            
            if (gameState.score >= 800) {
                emoji = 'üèÜ';
                message = "Amazing! You think like an LLM expert!";
                document.getElementById('endEmoji').textContent = 'üèÜ';
            } else if (gameState.score >= 600) {
                emoji = '‚≠ê';
                message = "Great job! You understand probability well!";
                document.getElementById('endEmoji').textContent = '‚≠ê';
            } else if (gameState.score >= 400) {
                emoji = 'üëç';
                message = "Good effort! Keep practicing prediction!";
                document.getElementById('endEmoji').textContent = 'üëç';
            } else {
                emoji = 'üí™';
                message = "Nice try! Practice makes perfect!";
                document.getElementById('endEmoji').textContent = 'üí™';
            }
            
            performanceMsg.innerHTML = `<p class="text-lg">${emoji} ${message}</p>`;
            
            // Award XP
            const xpEarned = Math.floor(gameState.score / 10);
            addXP(xpEarned, `game-score-${gameState.score}`);
        }
        
        function updateHighScores(score) {
            gameState.highScores.push(score);
            gameState.highScores.sort((a, b) => b - a);
            gameState.highScores = gameState.highScores.slice(0, 3);
            
            updateHighScoresDisplay();
        }
        
        function updateHighScoresDisplay() {
            // Update display
            document.getElementById('score1').textContent = gameState.highScores[0] || '---';
            document.getElementById('score2').textContent = gameState.highScores[1] || '---';
            document.getElementById('score3').textContent = gameState.highScores[2] || '---';
        }
        
        function resetToStart() {
            document.getElementById('endScreen').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
        }
        
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }
        
        function showCelebration() {
            const celebration = document.createElement('div');
            celebration.className = 'fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-6xl z-50 pointer-events-none';
            celebration.textContent = ['üéâ', '‚≠ê', 'üéØ', 'üíØ', 'üî•'][Math.floor(Math.random() * 5)];
            celebration.style.animation = 'celebrationPop 0.8s ease-out';
            document.body.appendChild(celebration);
            
            setTimeout(() => {
                celebration.remove();
            }, 800);
        }

        // Disable copy/paste
        document.addEventListener('DOMContentLoaded', function() {
            document.addEventListener('copy', function(e) {
                e.preventDefault();
                return false;
            });
            
            document.addEventListener('cut', function(e) {
                e.preventDefault();
                return false;
            });
            
            document.addEventListener('paste', function(e) {
                if (!e.target.matches('input, textarea')) {
                    e.preventDefault();
                    alert('Copy and paste is disabled. Please type your answer.');
                    return false;
                }
            });
            
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                return false;
            });
            
            document.addEventListener('keydown', function(e) {
                if ((e.ctrlKey || e.metaKey) && (e.keyCode === 65 || e.keyCode === 67 || e.keyCode === 86 || e.keyCode === 88)) {
                    if (!e.target.matches('input, textarea')) {
                        e.preventDefault();
                        return false;
                    }
                }
            });
            
            // Initialize traits in random order
            initializeTraits();
            initializeDragAndDrop();
            
            // Initialize high scores display
            updateHighScoresDisplay();
        });

        function initializeTraits() {
            const traits = [
                { bg: "green-100", border: "green-300", icon: "üòä", text: "Helpful & Friendly", response: "helpful", quality: "good" },
                { bg: "blue-100", border: "blue-300", icon: "üìä", text: "Accurate Information", response: "accurate", quality: "good" },
                { bg: "purple-100", border: "purple-300", icon: "üõ°Ô∏è", text: "Safe & Appropriate", response: "safety", quality: "good" },
                { bg: "orange-100", border: "orange-300", icon: "üé®", text: "Creative & Fun", response: "creative", quality: "good" },
                { bg: "red-100", border: "red-300", icon: "üò†", text: "Rude & Dismissive", response: "rude", quality: "bad" },
                { bg: "gray-100", border: "gray-300", icon: "üò¥", text: "Lazy & Unhelpful", response: "lazy", quality: "bad" },
                { bg: "yellow-100", border: "yellow-300", icon: "‚ùå", text: "Gives Wrong Info", response: "wrong", quality: "bad" }
            ];
            
            // Shuffle traits
            const shuffledTraits = shuffleArray(traits);
            
            // Add to container
            const container = document.getElementById('traitsContainer');
            if (container) {
                container.innerHTML = shuffledTraits.map(trait => `
                    <div class="draggable bg-${trait.bg} p-3 rounded-lg border-2 border-${trait.border}" 
                         draggable="true" data-response="${trait.response}" data-quality="${trait.quality}">
                        ${trait.icon} ${trait.text}
                    </div>
                `).join('');
            }
        }

        // XP System
        let totalXP = 0;
        let achievements = {
            explorer: false,
            predictor: false,
            builder: false,
            safety: false
        };
        
        // Track completed actions to prevent XP farming
        let completedActions = new Set();

        function addXP(points, actionId) {
            // If no actionId provided, don't give XP (prevents farming)
            if (!actionId) return;
            
            // Check if this action has already been completed
            if (completedActions.has(actionId)) return;
            
            // Mark action as completed and award XP
            completedActions.add(actionId);
            totalXP += points;
            document.getElementById('xpPoints').textContent = totalXP;
            const xpBar = document.getElementById('xpBar');
            const percentage = Math.min((totalXP / 500) * 100, 100);
            xpBar.style.width = percentage + '%';
            
            if (totalXP >= 100 && totalXP < 200) {
                updateLevel('Level 2 LLM Developer');
            } else if (totalXP >= 200 && totalXP < 300) {
                updateLevel('Level 3 LLM Engineer');
            } else if (totalXP >= 300) {
                updateLevel('Level 4 LLM Master');
            }
        }

        function updateLevel(level) {
            const levelDisplay = document.querySelector('.text-gray-700.ml-3');
            if (levelDisplay) {
                levelDisplay.textContent = level;
            }
        }

        function unlockAchievement(name) {
            if (!achievements[name]) {
                achievements[name] = true;
                const achieveElement = document.getElementById(`achieve-${name}`);
                if (achieveElement) {
                    achieveElement.classList.remove('opacity-50');
                    addXP(50, `achievement-${name}`);
                }
            }
        }

        // Prior knowledge assessment
        function priorKnowledge(question, answer) {
            const feedback = document.getElementById(`prior${question}-feedback`);
            
            if (question === 1) {
                feedback.innerHTML = '<p class="text-green-600">‚úÖ Thanks for sharing! Let\'s learn more about how these AI work!</p>';
                addXP(10, `prior-q${question}-${answer}`);
            } else if (question === 3) {
                if (answer === 'patterns') {
                    feedback.innerHTML = '<p class="text-green-600">‚úÖ Excellent! You\'re already thinking like an AI researcher!</p>';
                    addXP(20, `prior-q${question}-correct`);
                } else {
                    feedback.innerHTML = '<p class="text-blue-600">ü§î Good guess! Let\'s discover how they really work!</p>';
                    addXP(10, `prior-q${question}-attempt`);
                }
            }
        }

        function checkPrior2() {
            const answer = document.getElementById('prior2-answer').value.trim();
            const feedback = document.getElementById('prior2-feedback');
            
            if (answer.length > 10) {
                feedback.innerHTML = '<p class="text-green-600">‚úÖ Great thinking! Let\'s explore more about AI capabilities!</p>';
                addXP(15, 'prior-q2-answer');
            } else {
                feedback.innerHTML = '<p class="text-orange-600">Try to think of at least one thing AI chatbots might be good at!</p>';
            }
        }

        // Flip card
        function flipCard(card) {
            card.classList.toggle('flipped');
        }

        // Check LLM answer
        function checkLLM(answer) {
            const feedback = document.getElementById('llmFeedback');
            if (answer === 'large') {
                feedback.innerHTML = '<p class="text-green-600 font-bold">‚úÖ Correct! Large Language Model!</p>';
                addXP(20, 'llm-definition-correct');
                unlockAchievement('explorer');
            } else {
                feedback.innerHTML = '<p class="text-red-600">‚ùå Not quite! Think about what the L stands for...</p>';
            }
        }

        // Word prediction demo
        function predictWord(word, probability, example) {
            const result = document.getElementById('predictionResult');
            result.innerHTML = `
                <div class="flex items-start gap-3">
                    <span class="text-3xl animate-bounce">üí°</span>
                    <div class="flex-1">
                        <p class="font-bold mb-2 text-lg text-purple-700">AI chose: "${word}"</p>
                        <div class="bg-white bg-opacity-70 p-3 rounded">
                            <p class="text-sm text-gray-700 font-semibold mb-2">Because:</p>
                            <ul class="text-sm text-gray-700 space-y-1">
                                <li>‚Ä¢ <strong class="text-purple-600">${probability}%</strong> of training examples had this</li>
                                <li>‚Ä¢ It makes grammatical sense</li>
                                <li>‚Ä¢ It fits the context perfectly</li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
            
            // Make the box more prominent with animation
            result.className = "bg-gradient-to-r from-purple-100 to-pink-100 p-5 rounded-lg border-4 border-purple-500 shadow-xl transform scale-105 transition-all duration-300 pulse-glow relative";
            
            // Add a "NEW!" badge
            const badge = document.createElement('div');
            badge.className = "absolute -top-3 -right-3 bg-yellow-400 text-black font-bold text-xs px-2 py-1 rounded-full animate-pulse";
            badge.textContent = "NEW!";
            result.appendChild(badge);
            
            // Reset after animation completes
            setTimeout(() => {
                result.className = "bg-gradient-to-r from-purple-50 to-pink-50 p-5 rounded-lg border-2 border-purple-300 shadow-lg";
                const existingBadge = result.querySelector('.absolute');
                if (existingBadge) existingBadge.remove();
            }, 2000);
            
            addXP(15, `predict-word-${example}-${word}`);
            if (example === 3) {
                unlockAchievement('predictor');
            }
        }

        // Task 1 Assessment
        function checkTask1Assessment() {
            const answer = document.getElementById('task1-assessment').value.trim();
            const feedback = document.getElementById('task1-feedback');
            
            if (answer.length > 20) {
                feedback.innerHTML = '<p class="text-green-600">‚úÖ Good thinking! LLMs use probabilities, so sometimes less likely options get chosen for variety!</p>';
                addXP(25, 'task1-assessment');
            } else {
                feedback.innerHTML = '<p class="text-orange-600">Think about how probability and variety work together in predictions...</p>';
            }
        }

        // Chatbot simulation
        const botResponses = {
            homework: "I can help you understand your homework! What subject are you working on?",
            lunch: "Today's lunch menu includes pizza, salad, and fruit! üçïü•óüçé",
            clubs: "We have sports clubs, art club, coding club, and drama club! Which interests you?",
            uniform: "School uniform is: white shirt, blue tie, grey trousers/skirt, and black shoes.",
            library: "The library is open 8:30 AM - 4:00 PM on weekdays. Perfect for quiet study!",
            sports: "Sports day is on July 15th! Events include running, jumping, and team games.",
            exams: "Exam timetables are posted on the school website and notice boards.",
            teacher: "You can find teachers in the staff room or check their classroom schedules.",
            hello: "Hello! I'm here to help with any school questions you have!",
            thanks: "You're welcome! Is there anything else I can help with?"
        };

        function sendMessage() {
            const input = document.getElementById('userInput');
            const message = input.value.trim();
            if (!message) return;
            
            const chatWindow = document.getElementById('chatWindow');
            
            // Add user message
            chatWindow.innerHTML += `
                <div class="chat-bubble bg-gray-200 text-gray-800 p-3 rounded-lg mb-3 max-w-[80%] ml-auto">
                    <p class="text-sm">${message}</p>
                </div>
            `;
            
            // Show typing indicator
            chatWindow.innerHTML += `
                <div id="typing" class="chat-bubble bg-blue-500 text-white p-3 rounded-lg mb-3 max-w-[80%]">
                    <div class="typing-indicator">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
            `;
            
            input.value = '';
            chatWindow.scrollTop = chatWindow.scrollHeight;
            
            // Bot response after delay
            setTimeout(() => {
                document.getElementById('typing').remove();
                
                let response = "I'm still learning! Try asking about homework, lunch, clubs, uniform, library, sports, exams, or teachers!";
                
                // Simple keyword matching
                const lowerMessage = message.toLowerCase();
                if (lowerMessage.includes('homework')) response = botResponses.homework;
                else if (lowerMessage.includes('lunch') || lowerMessage.includes('food')) response = botResponses.lunch;
                else if (lowerMessage.includes('club')) response = botResponses.clubs;
                else if (lowerMessage.includes('uniform')) response = botResponses.uniform;
                else if (lowerMessage.includes('library')) response = botResponses.library;
                else if (lowerMessage.includes('sport')) response = botResponses.sports;
                else if (lowerMessage.includes('exam') || lowerMessage.includes('test')) response = botResponses.exams;
                else if (lowerMessage.includes('teacher')) response = botResponses.teacher;
                else if (lowerMessage.includes('hello') || lowerMessage.includes('hi')) response = botResponses.hello;
                else if (lowerMessage.includes('thank')) response = botResponses.thanks;
                
                chatWindow.innerHTML += `
                    <div class="chat-bubble bg-blue-500 text-white p-3 rounded-lg mb-3 max-w-[80%]">
                        <p class="text-sm">${response}</p>
                    </div>
                `;
                
                chatWindow.scrollTop = chatWindow.scrollHeight;
                addXP(10, `chat-message-${message.substring(0, 20)}`);
            }, 1500);
        }

        function quickQuestion(type) {
            const questions = {
                homework: "Can you help with homework?",
                lunch: "What's for lunch today?",
                clubs: "What clubs are available?",
                uniform: "What's the uniform policy?",
                library: "When is the library open?",
                sports: "When is sports day?",
                exams: "Where can I find exam schedules?",
                teacher: "How do I find a teacher?"
            };
            
            document.getElementById('userInput').value = questions[type];
            sendMessage();
        }

        // Drag and Drop
        let draggedElement = null;

        function initializeDragAndDrop() {
            const draggables = document.querySelectorAll('.draggable');
            const dropZones = document.querySelectorAll('.drop-zone');

            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', function(e) {
                    draggedElement = this;
                    this.style.opacity = '0.5';
                });

                draggable.addEventListener('dragend', function(e) {
                    this.style.opacity = '';
                    draggedElement = null;
                });
            });

            dropZones.forEach(zone => {
                zone.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.classList.add('drag-over');
                });

                zone.addEventListener('dragleave', function(e) {
                    this.classList.remove('drag-over');
                });

                zone.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.classList.remove('drag-over');
                    
                    if (draggedElement) {
                        const placeholder = zone.querySelector('.text-gray-400');
                        if (placeholder) {
                            zone.innerHTML = '';
                        }
                        
                        zone.appendChild(draggedElement);
                    }
                });
            });
        }

        // Train bot
        function trainBot() {
            const traits = document.querySelectorAll('#personalityZone .draggable');
            const feedback = document.getElementById('trainingFeedback');
            
            let goodTraits = 0;
            let badTraits = 0;
            
            traits.forEach(trait => {
                if (trait.getAttribute('data-quality') === 'good') goodTraits++;
                else badTraits++;
            });
            
            if (badTraits > 0) {
                feedback.innerHTML = '<p class="text-red-600">‚ö†Ô∏è Oh no! Your bot has bad traits! Remove the negative ones!</p>';
            } else if (goodTraits >= 3) {
                feedback.innerHTML = '<p class="text-green-600 font-bold">‚úÖ Great bot personality! Your bot is well-trained!</p>';
                addXP(40, 'train-bot-success');
                unlockAchievement('builder');
            } else {
                feedback.innerHTML = '<p class="text-orange-600">Add more positive traits to complete training!</p>';
            }
        }

        // Task 2 Assessment
        function checkTask2Assessment() {
            const answer = document.getElementById('task2-assessment').value.trim();
            const feedback = document.getElementById('task2-feedback');
            
            if (answer.length > 30) {
                feedback.innerHTML = '<p class="text-green-600">‚úÖ Excellent analysis! You understand what makes a good chatbot!</p>';
                addXP(25, 'task2-assessment');
            } else {
                feedback.innerHTML = '<p class="text-orange-600">Think about accuracy, helpfulness, and safety...</p>';
            }
        }

        // Check scenarios with justification
        const scenarioAnswers = {
            1: 'good', // Checking answers
            2: 'bad',  // Writing whole report
            3: 'good', // Getting ideas
            4: 'good', // Learning citations
            5: 'good', // Understanding poetry
            6: 'bad'   // Take-home test
        };

        let scenariosCorrect = 0;

        function checkScenario(num, choice) {
            const result = document.getElementById(`scenario${num}-result`);
            const justification = document.getElementById(`scenario${num}-justify`).value.trim();
            const correct = scenarioAnswers[num] === choice;
            
            if (correct && justification.length > 10) {
                result.innerHTML = '<span class="text-green-600">‚úÖ Correct with good reasoning!</span>';
                scenariosCorrect++;
                addXP(20, `scenario-${num}-correct`);
                
                if (scenariosCorrect >= 5) {
                    unlockAchievement('safety');
                }
            } else if (correct) {
                result.innerHTML = '<span class="text-orange-600">‚úÖ Correct! But explain why...</span>';
                addXP(10, `scenario-${num}-partial`);
            } else {
                result.innerHTML = '<span class="text-red-600">‚ùå Think again - is this helping you learn?</span>';
            }
        }

        // Task 3 Assessment
        function checkTask3Assessment() {
            const answer = document.getElementById('task3-assessment').value.trim();
            const feedback = document.getElementById('task3-feedback');
            
            if (answer.length > 15) {
                feedback.innerHTML = '<p class="text-green-600">‚úÖ Great rule! You\'re thinking responsibly about AI use!</p>';
                addXP(30, 'task3-assessment');
            } else {
                feedback.innerHTML = '<p class="text-orange-600">Try to write a complete rule for using AI...</p>';
            }
        }

        // Limitations
        let limitsRevealed = 0;

        function revealLimit(num) {
            limitsRevealed++;
            addXP(10);
        }

        // Fact checking
        function checkFact(num, answer) {
            const result = document.getElementById(`fact${num}-result`);
            
            if (num === 1 && answer === true) {
                result.innerHTML = '<span class="text-green-600">‚úÖ This specific fact is likely accurate!</span>';
                addXP(10);
            } else if (num === 2 && answer === false) {
                result.innerHTML = '<span class="text-green-600">‚úÖ Correct! AI can\'t know yesterday\'s results!</span>';
                addXP(10);
            } else if (num === 3 && answer === true) {
                result.innerHTML = '<span class="text-green-600">‚úÖ Yes! Simple math facts are usually correct!</span>';
                addXP(10);
            } else {
                result.innerHTML = '<span class="text-orange-600">Think about what AI can and can\'t know...</span>';
            }
        }

        // Submit limit questions
        function submitLimitQuestions() {
            const q1 = document.getElementById('limit-q1').value.trim();
            const q2 = document.getElementById('limit-q2').value.trim();
            const q3 = document.getElementById('limit-q3').value.trim();
            const feedback = document.getElementById('limit-feedback');
            
            if (q1.length > 5 && q2.length > 5 && q3.length > 5) {
                feedback.innerHTML = '<p class="text-green-600">‚úÖ Excellent questions! These would all challenge an AI!</p>';
                addXP(30);
            } else {
                feedback.innerHTML = '<p class="text-orange-600">Fill in all three questions to test AI limits!</p>';
            }
        }

        // Task 4 Assessment
        function checkTask4Assessment() {
            const answer = document.getElementById('task4-assessment').value.trim();
            const feedback = document.getElementById('task4-feedback');
            
            if (answer.length > 40) {
                feedback.innerHTML = '<p class="text-green-600">‚úÖ Excellent critical thinking! Always verify AI answers!</p>';
                addXP(35);
            } else {
                feedback.innerHTML = '<p class="text-orange-600">Think about verification, fact-checking, and using multiple sources...</p>';
            }
        }

        // Reset Functions
        function resetPredictions() {
            const result = document.getElementById('predictionResult');
            result.className = "bg-gradient-to-r from-purple-50 to-pink-50 p-4 rounded-lg border-2 border-purple-300 shadow-lg relative overflow-hidden";
            result.innerHTML = `
                <div class="absolute -top-3 -right-3 bg-purple-500 text-white rounded-full w-8 h-8 flex items-center justify-center animate-bounce">
                    <span class="text-lg">‚Üì</span>
                </div>
                <div class="absolute inset-0 bg-purple-200 opacity-20 animate-pulse"></div>
                <p class="text-sm text-purple-700 font-semibold text-center relative z-10">üëÜ Click a word above to see how LLMs choose!</p>
            `;
        }

        function resetChatbot() {
            const chatWindow = document.getElementById('chatWindow');
            chatWindow.innerHTML = `
                <div class="chat-bubble bg-blue-500 text-white p-3 rounded-lg mb-3 max-w-[80%]">
                    <p class="text-sm">Hi! I'm your school assistant. Ask me anything about school!</p>
                </div>
            `;
            document.getElementById('userInput').value = '';
        }

        function resetTraining() {
            const zone = document.getElementById('personalityZone');
            zone.innerHTML = '<p class="text-gray-400 text-center text-sm">Drop traits here...</p>';
            document.getElementById('trainingFeedback').innerHTML = '';
            
            // Reinitialize traits with new random order
            initializeTraits();
            initializeDragAndDrop();
        }

        function resetScenarios() {
            for (let i = 1; i <= 6; i++) {
                document.getElementById(`scenario${i}-justify`).value = '';
                document.getElementById(`scenario${i}-result`).innerHTML = '';
            }
            scenariosCorrect = 0;
        }

        function resetFactChecking() {
            for (let i = 1; i <= 3; i++) {
                document.getElementById(`fact${i}-result`).innerHTML = '';
            }
            document.getElementById('limit-q1').value = '';
            document.getElementById('limit-q2').value = '';
            document.getElementById('limit-q3').value = '';
            document.getElementById('limit-feedback').innerHTML = '';
        }

        // Mini Games Functions
        function startAIvsHuman() {
            const gameArea = document.getElementById('miniGameArea');
            gameArea.classList.remove('hidden');
            
            const examples = [
                {
                    text: "Quantum computers are really different from normal computers. They use something called qubits instead of bits. In my physics lesson, we learned that while regular bits can only be 0 or 1, qubits can be both at the same time! It's honestly quite confusing but our teacher showed us a video that helped.",
                    author: "human",
                    hint: "Personal classroom experience"
                },
                {
                    text: "Quantum computers utilize quantum mechanical phenomena such as superposition and entanglement to perform computations. Unlike classical bits which exist in definite states of 0 or 1, quantum bits or qubits can exist in a superposition of both states simultaneously, enabling exponentially greater computational possibilities.",
                    author: "ai",
                    hint: "Very formal and technical"
                },
                {
                    text: "So basically quantum computers are mental! They can do loads of calculations at once because of this weird physics thing. My mate Jake reckons they'll be able to hack any password but I'm not sure that's totally true. We're doing this for our GCSE coursework and it's proper hard to understand.",
                    author: "human",
                    hint: "Informal language and personal references"
                },
                {
                    text: "The fundamental principle underlying quantum computing is the exploitation of quantum superposition. This allows quantum systems to process multiple computational paths simultaneously. Furthermore, quantum entanglement enables qubits to be correlated in ways that classical bits cannot, providing additional computational advantages.",
                    author: "ai",
                    hint: "Academic writing style"
                }
            ];
            
            let currentExample = 0;
            
            function showExample() {
                const example = examples[currentExample];
                gameArea.innerHTML = `
                    <div class="text-center">
                        <h3 class="text-2xl font-bold text-orange-600 mb-4">ü§ñ AI or Human? üë§</h3>
                        <p class="text-gray-600 mb-2">A GCSE student is explaining quantum computers...</p>
                        <p class="text-sm text-gray-500 mb-6">Example ${currentExample + 1} of ${examples.length}</p>
                        
                        <div class="bg-gray-50 p-6 rounded-lg mb-4 text-left">
                            <p class="text-lg mb-4">"${example.text}"</p>
                            <div class="flex gap-4 justify-center">
                                <button onclick="guessAuthor('human', ${currentExample})" class="bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600">
                                    üë§ GCSE Student
                                </button>
                                <button onclick="guessAuthor('ai', ${currentExample})" class="bg-purple-500 text-white px-6 py-3 rounded-lg hover:bg-purple-600">
                                    ü§ñ AI
                                </button>
                            </div>
                        </div>
                        
                        <div id="aiHumanFeedback" class="mt-4"></div>
                        <button onclick="nextAIHumanExample()" class="mt-4 bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600">
                            Next Example
                        </button>
                        <button onclick="closeMinigame()" class="mt-2 bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">
                            Close Game
                        </button>
                    </div>
                `;
            }
            
            window.guessAuthor = function(guess, exampleIndex) {
                const example = examples[exampleIndex];
                const feedback = document.getElementById('aiHumanFeedback');
                
                if (guess === example.author) {
                    feedback.innerHTML = `<p class="text-green-600 font-bold">‚úÖ Correct! ${example.hint} gives it away!</p>`;
                    addXP(15);
                } else {
                    feedback.innerHTML = `<p class="text-red-600">‚ùå Not quite! Look for ${example.hint.toLowerCase()}.</p>`;
                }
            };
            
            window.nextAIHumanExample = function() {
                currentExample = (currentExample + 1) % examples.length;
                showExample();
            };
            
            showExample();
            gameArea.scrollIntoView({ behavior: 'smooth' });
        }

        function startHallucinationHunter() {
            const gameArea = document.getElementById('miniGameArea');
            gameArea.classList.remove('hidden');
            
            const hallucinationExamples = [
                {
                    topic: "Facts about the Solar System",
                    facts: [
                        { text: "Jupiter is the largest planet in our solar system", isReal: true },
                        { text: "Mars has 17 moons, each named after a Greek philosopher", isReal: false },
                        { text: "Venus is the hottest planet in our solar system", isReal: true },
                        { text: "Neptune was discovered in 1923 by astronomer James Whitfield", isReal: false }
                    ]
                },
                {
                    topic: "Facts about Ancient History",
                    facts: [
                        { text: "The Great Pyramid of Giza was built around 2560 BCE", isReal: true },
                        { text: "Julius Caesar invented the sandwich in 44 BCE", isReal: false },
                        { text: "The Roman Empire fell in 476 CE", isReal: true },
                        { text: "Cleopatra spoke nine languages including ancient emoji", isReal: false }
                    ]
                },
                {
                    topic: "Facts about Technology",
                    facts: [
                        { text: "The first computer bug was an actual moth", isReal: true },
                        { text: "WiFi stands for 'Wireless Fidelity International'", isReal: false },
                        { text: "The @ symbol is over 500 years old", isReal: true },
                        { text: "Steve Jobs invented the computer mouse in 1999", isReal: false }
                    ]
                }
            ];
            
            let currentHallucination = 0;
            let correctGuesses = 0;
            
            function showHallucinationExample() {
                const example = hallucinationExamples[currentHallucination];
                correctGuesses = 0;
                
                gameArea.innerHTML = `
                    <div>
                        <h3 class="text-2xl font-bold text-red-600 mb-4">üîç Hallucination Hunter</h3>
                        <p class="text-gray-600 mb-6">Click on the facts that seem made up by AI!</p>
                        
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <div class="flex justify-between items-center mb-4">
                                <p class="font-semibold">${example.topic}:</p>
                                <button onclick="nextHallucinationExample()" class="bg-red-200 hover:bg-red-300 px-3 py-1 rounded text-sm">
                                    Next Topic ‚Üí
                                </button>
                            </div>
                            <div class="space-y-2">
                                ${example.facts.map((fact, index) => `
                                    <button onclick="checkHallucination('${fact.isReal ? 'real' : 'fake'}', ${index + 1})" 
                                        id="fact-${index + 1}"
                                        class="w-full text-left p-3 bg-white rounded hover:bg-red-50 transition-colors">
                                        ${index + 1}. ${fact.text}
                                    </button>
                                `).join('')}
                            </div>
                        </div>
                        
                        <div id="hallucinationFeedback" class="mt-4"></div>
                        <div id="hallucinationScore" class="mt-2 text-center font-bold"></div>
                        <button onclick="closeMinigame()" class="mt-4 bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">
                            Close Game
                        </button>
                    </div>
                `;
            }
            
            window.nextHallucinationExample = function() {
                currentHallucination = (currentHallucination + 1) % hallucinationExamples.length;
                showHallucinationExample();
            };
            
            window.checkHallucination = function(type, num) {
                const button = document.getElementById(`fact-${num}`);
                const feedback = document.getElementById('hallucinationFeedback');
                const example = hallucinationExamples[currentHallucination];
                const fact = example.facts[num - 1];
                
                button.disabled = true;
                
                if ((fact.isReal && type === 'real') || (!fact.isReal && type === 'fake')) {
                    button.classList.add('bg-green-100', 'border-green-500');
                    correctGuesses++;
                    
                    if (!fact.isReal) {
                        feedback.innerHTML = '<p class="text-green-600 font-bold">‚úÖ Good catch! That fact was made up!</p>';
                    } else {
                        feedback.innerHTML = '<p class="text-blue-600">‚úÖ Correct! That\'s actually a real fact!</p>';
                    }
                    addXP(10);
                } else {
                    button.classList.add('bg-red-100', 'border-red-500');
                    feedback.innerHTML = '<p class="text-red-600">‚ùå Not quite! Check the other facts.</p>';
                }
                
                // Check if all facts have been evaluated
                const allButtons = document.querySelectorAll('#miniGameArea button[id^="fact-"]');
                const allDisabled = Array.from(allButtons).every(btn => btn.disabled);
                
                if (allDisabled) {
                    const scoreDiv = document.getElementById('hallucinationScore');
                    scoreDiv.innerHTML = `Score: ${correctGuesses}/4 correct! ${correctGuesses === 4 ? 'üèÜ Perfect!' : 'Try the next topic!'}`;
                    if (correctGuesses === 4) addXP(20);
                }
            };
            
            showHallucinationExample();
            gameArea.scrollIntoView({ behavior: 'smooth' });
        }

        function startPromptMaster() {
            const gameArea = document.getElementById('miniGameArea');
            gameArea.classList.remove('hidden');
            
            const promptExamples = [
                {
                    bad: "Tell me about dogs",
                    hint: "Be specific! What about dogs do you want to know?",
                    goodExamples: ["breed", "training", "care", "behavior", "history"]
                },
                {
                    bad: "Help with homework",
                    hint: "What subject? What specific problem?",
                    goodExamples: ["math", "equation", "essay", "topic", "explain"]
                },
                {
                    bad: "Write something",
                    hint: "What type of writing? For what purpose?",
                    goodExamples: ["story", "email", "report", "creative", "formal"]
                }
            ];
            
            let currentPrompt = 0;
            
            function showPromptExample() {
                const example = promptExamples[currentPrompt];
                gameArea.innerHTML = `
                    <div>
                        <h3 class="text-2xl font-bold text-purple-600 mb-4">‚úçÔ∏è Prompt Master</h3>
                        <p class="text-gray-600 mb-6">Improve these prompts to get better AI responses!</p>
                        
                        <div class="bg-purple-50 p-4 rounded-lg mb-4">
                            <div class="flex justify-between items-center mb-2">
                                <p class="text-sm text-gray-600">Example ${currentPrompt + 1} of ${promptExamples.length}</p>
                                <button onclick="nextPromptExample()" class="bg-purple-200 hover:bg-purple-300 px-3 py-1 rounded text-sm">
                                    Next Prompt ‚Üí
                                </button>
                            </div>
                            
                            <p class="font-semibold mb-2">Bad Prompt:</p>
                            <p class="text-gray-700 mb-4">"${example.bad}"</p>
                            
                            <p class="font-semibold mb-2">Write a Better Prompt:</p>
                            <textarea id="improvedPrompt" class="w-full p-3 border-2 border-purple-200 rounded" rows="3"
                                placeholder="${example.hint}"></textarea>
                            
                            <button onclick="checkPrompt()" class="mt-3 bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600">
                                Check Prompt
                            </button>
                        </div>
                        
                        <div id="promptFeedback" class="mt-4"></div>
                        <button onclick="closeMinigame()" class="mt-4 bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">
                            Close Game
                        </button>
                    </div>
                `;
            }
            
            window.nextPromptExample = function() {
                currentPrompt = (currentPrompt + 1) % promptExamples.length;
                showPromptExample();
            };
            
            window.checkPrompt = function() {
                const prompt = document.getElementById('improvedPrompt').value.trim().toLowerCase();
                const example = promptExamples[currentPrompt];
                const feedback = document.getElementById('promptFeedback');
                
                const hasGoodElements = example.goodExamples.some(word => prompt.includes(word));
                
                if (prompt.length > 20 && (prompt.includes('?') || hasGoodElements)) {
                    feedback.innerHTML = '<p class="text-green-600 font-bold">‚úÖ Much better! Specific prompts get better answers!</p>';
                    addXP(25);
                } else if (prompt.length > 10) {
                    feedback.innerHTML = '<p class="text-yellow-600">Getting there! Try to be even more specific.</p>';
                    addXP(10);
                } else {
                    feedback.innerHTML = `<p class="text-orange-600">${example.hint}</p>`;
                }
            };
            
            showPromptExample();
            gameArea.scrollIntoView({ behavior: 'smooth' });
        }

        function startContextBuilder() {
            const gameArea = document.getElementById('miniGameArea');
            gameArea.classList.remove('hidden');
            
            // Context examples
            const contextExamples = [
                {
                    prompt: "What should I wear to the event?",
                    contexts: [
                        { id: "formal", text: "It's a formal dinner party" },
                        { id: "weather", text: "The weather will be cold" },
                        { id: "indoor", text: "It's an indoor event" },
                        { id: "dresscode", text: "The dress code is black tie" }
                    ]
                },
                {
                    prompt: "Can you help me with this?",
                    contexts: [
                        { id: "subject", text: "It's a math homework problem" },
                        { id: "level", text: "I'm in Year 9" },
                        { id: "topic", text: "The topic is quadratic equations" },
                        { id: "deadline", text: "It's due tomorrow" }
                    ]
                },
                {
                    prompt: "Is it safe?",
                    contexts: [
                        { id: "what", text: "I'm asking about a new app" },
                        { id: "age", text: "I'm 14 years old" },
                        { id: "permissions", text: "It wants access to my location" },
                        { id: "reviews", text: "It has mixed reviews online" }
                    ]
                }
            ];
            
            let currentExample = 0;
            
            function displayContextExample() {
                const example = contextExamples[currentExample];
                gameArea.innerHTML = `
                    <div>
                        <h3 class="text-2xl font-bold text-green-600 mb-4">üß© Context Builder</h3>
                        <p class="text-gray-600 mb-6">Add context to help the AI understand better!</p>
                        
                        <div class="bg-green-50 p-4 rounded-lg">
                            <div class="flex justify-between items-center mb-2">
                                <p class="font-semibold">Example ${currentExample + 1} of ${contextExamples.length}</p>
                                <button onclick="nextContextExample()" class="bg-green-200 hover:bg-green-300 px-3 py-1 rounded text-sm">
                                    Next Example ‚Üí
                                </button>
                            </div>
                            
                            <p class="font-semibold mb-2">Original vague prompt:</p>
                            <p class="text-lg font-mono bg-white p-3 rounded mb-4" id="originalPrompt">"${example.prompt}"</p>
                            
                            <p class="text-sm text-gray-600 mb-2">Add context to make this clearer:</p>
                            <div class="space-y-2 mb-4">
                                ${example.contexts.map(ctx => `
                                    <label class="flex items-center">
                                        <input type="checkbox" class="mr-2" value="${ctx.id}" onchange="updateContextPrompt()">
                                        <span>${ctx.text}</span>
                                    </label>
                                `).join('')}
                            </div>
                            
                            <p class="font-semibold mb-2">Improved prompt with context:</p>
                            <div class="bg-white p-3 rounded border-2 border-green-300">
                                <p id="improvedContextPrompt" class="text-gray-700">"${example.prompt}"</p>
                            </div>
                            
                            <button onclick="checkContext()" class="mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">
                                Check Context
                            </button>
                        </div>
                        
                        <div id="contextFeedback" class="mt-4"></div>
                        <button onclick="closeMinigame()" class="mt-4 bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">
                            Close Game
                        </button>
                    </div>
                `;
            }
            
            window.updateContextPrompt = function() {
                const example = contextExamples[currentExample];
                const checkboxes = document.querySelectorAll('#miniGameArea input[type="checkbox"]:checked');
                let improvedPrompt = example.prompt;
                
                const contexts = [];
                checkboxes.forEach(cb => {
                    const context = example.contexts.find(c => c.id === cb.value);
                    if (context) contexts.push(context.text);
                });
                
                if (contexts.length > 0) {
                    improvedPrompt = example.prompt.slice(0, -1) + " " + contexts.join(", ") + "?";
                }
                
                document.getElementById('improvedContextPrompt').textContent = '"' + improvedPrompt + '"';
            };
            
            window.nextContextExample = function() {
                currentExample = (currentExample + 1) % contextExamples.length;
                displayContextExample();
            };
            
            window.checkContext = function() {
                const checkboxes = document.querySelectorAll('#miniGameArea input[type="checkbox"]:checked');
                const feedback = document.getElementById('contextFeedback');
                
                if (checkboxes.length >= 3) {
                    feedback.innerHTML = '<p class="text-green-600 font-bold">‚úÖ Perfect! Now the AI knows exactly what you need!</p>';
                    addXP(20);
                } else if (checkboxes.length >= 2) {
                    feedback.innerHTML = '<p class="text-yellow-600">Good start! Adding more context would help even more.</p>';
                    addXP(10);
                } else {
                    feedback.innerHTML = '<p class="text-orange-600">Add more context! The AI needs more information to help properly.</p>';
                }
            };
            
            displayContextExample();
            gameArea.scrollIntoView({ behavior: 'smooth' });
        }

        function startTemperatureGame() {
            const gameArea = document.getElementById('miniGameArea');
            gameArea.classList.remove('hidden');
            
            const temperatureExamples = [
                {
                    prompt: "Write a sentence about a cat",
                    outputs: {
                        low: "The cat sat on the mat.",
                        medium: "The fluffy cat curled up on the soft mat.",
                        high: "The mischievous cat danced upon the rainbow mat of dreams.",
                        extreme: "The quantum cat transcended spacetime on the interdimensional mat of infinite possibilities!"
                    }
                },
                {
                    prompt: "Describe the weather",
                    outputs: {
                        low: "It is sunny today.",
                        medium: "The sun shines brightly through scattered clouds.",
                        high: "Golden rays dance through crystalline air like nature's symphony.",
                        extreme: "The celestial fire orb battles cosmic cloud warriors in the eternal sky arena!"
                    }
                },
                {
                    prompt: "What's for lunch?",
                    outputs: {
                        low: "Sandwich and chips.",
                        medium: "A delicious chicken sandwich with crispy chips and salad.",
                        high: "A gourmet feast of artisanal bread embracing succulent poultry.",
                        extreme: "The sandwich deity bestows upon mortals its divine crispy potato disciples!"
                    }
                }
            ];
            
            let currentExample = 0;
            
            function showTemperatureExample() {
                const example = temperatureExamples[currentExample];
                gameArea.innerHTML = `
                    <div>
                        <h3 class="text-2xl font-bold text-blue-600 mb-4">üå°Ô∏è Temperature Control</h3>
                        <p class="text-gray-600 mb-6">Adjust the AI's creativity level!</p>
                        
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <div class="flex justify-between items-center mb-4">
                                <p class="font-semibold">Prompt: "${example.prompt}"</p>
                                <button onclick="nextTempExample()" class="bg-blue-200 hover:bg-blue-300 px-3 py-1 rounded text-sm">
                                    Next Example ‚Üí
                                </button>
                            </div>
                            
                            <div class="mb-6">
                                <label class="block mb-2">Temperature: <span id="tempValue">0.5</span></label>
                                <input type="range" id="tempSlider" min="0" max="100" value="50" 
                                    class="w-full" oninput="updateTemperature(${currentExample})">
                                <div class="flex justify-between text-sm text-gray-600">
                                    <span>üßä Predictable</span>
                                    <span>üî• Creative</span>
                                </div>
                            </div>
                            
                            <div class="bg-white p-4 rounded">
                                <p class="font-semibold mb-2">AI Output:</p>
                                <p id="tempOutput" class="text-gray-700">${example.outputs.medium}</p>
                            </div>
                        </div>
                        
                        <div class="mt-4 bg-yellow-50 p-3 rounded">
                            <p class="text-sm text-gray-700">
                                <strong>Low temperature (0-0.3):</strong> Safe, predictable responses<br>
                                <strong>Medium temperature (0.4-0.7):</strong> Balanced creativity<br>
                                <strong>High temperature (0.8-1.0):</strong> Creative but sometimes nonsensical!
                            </p>
                        </div>
                        
                        <button onclick="closeMinigame()" class="mt-4 bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">
                            Close Game
                        </button>
                    </div>
                `;
            }
            
            window.nextTempExample = function() {
                currentExample = (currentExample + 1) % temperatureExamples.length;
                showTemperatureExample();
            };
            
            window.updateTemperature = function(exampleIndex) {
                const slider = document.getElementById('tempSlider');
                const value = slider.value / 100;
                document.getElementById('tempValue').textContent = value.toFixed(1);
                
                const example = temperatureExamples[exampleIndex];
                const output = document.getElementById('tempOutput');
                
                if (value < 0.3) {
                    output.textContent = example.outputs.low;
                } else if (value < 0.6) {
                    output.textContent = example.outputs.medium;
                } else if (value < 0.8) {
                    output.textContent = example.outputs.high;
                } else {
                    output.textContent = example.outputs.extreme;
                }
            };
            
            showTemperatureExample();
            gameArea.scrollIntoView({ behavior: 'smooth' });
        }

        function startBiasDetective() {
            const gameArea = document.getElementById('miniGameArea');
            gameArea.classList.remove('hidden');
            
            const biasExamples = [
                {
                    question: "Tell me about nurses",
                    response: "Nurses are caring professionals who help doctors. She typically works long hours and must be compassionate and patient with her patients.",
                    biasType: "gender",
                    explanation: "Assumes all nurses are female ('she', 'her')"
                },
                {
                    question: "Describe a CEO",
                    response: "A CEO is the leader of a company. He makes important decisions and manages the business strategy. His leadership skills are crucial for success.",
                    biasType: "gender",
                    explanation: "Assumes CEOs are male ('he', 'his')"
                },
                {
                    question: "What makes a good programmer?",
                    response: "Good programmers are young, energetic individuals who can work long hours coding. They need to be quick learners to keep up with new technologies.",
                    biasType: "age",
                    explanation: "Assumes programmers must be young"
                },
                {
                    question: "Describe a typical family",
                    response: "A typical family consists of a mother, father, and two children living in a suburban house with a car and a pet dog.",
                    biasType: "cultural",
                    explanation: "Assumes one specific family structure is 'typical'"
                },
                {
                    question: "What do scientists look like?",
                    response: "Scientists wear white lab coats and glasses. They work in laboratories with complex equipment and usually have messy hair from concentrating so hard.",
                    biasType: "stereotype",
                    explanation: "Reinforces stereotypical appearance of scientists"
                }
            ];
            
            let currentBias = 0;
            
            function showBiasExample() {
                const example = biasExamples[currentBias];
                gameArea.innerHTML = `
                    <div>
                        <h3 class="text-2xl font-bold text-indigo-600 mb-4">üïµÔ∏è Bias Detective</h3>
                        <p class="text-gray-600 mb-6">Find potential biases in these AI responses!</p>
                        
                        <div class="bg-indigo-50 p-4 rounded-lg">
                            <div class="flex justify-between items-center mb-2">
                                <p class="text-sm text-gray-600">Case ${currentBias + 1} of ${biasExamples.length}</p>
                                <button onclick="nextBiasExample()" class="bg-indigo-200 hover:bg-indigo-300 px-3 py-1 rounded text-sm">
                                    Next Case ‚Üí
                                </button>
                            </div>
                            
                            <p class="font-semibold mb-2">Question: "${example.question}"</p>
                            <p class="bg-white p-3 rounded mb-4">
                                "${example.response}"
                            </p>
                            
                            <p class="text-sm text-gray-600 mb-2">What bias do you see?</p>
                            <div class="space-y-2">
                                <button onclick="identifyBias('gender')" class="w-full bg-indigo-100 hover:bg-indigo-200 p-2 rounded text-left">
                                    Gender bias (assuming specific gender)
                                </button>
                                <button onclick="identifyBias('age')" class="w-full bg-indigo-100 hover:bg-indigo-200 p-2 rounded text-left">
                                    Age bias (assuming specific age group)
                                </button>
                                <button onclick="identifyBias('cultural')" class="w-full bg-indigo-100 hover:bg-indigo-200 p-2 rounded text-left">
                                    Cultural bias (assuming one culture is default)
                                </button>
                                <button onclick="identifyBias('stereotype')" class="w-full bg-indigo-100 hover:bg-indigo-200 p-2 rounded text-left">
                                    Stereotype bias (reinforcing stereotypes)
                                </button>
                                <button onclick="identifyBias('none')" class="w-full bg-indigo-100 hover:bg-indigo-200 p-2 rounded text-left">
                                    No bias detected
                                </button>
                            </div>
                        </div>
                        
                        <div id="biasFeedback" class="mt-4"></div>
                        <button onclick="closeMinigame()" class="mt-4 bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">
                            Close Game
                        </button>
                    </div>
                `;
            }
            
            window.nextBiasExample = function() {
                currentBias = (currentBias + 1) % biasExamples.length;
                showBiasExample();
            };
            
            window.identifyBias = function(biasType) {
                const example = biasExamples[currentBias];
                const feedback = document.getElementById('biasFeedback');
                
                if (biasType === example.biasType) {
                    feedback.innerHTML = `<p class="text-green-600 font-bold">‚úÖ Correct! ${example.explanation}</p>`;
                    addXP(30);
                } else if (biasType === 'none') {
                    feedback.innerHTML = '<p class="text-red-600">‚ùå Look more carefully - there is a bias here.</p>';
                } else {
                    feedback.innerHTML = '<p class="text-orange-600">‚ùå Not quite. Look for different assumptions in the text.</p>';
                }
            };
            
            showBiasExample();
            gameArea.scrollIntoView({ behavior: 'smooth' });
        }

        // Mini game helper functions
        function closeMinigame() {
            document.getElementById('miniGameArea').classList.add('hidden');
        }
    </script>
</body>
</html>