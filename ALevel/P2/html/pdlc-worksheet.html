<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Program Development Life Cycle - A Level Computer Science</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --success-color: #27ae60;
            --error-color: #e74c3c;
            --warning-color: #f39c12;
            --light-bg: #ecf0f1;
            --dark-text: #2c3e50;
            --light-text: #7f8c8d;
            --card-shadow: 0 2px 10px rgba(0,0,0,0.1);
            --hover-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: var(--dark-text);
            background-color: #f5f7fa;
            overflow-x: hidden;
        }

        /* Accessibility Controls */
        .accessibility-controls {
            position: fixed;
            top: 10px;
            right: 10px;
            background: white;
            padding: 10px;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            z-index: 1000;
        }

        .accessibility-controls button {
            margin: 2px;
            padding: 5px 10px;
            border: 1px solid var(--secondary-color);
            background: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .accessibility-controls button:hover {
            background: var(--secondary-color);
            color: white;
        }

        /* High Contrast Mode */
        body.high-contrast {
            background: black;
            color: white;
        }

        body.high-contrast .section-container,
        body.high-contrast .card,
        body.high-contrast .interactive-area {
            background: #111;
            border: 2px solid white;
        }

        /* Dyslexia Font */
        body.dyslexia-font {
            font-family: 'OpenDyslexic', 'Comic Sans MS', sans-serif;
            letter-spacing: 0.1em;
            word-spacing: 0.2em;
        }

        /* Font Sizes */
        body.font-small { font-size: 14px; }
        body.font-large { font-size: 20px; }
        body.font-xlarge { font-size: 24px; }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::after {
            content: '';
            position: absolute;
            bottom: -50px;
            left: -50px;
            width: 200px;
            height: 200px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 1;
        }

        /* Navigation */
        .nav-container {
            background: white;
            padding: 1rem;
            box-shadow: var(--card-shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-pills {
            display: flex;
            gap: 0.5rem;
            overflow-x: auto;
            padding-bottom: 0.5rem;
        }

        .nav-pill {
            padding: 0.5rem 1rem;
            background: var(--light-bg);
            border: none;
            border-radius: 20px;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .nav-pill:hover {
            background: var(--secondary-color);
            color: white;
            transform: translateY(-2px);
        }

        .nav-pill.active {
            background: var(--secondary-color);
            color: white;
        }

        .nav-pill.completed {
            background: var(--success-color);
            color: white;
        }

        /* Main Content */
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .section-container {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .section-container.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--card-shadow);
            transition: all 0.3s ease;
        }

        .card:hover {
            box-shadow: var(--hover-shadow);
        }

        .card h2 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card h3 {
            color: var(--secondary-color);
            margin: 1.5rem 0 1rem;
        }

        /* Interactive Areas */
        .interactive-area {
            background: var(--light-bg);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
            border: 2px dashed var(--secondary-color);
            transition: all 0.3s ease;
        }

        .interactive-area.highlight {
            border-color: var(--warning-color);
            background: #fff9e6;
        }

        /* Buttons */
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: var(--secondary-color);
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--light-bg);
            color: var(--dark-text);
            border: 1px solid var(--light-text);
        }

        .btn-secondary:hover {
            background: var(--dark-text);
            color: white;
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-danger {
            background: var(--error-color);
            color: white;
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid var(--light-bg);
        }

        /* XP and Level Display */
        .xp-container {
            position: fixed;
            top: 70px;
            left: 20px;
            background: white;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            z-index: 50;
        }

        .xp-bar {
            width: 200px;
            height: 20px;
            background: var(--light-bg);
            border-radius: 10px;
            overflow: hidden;
            margin-top: 0.5rem;
        }

        .xp-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success-color), #2ecc71);
            transition: width 0.5s ease;
        }

        .level-badge {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        /* Achievement Popup */
        .achievement-popup {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            transform: translateX(400px);
            transition: transform 0.5s ease;
            z-index: 1000;
            max-width: 300px;
        }

        .achievement-popup.show {
            transform: translateX(0);
        }

        .achievement-popup h3 {
            color: var(--success-color);
            margin-bottom: 0.5rem;
        }

        /* Feedback Button */
        .feedback-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            box-shadow: var(--card-shadow);
            transition: all 0.3s ease;
            z-index: 100;
        }

        .feedback-btn:hover {
            transform: scale(1.1);
            background: var(--primary-color);
        }

        /* Feedback Modal */
        .feedback-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .feedback-content {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            max-width: 500px;
            width: 90%;
        }

        .feedback-textarea {
            width: 100%;
            min-height: 150px;
            margin: 1rem 0;
            padding: 0.75rem;
            border: 1px solid var(--light-text);
            border-radius: 6px;
            resize: vertical;
        }

        /* Shame Message */
        .shame-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: var(--error-color);
            color: white;
            padding: 2rem;
            border-radius: 12px;
            text-align: center;
            z-index: 3000;
            transition: transform 0.3s ease;
        }

        .shame-message.show {
            transform: translate(-50%, -50%) scale(1);
        }

        /* Input Fields */
        input[type="text"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--light-text);
            border-radius: 6px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        input[type="text"]:focus,
        input[type="number"]:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--secondary-color);
        }

        /* Quiz Options */
        .quiz-option {
            display: block;
            width: 100%;
            padding: 1rem;
            margin: 0.5rem 0;
            background: white;
            border: 2px solid var(--light-bg);
            border-radius: 8px;
            cursor: pointer;
            text-align: left;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            border-color: var(--secondary-color);
            transform: translateX(5px);
        }

        .quiz-option.selected {
            background: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        .quiz-option.correct {
            background: var(--success-color);
            color: white;
            border-color: var(--success-color);
        }

        .quiz-option.incorrect {
            background: var(--error-color);
            color: white;
            border-color: var(--error-color);
        }

        /* Matching Activity */
        .matching-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 1rem 0;
        }

        .matching-item {
            padding: 1rem;
            background: white;
            border: 2px solid var(--light-bg);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0.5rem 0;
        }

        .matching-item:hover {
            border-color: var(--secondary-color);
            transform: scale(1.02);
        }

        .matching-item.selected {
            background: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        .matching-item.matched {
            background: var(--success-color);
            color: white;
            border-color: var(--success-color);
            cursor: default;
        }

        /* Drawing Canvas */
        .canvas-container {
            border: 2px solid var(--light-text);
            border-radius: 8px;
            margin: 1rem 0;
            position: relative;
        }

        #drawingCanvas {
            display: block;
            cursor: crosshair;
            touch-action: none;
        }

        .canvas-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 0.5rem;
        }

        /* Simulation */
        .simulation-container {
            background: var(--light-bg);
            border-radius: 12px;
            padding: 2rem;
            margin: 1rem 0;
        }

        .simulation-stage {
            padding: 1.5rem;
            background: white;
            border-radius: 8px;
            margin: 1rem 0;
            position: relative;
            transition: all 0.3s ease;
        }

        .simulation-stage.active {
            border: 3px solid var(--secondary-color);
            box-shadow: 0 0 20px rgba(52, 152, 219, 0.3);
        }

        .simulation-stage.completed {
            opacity: 0.6;
        }

        .stage-arrow {
            text-align: center;
            font-size: 2rem;
            color: var(--secondary-color);
            margin: 0.5rem 0;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8rem;
            }

            .main-container {
                padding: 1rem;
            }

            .card {
                padding: 1.5rem;
            }

            .nav-pills {
                flex-wrap: nowrap;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .matching-container {
                grid-template-columns: 1fr;
            }

            .xp-container {
                position: relative;
                top: auto;
                left: auto;
                margin-bottom: 1rem;
            }

            .accessibility-controls {
                position: relative;
                margin-bottom: 1rem;
            }
        }

        /* Animations */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .pulse {
            animation: pulse 0.5s ease;
        }

        .shake {
            animation: shake 0.5s ease;
        }

        /* Mark Scheme */
        .mark-scheme {
            background: #e8f8f5;
            border-left: 4px solid var(--success-color);
            padding: 1rem;
            margin: 1rem 0;
            display: none;
        }

        .mark-scheme.show {
            display: block;
        }

        /* Loading State */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--light-bg);
            border-top-color: var(--secondary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Accessibility Controls -->
    <div class="accessibility-controls" role="toolbar" aria-label="Accessibility controls">
        <button onclick="toggleHighContrast()" aria-label="Toggle high contrast mode">High Contrast</button>
        <button onclick="toggleDyslexiaFont()" aria-label="Toggle dyslexia-friendly font">Dyslexia Font</button>
        <button onclick="changeFontSize('small')" aria-label="Decrease font size">A-</button>
        <button onclick="changeFontSize('normal')" aria-label="Normal font size">A</button>
        <button onclick="changeFontSize('large')" aria-label="Increase font size">A+</button>
        <button onclick="changeFontSize('xlarge')" aria-label="Extra large font size">A++</button>
    </div>

    <!-- Header -->
    <header class="header">
        <h1>Program Development Life Cycle</h1>
        <p>A Level Computer Science - Cambridge 9618</p>
    </header>

    <!-- XP Container -->
    <div class="xp-container" role="status" aria-live="polite">
        <div class="level-badge">Level <span id="currentLevel">1</span></div>
        <div>XP: <span id="currentXP">0</span> / <span id="requiredXP">100</span></div>
        <div class="xp-bar">
            <div class="xp-fill" id="xpBar" style="width: 0%"></div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="nav-container" role="navigation" aria-label="Section navigation">
        <div class="nav-pills">
            <button class="nav-pill active" onclick="showSection('intro')">Introduction</button>
            <button class="nav-pill" onclick="showSection('starter')">Starter Activity</button>
            <button class="nav-pill" onclick="showSection('stages')">PDLC Stages</button>
            <button class="nav-pill" onclick="showSection('waterfall')">Waterfall Model</button>
            <button class="nav-pill" onclick="showSection('iterative')">Iterative Model</button>
            <button class="nav-pill" onclick="showSection('rad')">RAD Model</button>
            <button class="nav-pill" onclick="showSection('summary')">Summary Quiz</button>
            <button class="nav-pill" onclick="showSection('exam')">Exam Practice</button>
            <button class="nav-pill" onclick="showSection('extension')">Extension</button>
            <button class="nav-pill" onclick="showSection('videos')">Videos</button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-container">
        <!-- Introduction Section -->
        <section id="intro" class="section-container active">
            <div class="card">
                <h2>üéØ Learning Outcomes</h2>
                <p>By the end of this lesson, you will be able to:</p>
                <ul style="margin-left: 2rem; margin-top: 1rem;">
                    <li>Show understanding of the purpose of a development life cycle</li>
                    <li>Show understanding of the need for different development life cycles depending on the program being developed</li>
                    <li>Describe the principles, benefits and drawbacks of each type of life cycle</li>
                    <li>Show understanding of the analysis, design, coding, testing and maintenance stages in the program development life cycle</li>
                </ul>
            </div>

            <div class="card">
                <h2>üìö What is a Program Development Life Cycle?</h2>
                <p>A Program Development Life Cycle (PDLC) is a systematic approach to developing software. It provides a structured framework that guides developers through the process of creating, testing, and maintaining software applications.</p>
                
                <div class="interactive-area highlight">
                    <h3>Key Point</h3>
                    <p>Different projects require different approaches. The choice of development life cycle depends on factors such as:</p>
                    <ul style="margin-left: 2rem;">
                        <li>Project size and complexity</li>
                        <li>Time constraints</li>
                        <li>Client involvement requirements</li>
                        <li>Budget limitations</li>
                        <li>Risk tolerance</li>
                    </ul>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" disabled>Previous</button>
                <button class="btn btn-primary" onclick="showSection('starter')">Next ‚Üí</button>
            </div>
        </section>

        <!-- Starter Activity Section -->
        <section id="starter" class="section-container">
            <div class="card">
                <h2>üöÄ Starter Activity: Match the PDLC Stages</h2>
                <p>Test your existing knowledge! Match each stage of the Program Development Life Cycle with its correct description.</p>
                
                <div class="matching-container">
                    <div>
                        <h3>Stages</h3>
                        <div class="matching-item" data-match="analysis" onclick="selectMatch(this, 'stage')">Analysis</div>
                        <div class="matching-item" data-match="design" onclick="selectMatch(this, 'stage')">Design</div>
                        <div class="matching-item" data-match="coding" onclick="selectMatch(this, 'stage')">Coding</div>
                        <div class="matching-item" data-match="testing" onclick="selectMatch(this, 'stage')">Testing</div>
                        <div class="matching-item" data-match="maintenance" onclick="selectMatch(this, 'stage')">Maintenance</div>
                    </div>
                    <div>
                        <h3>Descriptions</h3>
                        <div class="matching-item" data-match="testing" onclick="selectMatch(this, 'desc')">Verify the program's correctness and identify bugs</div>
                        <div class="matching-item" data-match="maintenance" onclick="selectMatch(this, 'desc')">Update and improve the program after release</div>
                        <div class="matching-item" data-match="analysis" onclick="selectMatch(this, 'desc')">Define the problem and gather requirements</div>
                        <div class="matching-item" data-match="coding" onclick="selectMatch(this, 'desc')">Write the program's source code</div>
                        <div class="matching-item" data-match="design" onclick="selectMatch(this, 'desc')">Plan the program's structure and functionality</div>
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="checkMatching()">Check Answers</button>
                <button class="btn btn-secondary" onclick="resetMatching()">Reset</button>
                
                <div id="matchingFeedback" style="margin-top: 1rem;"></div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="showSection('intro')">‚Üê Previous</button>
                <button class="btn btn-primary" onclick="showSection('stages')">Next ‚Üí</button>
            </div>
        </section>

        <!-- PDLC Stages Section -->
        <section id="stages" class="section-container">
            <div class="card">
                <h2>üìä The Five Stages of PDLC</h2>
                <p>The Program Development Life Cycle consists of five main stages. Let's explore each one in detail.</p>
                
                <div class="simulation-container">
                    <h3>Interactive PDLC Flow</h3>
                    <p>Click through each stage to see how they connect:</p>
                    
                    <div class="simulation-stage active" id="stage-analysis">
                        <h4>1. Analysis</h4>
                        <p>A process of investigation, leading to the specification of what a program is required to do.</p>
                        <p><strong>Documentation produced:</strong></p>
                        <ul>
                            <li>Problem definition</li>
                            <li>Requirements specification</li>
                            <li>Client requirements</li>
                            <li>Current system documentation (e.g., ER diagrams)</li>
                            <li>Feasibility study</li>
                        </ul>
                    </div>
                    
                    <div class="stage-arrow">‚Üì</div>
                    
                    <div class="simulation-stage" id="stage-design">
                        <h4>2. Design</h4>
                        <p>Uses the program specification from analysis to show how the program should be developed.</p>
                        <p><strong>Decisions made:</strong></p>
                        <ul>
                            <li>Data structures to be used</li>
                            <li>Algorithms/flowcharts/pseudocode planning</li>
                            <li>Program structure (modules) and team allocation</li>
                            <li>Library routines to be used</li>
                            <li>User interface design</li>
                            <li>Testing method and plan</li>
                            <li>Choice of programming language</li>
                        </ul>
                    </div>
                    
                    <div class="stage-arrow">‚Üì</div>
                    
                    <div class="simulation-stage" id="stage-coding">
                        <h4>3. Coding/Implementation</h4>
                        <p>The writing of the program or suite of programs.</p>
                    </div>
                    
                    <div class="stage-arrow">‚Üì</div>
                    
                    <div class="simulation-stage" id="stage-testing">
                        <h4>4. Testing</h4>
                        <p>Verify the program's correctness and identify bugs.</p>
                    </div>
                    
                    <div class="stage-arrow">‚Üì</div>
                    
                    <div class="simulation-stage" id="stage-maintenance">
                        <h4>5. Maintenance</h4>
                        <p>The process of making sure that the program continues to work during use/after release.</p>
                    </div>
                    
                    <div style="margin-top: 1rem;">
                        <button class="btn btn-secondary" onclick="previousStage()">‚Üê Previous Stage</button>
                        <button class="btn btn-primary" onclick="nextStage()">Next Stage ‚Üí</button>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>‚úèÔ∏è Practice: Fill in the Blanks</h2>
                <p>Complete the following statements about PDLC stages:</p>
                
                <div class="interactive-area">
                    <p>1. During the <select id="blank1">
                        <option value="">Choose...</option>
                        <option value="analysis">Analysis</option>
                        <option value="design">Design</option>
                        <option value="coding">Coding</option>
                        <option value="testing">Testing</option>
                        <option value="maintenance">Maintenance</option>
                    </select> stage, developers gather requirements and define the problem.</p>
                    
                    <p>2. The choice of programming language is decided during the <select id="blank2">
                        <option value="">Choose...</option>
                        <option value="analysis">Analysis</option>
                        <option value="design">Design</option>
                        <option value="coding">Coding</option>
                        <option value="testing">Testing</option>
                        <option value="maintenance">Maintenance</option>
                    </select> stage.</p>
                    
                    <p>3. Bug fixes and updates after release happen during <select id="blank3">
                        <option value="">Choose...</option>
                        <option value="analysis">Analysis</option>
                        <option value="design">Design</option>
                        <option value="coding">Coding</option>
                        <option value="testing">Testing</option>
                        <option value="maintenance">Maintenance</option>
                    </select>.</p>
                    
                    <button class="btn btn-primary" onclick="checkBlanks()">Check Answers</button>
                    <div id="blanksFeedback" style="margin-top: 1rem;"></div>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="showSection('starter')">‚Üê Previous</button>
                <button class="btn btn-primary" onclick="showSection('waterfall')">Next ‚Üí</button>
            </div>
        </section>

        <!-- Waterfall Model Section -->
        <section id="waterfall" class="section-container">
            <div class="card">
                <h2>üåä The Waterfall Model</h2>
                <p>The Waterfall model is a linear sequential program development cycle, in which each stage is completed before the next is begun.</p>
                
                <div class="simulation-container">
                    <h3>Waterfall Model Simulation</h3>
                    <p>Watch how the waterfall model flows - once a stage is complete, you cannot go back!</p>
                    
                    <div id="waterfallStages">
                        <div class="simulation-stage" data-waterfall="1">Requirements Analysis</div>
                        <div class="stage-arrow">‚Üì</div>
                        <div class="simulation-stage" data-waterfall="2">System Design</div>
                        <div class="stage-arrow">‚Üì</div>
                        <div class="simulation-stage" data-waterfall="3">Implementation</div>
                        <div class="stage-arrow">‚Üì</div>
                        <div class="simulation-stage" data-waterfall="4">Testing</div>
                        <div class="stage-arrow">‚Üì</div>
                        <div class="simulation-stage" data-waterfall="5">Deployment</div>
                        <div class="stage-arrow">‚Üì</div>
                        <div class="simulation-stage" data-waterfall="6">Maintenance</div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="simulateWaterfall()">Start Waterfall Simulation</button>
                    <button class="btn btn-secondary" onclick="resetWaterfall()">Reset</button>
                </div>
            </div>

            <div class="card">
                <h2>‚úÖ Benefits and ‚ùå Drawbacks</h2>
                
                <div class="interactive-area">
                    <h3>True or False Quiz</h3>
                    <p>Identify whether each statement about the Waterfall model is true or false:</p>
                    
                    <div style="margin: 1rem 0;">
                        <p>1. The Waterfall model is flexible and allows for easy changes during development.</p>
                        <button class="quiz-option" onclick="selectTrueFalse(this, 'wf1', false)">True</button>
                        <button class="quiz-option" onclick="selectTrueFalse(this, 'wf1', false)">False</button>
                    </div>
                    
                    <div style="margin: 1rem 0;">
                        <p>2. Clear project stages and deliverables make the Waterfall model easy to manage.</p>
                        <button class="quiz-option" onclick="selectTrueFalse(this, 'wf2', true)">True</button>
                        <button class="quiz-option" onclick="selectTrueFalse(this, 'wf2', true)">False</button>
                    </div>
                    
                    <div style="margin: 1rem 0;">
                        <p>3. Working software is produced early in the Waterfall cycle.</p>
                        <button class="quiz-option" onclick="selectTrueFalse(this, 'wf3', false)">True</button>
                        <button class="quiz-option" onclick="selectTrueFalse(this, 'wf3', false)">False</button>
                    </div>
                    
                    <button class="btn btn-primary" onclick="checkTrueFalse()">Check Answers</button>
                    <div id="trueFalseFeedback" style="margin-top: 1rem;"></div>
                </div>
                
                <div class="interactive-area highlight">
                    <h3>Waterfall Model Summary</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                        <div>
                            <h4 style="color: var(--success-color);">‚úÖ Benefits</h4>
                            <ul>
                                <li>Simple and easy to understand</li>
                                <li>Clear project stages and deliverables</li>
                                <li>Easy to manage due to rigid structure</li>
                                <li>Milestones are well defined</li>
                                <li>Works well for smaller, less complex projects</li>
                            </ul>
                        </div>
                        <div>
                            <h4 style="color: var(--error-color);">‚ùå Drawbacks</h4>
                            <ul>
                                <li>Inflexible; changes are difficult and expensive</li>
                                <li>High risk and uncertainty</li>
                                <li>Long delivery time</li>
                                <li>Limited customer involvement after requirements gathering</li>
                                <li>Working software is only produced late in the cycle</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="showSection('stages')">‚Üê Previous</button>
                <button class="btn btn-primary" onclick="showSection('iterative')">Next ‚Üí</button>
            </div>
        </section>

        <!-- Iterative Model Section -->
        <section id="iterative" class="section-container">
            <div class="card">
                <h2>üîÑ The Iterative Model</h2>
                <p>In the Iterative model, a simple subset of the requirements is developed, then expanded or enhanced with the development cycle being repeated until the full system has been developed.</p>
                
                <div class="simulation-container">
                    <h3>Iterative Model Simulation</h3>
                    <p>See how iterations build upon each other:</p>
                    
                    <div id="iterativeSimulation">
                        <div style="text-align: center; margin: 2rem 0;">
                            <h4>Iteration <span id="iterationNumber">1</span></h4>
                            <div style="display: inline-flex; align-items: center; gap: 1rem;">
                                <div class="simulation-stage" style="padding: 1rem;">Requirements</div>
                                <span>‚Üí</span>
                                <div class="simulation-stage" style="padding: 1rem;">Design</div>
                                <span>‚Üí</span>
                                <div class="simulation-stage" style="padding: 1rem;">Implementation</div>
                                <span>‚Üí</span>
                                <div class="simulation-stage" style="padding: 1rem;">Testing</div>
                            </div>
                            <div style="margin-top: 1rem;">
                                <div class="simulation-stage active" style="padding: 1rem;">
                                    <strong>Current Features:</strong>
                                    <div id="iterativeFeatures">Basic functionality</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="nextIteration()">Next Iteration ‚Üí</button>
                    <button class="btn btn-secondary" onclick="resetIterative()">Reset</button>
                </div>
            </div>

            <div class="card">
                <h2>üìù Scenario-Based Questions</h2>
                <p>Choose the best development model for each scenario:</p>
                
                <div class="interactive-area">
                    <div style="margin: 1rem 0;">
                        <p><strong>Scenario 1:</strong> A small company needs a simple inventory system with well-defined requirements that won't change.</p>
                        <button class="quiz-option" onclick="selectAnswer(this, 'scenario1', 'waterfall')">Waterfall Model</button>
                        <button class="quiz-option" onclick="selectAnswer(this, 'scenario1', 'waterfall')">Iterative Model</button>
                        <button class="quiz-option" onclick="selectAnswer(this, 'scenario1', 'waterfall')">RAD Model</button>
                    </div>
                    
                    <div style="margin: 1rem 0;">
                        <p><strong>Scenario 2:</strong> A startup is developing a new social media app and needs user feedback to refine features.</p>
                        <button class="quiz-option" onclick="selectAnswer(this, 'scenario2', 'iterative')">Waterfall Model</button>
                        <button class="quiz-option" onclick="selectAnswer(this, 'scenario2', 'iterative')">Iterative Model</button>
                        <button class="quiz-option" onclick="selectAnswer(this, 'scenario2', 'iterative')">Traditional Model</button>
                    </div>
                    
                    <button class="btn btn-primary" onclick="checkScenarios()">Check Answers</button>
                    <div id="scenarioFeedback" style="margin-top: 1rem;"></div>
                </div>
                
                <div class="interactive-area highlight">
                    <h3>Iterative Model Summary</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                        <div>
                            <h4 style="color: var(--success-color);">‚úÖ Benefits</h4>
                            <ul>
                                <li>Lower risk of overall project failure</li>
                                <li>Easier to accommodate changes</li>
                                <li>Continuous testing and feedback</li>
                                <li>Better customer satisfaction through involvement</li>
                            </ul>
                        </div>
                        <div>
                            <h4 style="color: var(--error-color);">‚ùå Drawbacks</h4>
                            <ul>
                                <li>Slower progress between releases compared to RAD</li>
                                <li>Higher cost for small projects</li>
                                <li>Needs good initial design</li>
                                <li>More management overhead</li>
                                <li>Short iterations can be hard to manage</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="showSection('waterfall')">‚Üê Previous</button>
                <button class="btn btn-primary" onclick="showSection('rad')">Next ‚Üí</button>
            </div>
        </section>

        <!-- RAD Model Section -->
        <section id="rad" class="section-container">
            <div class="card">
                <h2>‚ö° Rapid Application Development (RAD)</h2>
                <p>RAD is a development model that emphasizes rapid prototyping and iterative delivery. Key features include:</p>
                <ul style="margin-left: 2rem;">
                    <li>Modules developed in parallel/as prototypes</li>
                    <li>Allows for changes to requirements</li>
                    <li>Flexible development process</li>
                    <li>Small incremental releases</li>
                    <li>Used for time-critical development</li>
                    <li>Client involved during all stages of development</li>
                </ul>
                
                <div class="simulation-container">
                    <h3>RAD Parallel Development Simulation</h3>
                    <p>See how multiple teams work on different modules simultaneously:</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin: 2rem 0;">
                        <div>
                            <h4>Team A</h4>
                            <div class="simulation-stage" id="teamA">User Interface Module</div>
                            <div class="progress-bar" style="margin-top: 0.5rem;">
                                <div class="xp-bar">
                                    <div class="xp-fill" id="teamAProgress" style="width: 0%; background: var(--success-color);"></div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h4>Team B</h4>
                            <div class="simulation-stage" id="teamB">Database Module</div>
                            <div class="progress-bar" style="margin-top: 0.5rem;">
                                <div class="xp-bar">
                                    <div class="xp-fill" id="teamBProgress" style="width: 0%; background: var(--warning-color);"></div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h4>Team C</h4>
                            <div class="simulation-stage" id="teamC">Business Logic Module</div>
                            <div class="progress-bar" style="margin-top: 0.5rem;">
                                <div class="xp-bar">
                                    <div class="xp-fill" id="teamCProgress" style="width: 0%; background: var(--secondary-color);"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="simulateRAD()">Start RAD Simulation</button>
                    <button class="btn btn-secondary" onclick="resetRAD()">Reset</button>
                </div>
            </div>

            <div class="card">
                <h2>üéØ RAD Characteristics Quiz</h2>
                
                <div class="interactive-area">
                    <p>Select all statements that are true about RAD:</p>
                    
                    <div style="margin: 1rem 0;">
                        <label style="display: block; margin: 0.5rem 0;">
                            <input type="checkbox" id="rad1" value="true"> Fast development
                        </label>
                        <label style="display: block; margin: 0.5rem 0;">
                            <input type="checkbox" id="rad2" value="false"> Requires minimal user involvement
                        </label>
                        <label style="display: block; margin: 0.5rem 0;">
                            <input type="checkbox" id="rad3" value="true"> Uses prototyping
                        </label>
                        <label style="display: block; margin: 0.5rem 0;">
                            <input type="checkbox" id="rad4" value="false"> Best for projects with fixed requirements
                        </label>
                        <label style="display: block; margin: 0.5rem 0;">
                            <input type="checkbox" id="rad5" value="true"> Risk of scope creep
                        </label>
                    </div>
                    
                    <button class="btn btn-primary" onclick="checkRADQuiz()">Check Answers</button>
                    <div id="radQuizFeedback" style="margin-top: 1rem;"></div>
                </div>
                
                <div class="interactive-area highlight">
                    <h3>RAD Model Summary</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                        <div>
                            <h4 style="color: var(--success-color);">‚úÖ Benefits</h4>
                            <ul>
                                <li>Fast development</li>
                                <li>Lower risk of building the wrong product</li>
                                <li>High customer satisfaction</li>
                                <li>Easy to incorporate changes</li>
                                <li>Early problem detection due to prototyping</li>
                            </ul>
                        </div>
                        <div>
                            <h4 style="color: var(--error-color);">‚ùå Drawbacks</h4>
                            <ul>
                                <li>High user involvement needed</li>
                                <li>Not for all projects (e.g., complex systems)</li>
                                <li>Can be expensive due to prototyping</li>
                                <li>Requires skilled developers</li>
                                <li>Risk of scope creep</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="showSection('iterative')">‚Üê Previous</button>
                <button class="btn btn-primary" onclick="showSection('summary')">Next ‚Üí</button>
            </div>
        </section>

        <!-- Summary Quiz Section -->
        <section id="summary" class="section-container">
            <div class="card">
                <h2>üìù Summary Quiz</h2>
                <p>Test your understanding of the Program Development Life Cycle concepts covered in this lesson.</p>
                
                <div class="interactive-area">
                    <h3>Question 1</h3>
                    <p>Which stage of the PDLC involves creating flowcharts and pseudocode?</p>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q1', 'design')">Analysis</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q1', 'design')">Design</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q1', 'design')">Coding</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q1', 'design')">Testing</button>
                </div>
                
                <div class="interactive-area">
                    <h3>Question 2</h3>
                    <p>What is a key characteristic of the Waterfall model?</p>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q2', 'linear')">Parallel development of modules</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q2', 'linear')">Continuous client feedback</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q2', 'linear')">Linear sequential approach</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q2', 'linear')">Rapid prototyping</button>
                </div>
                
                <div class="interactive-area">
                    <h3>Question 3</h3>
                    <p>Which development model has the highest risk of scope creep?</p>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q3', 'rad')">Waterfall</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q3', 'rad')">Iterative</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q3', 'rad')">RAD</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q3', 'rad')">Sequential</button>
                </div>
                
                <div class="interactive-area">
                    <h3>Question 4</h3>
                    <p>During which stage is a feasibility study typically produced?</p>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q4', 'analysis')">Analysis</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q4', 'analysis')">Design</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q4', 'analysis')">Implementation</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q4', 'analysis')">Maintenance</button>
                </div>
                
                <div class="interactive-area">
                    <h3>Question 5</h3>
                    <p>What is NOT a benefit of the Iterative model?</p>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q5', 'simple')">Lower risk of project failure</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q5', 'simple')">Simple for small projects</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q5', 'simple')">Continuous testing</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q5', 'simple')">Easy to accommodate changes</button>
                </div>
                
                <div class="interactive-area">
                    <h3>Question 6</h3>
                    <p>Which statement about maintenance is correct?</p>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q6', 'after')">It only happens before deployment</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q6', 'after')">It ensures the program continues to work after release</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q6', 'after')">It's not needed in modern development</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q6', 'after')">It only involves fixing bugs</button>
                </div>
                
                <div class="interactive-area">
                    <h3>Question 7</h3>
                    <p>RAD stands for:</p>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q7', 'rapid')">Random Application Development</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q7', 'rapid')">Rapid Application Development</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q7', 'rapid')">Rational Application Design</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q7', 'rapid')">Regular Application Deployment</button>
                </div>
                
                <div class="interactive-area">
                    <h3>Question 8</h3>
                    <p>Which model works best for projects with well-defined, unchanging requirements?</p>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q8', 'waterfall')">RAD</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q8', 'waterfall')">Iterative</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q8', 'waterfall')">Waterfall</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q8', 'waterfall')">Agile</button>
                </div>
                
                <button class="btn btn-primary" onclick="checkSummaryQuiz()" style="margin-top: 2rem;">Submit Quiz</button>
                <div id="summaryQuizResult" style="margin-top: 1rem;"></div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="showSection('rad')">‚Üê Previous</button>
                <button class="btn btn-primary" onclick="showSection('exam')">Next ‚Üí</button>
            </div>
        </section>

        <!-- Exam Practice Section -->
        <section id="exam" class="section-container">
            <div class="card">
                <h2>üìã Exam Practice Questions</h2>
                <p>Practice with past paper style questions. Enter your predicted marks before viewing the mark scheme.</p>
                
                <div class="interactive-area">
                    <h3>Question 1 (6 marks)</h3>
                    <p>Describe three stages of the Program Development Life Cycle and explain what documentation is produced in each stage.</p>
                    
                    <textarea id="examAnswer1" rows="10" placeholder="Write your answer here..."></textarea>
                    
                    <div style="margin-top: 1rem;">
                        <label>Predicted marks (out of 6): 
                            <input type="number" id="marks1" min="0" max="6" style="width: 60px;">
                        </label>
                        <button class="btn btn-secondary" onclick="showMarkScheme(1)">Show Mark Scheme</button>
                    </div>
                    
                    <div class="mark-scheme" id="markScheme1">
                        <h4>Mark Scheme:</h4>
                        <p><strong>1 mark for naming each stage (max 3 marks)</strong></p>
                        <p><strong>1 mark for documentation/description of each stage (max 3 marks)</strong></p>
                        <ul>
                            <li>Analysis - Problem definition, requirements specification, feasibility study</li>
                            <li>Design - Algorithms/flowcharts, data structure plans, UI designs, test plans</li>
                            <li>Coding - Source code, comments, technical documentation</li>
                            <li>Testing - Test results, bug reports, test logs</li>
                            <li>Maintenance - Update logs, patch notes, user feedback reports</li>
                        </ul>
                    </div>
                </div>
                
                <div class="interactive-area">
                    <h3>Question 2 (4 marks)</h3>
                    <p>Compare the Waterfall model and RAD model, giving one advantage and one disadvantage of each.</p>
                    
                    <textarea id="examAnswer2" rows="8" placeholder="Write your answer here..."></textarea>
                    
                    <div style="margin-top: 1rem;">
                        <label>Predicted marks (out of 4): 
                            <input type="number" id="marks2" min="0" max="4" style="width: 60px;">
                        </label>
                        <button class="btn btn-secondary" onclick="showMarkScheme(2)">Show Mark Scheme</button>
                    </div>
                    
                    <div class="mark-scheme" id="markScheme2">
                        <h4>Mark Scheme:</h4>
                        <p><strong>1 mark for each valid point (max 4 marks)</strong></p>
                        <p>Waterfall advantage: Simple to understand/manage, clear deliverables, works well for small projects</p>
                        <p>Waterfall disadvantage: Inflexible, late delivery of working software, difficult to change</p>
                        <p>RAD advantage: Fast development, high customer satisfaction, early problem detection</p>
                        <p>RAD disadvantage: Expensive, requires high user involvement, risk of scope creep</p>
                    </div>
                </div>
                
                <div class="canvas-container">
                    <h3>Rough Work Canvas</h3>
                    <canvas id="drawingCanvas" width="600" height="300"></canvas>
                    <div class="canvas-controls">
                        <button class="btn btn-secondary" onclick="clearCanvas()">Clear</button>
                    </div>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="showSection('summary')">‚Üê Previous</button>
                <button class="btn btn-primary" onclick="showSection('extension')">Next ‚Üí</button>
            </div>
        </section>

        <!-- Extension Section -->
        <section id="extension" class="section-container">
            <div class="card">
                <h2>üåü Extension Activities</h2>
                <p>Go beyond the specification with these challenging tasks:</p>
                
                <div class="interactive-area">
                    <h3>Research Task: Hybrid Models</h3>
                    <p>Research and describe a hybrid development model that combines elements of different PDLC approaches. Examples might include Spiral model, V-model, or DevOps practices.</p>
                    
                    <textarea id="extensionAnswer1" rows="6" placeholder="Describe your chosen hybrid model..."></textarea>
                </div>
                
                <div class="interactive-area">
                    <h3>Application Task: Choose the Right Model</h3>
                    <p>You've been hired as a consultant for three different projects. Recommend the most suitable development model for each and justify your choice:</p>
                    
                    <ol>
                        <li>A banking system handling millions of transactions daily</li>
                        <li>A startup's MVP (Minimum Viable Product) for a fitness app</li>
                        <li>A school management system with evolving requirements</li>
                    </ol>
                    
                    <textarea id="extensionAnswer2" rows="8" placeholder="Write your recommendations..."></textarea>
                </div>
                
                <button class="btn btn-primary" onclick="submitExtension()">Submit Extension Work</button>
                <div id="extensionFeedback" style="margin-top: 1rem;"></div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="showSection('exam')">‚Üê Previous</button>
                <button class="btn btn-primary" onclick="showSection('videos')">Next ‚Üí</button>
            </div>
        </section>

        <!-- Videos Section -->
        <section id="videos" class="section-container">
            <div class="card">
                <h2>üé• Video Resources</h2>
                <p>Additional video resources will be added here by your teacher to support your learning.</p>
                
                <div class="interactive-area" style="text-align: center; padding: 4rem;">
                    <p style="font-size: 3rem;">üìπ</p>
                    <p>Video content placeholder - check back later for updates!</p>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="showSection('extension')">‚Üê Previous</button>
                <button class="btn btn-primary" onclick="showSection('intro')">Start Over</button>
            </div>
        </section>
    </main>

    <!-- Achievement Popup -->
    <div class="achievement-popup" id="achievementPopup">
        <h3>üèÜ Achievement Unlocked!</h3>
        <p id="achievementText"></p>
    </div>

    <!-- Shame Message -->
    <div class="shame-message" id="shameMessage">
        <h2>üö´ No Pasting Allowed!</h2>
        <p>Do your own work! You've lost 10 XP.</p>
    </div>

    <!-- Feedback Button -->
    <button class="feedback-btn" onclick="openFeedback()" aria-label="Send Feedback">
        üí¨
    </button>

    <!-- Feedback Modal -->
    <div class="feedback-modal" id="feedbackModal">
        <div class="feedback-content">
            <h3>Send Feedback</h3>
            <p>Found a bug or have a suggestion? Let us know!</p>
            <p>Current page: <span id="currentPageFeedback"></span></p>
            <textarea class="feedback-textarea" id="feedbackText" placeholder="Describe the issue or suggestion..."></textarea>
            <div style="margin-top: 1rem;">
                <button class="btn btn-primary" onclick="sendFeedback()">Send</button>
                <button class="btn btn-secondary" onclick="closeFeedback()">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        // Game State
        let gameState = {
            currentSection: 'intro',
            xp: 0,
            level: 1,
            completedActivities: new Set(),
            selectedStage: null,
            selectedDesc: null,
            currentPDLCStage: 0,
            waterfallStage: 0,
            iterationCount: 1,
            quizAnswers: {},
            achievements: {
                firstActivity: false,
                allStagesExplored: false,
                perfectQuiz: false,
                extensionComplete: false,
                level5: false
            }
        };

        // XP Requirements per level
        const xpRequirements = [0, 100, 250, 450, 700, 1000];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeCanvas();
            updateXPDisplay();
            setupPasteProtection();
            setupKeyboardNavigation();
            setupTouchSupport();
        });

        // Accessibility Functions
        function toggleHighContrast() {
            document.body.classList.toggle('high-contrast');
        }

        function toggleDyslexiaFont() {
            document.body.classList.toggle('dyslexia-font');
        }

        function changeFontSize(size) {
            document.body.classList.remove('font-small', 'font-large', 'font-xlarge');
            if (size !== 'normal') {
                document.body.classList.add('font-' + size);
            }
        }

        // Navigation Functions
        function showSection(sectionId) {
            // Hide all sections
            const sections = document.querySelectorAll('.section-container');
            sections.forEach(section => section.classList.remove('active'));
            
            // Show selected section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.add('active');
            }
            
            // Update nav pills
            const pills = document.querySelectorAll('.nav-pill');
            pills.forEach(pill => pill.classList.remove('active'));
            
            const activePill = document.querySelector(`.nav-pill[onclick*="${sectionId}"]`);
            if (activePill) {
                activePill.classList.add('active');
            }
            
            // Update game state
            gameState.currentSection = sectionId;
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            // Award XP for visiting new sections
            const activityId = `visit_${sectionId}`;
            if (!gameState.completedActivities.has(activityId)) {
                awardXP(5, 'Section visited');
                gameState.completedActivities.add(activityId);
            }
        }

        // XP and Achievement System
        function awardXP(amount, reason, activityId = null) {
            // Check if activity already completed
            if (activityId && gameState.completedActivities.has(activityId)) {
                return;
            }
            
            gameState.xp += amount;
            
            if (activityId) {
                gameState.completedActivities.add(activityId);
            }
            
            updateXPDisplay();
            checkLevelUp();
            checkAchievements();
            
            // Show XP gain notification
            showNotification(`+${amount} XP: ${reason}`);
        }

        function updateXPDisplay() {
            const currentLevelEl = document.getElementById('currentLevel');
            const currentXPEl = document.getElementById('currentXP');
            const requiredXPEl = document.getElementById('requiredXP');
            const xpBarEl = document.getElementById('xpBar');
            
            const requiredXP = xpRequirements[gameState.level] || xpRequirements[xpRequirements.length - 1];
            const xpProgress = (gameState.xp / requiredXP) * 100;
            
            currentLevelEl.textContent = gameState.level;
            currentXPEl.textContent = gameState.xp;
            requiredXPEl.textContent = requiredXP;
            xpBarEl.style.width = `${Math.min(xpProgress, 100)}%`;
        }

        function checkLevelUp() {
            const requiredXP = xpRequirements[gameState.level];
            if (gameState.xp >= requiredXP && gameState.level < 5) {
                gameState.level++;
                showAchievement('Level Up!', `You've reached Level ${gameState.level}!`);
                
                if (gameState.level === 5) {
                    gameState.achievements.level5 = true;
                    showAchievement('Master Developer', 'You\'ve reached the maximum level!');
                }
            }
        }

        function checkAchievements() {
            // First Activity
            if (!gameState.achievements.firstActivity && gameState.completedActivities.size > 0) {
                gameState.achievements.firstActivity = true;
                showAchievement('First Steps', 'Completed your first activity!');
                awardXP(20, 'Achievement bonus');
            }
            
            // All Stages Explored
            if (!gameState.achievements.allStagesExplored && gameState.currentPDLCStage === 4) {
                gameState.achievements.allStagesExplored = true;
                showAchievement('Explorer', 'Explored all PDLC stages!');
                awardXP(50, 'Achievement bonus');
            }
        }

        function showAchievement(title, description) {
            const popup = document.getElementById('achievementPopup');
            const text = document.getElementById('achievementText');
            
            text.innerHTML = `<strong>${title}</strong><br>${description}`;
            popup.classList.add('show');
            
            setTimeout(() => {
                popup.classList.remove('show');
            }, 3000);
        }

        function showNotification(message) {
            // Create a simple notification for XP gains
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                left: 20px;
                background: var(--success-color);
                color: white;
                padding: 0.5rem 1rem;
                border-radius: 6px;
                animation: fadeIn 0.3s ease;
                z-index: 1000;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 2000);
        }

        // Starter Activity Functions
        function selectMatch(element, type) {
            if (element.classList.contains('matched')) return;
            
            if (type === 'stage') {
                // Deselect other stages
                document.querySelectorAll('.matching-item[onclick*="stage"]').forEach(item => {
                    item.classList.remove('selected');
                });
                element.classList.add('selected');
                gameState.selectedStage = element.dataset.match;
            } else {
                // Deselect other descriptions
                document.querySelectorAll('.matching-item[onclick*="desc"]').forEach(item => {
                    item.classList.remove('selected');
                });
                element.classList.add('selected');
                gameState.selectedDesc = element.dataset.match;
            }
            
            // Check if both selected and match
            if (gameState.selectedStage && gameState.selectedDesc) {
                if (gameState.selectedStage === gameState.selectedDesc) {
                    // Correct match
                    document.querySelector(`.matching-item[data-match="${gameState.selectedStage}"][onclick*="stage"]`).classList.add('matched');
                    document.querySelector(`.matching-item[data-match="${gameState.selectedDesc}"][onclick*="desc"]`).classList.add('matched');
                    
                    awardXP(10, 'Correct match', `match_${gameState.selectedStage}`);
                    
                    // Check if all matched
                    const unmatched = document.querySelectorAll('.matching-item:not(.matched)');
                    if (unmatched.length === 0) {
                        awardXP(25, 'All matches complete', 'starter_complete');
                        document.getElementById('matchingFeedback').innerHTML = 
                            '<p style="color: var(--success-color);">Excellent! All matches are correct!</p>';
                    }
                } else {
                    // Incorrect match
                    setTimeout(() => {
                        document.querySelectorAll('.matching-item.selected').forEach(item => {
                            item.classList.remove('selected');
                            item.classList.add('shake');
                            setTimeout(() => item.classList.remove('shake'), 500);
                        });
                    }, 300);
                }
                
                // Reset selections
                gameState.selectedStage = null;
                gameState.selectedDesc = null;
            }
        }

        function checkMatching() {
            const matched = document.querySelectorAll('.matching-item.matched').length;
            const total = document.querySelectorAll('.matching-item').length;
            
            if (matched === total) {
                document.getElementById('matchingFeedback').innerHTML = 
                    '<p style="color: var(--success-color);">Perfect! You\'ve matched all stages correctly!</p>';
            } else {
                document.getElementById('matchingFeedback').innerHTML = 
                    `<p style="color: var(--warning-color);">You've matched ${matched/2} out of 5 stages correctly. Keep trying!</p>`;
            }
        }

        function resetMatching() {
            document.querySelectorAll('.matching-item').forEach(item => {
                item.classList.remove('selected', 'matched');
            });
            gameState.selectedStage = null;
            gameState.selectedDesc = null;
            document.getElementById('matchingFeedback').innerHTML = '';
        }

        // PDLC Stages Functions
        function nextStage() {
            const stages = ['analysis', 'design', 'coding', 'testing', 'maintenance'];
            
            if (gameState.currentPDLCStage < stages.length - 1) {
                // Deactivate current stage
                document.getElementById(`stage-${stages[gameState.currentPDLCStage]}`).classList.remove('active');
                document.getElementById(`stage-${stages[gameState.currentPDLCStage]}`).classList.add('completed');
                
                // Activate next stage
                gameState.currentPDLCStage++;
                document.getElementById(`stage-${stages[gameState.currentPDLCStage]}`).classList.add('active');
                
                awardXP(5, 'Stage explored', `stage_${stages[gameState.currentPDLCStage]}`);
            }
        }

        function previousStage() {
            const stages = ['analysis', 'design', 'coding', 'testing', 'maintenance'];
            
            if (gameState.currentPDLCStage > 0) {
                // Deactivate current stage
                document.getElementById(`stage-${stages[gameState.currentPDLCStage]}`).classList.remove('active');
                
                // Activate previous stage
                gameState.currentPDLCStage--;
                document.getElementById(`stage-${stages[gameState.currentPDLCStage]}`).classList.add('active');
                document.getElementById(`stage-${stages[gameState.currentPDLCStage]}`).classList.remove('completed');
            }
        }

        function checkBlanks() {
            const answers = {
                'blank1': 'analysis',
                'blank2': 'design',
                'blank3': 'maintenance'
            };
            
            let correct = 0;
            let total = Object.keys(answers).length;
            
            for (let [id, answer] of Object.entries(answers)) {
                const select = document.getElementById(id);
                if (select.value === answer) {
                    correct++;
                    select.style.borderColor = 'var(--success-color)';
                } else {
                    select.style.borderColor = 'var(--error-color)';
                }
            }
            
            const feedback = document.getElementById('blanksFeedback');
            if (correct === total) {
                feedback.innerHTML = '<p style="color: var(--success-color);">Perfect! All answers are correct!</p>';
                awardXP(15, 'Fill in blanks complete', 'blanks_complete');
            } else {
                feedback.innerHTML = `<p style="color: var(--warning-color);">You got ${correct} out of ${total} correct. Try again!</p>`;
            }
        }

        // Waterfall Model Functions
        function simulateWaterfall() {
            const stages = document.querySelectorAll('[data-waterfall]');
            let delay = 0;
            
            stages.forEach((stage, index) => {
                setTimeout(() => {
                    if (index > 0) {
                        stages[index - 1].classList.add('completed');
                    }
                    stage.classList.add('active');
                    stage.classList.add('pulse');
                    
                    if (index === stages.length - 1) {
                        setTimeout(() => {
                            awardXP(20, 'Waterfall simulation complete', 'waterfall_sim');
                        }, 500);
                    }
                }, delay);
                delay += 1000;
            });
        }

        function resetWaterfall() {
            document.querySelectorAll('[data-waterfall]').forEach(stage => {
                stage.classList.remove('active', 'completed', 'pulse');
            });
        }

        function selectTrueFalse(button, questionId, correctAnswer) {
            const isCorrect = (button.textContent === 'True' && correctAnswer) || 
                            (button.textContent === 'False' && !correctAnswer);
            
            // Clear other selections
            button.parentElement.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('selected', 'correct', 'incorrect');
            });
            
            button.classList.add('selected');
            gameState.quizAnswers[questionId] = isCorrect;
        }

        function checkTrueFalse() {
            let correct = 0;
            const total = 3;
            
            if (gameState.quizAnswers.wf1 === false) correct++;
            if (gameState.quizAnswers.wf2 === true) correct++;
            if (gameState.quizAnswers.wf3 === false) correct++;
            
            const feedback = document.getElementById('trueFalseFeedback');
            if (correct === total) {
                feedback.innerHTML = '<p style="color: var(--success-color);">Excellent! All answers are correct!</p>';
                awardXP(15, 'True/False complete', 'waterfall_tf');
            } else {
                feedback.innerHTML = `<p style="color: var(--warning-color);">You got ${correct} out of ${total} correct.</p>`;
            }
        }

        // Iterative Model Functions
        function nextIteration() {
            gameState.iterationCount++;
            
            const features = [
                'Basic functionality',
                'Basic functionality + User authentication',
                'Basic functionality + User authentication + Data storage',
                'Basic functionality + User authentication + Data storage + Advanced features',
                'Complete system with all features'
            ];
            
            if (gameState.iterationCount <= features.length) {
                document.getElementById('iterationNumber').textContent = gameState.iterationCount;
                document.getElementById('iterativeFeatures').innerHTML = features[gameState.iterationCount - 1];
                
                awardXP(10, 'Iteration explored', `iteration_${gameState.iterationCount}`);
                
                if (gameState.iterationCount === features.length) {
                    awardXP(25, 'All iterations complete', 'iterative_complete');
                }
            }
        }

        function resetIterative() {
            gameState.iterationCount = 1;
            document.getElementById('iterationNumber').textContent = '1';
            document.getElementById('iterativeFeatures').innerHTML = 'Basic functionality';
        }

        function selectAnswer(button, questionId, correctAnswer) {
            // Clear other selections
            button.parentElement.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            button.classList.add('selected');
            gameState.quizAnswers[questionId] = button.textContent.toLowerCase().includes(correctAnswer);
        }

        function checkScenarios() {
            let correct = 0;
            
            if (gameState.quizAnswers.scenario1 === true) correct++;
            if (gameState.quizAnswers.scenario2 === true) correct++;
            
            const feedback = document.getElementById('scenarioFeedback');
            if (correct === 2) {
                feedback.innerHTML = '<p style="color: var(--success-color);">Perfect! You understand when to use each model!</p>';
                awardXP(20, 'Scenarios complete', 'scenarios_complete');
            } else {
                feedback.innerHTML = `<p style="color: var(--warning-color);">You got ${correct} out of 2 correct. Think about the requirements of each scenario.</p>`;
            }
        }

        // RAD Model Functions
        function simulateRAD() {
            const teams = ['A', 'B', 'C'];
            let intervals = {};
            
            teams.forEach(team => {
                let progress = 0;
                intervals[team] = setInterval(() => {
                    progress += Math.random() * 20 + 10;
                    if (progress >= 100) {
                        progress = 100;
                        clearInterval(intervals[team]);
                        document.getElementById(`team${team}`).classList.add('completed');
                        
                        // Check if all teams complete
                        if (teams.every(t => document.getElementById(`team${t}`).classList.contains('completed'))) {
                            awardXP(25, 'RAD simulation complete', 'rad_sim');
                        }
                    }
                    document.getElementById(`team${team}Progress`).style.width = `${progress}%`;
                }, 200);
            });
        }

        function resetRAD() {
            ['A', 'B', 'C'].forEach(team => {
                document.getElementById(`team${team}Progress`).style.width = '0%';
                document.getElementById(`team${team}`).classList.remove('completed');
            });
        }

        function checkRADQuiz() {
            const checkboxes = {
                'rad1': true,
                'rad2': false,
                'rad3': true,
                'rad4': false,
                'rad5': true
            };
            
            let correct = 0;
            let total = Object.keys(checkboxes).length;
            
            for (let [id, shouldBeChecked] of Object.entries(checkboxes)) {
                const checkbox = document.getElementById(id);
                if (checkbox.checked === shouldBeChecked) {
                    correct++;
                }
            }
            
            const feedback = document.getElementById('radQuizFeedback');
            if (correct === total) {
                feedback.innerHTML = '<p style="color: var(--success-color);">Excellent! You understand RAD characteristics!</p>';
                awardXP(20, 'RAD quiz complete', 'rad_quiz');
            } else {
                feedback.innerHTML = `<p style="color: var(--warning-color);">You got ${correct} out of ${total} correct.</p>`;
            }
        }

        // Summary Quiz Functions
        function selectQuizAnswer(button, questionId, correctAnswer) {
            // Clear other selections
            button.parentElement.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            button.classList.add('selected');
            gameState.quizAnswers[questionId] = button.textContent.toLowerCase().includes(correctAnswer);
        }

        function checkSummaryQuiz() {
            const answers = {
                'q1': 'design',
                'q2': 'linear',
                'q3': 'rad',
                'q4': 'analysis',
                'q5': 'simple',
                'q6': 'after',
                'q7': 'rapid',
                'q8': 'waterfall'
            };
            
            let correct = 0;
            let total = Object.keys(answers).length;
            
            for (let [questionId, correctAnswer] of Object.entries(answers)) {
                if (gameState.quizAnswers[questionId] === true) {
                    correct++;
                }
            }
            
            const result = document.getElementById('summaryQuizResult');
            const percentage = Math.round((correct / total) * 100);
            
            result.innerHTML = `
                <h3>Quiz Results</h3>
                <p>You scored ${correct} out of ${total} (${percentage}%)</p>
                ${percentage === 100 ? '<p style="color: var(--success-color);">Perfect score! Excellent work!</p>' : 
                  percentage >= 75 ? '<p style="color: var(--success-color);">Great job! You have a good understanding.</p>' :
                  percentage >= 50 ? '<p style="color: var(--warning-color);">Good effort! Review the topics you found challenging.</p>' :
                  '<p style="color: var(--error-color);">Keep studying! Review the lesson and try again.</p>'}
            `;
            
            awardXP(correct * 5, 'Summary quiz', 'summary_quiz');
            
            if (percentage === 100) {
                gameState.achievements.perfectQuiz = true;
                showAchievement('Quiz Master', 'Perfect score on the summary quiz!');
                awardXP(30, 'Perfect quiz bonus');
            }
        }

        // Exam Practice Functions
        function showMarkScheme(questionNumber) {
            const answer = document.getElementById(`examAnswer${questionNumber}`);
            const marks = document.getElementById(`marks${questionNumber}`);
            const scheme = document.getElementById(`markScheme${questionNumber}`);
            
            // Check if answer is sufficient
            if (answer.value.length < 50) {
                alert('Please write a more detailed answer before viewing the mark scheme.');
                return;
            }
            
            if (!marks.value) {
                alert('Please enter your predicted marks first.');
                return;
            }
            
            scheme.classList.add('show');
            awardXP(15, 'Exam practice', `exam_q${questionNumber}`);
        }

        // Extension Functions
        function submitExtension() {
            const answer1 = document.getElementById('extensionAnswer1').value;
            const answer2 = document.getElementById('extensionAnswer2').value;
            
            if (answer1.length < 100 || answer2.length < 100) {
                alert('Please provide more detailed answers for the extension tasks.');
                return;
            }
            
            const feedback = document.getElementById('extensionFeedback');
            feedback.innerHTML = '<p style="color: var(--success-color);">Extension work submitted! Your teacher will review your answers.</p>';
            
            awardXP(50, 'Extension complete', 'extension_complete');
            gameState.achievements.extensionComplete = true;
            showAchievement('Going Beyond', 'Completed extension activities!');
        }

        // Canvas Functions
        function initializeCanvas() {
            const canvas = document.getElementById('drawingCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            let isDrawing = false;
            let lastX = 0;
            let lastY = 0;
            
            function startDrawing(e) {
                isDrawing = true;
                const rect = canvas.getBoundingClientRect();
                
                if (e.touches) {
                    lastX = e.touches[0].clientX - rect.left;
                    lastY = e.touches[0].clientY - rect.top;
                } else {
                    lastX = e.clientX - rect.left;
                    lastY = e.clientY - rect.top;
                }
            }
            
            function draw(e) {
                if (!isDrawing) return;
                
                const rect = canvas.getBoundingClientRect();
                let currentX, currentY;
                
                if (e.touches) {
                    currentX = e.touches[0].clientX - rect.left;
                    currentY = e.touches[0].clientY - rect.top;
                } else {
                    currentX = e.clientX - rect.left;
                    currentY = e.clientY - rect.top;
                }
                
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(currentX, currentY);
                ctx.strokeStyle = '#2c3e50';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                lastX = currentX;
                lastY = currentY;
            }
            
            function stopDrawing() {
                isDrawing = false;
            }
            
            // Mouse events
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            // Touch events
            canvas.addEventListener('touchstart', startDrawing, { passive: false });
            canvas.addEventListener('touchmove', draw, { passive: false });
            canvas.addEventListener('touchend', stopDrawing);
        }

        function clearCanvas() {
            const canvas = document.getElementById('drawingCanvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        // Feedback System
        function openFeedback() {
            const modal = document.getElementById('feedbackModal');
            const currentPage = document.getElementById('currentPageFeedback');
            
            modal.style.display = 'flex';
            currentPage.textContent = gameState.currentSection;
        }

        function closeFeedback() {
            document.getElementById('feedbackModal').style.display = 'none';
            document.getElementById('feedbackText').value = '';
        }

        function sendFeedback() {
            const feedbackText = document.getElementById('feedbackText').value;
            
            if (!feedbackText.trim()) {
                alert('Please enter your feedback before sending.');
                return;
            }
            
            const subject = 'PDLC Worksheet Feedback';
            const body = `Page: ${gameState.currentSection}\n\nFeedback: ${feedbackText}`;
            
            window.location.href = `mailto:millingtond@mgs.org?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            
            closeFeedback();
            awardXP(10, 'Feedback sent', 'feedback');
        }

        // Paste Protection
        function setupPasteProtection() {
            document.addEventListener('paste', function(e) {
                e.preventDefault();
                
                const shameMessage = document.getElementById('shameMessage');
                shameMessage.classList.add('show');
                
                // Deduct XP
                gameState.xp = Math.max(0, gameState.xp - 10);
                updateXPDisplay();
                
                setTimeout(() => {
                    shameMessage.classList.remove('show');
                }, 3000);
                
                return false;
            });
        }

        // Keyboard Navigation
        function setupKeyboardNavigation() {
            document.addEventListener('keydown', function(e) {
                // Arrow key navigation
                if (e.key === 'ArrowLeft') {
                    const prevButton = document.querySelector('.nav-buttons .btn-secondary:not([disabled])');
                    if (prevButton) prevButton.click();
                } else if (e.key === 'ArrowRight') {
                    const nextButton = document.querySelector('.nav-buttons .btn-primary');
                    if (nextButton) nextButton.click();
                }
                
                // Tab navigation for accessibility
                if (e.key === 'Tab') {
                    // Allow default tab behavior
                }
            });
        }

        // Touch Support
        function setupTouchSupport() {
            let touchStartX = 0;
            let touchEndX = 0;
            
            document.addEventListener('touchstart', function(e) {
                touchStartX = e.changedTouches[0].screenX;
            }, false);
            
            document.addEventListener('touchend', function(e) {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            }, false);
            
            function handleSwipe() {
                if (touchEndX < touchStartX - 50) {
                    // Swipe left - next section
                    const nextButton = document.querySelector('.nav-buttons .btn-primary');
                    if (nextButton) nextButton.click();
                }
                if (touchEndX > touchStartX + 50) {
                    // Swipe right - previous section
                    const prevButton = document.querySelector('.nav-buttons .btn-secondary:not([disabled])');
                    if (prevButton) prevButton.click();
                }
            }
        }
    </script>
</body>
</html>