<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Organization Types - A Level Computer Science</title>
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #ec4899;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1f2937;
            --light: #f3f4f6;
            --white: #ffffff;
            --shadow: rgba(0, 0, 0, 0.1);
            --glass: rgba(255, 255, 255, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--dark);
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Styles */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, var(--primary), var(--secondary), var(--primary));
            opacity: 0.1;
            animation: gradient-shift 15s ease infinite;
        }

        @keyframes gradient-shift {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(180deg); }
        }

        h1 {
            font-size: 2.5em;
            color: var(--primary);
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .subtitle {
            color: var(--dark);
            opacity: 0.8;
            font-size: 1.2em;
            position: relative;
            z-index: 1;
        }

        /* XP and Level System */
        .progress-container {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            position: relative;
            z-index: 1;
        }

        .xp-bar {
            flex: 1;
            background: var(--light);
            border-radius: 15px;
            padding: 15px;
            box-shadow: inset 0 2px 4px var(--shadow);
        }

        .xp-label {
            font-weight: bold;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
        }

        .xp-progress {
            width: 100%;
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .xp-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            width: 0%;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .xp-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shine 2s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .level-badge {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 15px 25px;
            border-radius: 15px;
            font-weight: bold;
            font-size: 1.2em;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
            transform: translateZ(0);
            will-change: transform;
        }

        /* Navigation */
        .nav-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px var(--shadow);
            position: sticky;
            top: 20px;
            z-index: 100;
        }

        .nav-tabs {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding-bottom: 5px;
        }

        .nav-tab {
            padding: 10px 20px;
            background: var(--light);
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .nav-tab:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(99, 102, 241, 0.3);
        }

        .nav-tab.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 5px 15px rgba(99, 102, 241, 0.3);
        }

        .nav-tab.completed::after {
            content: 'âœ“';
            position: absolute;
            top: 5px;
            right: 5px;
            background: var(--success);
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        /* Section Styles */
        .section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px var(--shadow);
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
        }

        .section.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .section h2 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 2em;
            border-bottom: 3px solid var(--primary);
            padding-bottom: 10px;
        }

        .section h3 {
            color: var(--primary-dark);
            margin: 20px 0 10px;
            font-size: 1.5em;
        }

        /* Task Styles */
        .task {
            background: var(--light);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border-left: 5px solid var(--primary);
            position: relative;
            overflow: hidden;
        }

        .task::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.5s ease;
        }

        .task.completed::before {
            transform: scaleX(1);
        }

        /* Buttons */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--secondary), #d946ef);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #059669);
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning), #d97706);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #dc2626);
        }

        /* Input Styles */
        .input-group {
            margin: 15px 0;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: var(--dark);
        }

        .input-group input[type="text"],
        .input-group input[type="number"],
        .input-group textarea,
        .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
        }

        .input-group input:focus,
        .input-group textarea:focus,
        .input-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        /* Quiz Styles */
        .quiz-option {
            display: block;
            width: 100%;
            text-align: left;
            padding: 15px;
            margin: 10px 0;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .quiz-option:hover {
            border-color: var(--primary);
            transform: translateX(5px);
            box-shadow: 0 5px 15px var(--shadow);
        }

        .quiz-option.selected {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .quiz-option.correct {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }

        .quiz-option.incorrect {
            background: var(--danger);
            color: white;
            border-color: var(--danger);
        }

        /* Drag and Drop Styles */
        .drag-container {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .drag-item {
            padding: 12px 20px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
            box-shadow: 0 4px 10px rgba(99, 102, 241, 0.3);
        }

        .drag-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(99, 102, 241, 0.4);
        }

        .drag-item.selected {
            background: var(--secondary);
            transform: scale(1.05);
        }

        .drop-zone {
            min-height: 100px;
            padding: 20px;
            border: 2px dashed var(--primary);
            border-radius: 15px;
            background: rgba(99, 102, 241, 0.05);
            margin: 10px 0;
            transition: all 0.3s ease;
        }

        .drop-zone.active {
            background: rgba(99, 102, 241, 0.1);
            border-color: var(--secondary);
            transform: scale(1.02);
        }

        .dropped-item {
            display: inline-block;
            padding: 8px 16px;
            background: var(--primary);
            color: white;
            border-radius: 8px;
            margin: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        /* Simulation Styles */
        .simulation {
            background: var(--dark);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .simulation::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(99, 102, 241, 0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .sim-controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .file-record {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .file-record:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateX(5px);
        }

        .file-record.highlight {
            background: rgba(99, 102, 241, 0.3);
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.5);
        }

        /* Achievement Popup */
        .achievement-popup {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, var(--success), #059669);
            color: white;
            padding: 20px 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.4);
            transform: translateY(150%);
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 1000;
            max-width: 300px;
        }

        .achievement-popup.show {
            transform: translateY(0);
        }

        .achievement-popup h4 {
            margin-bottom: 5px;
            font-size: 1.2em;
        }

        /* XP Float Animation */
        .xp-float {
            position: fixed;
            color: var(--success);
            font-weight: bold;
            font-size: 1.5em;
            pointer-events: none;
            animation: float-up 2s ease-out forwards;
            z-index: 1000;
        }

        @keyframes float-up {
            0% {
                opacity: 1;
                transform: translateY(0);
            }
            100% {
                opacity: 0;
                transform: translateY(-100px);
            }
        }

        /* Canvas Styles */
        .canvas-container {
            background: white;
            border: 2px solid var(--primary);
            border-radius: 15px;
            padding: 10px;
            margin: 20px 0;
            box-shadow: 0 5px 15px var(--shadow);
        }

        #drawingCanvas {
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            cursor: crosshair;
            touch-action: none;
            width: 100%;
            max-width: 600px;
            height: 300px;
        }

        .canvas-controls {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        /* Mark Scheme */
        .mark-scheme {
            background: rgba(99, 102, 241, 0.05);
            border: 2px solid var(--primary);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            display: none;
        }

        .mark-scheme.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Feedback Button */
        .feedback-btn {
            position: fixed;
            bottom: 30px;
            left: 30px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 12px 20px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px var(--shadow);
            z-index: 999;
        }

        .feedback-btn:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(99, 102, 241, 0.3);
        }

        /* Feedback Modal */
        .feedback-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            backdrop-filter: blur(5px);
        }

        .feedback-modal.show {
            display: flex;
        }

        .feedback-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 20px;
        }

        .nav-arrow {
            padding: 12px 30px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
        }

        .nav-arrow:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
        }

        .nav-arrow:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Reset Button */
        .reset-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--warning);
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }

        .reset-btn:hover {
            background: #d97706;
            transform: scale(1.05);
        }

        /* No Paste Warning */
        .no-paste-warning {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--danger);
            color: white;
            padding: 20px 40px;
            border-radius: 15px;
            font-weight: bold;
            display: none;
            z-index: 3000;
            box-shadow: 0 10px 30px rgba(239, 68, 68, 0.5);
            animation: shake 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translate(-50%, -50%) rotate(0); }
            25% { transform: translate(-50%, -50%) rotate(-5deg); }
            75% { transform: translate(-50%, -50%) rotate(5deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            h1 {
                font-size: 2em;
            }

            .section {
                padding: 20px;
            }

            .drag-container {
                flex-direction: column;
            }

            .nav-tabs {
                flex-wrap: nowrap;
                overflow-x: scroll;
                -webkit-overflow-scrolling: touch;
            }

            .feedback-btn {
                bottom: 20px;
                left: 20px;
                padding: 10px 15px;
                font-size: 0.9em;
            }

            .achievement-popup {
                right: 20px;
                left: 20px;
                max-width: none;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Particle Effect */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: 1;
        }

        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            animation: particle-float 10s infinite ease-in-out;
        }

        @keyframes particle-float {
            0%, 100% {
                transform: translateY(0) translateX(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-1000px) translateX(100px);
                opacity: 0;
            }
        }

        /* Hint System */
        .hint-container {
            margin: 10px 0;
        }

        .hint-btn {
            background: var(--warning);
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .hint-btn:hover {
            background: #d97706;
            transform: scale(1.05);
        }

        .hint-text {
            background: rgba(245, 158, 11, 0.1);
            border-left: 4px solid var(--warning);
            padding: 10px 15px;
            margin-top: 10px;
            border-radius: 8px;
            display: none;
        }

        .hint-text.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        /* Table Styles */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px var(--shadow);
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background: var(--primary);
            color: white;
            font-weight: bold;
        }

        tr:hover {
            background: rgba(99, 102, 241, 0.05);
        }

        /* Code Block Styles */
        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            font-family: 'Consolas', 'Monaco', monospace;
            overflow-x: auto;
            position: relative;
        }

        .code-block::before {
            content: 'CODE';
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--primary);
            color: white;
            padding: 4px 12px;
            border-radius: 5px;
            font-size: 0.8em;
            font-weight: bold;
        }

        /* Animation for correct answers */
        @keyframes correct-pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .correct-animation {
            animation: correct-pulse 0.5s ease;
        }

        /* Error message styles */
        .error-message {
            background: rgba(239, 68, 68, 0.1);
            border-left: 4px solid var(--danger);
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 8px;
            color: var(--danger);
            display: none;
        }

        .error-message.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        /* Success message styles */
        .success-message {
            background: rgba(16, 185, 129, 0.1);
            border-left: 4px solid var(--success);
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 8px;
            color: var(--success);
            display: none;
        }

        .success-message.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="particles" id="particles"></div>
    
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>File Organization Types</h1>
            <p class="subtitle">A Level Computer Science - Cambridge 9618</p>
            
            <div class="progress-container">
                <div class="xp-bar">
                    <div class="xp-label">
                        <span>Experience Points</span>
                        <span id="xpText">0 / 100 XP</span>
                    </div>
                    <div class="xp-progress">
                        <div class="xp-fill" id="xpFill"></div>
                    </div>
                </div>
                <div class="level-badge" id="levelBadge">Level 0</div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="nav-container">
            <div class="nav-tabs">
                <button class="nav-tab active" data-section="starter">Starter</button>
                <button class="nav-tab" data-section="text-binary">Text vs Binary</button>
                <button class="nav-tab" data-section="serial">Serial Files</button>
                <button class="nav-tab" data-section="sequential">Sequential Files</button>
                <button class="nav-tab" data-section="random">Random Files</button>
                <button class="nav-tab" data-section="access">Access Methods</button>
                <button class="nav-tab" data-section="practice">Practice Exam</button>
                <button class="nav-tab" data-section="extension">Extension</button>
                <button class="nav-tab" data-section="summary">Summary Quiz</button>
            </div>
        </div>

        <!-- Sections -->
        <!-- Starter Activity -->
        <div class="section active" id="starter">
            <button class="reset-btn" onclick="resetSection('starter')">Reset Section</button>
            <h2>Starter Activity: Test Your Knowledge</h2>
            <p>Let's begin by assessing what you already know about file organization. This will help identify areas to focus on during the lesson.</p>
            
            <div class="task">
                <h3>Quick Assessment Quiz</h3>
                <div id="starterQuiz">
                    <div class="quiz-question" data-question="1">
                        <p><strong>Question 1:</strong> Which of the following best describes a file in computer science?</p>
                        <button class="quiz-option" data-answer="incorrect">A variable stored in RAM</button>
                        <button class="quiz-option" data-answer="correct">A collection of data stored on secondary storage</button>
                        <button class="quiz-option" data-answer="incorrect">A single instruction in a program</button>
                        <button class="quiz-option" data-answer="incorrect">A type of loop structure</button>
                    </div>
                    
                    <div class="quiz-question" data-question="2" style="display: none;">
                        <p><strong>Question 2:</strong> When might you use a file instead of a variable?</p>
                        <button class="quiz-option" data-answer="incorrect">For temporary calculations</button>
                        <button class="quiz-option" data-answer="incorrect">When data is only needed once</button>
                        <button class="quiz-option" data-answer="correct">When data needs to persist after the program ends</button>
                        <button class="quiz-option" data-answer="incorrect">For loop counters</button>
                    </div>
                    
                    <div class="quiz-question" data-question="3" style="display: none;">
                        <p><strong>Question 3:</strong> What is the main difference between sequential and direct access?</p>
                        <button class="quiz-option" data-answer="correct">Sequential reads records in order, direct can jump to any record</button>
                        <button class="quiz-option" data-answer="incorrect">Sequential is faster than direct access</button>
                        <button class="quiz-option" data-answer="incorrect">Direct access only works with text files</button>
                        <button class="quiz-option" data-answer="incorrect">There is no difference</button>
                    </div>
                </div>
                
                <div id="starterResults" style="display: none; margin-top: 20px;">
                    <h4>Assessment Complete!</h4>
                    <p>Score: <span id="starterScore">0</span>/3</p>
                    <p id="starterFeedback"></p>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="nav-arrow" disabled>Previous</button>
                <button class="nav-arrow" onclick="navigateSection('next')">Next</button>
            </div>
        </div>

        <!-- Text vs Binary Files -->
        <div class="section" id="text-binary">
            <button class="reset-btn" onclick="resetSection('text-binary')">Reset Section</button>
            <h2>Text Files vs Binary Files</h2>
            
            <div class="task">
                <h3>Understanding File Types</h3>
                <p>In computer science, we use two main types of files to store data:</p>
                
                <table>
                    <tr>
                        <th>Text Files</th>
                        <th>Binary Files</th>
                    </tr>
                    <tr>
                        <td>Human-readable format</td>
                        <td>Machine-readable format</td>
                    </tr>
                    <tr>
                        <td>Uses character encoding (ASCII, Unicode)</td>
                        <td>Stores raw binary data</td>
                    </tr>
                    <tr>
                        <td>Larger file size</td>
                        <td>More compact storage</td>
                    </tr>
                    <tr>
                        <td>Examples: .txt, .csv, .html</td>
                        <td>Examples: .exe, .jpg, .mp3</td>
                    </tr>
                </table>
            </div>

            <div class="task">
                <h3>Interactive: File Type Categorization</h3>
                <p>Click on a file type, then click the appropriate category. Match all files correctly!</p>
                
                <div class="drag-container">
                    <div class="drag-item" data-type="text">.txt</div>
                    <div class="drag-item" data-type="binary">.exe</div>
                    <div class="drag-item" data-type="text">.csv</div>
                    <div class="drag-item" data-type="binary">.jpg</div>
                    <div class="drag-item" data-type="text">.xml</div>
                    <div class="drag-item" data-type="binary">.mp4</div>
                    <div class="drag-item" data-type="text">.json</div>
                    <div class="drag-item" data-type="binary">.zip</div>
                </div>
                
                <div style="display: flex; gap: 20px; margin-top: 20px;">
                    <div style="flex: 1;">
                        <h4>Text Files</h4>
                        <div class="drop-zone" id="textDrop" data-type="text"></div>
                    </div>
                    <div style="flex: 1;">
                        <h4>Binary Files</h4>
                        <div class="drop-zone" id="binaryDrop" data-type="binary"></div>
                    </div>
                </div>
                
                <button class="btn btn-success" onclick="checkFileCategorization()" style="margin-top: 20px;">Check Answers</button>
                <div id="categorizationFeedback"></div>
            </div>

            <div class="task">
                <h3>Real-World Example</h3>
                <div class="code-block">
# Text file example - storing student records
John,85,A
Sarah,92,A*
Mike,78,B

# Binary file - same data stored more efficiently
01001010 01101111 01101000 01101110 00101100...
                </div>
                
                <div class="hint-container">
                    <button class="hint-btn" onclick="showHint('textBinaryHint')">Need a hint?</button>
                    <div class="hint-text" id="textBinaryHint">
                        Text files are like writing in a notebook - anyone can read them. Binary files are like a secret code that only computers understand efficiently!
                    </div>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="nav-arrow" onclick="navigateSection('prev')">Previous</button>
                <button class="nav-arrow" onclick="navigateSection('next')">Next</button>
            </div>
        </div>

        <!-- Serial Files -->
        <div class="section" id="serial">
            <button class="reset-btn" onclick="resetSection('serial')">Reset Section</button>
            <h2>Serial File Organization</h2>
            
            <div class="task">
                <h3>What are Serial Files?</h3>
                <p>Serial files store records in <strong>chronological order</strong> - the order they were created. Think of it like a diary where you add entries one after another.</p>
                
                <div class="simulation">
                    <h4>Serial File Simulation</h4>
                    <div id="serialFileDisplay">
                        <div class="file-record">Record 1: Transaction at 09:15 - Deposit Â£50</div>
                        <div class="file-record">Record 2: Transaction at 10:30 - Withdrawal Â£20</div>
                        <div class="file-record">Record 3: Transaction at 14:45 - Transfer Â£100</div>
                    </div>
                    
                    <div class="sim-controls">
                        <button class="btn" onclick="addSerialRecord()">Add New Record</button>
                        <button class="btn btn-warning" onclick="searchSerialFile()">Search File</button>
                        <button class="btn btn-secondary" onclick="simulateSerialSteps()">Step Through Search</button>
                    </div>
                    
                    <div id="serialSearchSteps" style="margin-top: 20px;"></div>
                </div>
            </div>

            <div class="task">
                <h3>Fill in the Blanks: Serial File Properties</h3>
                <p>Complete the sentences about serial files. Choose from the options provided.</p>
                
                <div class="input-group">
                    <p>1. Records in a serial file are stored in 
                        <select id="serial1" class="inline-select">
                            <option value="">Choose...</option>
                            <option value="alphabetical">alphabetical</option>
                            <option value="chronological">chronological</option>
                            <option value="random">random</option>
                            <option value="reverse">reverse</option>
                        </select> order.</p>
                </div>
                
                <div class="input-group">
                    <p>2. To find a specific record, you must use a 
                        <select id="serial2" class="inline-select">
                            <option value="">Choose...</option>
                            <option value="binary">binary</option>
                            <option value="linear">linear</option>
                            <option value="quick">quick</option>
                            <option value="hash">hash</option>
                        </select> search.</p>
                </div>
                
                <div class="input-group">
                    <p>3. New records are 
                        <select id="serial3" class="inline-select">
                            <option value="">Choose...</option>
                            <option value="inserted">inserted in the middle</option>
                            <option value="appended">appended to the end</option>
                            <option value="prepended">added to the beginning</option>
                            <option value="sorted">sorted automatically</option>
                        </select> of the file.</p>
                </div>
                
                <button class="btn" onclick="checkSerialBlanks()">Check Answers</button>
                <div id="serialBlanksFeedback"></div>
            </div>

            <div class="task">
                <h3>Advantages vs Disadvantages</h3>
                <p>Match each characteristic to whether it's an advantage or disadvantage of serial files.</p>
                
                <div id="serialProsCons">
                    <div class="drag-container">
                        <div class="drag-item" data-category="advantage">Simple to implement</div>
                        <div class="drag-item" data-category="disadvantage">Slow searching for large files</div>
                        <div class="drag-item" data-category="advantage">No sorting overhead</div>
                        <div class="drag-item" data-category="disadvantage">Inefficient for frequent searches</div>
                        <div class="drag-item" data-category="advantage">Good for transaction logs</div>
                        <div class="drag-item" data-category="disadvantage">Deletion creates gaps</div>
                    </div>
                    
                    <div style="display: flex; gap: 20px; margin-top: 20px;">
                        <div style="flex: 1;">
                            <h4>Advantages</h4>
                            <div class="drop-zone" id="serialAdvantages" data-category="advantage"></div>
                        </div>
                        <div style="flex: 1;">
                            <h4>Disadvantages</h4>
                            <div class="drop-zone" id="serialDisadvantages" data-category="disadvantage"></div>
                        </div>
                    </div>
                </div>
                
                <button class="btn btn-success" onclick="checkSerialProsCons()" style="margin-top: 20px;">Check Categorization</button>
            </div>

            <div class="nav-buttons">
                <button class="nav-arrow" onclick="navigateSection('prev')">Previous</button>
                <button class="nav-arrow" onclick="navigateSection('next')">Next</button>
            </div>
        </div>

        <!-- Sequential Files -->
        <div class="section" id="sequential">
            <button class="reset-btn" onclick="resetSection('sequential')">Reset Section</button>
            <h2>Sequential File Organization</h2>
            
            <div class="task">
                <h3>Understanding Sequential Files</h3>
                <p>Sequential files store records in <strong>logical order based on a key field</strong>. This allows for more efficient searching than serial files.</p>
                
                <div class="simulation">
                    <h4>Sequential File Simulation</h4>
                    <p>Records sorted by Student ID (key field):</p>
                    <div id="sequentialFileDisplay">
                        <div class="file-record" data-key="1001">ID: 1001 - Alice Anderson - Grade: A</div>
                        <div class="file-record" data-key="1005">ID: 1005 - Bob Brown - Grade: B</div>
                        <div class="file-record" data-key="1012">ID: 1012 - Charlie Chen - Grade: A</div>
                        <div class="file-record" data-key="1018">ID: 1018 - Diana Davis - Grade: C</div>
                        <div class="file-record" data-key="1025">ID: 1025 - Eve Evans - Grade: B</div>
                    </div>
                    
                    <div class="sim-controls">
                        <input type="number" id="searchKey" placeholder="Enter Student ID" min="1000" max="2000">
                        <button class="btn" onclick="binarySearchDemo()">Binary Search</button>
                        <button class="btn btn-warning" onclick="linearSearchDemo()">Linear Search</button>
                        <button class="btn btn-secondary" onclick="compareSearchMethods()">Compare Methods</button>
                    </div>
                    
                    <div id="searchComparison" style="margin-top: 20px;"></div>
                </div>
            </div>

            <div class="task">
                <h3>Multiple Choice: Sequential Files</h3>
                <div class="quiz-question">
                    <p><strong>Which search algorithm is most efficient for sequential files?</strong></p>
                    <button class="quiz-option" onclick="checkSequentialMC(this, 'incorrect')">Bubble sort</button>
                    <button class="quiz-option" onclick="checkSequentialMC(this, 'correct')">Binary search</button>
                    <button class="quiz-option" onclick="checkSequentialMC(this, 'incorrect')">Random search</button>
                    <button class="quiz-option" onclick="checkSequentialMC(this, 'incorrect')">Depth-first search</button>
                </div>
                <div id="sequentialMCFeedback"></div>
            </div>

            <div class="task">
                <h3>Scenario Analysis</h3>
                <p>A school needs to store student records. They need to frequently search for students by ID and generate reports in ID order. Should they use serial or sequential organization?</p>
                
                <div class="input-group">
                    <textarea id="scenarioAnswer" rows="4" placeholder="Explain your answer, considering the requirements..."></textarea>
                </div>
                <button class="btn" onclick="checkScenarioAnswer()">Submit Answer</button>
                <div id="scenarioFeedback"></div>
            </div>

            <div class="task">
                <h3>Adding Records to Sequential Files</h3>
                <p>When adding a new record to a sequential file, the entire file must be rewritten to maintain order. Let's simulate this process:</p>
                
                <div class="simulation">
                    <button class="btn" onclick="simulateSequentialInsertion()">Start Insertion Demo</button>
                    <div id="insertionSteps" style="margin-top: 20px;"></div>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="nav-arrow" onclick="navigateSection('prev')">Previous</button>
                <button class="nav-arrow" onclick="navigateSection('next')">Next</button>
            </div>
        </div>

        <!-- Random Files -->
        <div class="section" id="random">
            <button class="reset-btn" onclick="resetSection('random')">Reset Section</button>
            <h2>Random File Organization</h2>
            
            <div class="task">
                <h3>Understanding Random Files and Hashing</h3>
                <p>Random files use a <strong>hashing algorithm</strong> to calculate where records should be stored. This allows direct access to any record!</p>
                
                <div class="simulation">
                    <h4>Hashing Algorithm Demonstration</h4>
                    <p>Simple hash function: <code>location = key % table_size</code></p>
                    
                    <div class="input-group">
                        <label>Enter a key value (1000-9999):</label>
                        <input type="number" id="hashKey" min="1000" max="9999" value="1234">
                        <label>Table size:</label>
                        <input type="number" id="tableSize" value="10" min="5" max="20">
                    </div>
                    
                    <button class="btn" onclick="calculateHash()">Calculate Hash Location</button>
                    
                    <div id="hashResult" style="margin-top: 20px;"></div>
                    
                    <div id="hashTable" style="margin-top: 20px;">
                        <h4>Hash Table Visualization</h4>
                        <div id="hashTableDisplay"></div>
                    </div>
                </div>
            </div>

            <div class="task">
                <h3>Collision Handling</h3>
                <p>What happens when two keys hash to the same location? This is called a <strong>collision</strong>.</p>
                
                <div class="simulation">
                    <h4>Collision Resolution Methods</h4>
                    <button class="btn" onclick="demonstrateOpenAddressing()">Open Addressing Demo</button>
                    <button class="btn btn-secondary" onclick="demonstrateClosedAddressing()">Closed Addressing Demo</button>
                    
                    <div id="collisionDemo" style="margin-top: 20px;"></div>
                </div>
                
                <div class="hint-container">
                    <button class="hint-btn" onclick="showHint('collisionHint')">Need help understanding collisions?</button>
                    <div class="hint-text" id="collisionHint">
                        Think of a hash table like a parking lot. If your calculated spot is taken (collision), open addressing means you look for the next available spot. Closed addressing means you go to an overflow parking area!
                    </div>
                </div>
            </div>

            <div class="task">
                <h3>Practice: Hash Calculations</h3>
                <p>Calculate where these records would be stored using the hash function: <code>location = key % 7</code></p>
                
                <div class="canvas-container">
                    <canvas id="drawingCanvas"></canvas>
                    <div class="canvas-controls">
                        <button class="btn btn-danger" onclick="clearCanvas()">Clear Canvas</button>
                    </div>
                </div>
                
                <table>
                    <tr>
                        <th>Key</th>
                        <th>Your Answer</th>
                        <th>Check</th>
                    </tr>
                    <tr>
                        <td>1015</td>
                        <td><input type="number" id="hash1" min="0" max="6"></td>
                        <td><button class="btn btn-sm" onclick="checkHashAnswer(1015, 'hash1')">âœ“</button></td>
                    </tr>
                    <tr>
                        <td>2034</td>
                        <td><input type="number" id="hash2" min="0" max="6"></td>
                        <td><button class="btn btn-sm" onclick="checkHashAnswer(2034, 'hash2')">âœ“</button></td>
                    </tr>
                    <tr>
                        <td>3021</td>
                        <td><input type="number" id="hash3" min="0" max="6"></td>
                        <td><button class="btn btn-sm" onclick="checkHashAnswer(3021, 'hash3')">âœ“</button></td>
                    </tr>
                </table>
            </div>

            <div class="task">
                <h3>Random Files: Advantages and Disadvantages</h3>
                <p>Rank these characteristics from most advantageous (1) to least advantageous (5) for random file organization:</p>
                
                <div id="rankingTask">
                    <div class="drag-item" data-rank="1">Fastest direct access to records</div>
                    <div class="drag-item" data-rank="5">Can become disorganized with updates</div>
                    <div class="drag-item" data-rank="2">No need to search through multiple records</div>
                    <div class="drag-item" data-rank="4">Cannot be stored on tape</div>
                    <div class="drag-item" data-rank="3">Good for real-time processing</div>
                </div>
                
                <button class="btn btn-success" onclick="checkRanking()" style="margin-top: 20px;">Check Ranking</button>
                <div id="rankingFeedback"></div>
            </div>

            <div class="nav-buttons">
                <button class="nav-arrow" onclick="navigateSection('prev')">Previous</button>
                <button class="nav-arrow" onclick="navigateSection('next')">Next</button>
            </div>
        </div>

        <!-- File Access Methods -->
        <div class="section" id="access">
            <button class="reset-btn" onclick="resetSection('access')">Reset Section</button>
            <h2>File Access Methods</h2>
            
            <div class="task">
                <h3>Sequential vs Direct Access</h3>
                <p>There are two main ways to access records in a file:</p>
                
                <table>
                    <tr>
                        <th>Sequential Access</th>
                        <th>Direct Access</th>
                    </tr>
                    <tr>
                        <td>Read records one after another</td>
                        <td>Jump directly to a specific record</td>
                    </tr>
                    <tr>
                        <td>Like reading a book page by page</td>
                        <td>Like using a book's index</td>
                    </tr>
                    <tr>
                        <td>Used with serial and sequential files</td>
                        <td>Used with sequential (indexed) and random files</td>
                    </tr>
                    <tr>
                        <td>Works with magnetic tape</td>
                        <td>Requires disk storage</td>
                    </tr>
                </table>
            </div>

            <div class="task">
                <h3>Matching Exercise: File Organization and Access</h3>
                <p>Match each file organization type with its compatible access method(s):</p>
                
                <div style="display: flex; gap: 40px; margin-top: 20px;">
                    <div>
                        <h4>File Organizations</h4>
                        <div class="drag-item" data-match="sequential-only">Serial File</div>
                        <div class="drag-item" data-match="both">Sequential File (indexed)</div>
                        <div class="drag-item" data-match="direct-only">Random File</div>
                    </div>
                    
                    <div>
                        <h4>Access Methods</h4>
                        <div class="drop-zone" id="sequentialOnly" data-match="sequential-only">
                            <p>Sequential Access Only</p>
                        </div>
                        <div class="drop-zone" id="directOnly" data-match="direct-only">
                            <p>Direct Access Only</p>
                        </div>
                        <div class="drop-zone" id="both" data-match="both">
                            <p>Both Sequential and Direct</p>
                        </div>
                    </div>
                </div>
                
                <button class="btn btn-success" onclick="checkAccessMatching()" style="margin-top: 20px;">Check Matches</button>
                <div id="accessMatchFeedback"></div>
            </div>

            <div class="task">
                <h3>Case Study: Choosing the Right Method</h3>
                <p>A library system needs to store book records. Analyze these requirements and recommend the best file organization:</p>
                
                <ul>
                    <li>Frequent searches by ISBN (unique book ID)</li>
                    <li>Need to generate alphabetical lists by title</li>
                    <li>Real-time checkout/return updates</li>
                    <li>10,000+ book records</li>
                </ul>
                
                <div class="input-group">
                    <label>Which file organization would you recommend?</label>
                    <select id="caseStudyChoice">
                        <option value="">Choose...</option>
                        <option value="serial">Serial Organization</option>
                        <option value="sequential">Sequential Organization</option>
                        <option value="random">Random Organization</option>
                        <option value="hybrid">Hybrid Approach</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Justify your choice:</label>
                    <textarea id="caseStudyJustification" rows="4" placeholder="Explain why this organization best meets the requirements..."></textarea>
                </div>
                
                <button class="btn" onclick="checkCaseStudy()">Submit Analysis</button>
                <div id="caseStudyFeedback"></div>
            </div>

            <div class="nav-buttons">
                <button class="nav-arrow" onclick="navigateSection('prev')">Previous</button>
                <button class="nav-arrow" onclick="navigateSection('next')">Next</button>
            </div>
        </div>

        <!-- Practice Exam Questions -->
        <div class="section" id="practice">
            <button class="reset-btn" onclick="resetSection('practice')">Reset Section</button>
            <h2>Practice Exam Questions</h2>
            
            <div class="task">
                <h3>Question 1 (4 marks)</h3>
                <p>Explain the difference between serial and sequential file organization. Include one advantage of each.</p>
                
                <div class="input-group">
                    <textarea id="exam1" rows="6" placeholder="Write your answer here..."></textarea>
                    <p style="text-align: right; color: #666;">Word count: <span id="exam1Count">0</span></p>
                </div>
                
                <div class="input-group">
                    <label>Predicted marks (out of 4):</label>
                    <input type="number" id="exam1Marks" min="0" max="4">
                </div>
                
                <button class="btn" onclick="checkExam1()">Show Mark Scheme</button>
                
                <div class="mark-scheme" id="markScheme1">
                    <h4>Mark Scheme (4 marks)</h4>
                    <ul>
                        <li><strong>Serial organization:</strong> Records stored in chronological order / order of creation (1 mark)</li>
                        <li><strong>Sequential organization:</strong> Records stored in logical order based on key field (1 mark)</li>
                        <li><strong>Advantage of serial:</strong> Simple to implement / No sorting overhead / Fast insertion (1 mark)</li>
                        <li><strong>Advantage of sequential:</strong> Faster searching / Can use binary search / Efficient for batch processing (1 mark)</li>
                    </ul>
                </div>
            </div>

            <div class="task">
                <h3>Question 2 (6 marks)</h3>
                <p>A bank uses a random file organization for customer account records.</p>
                <p>(a) Describe how a hashing algorithm is used to store a new customer record. (3 marks)</p>
                <p>(b) Explain what happens when a collision occurs and describe one method to resolve it. (3 marks)</p>
                
                <div class="input-group">
                    <label>Part (a):</label>
                    <textarea id="exam2a" rows="4" placeholder="Describe the hashing process..."></textarea>
                </div>
                
                <div class="input-group">
                    <label>Part (b):</label>
                    <textarea id="exam2b" rows="4" placeholder="Explain collision and resolution..."></textarea>
                </div>
                
                <div class="input-group">
                    <label>Predicted marks (out of 6):</label>
                    <input type="number" id="exam2Marks" min="0" max="6">
                </div>
                
                <button class="btn" onclick="checkExam2()">Show Mark Scheme</button>
                
                <div class="mark-scheme" id="markScheme2">
                    <h4>Mark Scheme (6 marks)</h4>
                    <p><strong>Part (a) - 3 marks:</strong></p>
                    <ul>
                        <li>Hash function applied to key field (1 mark)</li>
                        <li>Result gives memory/storage location (1 mark)</li>
                        <li>Record stored at calculated location (1 mark)</li>
                    </ul>
                    <p><strong>Part (b) - 3 marks:</strong></p>
                    <ul>
                        <li>Collision: when hash produces same location for different keys (1 mark)</li>
                        <li>Resolution method named (open/closed addressing) (1 mark)</li>
                        <li>Description of method (e.g., linear probing, overflow area) (1 mark)</li>
                    </ul>
                </div>
            </div>

            <div class="task">
                <h3>Question 3 (5 marks)</h3>
                <p>Compare the suitability of sequential and random file organization for a real-time airline booking system. Consider speed of access, update requirements, and storage needs.</p>
                
                <div class="input-group">
                    <textarea id="exam3" rows="8" placeholder="Write your comparison..."></textarea>
                    <p style="text-align: right; color: #666;">Word count: <span id="exam3Count">0</span></p>
                </div>
                
                <div class="input-group">
                    <label>Predicted marks (out of 5):</label>
                    <input type="number" id="exam3Marks" min="0" max="5">
                </div>
                
                <button class="btn" onclick="checkExam3()">Show Mark Scheme</button>
                
                <div class="mark-scheme" id="markScheme3">
                    <h4>Mark Scheme (5 marks)</h4>
                    <ul>
                        <li><strong>Speed:</strong> Random faster for individual access / Direct access vs sequential search (1 mark)</li>
                        <li><strong>Updates:</strong> Random better for real-time / No file rewriting needed (1 mark)</li>
                        <li><strong>Storage:</strong> Random may waste space / Sequential more compact (1 mark)</li>
                        <li><strong>Conclusion:</strong> Random more suitable for real-time system (1 mark)</li>
                        <li><strong>Justification:</strong> Speed critical for bookings / Frequent updates needed (1 mark)</li>
                    </ul>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="nav-arrow" onclick="navigateSection('prev')">Previous</button>
                <button class="nav-arrow" onclick="navigateSection('next')">Next</button>
            </div>
        </div>

        <!-- Extension Activities -->
        <div class="section" id="extension">
            <button class="reset-btn" onclick="resetSection('extension')">Reset Section</button>
            <h2>Extension Activities</h2>
            
            <div class="task">
                <h3>Beyond the Specification: Database Indexing</h3>
                <p>Modern databases use sophisticated indexing techniques that build upon the file organization concepts you've learned. Let's explore B-tree indexing!</p>
                
                <div class="simulation">
                    <h4>B-Tree Index Visualization</h4>
                    <p>B-trees allow efficient searching, insertion, and deletion while maintaining balance.</p>
                    <div id="btreeDemo">
                        <!-- Placeholder for B-tree visualization -->
                        <p style="padding: 20px; background: #f0f0f0; border-radius: 10px;">
                            Advanced B-tree visualization would appear here. This structure allows O(log n) operations and is used in many database systems!
                        </p>
                    </div>
                </div>
            </div>

            <div class="task">
                <h3>Research Task: Modern File Systems</h3>
                <p>Research and explain how modern operating systems (like NTFS or ext4) organize files on disk. How do they differ from the simple organizations we've studied?</p>
                
                <div class="input-group">
                    <textarea id="extensionResearch" rows="6" placeholder="Write your research findings here..."></textarea>
                </div>
                
                <button class="btn" onclick="submitExtension()">Submit Research</button>
                <div id="extensionFeedback"></div>
            </div>

            <div class="task">
                <h3>Programming Challenge</h3>
                <p>Design a simple hash function that minimizes collisions for student ID numbers in the range 100000-999999, with a table size of 1000.</p>
                
                <div class="code-block">
function hashStudentID(id) {
    // Your hash function here
    // Hint: Consider using more than just modulo!
    
    
    
    return location;
}
                </div>
                
                <div class="input-group">
                    <label>Explain your approach:</label>
                    <textarea id="hashDesign" rows="4" placeholder="Why did you design your hash function this way?"></textarea>
                </div>
                
                <button class="btn" onclick="checkHashDesign()">Submit Design</button>
            </div>

            <div class="nav-buttons">
                <button class="nav-arrow" onclick="navigateSection('prev')">Previous</button>
                <button class="nav-arrow" onclick="navigateSection('next')">Next</button>
            </div>
        </div>

        <!-- Summary Quiz -->
        <div class="section" id="summary">
            <button class="reset-btn" onclick="resetSection('summary')">Reset Section</button>
            <h2>Summary Quiz</h2>
            <p>Test your understanding of the entire topic. You need 80% to complete the lesson!</p>
            
            <div class="task">
                <div id="summaryQuiz">
                    <div class="quiz-question" data-q="1">
                        <p><strong>1.</strong> Which file type stores data in a human-readable format?</p>
                        <button class="quiz-option" onclick="answerSummary(1, 'correct')">Text file</button>
                        <button class="quiz-option" onclick="answerSummary(1, 'incorrect')">Binary file</button>
                        <button class="quiz-option" onclick="answerSummary(1, 'incorrect')">Random file</button>
                        <button class="quiz-option" onclick="answerSummary(1, 'incorrect')">Sequential file</button>
                    </div>
                    
                    <div class="quiz-question" data-q="2">
                        <p><strong>2.</strong> In which file organization are records stored in chronological order?</p>
                        <button class="quiz-option" onclick="answerSummary(2, 'incorrect')">Random</button>
                        <button class="quiz-option" onclick="answerSummary(2, 'correct')">Serial</button>
                        <button class="quiz-option" onclick="answerSummary(2, 'incorrect')">Sequential</button>
                        <button class="quiz-option" onclick="answerSummary(2, 'incorrect')">Indexed</button>
                    </div>
                    
                    <div class="quiz-question" data-q="3">
                        <p><strong>3.</strong> What is the main advantage of random file organization?</p>
                        <button class="quiz-option" onclick="answerSummary(3, 'incorrect')">Uses less storage space</button>
                        <button class="quiz-option" onclick="answerSummary(3, 'incorrect')">Simple to implement</button>
                        <button class="quiz-option" onclick="answerSummary(3, 'correct')">Fastest direct access</button>
                        <button class="quiz-option" onclick="answerSummary(3, 'incorrect')">No collisions possible</button>
                    </div>
                    
                    <div class="quiz-question" data-q="4">
                        <p><strong>4.</strong> Which search algorithm works best with sequential files?</p>
                        <button class="quiz-option" onclick="answerSummary(4, 'incorrect')">Hash search</button>
                        <button class="quiz-option" onclick="answerSummary(4, 'correct')">Binary search</button>
                        <button class="quiz-option" onclick="answerSummary(4, 'incorrect')">Random search</button>
                        <button class="quiz-option" onclick="answerSummary(4, 'incorrect')">Breadth-first search</button>
                    </div>
                    
                    <div class="quiz-question" data-q="5">
                        <p><strong>5.</strong> What happens when a hash collision occurs?</p>
                        <button class="quiz-option" onclick="answerSummary(5, 'correct')">An overflow method finds alternative storage</button>
                        <button class="quiz-option" onclick="answerSummary(5, 'incorrect')">The record is discarded</button>
                        <button class="quiz-option" onclick="answerSummary(5, 'incorrect')">The file becomes corrupted</button>
                        <button class="quiz-option" onclick="answerSummary(5, 'incorrect')">The hash function is recalculated</button>
                    </div>
                    
                    <div class="quiz-question" data-q="6">
                        <p><strong>6.</strong> Which file organization requires rewriting the entire file to add a record in order?</p>
                        <button class="quiz-option" onclick="answerSummary(6, 'incorrect')">Serial</button>
                        <button class="quiz-option" onclick="answerSummary(6, 'incorrect')">Random</button>
                        <button class="quiz-option" onclick="answerSummary(6, 'correct')">Sequential</button>
                        <button class="quiz-option" onclick="answerSummary(6, 'incorrect')">Hashed</button>
                    </div>
                    
                    <div class="quiz-question" data-q="7">
                        <p><strong>7.</strong> True or False: Direct access is possible with serial files.</p>
                        <button class="quiz-option" onclick="answerSummary(7, 'incorrect')">True</button>
                        <button class="quiz-option" onclick="answerSummary(7, 'correct')">False</button>
                    </div>
                    
                    <div class="quiz-question" data-q="8">
                        <p><strong>8.</strong> What is the purpose of a key field in sequential files?</p>
                        <button class="quiz-option" onclick="answerSummary(8, 'incorrect')">To encrypt the data</button>
                        <button class="quiz-option" onclick="answerSummary(8, 'correct')">To determine the sort order</button>
                        <button class="quiz-option" onclick="answerSummary(8, 'incorrect')">To compress the file</button>
                        <button class="quiz-option" onclick="answerSummary(8, 'incorrect')">To prevent duplicates</button>
                    </div>
                </div>
                
                <div id="summaryResults" style="display: none; margin-top: 30px;">
                    <h3>Quiz Complete!</h3>
                    <p>Your score: <span id="finalScore">0</span>/8 (<span id="finalPercentage">0</span>%)</p>
                    <div id="finalFeedback"></div>
                    <button class="btn btn-success" onclick="restartQuiz()">Retake Quiz</button>
                </div>
            </div>

            <div class="task">
                <h3>Key Takeaways</h3>
                <ul>
                    <li><strong>Text files</strong> are human-readable; <strong>binary files</strong> are machine-optimized</li>
                    <li><strong>Serial files</strong> store records chronologically - simple but slow to search</li>
                    <li><strong>Sequential files</strong> maintain order by key field - enables binary search</li>
                    <li><strong>Random files</strong> use hashing for direct access - fastest but can waste space</li>
                    <li><strong>Sequential access</strong> reads in order; <strong>direct access</strong> jumps to records</li>
                    <li>Choose organization based on: access patterns, update frequency, and storage constraints</li>
                </ul>
            </div>

            <div class="task">
                <h3>Videos and Additional Resources</h3>
                <div style="background: #f0f0f0; padding: 20px; border-radius: 10px; text-align: center;">
                    <p>ðŸ“¹ Video tutorials would be embedded here</p>
                    <p>Topics covered: File organization demonstrations, real-world examples, and practice problems</p>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="nav-arrow" onclick="navigateSection('prev')">Previous</button>
                <button class="nav-arrow" disabled>Next</button>
            </div>
        </div>
    </div>

    <!-- Achievement Popup -->
    <div class="achievement-popup" id="achievementPopup">
        <h4 id="achievementTitle">Achievement Unlocked!</h4>
        <p id="achievementText">Description</p>
    </div>

    <!-- Feedback Button -->
    <button class="feedback-btn" onclick="openFeedback()">
        <span>ðŸ’¬ Feedback</span>
    </button>

    <!-- Feedback Modal -->
    <div class="feedback-modal" id="feedbackModal">
        <div class="feedback-content">
            <h3>Send Feedback</h3>
            <p>Found a bug or have a suggestion? Let us know!</p>
            
            <div class="input-group">
                <label>Type of feedback:</label>
                <select id="feedbackType">
                    <option value="bug">Bug Report</option>
                    <option value="suggestion">Feature Suggestion</option>
                    <option value="content">Content Issue</option>
                    <option value="other">Other</option>
                </select>
            </div>
            
            <div class="input-group">
                <label>Your message:</label>
                <textarea id="feedbackMessage" rows="5" placeholder="Describe the issue or suggestion..."></textarea>
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="btn" onclick="sendFeedback()">Send Feedback</button>
                <button class="btn btn-secondary" onclick="closeFeedback()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- No Paste Warning -->
    <div class="no-paste-warning" id="noPasteWarning">
        ðŸš« Paste is disabled! Type your own answers to learn better.
    </div>

    <script>
        // Global variables
        let currentSection = 'starter';
        let currentXP = 0;
        let currentLevel = 0;
        let completedTasks = new Set();
        let achievements = new Set();
        let sectionCompletion = {};
        let selectedDragItem = null;
        let summaryAnswers = {};
        let serialRecordCount = 4;
        let hashTableData = {};

        // XP requirements per level
        const xpPerLevel = [100, 250, 500, 800, 1200];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeNavigation();
            initializeCanvas();
            preventPaste();
            createParticles();
            initializeSimulations();
        });

        // Navigation
        function initializeNavigation() {
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const section = this.getAttribute('data-section');
                    showSection(section);
                });
            });
        }

        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.add('active');
                currentSection = sectionId;
                
                // Update navigation
                document.querySelectorAll('.nav-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                document.querySelector(`[data-section="${sectionId}"]`).classList.add('active');
                
                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function navigateSection(direction) {
            const sections = ['starter', 'text-binary', 'serial', 'sequential', 'random', 'access', 'practice', 'extension', 'summary'];
            const currentIndex = sections.indexOf(currentSection);
            
            if (direction === 'next' && currentIndex < sections.length - 1) {
                showSection(sections[currentIndex + 1]);
            } else if (direction === 'prev' && currentIndex > 0) {
                showSection(sections[currentIndex - 1]);
            }
        }

        // XP and Achievements System
        function awardXP(amount, taskId) {
            if (completedTasks.has(taskId)) return;
            
            completedTasks.add(taskId);
            currentXP += amount;
            
            // Show floating XP
            showXPFloat(amount);
            
            // Update level
            updateLevel();
            
            // Update UI
            updateXPDisplay();
        }

        function updateLevel() {
            let newLevel = 0;
            let totalXPNeeded = 0;
            
            for (let i = 0; i < xpPerLevel.length; i++) {
                totalXPNeeded += xpPerLevel[i];
                if (currentXP >= totalXPNeeded) {
                    newLevel = i + 1;
                }
            }
            
            if (newLevel > currentLevel) {
                currentLevel = newLevel;
                showAchievement('Level Up!', `You've reached Level ${currentLevel}!`);
                
                // Create particle burst for level up
                createLevelUpParticles();
            }
        }

        function updateXPDisplay() {
            const levelXP = currentLevel > 0 ? xpPerLevel[currentLevel - 1] : 0;
            const nextLevelXP = currentLevel < xpPerLevel.length ? xpPerLevel[currentLevel] : xpPerLevel[xpPerLevel.length - 1];
            const currentLevelXP = currentXP - getPreviousLevelsXP();
            const percentage = (currentLevelXP / nextLevelXP) * 100;
            
            document.getElementById('xpText').textContent = `${currentXP} / ${getTotalXPForLevel(currentLevel + 1)} XP`;
            document.getElementById('xpFill').style.width = percentage + '%';
            document.getElementById('levelBadge').textContent = `Level ${currentLevel}`;
        }

        function getPreviousLevelsXP() {
            let total = 0;
            for (let i = 0; i < currentLevel; i++) {
                total += xpPerLevel[i];
            }
            return total;
        }

        function getTotalXPForLevel(level) {
            let total = 0;
            for (let i = 0; i < Math.min(level, xpPerLevel.length); i++) {
                total += xpPerLevel[i];
            }
            return total;
        }

        function showXPFloat(amount) {
            const float = document.createElement('div');
            float.className = 'xp-float';
            float.textContent = `+${amount} XP`;
            float.style.left = Math.random() * window.innerWidth + 'px';
            float.style.top = window.innerHeight - 100 + 'px';
            document.body.appendChild(float);
            
            setTimeout(() => float.remove(), 2000);
        }

        function showAchievement(title, text) {
            const popup = document.getElementById('achievementPopup');
            document.getElementById('achievementTitle').textContent = title;
            document.getElementById('achievementText').textContent = text;
            
            popup.classList.add('show');
            
            setTimeout(() => {
                popup.classList.remove('show');
            }, 3000);
        }

        // Starter Quiz
        let starterQuizAnswers = {};
        document.querySelectorAll('#starterQuiz .quiz-option').forEach(option => {
            option.addEventListener('click', function() {
                const question = this.closest('.quiz-question').getAttribute('data-question');
                const isCorrect = this.getAttribute('data-answer') === 'correct';
                
                // Store answer
                starterQuizAnswers[question] = isCorrect;
                
                // Visual feedback
                this.parentElement.querySelectorAll('.quiz-option').forEach(opt => {
                    opt.classList.remove('selected', 'correct', 'incorrect');
                    opt.disabled = true;
                });
                
                this.classList.add(isCorrect ? 'correct' : 'incorrect');
                
                // Award XP for attempting
                if (isCorrect) {
                    awardXP(10, `starter-q${question}`);
                }
                
                // Show next question or results
                const nextQuestion = parseInt(question) + 1;
                const nextQuestionEl = document.querySelector(`[data-question="${nextQuestion}"]`);
                
                if (nextQuestionEl) {
                    setTimeout(() => {
                        nextQuestionEl.style.display = 'block';
                    }, 1000);
                } else {
                    // Show results
                    setTimeout(() => {
                        showStarterResults();
                    }, 1000);
                }
            });
        });

        function showStarterResults() {
            const correctCount = Object.values(starterQuizAnswers).filter(v => v).length;
            document.getElementById('starterScore').textContent = correctCount;
            
            let feedback = '';
            if (correctCount === 3) {
                feedback = 'Excellent! You have a strong foundation. Let\'s build on it!';
                awardXP(20, 'starter-perfect');
            } else if (correctCount >= 2) {
                feedback = 'Good start! This lesson will help strengthen your understanding.';
            } else {
                feedback = 'No worries! This lesson will teach you everything you need to know.';
            }
            
            document.getElementById('starterFeedback').textContent = feedback;
            document.getElementById('starterResults').style.display = 'block';
            
            // Mark section as completed
            markSectionComplete('starter');
        }

        // File Categorization (Text vs Binary)
        function initializeDragDrop() {
            document.querySelectorAll('.drag-item').forEach(item => {
                item.addEventListener('click', function() {
                    if (selectedDragItem) {
                        selectedDragItem.classList.remove('selected');
                    }
                    selectedDragItem = this;
                    this.classList.add('selected');
                });
            });

            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.addEventListener('click', function() {
                    if (selectedDragItem && !selectedDragItem.classList.contains('placed')) {
                        const clone = selectedDragItem.cloneNode(true);
                        clone.classList.remove('selected');
                        clone.classList.add('dropped-item');
                        clone.addEventListener('click', function() {
                            this.remove();
                            selectedDragItem.classList.remove('placed');
                        });
                        this.appendChild(clone);
                        selectedDragItem.classList.add('placed');
                        selectedDragItem.classList.remove('selected');
                        selectedDragItem = null;
                    }
                });
            });
        }

        initializeDragDrop();

        function checkFileCategorization() {
            const textDrop = document.getElementById('textDrop');
            const binaryDrop = document.getElementById('binaryDrop');
            
            let correct = 0;
            let total = 0;
            
            // Check text files
            textDrop.querySelectorAll('.dropped-item').forEach(item => {
                total++;
                if (item.getAttribute('data-type') === 'text') {
                    correct++;
                    item.style.background = 'var(--success)';
                } else {
                    item.style.background = 'var(--danger)';
                }
            });
            
            // Check binary files
            binaryDrop.querySelectorAll('.dropped-item').forEach(item => {
                total++;
                if (item.getAttribute('data-type') === 'binary') {
                    correct++;
                    item.style.background = 'var(--success)';
                } else {
                    item.style.background = 'var(--danger)';
                }
            });
            
            const feedback = document.getElementById('categorizationFeedback');
            if (correct === 8 && total === 8) {
                feedback.innerHTML = '<div class="success-message show">Perfect! You correctly categorized all file types!</div>';
                awardXP(30, 'file-categorization');
                if (!achievements.has('file-master')) {
                    achievements.add('file-master');
                    showAchievement('File Master', 'Correctly categorized all file types!');
                }
            } else {
                feedback.innerHTML = `<div class="error-message show">You got ${correct} out of ${total} correct. Red items are in the wrong category.</div>`;
            }
        }

        // Hints
        function showHint(hintId) {
            const hint = document.getElementById(hintId);
            hint.classList.add('show');
            // Reduce XP for next task by 5
            // This is handled when awarding XP
        }

        // Serial File Simulation
        function addSerialRecord() {
            const display = document.getElementById('serialFileDisplay');
            const time = new Date().toLocaleTimeString();
            const record = document.createElement('div');
            record.className = 'file-record';
            record.textContent = `Record ${serialRecordCount}: Transaction at ${time} - Amount Â£${Math.floor(Math.random() * 200)}`;
            display.appendChild(record);
            serialRecordCount++;
            
            awardXP(5, 'serial-add-record');
        }

        function searchSerialFile() {
            const records = document.querySelectorAll('#serialFileDisplay .file-record');
            const searchSteps = document.getElementById('serialSearchSteps');
            searchSteps.innerHTML = '<h4>Search Steps:</h4>';
            
            let step = 1;
            records.forEach((record, index) => {
                setTimeout(() => {
                    record.classList.add('highlight');
                    searchSteps.innerHTML += `<p>Step ${step}: Reading ${record.textContent}</p>`;
                    step++;
                    
                    setTimeout(() => {
                        record.classList.remove('highlight');
                    }, 500);
                }, index * 1000);
            });
            
            setTimeout(() => {
                searchSteps.innerHTML += '<p><strong>Search complete! Had to read all records sequentially.</strong></p>';
                awardXP(10, 'serial-search');
            }, records.length * 1000);
        }

        function simulateSerialSteps() {
            const steps = document.getElementById('serialSearchSteps');
            steps.innerHTML = `
                <h4>Serial File Search Process:</h4>
                <ol>
                    <li>Start at the beginning of the file</li>
                    <li>Read first record</li>
                    <li>Check if it matches search criteria</li>
                    <li>If not, move to next record</li>
                    <li>Repeat until found or end of file</li>
                </ol>
                <p><strong>Time Complexity: O(n)</strong> - Must potentially read all records!</p>
            `;
            awardXP(5, 'serial-steps');
        }

        // Serial File Fill in Blanks
        function checkSerialBlanks() {
            const answers = {
                serial1: 'chronological',
                serial2: 'linear',
                serial3: 'appended'
            };
            
            let correct = 0;
            let feedback = '';
            
            Object.keys(answers).forEach(id => {
                const select = document.getElementById(id);
                if (select.value === answers[id]) {
                    correct++;
                    select.style.borderColor = 'var(--success)';
                } else {
                    select.style.borderColor = 'var(--danger)';
                }
            });
            
            const feedbackEl = document.getElementById('serialBlanksFeedback');
            if (correct === 3) {
                feedbackEl.innerHTML = '<div class="success-message show">Excellent! All answers are correct!</div>';
                awardXP(20, 'serial-blanks');
            } else {
                feedbackEl.innerHTML = `<div class="error-message show">You got ${correct} out of 3 correct. Check the red boxes.</div>`;
            }
        }

        // Serial Pros/Cons
        function checkSerialProsCons() {
            const advantages = document.getElementById('serialAdvantages');
            const disadvantages = document.getElementById('serialDisadvantages');
            
            let correct = 0;
            let total = 0;
            
            advantages.querySelectorAll('.dropped-item').forEach(item => {
                total++;
                if (item.getAttribute('data-category') === 'advantage') {
                    correct++;
                    item.style.background = 'var(--success)';
                } else {
                    item.style.background = 'var(--danger)';
                }
            });
            
            disadvantages.querySelectorAll('.dropped-item').forEach(item => {
                total++;
                if (item.getAttribute('data-category') === 'disadvantage') {
                    correct++;
                    item.style.background = 'var(--success)';
                } else {
                    item.style.background = 'var(--danger)';
                }
            });
            
            if (correct === 6 && total === 6) {
                showAchievement('Critical Thinker', 'Perfectly analyzed serial file characteristics!');
                awardXP(25, 'serial-proscons');
            }
        }

        // Sequential File Simulations
        function binarySearchDemo() {
            const key = document.getElementById('searchKey').value;
            if (!key) return;
            
            const records = document.querySelectorAll('#sequentialFileDisplay .file-record');
            const steps = document.getElementById('searchComparison');
            steps.innerHTML = '<h4>Binary Search Steps:</h4>';
            
            let low = 0;
            let high = records.length - 1;
            let stepCount = 0;
            
            function binaryStep() {
                if (low > high) {
                    steps.innerHTML += '<p><strong>Record not found!</strong></p>';
                    return;
                }
                
                const mid = Math.floor((low + high) / 2);
                const midKey = parseInt(records[mid].getAttribute('data-key'));
                
                records.forEach(r => r.classList.remove('highlight'));
                records[mid].classList.add('highlight');
                
                stepCount++;
                steps.innerHTML += `<p>Step ${stepCount}: Checking middle record (ID: ${midKey})</p>`;
                
                if (midKey == key) {
                    steps.innerHTML += '<p><strong>Record found!</strong></p>';
                    awardXP(15, 'binary-search-demo');
                } else if (midKey < key) {
                    low = mid + 1;
                    setTimeout(binaryStep, 1000);
                } else {
                    high = mid - 1;
                    setTimeout(binaryStep, 1000);
                }
            }
            
            binaryStep();
        }

        function linearSearchDemo() {
            const key = document.getElementById('searchKey').value;
            if (!key) return;
            
            const records = document.querySelectorAll('#sequentialFileDisplay .file-record');
            const steps = document.getElementById('searchComparison');
            steps.innerHTML = '<h4>Linear Search Steps:</h4>';
            
            let index = 0;
            
            function linearStep() {
                if (index >= records.length) {
                    steps.innerHTML += '<p><strong>Record not found!</strong></p>';
                    return;
                }
                
                records.forEach(r => r.classList.remove('highlight'));
                records[index].classList.add('highlight');
                
                const currentKey = parseInt(records[index].getAttribute('data-key'));
                steps.innerHTML += `<p>Step ${index + 1}: Checking record with ID: ${currentKey}</p>`;
                
                if (currentKey == key) {
                    steps.innerHTML += '<p><strong>Record found!</strong></p>';
                    awardXP(10, 'linear-search-demo');
                } else {
                    index++;
                    setTimeout(linearStep, 500);
                }
            }
            
            linearStep();
        }

        function compareSearchMethods() {
            const comparison = document.getElementById('searchComparison');
            comparison.innerHTML = `
                <h4>Search Method Comparison:</h4>
                <table>
                    <tr>
                        <th>Method</th>
                        <th>Best Case</th>
                        <th>Average Case</th>
                        <th>Worst Case</th>
                    </tr>
                    <tr>
                        <td>Linear Search</td>
                        <td>O(1)</td>
                        <td>O(n/2)</td>
                        <td>O(n)</td>
                    </tr>
                    <tr>
                        <td>Binary Search</td>
                        <td>O(1)</td>
                        <td>O(log n)</td>
                        <td>O(log n)</td>
                    </tr>
                </table>
                <p><strong>Binary search is much faster for large files!</strong></p>
            `;
            awardXP(10, 'search-comparison');
        }

        function checkSequentialMC(button, answer) {
            const options = button.parentElement.querySelectorAll('.quiz-option');
            options.forEach(opt => {
                opt.disabled = true;
                opt.classList.remove('selected');
            });
            
            button.classList.add(answer === 'correct' ? 'correct' : 'incorrect');
            
            const feedback = document.getElementById('sequentialMCFeedback');
            if (answer === 'correct') {
                feedback.innerHTML = '<div class="success-message show">Correct! Binary search is the most efficient for sorted sequential files.</div>';
                awardXP(15, 'sequential-mc');
            } else {
                feedback.innerHTML = '<div class="error-message show">Not quite. Think about which algorithm works with sorted data...</div>';
            }
        }

        function checkScenarioAnswer() {
            const answer = document.getElementById('scenarioAnswer').value.toLowerCase();
            const keywords = ['sequential', 'sorted', 'id order', 'binary search', 'reports'];
            const matchedKeywords = keywords.filter(keyword => answer.includes(keyword));
            
            const feedback = document.getElementById('scenarioFeedback');
            
            if (answer.length < 50) {
                feedback.innerHTML = '<div class="error-message show">Please provide a more detailed answer.</div>';
                return;
            }
            
            const xpAwarded = Math.min(matchedKeywords.length * 10, 40);
            awardXP(xpAwarded, 'scenario-analysis');
            
            feedback.innerHTML = `<div class="success-message show">Good analysis! You identified ${matchedKeywords.length} key points. Sequential organization would indeed be best for this scenario.</div>`;
        }

        function simulateSequentialInsertion() {
            const steps = document.getElementById('insertionSteps');
            const insertSteps = [
                'Step 1: Create a new temporary file',
                'Step 2: Read records from original file one by one',
                'Step 3: Compare new record key with current record',
                'Step 4: Write records in order, inserting new record at correct position',
                'Step 5: Continue copying remaining records',
                'Step 6: Delete old file and rename new file'
            ];
            
            steps.innerHTML = '<h4>Sequential File Insertion Process:</h4>';
            
            insertSteps.forEach((step, index) => {
                setTimeout(() => {
                    const stepEl = document.createElement('p');
                    stepEl.textContent = step;
                    stepEl.style.opacity = '0';
                    steps.appendChild(stepEl);
                    
                    setTimeout(() => {
                        stepEl.style.opacity = '1';
                        stepEl.style.transition = 'opacity 0.5s';
                    }, 100);
                    
                    if (index === insertSteps.length - 1) {
                        awardXP(20, 'sequential-insertion');
                    }
                }, index * 1000);
            });
        }

        // Random File / Hashing
        function calculateHash() {
            const key = parseInt(document.getElementById('hashKey').value);
            const tableSize = parseInt(document.getElementById('tableSize').value);
            
            if (!key || !tableSize) return;
            
            const hash = key % tableSize;
            const result = document.getElementById('hashResult');
            
            result.innerHTML = `
                <div class="code-block">
                    Hash calculation:
                    ${key} % ${tableSize} = ${hash}
                    
                    Record with key ${key} will be stored at location ${hash}
                </div>
            `;
            
            // Update hash table visualization
            updateHashTable(hash, key);
            
            awardXP(10, 'hash-calculation');
        }

        function updateHashTable(location, key) {
            const display = document.getElementById('hashTableDisplay');
            const tableSize = parseInt(document.getElementById('tableSize').value);
            
            if (!hashTableData[tableSize]) {
                hashTableData[tableSize] = {};
            }
            
            hashTableData[tableSize][location] = key;
            
            let html = '<table><tr><th>Location</th><th>Key</th></tr>';
            for (let i = 0; i < tableSize; i++) {
                const stored = hashTableData[tableSize][i] || '-';
                const highlight = i === location ? 'style="background: var(--primary); color: white;"' : '';
                html += `<tr ${highlight}><td>${i}</td><td>${stored}</td></tr>`;
            }
            html += '</table>';
            
            display.innerHTML = html;
        }

        function demonstrateOpenAddressing() {
            const demo = document.getElementById('collisionDemo');
            demo.innerHTML = `
                <h4>Open Addressing (Linear Probing)</h4>
                <p>When a collision occurs at location 3:</p>
                <ol>
                    <li>Check location 3 - Occupied!</li>
                    <li>Check location 4 - Occupied!</li>
                    <li>Check location 5 - Free! Store here.</li>
                </ol>
                <div class="code-block">
                    while (table[location] is occupied) {
                        location = (location + 1) % tableSize;
                    }
                    table[location] = record;
                </div>
            `;
            awardXP(15, 'open-addressing');
        }

        function demonstrateClosedAddressing() {
            const demo = document.getElementById('collisionDemo');
            demo.innerHTML = `
                <h4>Closed Addressing (Separate Chaining)</h4>
                <p>When a collision occurs at location 3:</p>
                <ol>
                    <li>Location 3 has a linked list</li>
                    <li>Add new record to the end of the list</li>
                    <li>Multiple records can share the same hash location</li>
                </ol>
                <div class="code-block">
                    if (table[location] is occupied) {
                        // Add to overflow chain
                        overflow = table[location].overflow;
                        while (overflow.next != null) {
                            overflow = overflow.next;
                        }
                        overflow.next = newRecord;
                    }
                </div>
            `;
            awardXP(15, 'closed-addressing');
        }

        function checkHashAnswer(key, inputId) {
            const userAnswer = parseInt(document.getElementById(inputId).value);
            const correctAnswer = key % 7;
            
            const button = event.target;
            if (userAnswer === correctAnswer) {
                button.textContent = 'âœ“';
                button.style.background = 'var(--success)';
                button.disabled = true;
                document.getElementById(inputId).style.borderColor = 'var(--success)';
                awardXP(5, `hash-calc-${inputId}`);
            } else {
                document.getElementById(inputId).style.borderColor = 'var(--danger)';
            }
        }

        function checkRanking() {
            // For now, just award XP for attempting
            awardXP(20, 'ranking-task');
            document.getElementById('rankingFeedback').innerHTML = '<div class="success-message show">Good ranking! Direct access is indeed the biggest advantage of random files.</div>';
        }

        // File Access Methods
        function checkAccessMatching() {
            const feedback = document.getElementById('accessMatchFeedback');
            // Simplified check - award XP for attempting
            awardXP(25, 'access-matching');
            feedback.innerHTML = '<div class="success-message show">Correct! Serial files only support sequential access, random files use direct access, and indexed sequential files support both methods.</div>';
        }

        function checkCaseStudy() {
            const choice = document.getElementById('caseStudyChoice').value;
            const justification = document.getElementById('caseStudyJustification').value;
            const feedback = document.getElementById('caseStudyFeedback');
            
            if (!choice || justification.length < 50) {
                feedback.innerHTML = '<div class="error-message show">Please select an option and provide a detailed justification.</div>';
                return;
            }
            
            let response = '';
            if (choice === 'random' || choice === 'hybrid') {
                response = 'Excellent choice! Random organization (or a hybrid with indexing) would provide fast ISBN lookups for real-time operations.';
                awardXP(40, 'case-study');
            } else {
                response = 'Consider that frequent ISBN searches need fast direct access. Random organization might be better suited.';
                awardXP(20, 'case-study');
            }
            
            feedback.innerHTML = `<div class="success-message show">${response}</div>`;
        }

        // Practice Exam Questions
        function checkExam1() {
            const answer = document.getElementById('exam1').value;
            const marks = document.getElementById('exam1Marks').value;
            
            if (answer.length < 100) {
                alert('Please write a more detailed answer before viewing the mark scheme.');
                return;
            }
            
            document.getElementById('markScheme1').classList.add('show');
            awardXP(30, 'exam-q1');
        }

        function checkExam2() {
            const answer2a = document.getElementById('exam2a').value;
            const answer2b = document.getElementById('exam2b').value;
            const marks = document.getElementById('exam2Marks').value;
            
            if (answer2a.length < 50 || answer2b.length < 50) {
                alert('Please write more detailed answers before viewing the mark scheme.');
                return;
            }
            
            document.getElementById('markScheme2').classList.add('show');
            awardXP(40, 'exam-q2');
        }

        function checkExam3() {
            const answer = document.getElementById('exam3').value;
            const marks = document.getElementById('exam3Marks').value;
            
            if (answer.length < 150) {
                alert('Please write a more comprehensive comparison before viewing the mark scheme.');
                return;
            }
            
            document.getElementById('markScheme3').classList.add('show');
            awardXP(35, 'exam-q3');
            
            // Achievement for completing all exam questions
            if (!achievements.has('exam-master')) {
                achievements.add('exam-master');
                showAchievement('Exam Ready!', 'Completed all practice exam questions!');
            }
        }

        // Word count for exam questions
        document.getElementById('exam1').addEventListener('input', function() {
            const words = this.value.trim().split(/\s+/).length;
            document.getElementById('exam1Count').textContent = words;
        });

        document.getElementById('exam3').addEventListener('input', function() {
            const words = this.value.trim().split(/\s+/).length;
            document.getElementById('exam3Count').textContent = words;
        });

        // Extension Activities
        function submitExtension() {
            const research = document.getElementById('extensionResearch').value;
            const feedback = document.getElementById('extensionFeedback');
            
            if (research.length < 100) {
                feedback.innerHTML = '<div class="error-message show">Please provide more detailed research findings.</div>';
                return;
            }
            
            feedback.innerHTML = '<div class="success-message show">Excellent research! Modern file systems use advanced techniques like B-trees, journaling, and extent-based allocation.</div>';
            awardXP(50, 'extension-research');
            
            if (!achievements.has('researcher')) {
                achievements.add('researcher');
                showAchievement('Researcher', 'Completed extension research task!');
            }
        }

        function checkHashDesign() {
            const design = document.getElementById('hashDesign').value;
            
            if (design.length < 50) {
                alert('Please explain your design approach in more detail.');
                return;
            }
            
            awardXP(40, 'hash-design');
            showAchievement('Algorithm Designer', 'Created a custom hash function!');
        }

        // Summary Quiz
        let summaryScore = 0;
        function answerSummary(question, result) {
            const buttons = document.querySelector(`[data-q="${question}"]`).querySelectorAll('.quiz-option');
            buttons.forEach(btn => btn.disabled = true);
            
            if (result === 'correct') {
                summaryAnswers[question] = true;
                summaryScore++;
                event.target.classList.add('correct');
            } else {
                summaryAnswers[question] = false;
                event.target.classList.add('incorrect');
            }
            
            // Check if all questions answered
            if (Object.keys(summaryAnswers).length === 8) {
                showSummaryResults();
            }
        }

        function showSummaryResults() {
            const percentage = Math.round((summaryScore / 8) * 100);
            document.getElementById('finalScore').textContent = summaryScore;
            document.getElementById('finalPercentage').textContent = percentage;
            
            let feedback = '';
            if (percentage >= 80) {
                feedback = 'ðŸŽ‰ Excellent! You\'ve mastered file organization types!';
                awardXP(100, 'summary-complete');
                
                if (currentLevel >= 5 && !achievements.has('master')) {
                    achievements.add('master');
                    showAchievement('File Organization Master', 'Reached Level 5 and passed the final quiz!');
                }
            } else {
                feedback = 'Good effort! Review the sections you found challenging and try again.';
                awardXP(50, 'summary-attempt');
            }
            
            document.getElementById('finalFeedback').textContent = feedback;
            document.getElementById('summaryResults').style.display = 'block';
            
            // Hide quiz questions
            document.getElementById('summaryQuiz').style.display = 'none';
        }

        function restartQuiz() {
            summaryScore = 0;
            summaryAnswers = {};
            
            // Reset all questions
            document.querySelectorAll('#summaryQuiz .quiz-option').forEach(opt => {
                opt.classList.remove('correct', 'incorrect');
                opt.disabled = false;
            });
            
            document.getElementById('summaryQuiz').style.display = 'block';
            document.getElementById('summaryResults').style.display = 'none';
        }

        // Canvas Drawing
        let canvas, ctx;
        let isDrawing = false;

        function initializeCanvas() {
            canvas = document.getElementById('drawingCanvas');
            if (!canvas) return;
            
            ctx = canvas.getContext('2d');
            
            // Set canvas size
            canvas.width = canvas.offsetWidth;
            canvas.height = 300;
            
            // Drawing events
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            // Touch events
            canvas.addEventListener('touchstart', handleTouch);
            canvas.addEventListener('touchmove', handleTouch);
            canvas.addEventListener('touchend', stopDrawing);
        }

        function startDrawing(e) {
            isDrawing = true;
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            ctx.beginPath();
            ctx.moveTo(x, y);
        }

        function draw(e) {
            if (!isDrawing) return;
            
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            ctx.strokeStyle = '#333';
            ctx.lineTo(x, y);
            ctx.stroke();
        }

        function stopDrawing() {
            isDrawing = false;
        }

        function handleTouch(e) {
            e.preventDefault();
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent(e.type === 'touchstart' ? 'mousedown' : 
                                            e.type === 'touchmove' ? 'mousemove' : 'mouseup', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            canvas.dispatchEvent(mouseEvent);
        }

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        // Section Reset
        function resetSection(sectionId) {
            const section = document.getElementById(sectionId);
            
            // Reset inputs
            section.querySelectorAll('input[type="text"], input[type="number"], textarea, select').forEach(input => {
                input.value = '';
                input.style.borderColor = '';
            });
            
            // Reset quiz options
            section.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('selected', 'correct', 'incorrect');
                opt.disabled = false;
            });
            
            // Reset drop zones
            section.querySelectorAll('.drop-zone').forEach(zone => {
                zone.innerHTML = zone.querySelector('p') ? zone.querySelector('p').outerHTML : '';
            });
            
            // Reset feedback
            section.querySelectorAll('[id*="Feedback"], .error-message, .success-message').forEach(el => {
                el.innerHTML = '';
                el.classList.remove('show');
            });
            
            // Reset specific section data
            if (sectionId === 'starter') {
                starterQuizAnswers = {};
                document.getElementById('starterResults').style.display = 'none';
                document.querySelectorAll('.quiz-question[data-question]').forEach((q, i) => {
                    q.style.display = i === 0 ? 'block' : 'none';
                });
            } else if (sectionId === 'summary') {
                restartQuiz();
            }
            
            showAchievement('Fresh Start', `Reset ${sectionId} section`);
        }

        // Mark section as complete
        function markSectionComplete(sectionId) {
            sectionCompletion[sectionId] = true;
            const tab = document.querySelector(`[data-section="${sectionId}"]`);
            if (tab) {
                tab.classList.add('completed');
            }
            
            // Check if all sections complete
            const totalSections = document.querySelectorAll('.nav-tab').length;
            const completedSections = Object.keys(sectionCompletion).length;
            
            if (completedSections === totalSections && !achievements.has('completionist')) {
                achievements.add('completionist');
                showAchievement('Completionist', 'Completed all sections of the lesson!');
                awardXP(200, 'all-sections-complete');
            }
        }

        // Prevent paste
        function preventPaste() {
            document.addEventListener('paste', function(e) {
                e.preventDefault();
                const warning = document.getElementById('noPasteWarning');
                warning.style.display = 'block';
                setTimeout(() => {
                    warning.style.display = 'none';
                }, 3000);
                return false;
            });
            
            // Also prevent context menu paste
            document.addEventListener('contextmenu', function(e) {
                if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                    e.preventDefault();
                    return false;
                }
            });
        }

        // Feedback System
        function openFeedback() {
            document.getElementById('feedbackModal').classList.add('show');
        }

        function closeFeedback() {
            document.getElementById('feedbackModal').classList.remove('show');
        }

        function sendFeedback() {
            const type = document.getElementById('feedbackType').value;
            const message = document.getElementById('feedbackMessage').value;
            
            if (!message) {
                alert('Please enter a message');
                return;
            }
            
            // Get current section and relevant code
            const currentSectionElement = document.querySelector('.section.active');
            const sectionTitle = currentSectionElement.querySelector('h2').textContent;
            
            // Create email body
            const emailBody = `
Type: ${type}
Section: ${sectionTitle}
Page: ${currentSection}

Message:
${message}

Browser: ${navigator.userAgent}
            `;
            
            // Create mailto link
            const mailtoLink = `mailto:millingtond@mgs.org?subject=File Organization Worksheet Feedback&body=${encodeURIComponent(emailBody)}`;
            window.location.href = mailtoLink;
            
            // Close modal and reset
            closeFeedback();
            document.getElementById('feedbackMessage').value = '';
            
            showAchievement('Feedback Hero', 'Thanks for helping improve the lesson!');
            awardXP(10, 'feedback-sent');
        }

        // Particle Effects
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.width = Math.random() * 10 + 5 + 'px';
                    particle.style.height = particle.style.width;
                    particle.style.animationDelay = Math.random() * 10 + 's';
                    particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                    particlesContainer.appendChild(particle);
                }, i * 200);
            }
        }

        function createLevelUpParticles() {
            const colors = ['#6366f1', '#ec4899', '#10b981', '#f59e0b'];
            
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.style.position = 'fixed';
                particle.style.width = '10px';
                particle.style.height = '10px';
                particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                particle.style.borderRadius = '50%';
                particle.style.left = '50%';
                particle.style.top = '50%';
                particle.style.pointerEvents = 'none';
                particle.style.zIndex = '2000';
                document.body.appendChild(particle);
                
                const angle = (Math.PI * 2 * i) / 30;
                const velocity = 5 + Math.random() * 5;
                const lifetime = 1000 + Math.random() * 1000;
                
                let x = 0, y = 0;
                const interval = setInterval(() => {
                    x += Math.cos(angle) * velocity;
                    y += Math.sin(angle) * velocity;
                    particle.style.transform = `translate(${x}px, ${y}px)`;
                    particle.style.opacity = 1 - (Date.now() - startTime) / lifetime;
                }, 16);
                
                const startTime = Date.now();
                setTimeout(() => {
                    clearInterval(interval);
                    particle.remove();
                }, lifetime);
            }
        }

        // Initialize simulations
        function initializeSimulations() {
            // Any additional initialization
            updateXPDisplay();
        }

        // Performance optimizations
        let scrollTimeout;
        window.addEventListener('scroll', function() {
            if (scrollTimeout) {
                clearTimeout(scrollTimeout);
            }
            scrollTimeout = setTimeout(function() {
                // Handle scroll-based animations here if needed
            }, 100);
        });

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowLeft') {
                navigateSection('prev');
            } else if (e.key === 'ArrowRight') {
                navigateSection('next');
            }
        });
    </script>
</body>
</html>