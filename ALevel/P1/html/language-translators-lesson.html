<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Language Translators - Types and Comparison</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 20px;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .nav-bar {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .nav-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .nav-button:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }

        .nav-button.active {
            background: #764ba2;
        }

        .xp-display {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: none;
        }

        .section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .learning-outcomes {
            background: #e0f2fe;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .learning-outcomes h3 {
            color: #0369a1;
            margin-bottom: 10px;
        }

        .learning-outcomes ul {
            list-style-type: none;
            padding-left: 0;
        }

        .learning-outcomes li {
            padding: 5px 0;
            padding-left: 25px;
            position: relative;
        }

        .learning-outcomes li:before {
            content: "✓";
            color: #10b981;
            font-weight: bold;
            position: absolute;
            left: 0;
        }

        .task-container {
            background: #f9fafb;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #e5e7eb;
        }

        .task-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .task-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #4b5563;
        }

        .reset-button {
            background: #ef4444;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .reset-button:hover {
            background: #dc2626;
        }

        .drag-container {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .drag-item {
            background: #3b82f6;
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
            min-width: 150px;
            text-align: center;
        }

        .drag-item:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4);
        }

        .drag-item.used {
            background: #9ca3af;
            cursor: not-allowed;
        }

        .drop-zone {
            min-height: 60px;
            border: 2px dashed #cbd5e1;
            border-radius: 8px;
            padding: 20px;
            margin: 10px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .drop-zone.highlight {
            border-color: #3b82f6;
            background: #eff6ff;
        }

        .drop-zone.filled {
            background: #dbeafe;
            border-style: solid;
            border-color: #3b82f6;
        }

        .multiple-choice {
            margin: 20px 0;
        }

        .mc-option {
            background: #f3f4f6;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .mc-option:hover {
            background: #e5e7eb;
            border-color: #9ca3af;
        }

        .mc-option.selected {
            background: #dbeafe;
            border-color: #3b82f6;
        }

        .mc-option.correct {
            background: #d1fae5;
            border-color: #10b981;
        }

        .mc-option.incorrect {
            background: #fee2e2;
            border-color: #ef4444;
        }

        input[type="text"], textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #e5e7eb;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        input[type="text"]:focus, textarea:focus {
            outline: none;
            border-color: #3b82f6;
        }

        .button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            margin: 10px 5px;
        }

        .button:hover {
            background: #2563eb;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3);
        }

        .button:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: none;
        }

        .feedback-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            border: none;
            padding: 12px;
            border-radius: 50%;
            cursor: pointer;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .feedback-button:hover {
            transform: scale(1.1);
            background: #059669;
        }

        .feedback-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .feedback-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .achievement-popup {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            z-index: 3000;
            display: none;
            animation: slideIn 0.5s ease, slideOut 0.5s ease 3s forwards;
        }

        @keyframes slideIn {
            from { transform: translateX(400px); }
            to { transform: translateX(0); }
        }

        @keyframes slideOut {
            from { transform: translateX(0); }
            to { transform: translateX(400px); }
        }

        .simulation-container {
            background: #1f2937;
            color: #f3f4f6;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }

        .code-display {
            background: #374151;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            overflow-x: auto;
        }

        .step-indicator {
            background: #10b981;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            display: inline-block;
            margin: 10px 0;
        }

        .canvas-container {
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            margin: 20px 0;
            position: relative;
            background: white;
        }

        #drawingCanvas {
            display: block;
            cursor: crosshair;
            touch-action: none;
        }

        .canvas-controls {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .hint-button {
            background: #f59e0b;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .hint-button:hover {
            background: #d97706;
        }

        .hint-box {
            background: #fef3c7;
            border: 2px solid #f59e0b;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            display: none;
        }

        .paste-shame {
            background: #fee2e2;
            border: 2px solid #ef4444;
            color: #991b1b;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            display: none;
            animation: shake 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .nav-arrows {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
        }

        .arrow-button {
            background: #6b7280;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .arrow-button:hover {
            background: #4b5563;
            transform: translateX(-5px);
        }

        .arrow-button.next:hover {
            transform: translateX(5px);
        }

        .arrow-button:disabled {
            background: #d1d5db;
            cursor: not-allowed;
            transform: none;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .nav-bar {
                flex-direction: column;
                gap: 15px;
            }

            .drag-container {
                flex-direction: column;
            }

            .feedback-content {
                padding: 20px;
            }
        }

        .fill-blank-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }

        .fill-option {
            background: #e0e7ff;
            color: #4338ca;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .fill-option:hover {
            background: #c7d2fe;
            border-color: #4338ca;
        }

        .fill-option.used {
            background: #e5e7eb;
            color: #9ca3af;
            cursor: not-allowed;
        }

        .mark-scheme {
            background: #f0fdf4;
            border: 2px solid #10b981;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }

        .mark-scheme h4 {
            color: #059669;
            margin-bottom: 10px;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .comparison-table th,
        .comparison-table td {
            border: 1px solid #e5e7eb;
            padding: 12px;
            text-align: left;
        }

        .comparison-table th {
            background: #f3f4f6;
            font-weight: bold;
        }

        .comparison-table tr:nth-child(even) {
            background: #f9fafb;
        }

        .extension-section {
            background: #fef3c7;
            border: 2px solid #f59e0b;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .extension-section h3 {
            color: #d97706;
            margin-bottom: 15px;
        }

        .common-mistakes {
            background: #fee2e2;
            border: 2px solid #ef4444;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .common-mistakes h3 {
            color: #dc2626;
            margin-bottom: 15px;
        }

        .real-world-context {
            background: #e0f2fe;
            border: 2px solid #0284c7;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .real-world-context h3 {
            color: #0369a1;
            margin-bottom: 15px;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e5e7eb;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981 0%, #059669 100%);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Language Translators - Types and Comparison</h1>
            <p>Cambridge A Level Computer Science (9618)</p>
        </div>

        <div class="nav-bar">
            <div class="nav-buttons">
                <button class="nav-button active" onclick="showSection(0)">Starter</button>
                <button class="nav-button" onclick="showSection(1)">Introduction</button>
                <button class="nav-button" onclick="showSection(2)">Assemblers</button>
                <button class="nav-button" onclick="showSection(3)">Compilers</button>
                <button class="nav-button" onclick="showSection(4)">Interpreters</button>
                <button class="nav-button" onclick="showSection(5)">Hybrid</button>
                <button class="nav-button" onclick="showSection(6)">Practice</button>
                <button class="nav-button" onclick="showSection(7)">Extension</button>
                <button class="nav-button" onclick="showSection(8)">Summary</button>
            </div>
            <div class="xp-display">
                XP: <span id="xp">0</span> | Level: <span id="level">0</span>
            </div>
        </div>

        <!-- Section 0: Starter Activity -->
        <div class="section active" id="section-0">
            <h2>Starter Activity: Translation Methods</h2>
            
            <div class="learning-outcomes">
                <h3>Learning Outcomes</h3>
                <ul>
                    <li>Understand the need for different types of language translators</li>
                    <li>Compare and contrast assemblers, compilers, and interpreters</li>
                    <li>Explain the benefits and drawbacks of each translation method</li>
                    <li>Justify the use of different translators in various scenarios</li>
                    <li>Understand hybrid translation approaches like Java's bytecode</li>
                </ul>
            </div>

            <div class="task-container">
                <div class="task-header">
                    <span class="task-title">Match the Programming Language to its Translation Method</span>
                    <button class="reset-button" onclick="resetStarterActivity()">Reset</button>
                </div>
                <p>Click on a programming language, then click on its typical translation method:</p>
                
                <div class="drag-container">
                    <div class="drag-item" data-lang="python" onclick="selectLanguage('python')">Python</div>
                    <div class="drag-item" data-lang="c++" onclick="selectLanguage('c++')">C++</div>
                    <div class="drag-item" data-lang="assembly" onclick="selectLanguage('assembly')">Assembly</div>
                    <div class="drag-item" data-lang="java" onclick="selectLanguage('java')">Java</div>
                    <div class="drag-item" data-lang="javascript" onclick="selectLanguage('javascript')">JavaScript</div>
                </div>

                <div style="margin: 20px 0;">
                    <div class="drop-zone" data-method="assembler" onclick="selectMethod('assembler')">
                        <span>Assembler</span>
                    </div>
                    <div class="drop-zone" data-method="compiler" onclick="selectMethod('compiler')">
                        <span>Compiler</span>
                    </div>
                    <div class="drop-zone" data-method="interpreter" onclick="selectMethod('interpreter')">
                        <span>Interpreter</span>
                    </div>
                    <div class="drop-zone" data-method="hybrid" onclick="selectMethod('hybrid')">
                        <span>Hybrid (Compiler + Interpreter)</span>
                    </div>
                </div>

                <button class="button" onclick="checkStarterAnswers()">Check Answers</button>
                <div id="starter-feedback"></div>
            </div>

            <div class="nav-arrows">
                <button class="arrow-button" disabled>← Previous</button>
                <button class="arrow-button next" onclick="showSection(1)">Next →</button>
            </div>
        </div>

        <!-- Section 1: Introduction to Language Translators -->
        <div class="section" id="section-1">
            <h2>Introduction to Language Translators</h2>
            
            <div class="real-world-context">
                <h3>Real-World Context</h3>
                <p>Think of language translators like human translators at the United Nations. Just as human translators convert speeches from one language to another, computer language translators convert code from human-readable form to machine-executable form. Different situations require different types of translation - simultaneous (interpreters) or prepared in advance (compilers).</p>
            </div>

            <div class="task-container">
                <div class="task-header">
                    <span class="task-title">Understanding Translation</span>
                    <button class="reset-button" onclick="resetIntroActivity()">Reset</button>
                </div>
                
                <p>Complete the following definitions by selecting the correct terms:</p>
                
                <div class="fill-blank-options">
                    <span class="fill-option" onclick="selectFillOption(this, 'high-level')">high-level</span>
                    <span class="fill-option" onclick="selectFillOption(this, 'machine code')">machine code</span>
                    <span class="fill-option" onclick="selectFillOption(this, 'source code')">source code</span>
                    <span class="fill-option" onclick="selectFillOption(this, 'object code')">object code</span>
                    <span class="fill-option" onclick="selectFillOption(this, 'low-level')">low-level</span>
                    <span class="fill-option" onclick="selectFillOption(this, 'bytecode')">bytecode</span>
                    <span class="fill-option" onclick="selectFillOption(this, 'assembly')">assembly</span>
                    <span class="fill-option" onclick="selectFillOption(this, 'executable')">executable</span>
                </div>

                <div style="margin: 20px 0;">
                    <p>1. A language translator converts <input type="text" class="fill-input" placeholder="Type answer..." style="width: 150px;"> written by programmers into <input type="text" class="fill-input" placeholder="Type answer..." style="width: 150px;"> that the CPU can execute.</p>
                    
                    <p>2. The original program written by a programmer is called <input type="text" class="fill-input" placeholder="Type answer..." style="width: 150px;">.</p>
                    
                    <p>3. After compilation, the resulting file containing machine instructions is called <input type="text" class="fill-input" placeholder="Type answer..." style="width: 150px;">.</p>
                </div>

                <button class="button" onclick="checkIntroAnswers()">Check Answers</button>
                <button class="hint-button" onclick="showHint('intro')">Show Hint</button>
                <div class="hint-box" id="intro-hint">
                    <p>Think about the flow: What programmers write → Translation → What computers understand</p>
                </div>
                <div id="intro-feedback"></div>
            </div>

            <div class="simulation-container">
                <h3>Translation Process Visualization</h3>
                <div id="translation-demo">
                    <div class="code-display" id="source-display">
                        <strong>Source Code (Python):</strong><br>
                        print("Hello, World!")
                    </div>
                    <div class="step-indicator">↓ Translation Process ↓</div>
                    <div class="code-display" id="machine-display" style="display: none;">
                        <strong>Machine Code (Simplified):</strong><br>
                        01001100 01101111 01100001 01100100<br>
                        01010000 01110101 01110011 01101000<br>
                        01000011 01100001 01101100 01101100
                    </div>
                    <button class="button" onclick="animateTranslation()">Animate Translation</button>
                </div>
            </div>

            <div class="nav-arrows">
                <button class="arrow-button" onclick="showSection(0)">← Previous</button>
                <button class="arrow-button next" onclick="showSection(2)">Next →</button>
            </div>
        </div>

        <!-- Section 2: Assemblers -->
        <div class="section" id="section-2">
            <h2>Assemblers</h2>
            
            <div class="task-container">
                <div class="task-header">
                    <span class="task-title">Understanding Assemblers</span>
                    <button class="reset-button" onclick="resetAssemblerActivity()">Reset</button>
                </div>

                <div class="simulation-container">
                    <h3>Assembly to Machine Code Translation</h3>
                    <p>Click on each assembly instruction to see its machine code translation:</p>
                    <div id="assembly-sim">
                        <div class="code-display">
                            <div class="asm-line" onclick="translateAssembly(0)">MOV AX, 5</div>
                            <div class="asm-line" onclick="translateAssembly(1)">ADD AX, 3</div>
                            <div class="asm-line" onclick="translateAssembly(2)">MOV BX, AX</div>
                            <div class="asm-line" onclick="translateAssembly(3)">HLT</div>
                        </div>
                        <div class="code-display" id="machine-output" style="margin-top: 20px;">
                            <strong>Machine Code Output:</strong><br>
                            <div id="machine-lines"></div>
                        </div>
                    </div>
                </div>

                <h3>Assembler Characteristics</h3>
                <div class="multiple-choice">
                    <p><strong>Which of the following is TRUE about assemblers?</strong></p>
                    <div class="mc-option" onclick="selectMC(this, 'asm-q1', 'a')">
                        A) Assemblers translate high-level languages like Python to machine code
                    </div>
                    <div class="mc-option" onclick="selectMC(this, 'asm-q1', 'b')">
                        B) One assembly instruction typically translates to one machine instruction
                    </div>
                    <div class="mc-option" onclick="selectMC(this, 'asm-q1', 'c')">
                        C) Assembly language is portable across different CPU architectures
                    </div>
                    <div class="mc-option" onclick="selectMC(this, 'asm-q1', 'd')">
                        D) Assemblers perform optimization during translation
                    </div>
                    <button class="button" onclick="checkMC('asm-q1', 'b')">Check Answer</button>
                    <div id="asm-q1-feedback"></div>
                </div>

                <div class="canvas-container">
                    <h3>Draw the Assembler Process Flow</h3>
                    <p>Use your stylus or mouse to draw a flowchart showing how an assembler works:</p>
                    <canvas id="drawingCanvas" width="600" height="400"></canvas>
                    <div class="canvas-controls">
                        <button class="button" onclick="clearCanvas()">Clear Canvas</button>
                        <button class="button" onclick="saveDrawing()">Save Drawing</button>
                    </div>
                </div>
            </div>

            <div class="common-mistakes">
                <h3>Common Mistakes</h3>
                <ul>
                    <li>Thinking assemblers can translate any programming language (they only work with assembly language)</li>
                    <li>Confusing assemblers with compilers - assemblers are much simpler</li>
                    <li>Assuming assembly code is portable - it's specific to CPU architecture</li>
                </ul>
            </div>

            <div class="nav-arrows">
                <button class="arrow-button" onclick="showSection(1)">← Previous</button>
                <button class="arrow-button next" onclick="showSection(3)">Next →</button>
            </div>
        </div>

        <!-- Section 3: Compilers -->
        <div class="section" id="section-3">
            <h2>Compilers</h2>
            
            <div class="task-container">
                <div class="task-header">
                    <span class="task-title">Compiler Characteristics</span>
                    <button class="reset-button" onclick="resetCompilerActivity()">Reset</button>
                </div>

                <div class="simulation-container">
                    <h3>Compilation Process Simulation</h3>
                    <div id="compiler-sim">
                        <div class="step-indicator" id="compile-step-1">Step 1: Lexical Analysis</div>
                        <div class="code-display" id="compile-stage-1" style="display: none;">
                            Breaking code into tokens: [int] [x] [=] [5] [;]
                        </div>
                        
                        <div class="step-indicator" id="compile-step-2" style="display: none;">Step 2: Syntax Analysis</div>
                        <div class="code-display" id="compile-stage-2" style="display: none;">
                            Building parse tree: Declaration → Type Identifier Assignment Value
                        </div>
                        
                        <div class="step-indicator" id="compile-step-3" style="display: none;">Step 3: Code Generation</div>
                        <div class="code-display" id="compile-stage-3" style="display: none;">
                            Generating machine code: MOV [memory_address], 5
                        </div>
                        
                        <button class="button" onclick="animateCompilation()">Step Through Compilation</button>
                    </div>
                </div>

                <h3>Compiler Benefits and Drawbacks</h3>
                <p>Categorize each characteristic as a benefit or drawback of compilers:</p>
                
                <div class="drag-container">
                    <div class="drag-item" onclick="selectCharacteristic('fast-execution')">Fast execution speed</div>
                    <div class="drag-item" onclick="selectCharacteristic('slow-development')">Slower development cycle</div>
                    <div class="drag-item" onclick="selectCharacteristic('no-source')">Source code not needed to run</div>
                    <div class="drag-item" onclick="selectCharacteristic('platform-specific')">Platform-specific executable</div>
                    <div class="drag-item" onclick="selectCharacteristic('optimization')">Code optimization possible</div>
                    <div class="drag-item" onclick="selectCharacteristic('memory-efficient')">Memory efficient at runtime</div>
                    <div class="drag-item" onclick="selectCharacteristic('error-detection')">All errors must be fixed before running</div>
                    <div class="drag-item" onclick="selectCharacteristic('distribution')">Easy to distribute without source</div>
                </div>

                <div style="display: flex; gap: 20px; margin-top: 20px;">
                    <div style="flex: 1;">
                        <h4>Benefits</h4>
                        <div class="drop-zone" id="compiler-benefits" onclick="dropCharacteristic('benefits')" style="min-height: 150px;"></div>
                    </div>
                    <div style="flex: 1;">
                        <h4>Drawbacks</h4>
                        <div class="drop-zone" id="compiler-drawbacks" onclick="dropCharacteristic('drawbacks')" style="min-height: 150px;"></div>
                    </div>
                </div>

                <button class="button" onclick="checkCompilerCategories()">Check Answers</button>
                <div id="compiler-feedback"></div>
            </div>

            <div class="real-world-context">
                <h3>Real-World Examples</h3>
                <p>Compiled languages are used where performance is critical:</p>
                <ul>
                    <li><strong>Operating Systems:</strong> Windows, Linux (written in C/C++)</li>
                    <li><strong>Games:</strong> AAA games use C++ for maximum performance</li>
                    <li><strong>Embedded Systems:</strong> Car ECUs, IoT devices</li>
                    <li><strong>High-Performance Computing:</strong> Scientific simulations, AI training</li>
                </ul>
            </div>

            <div class="nav-arrows">
                <button class="arrow-button" onclick="showSection(2)">← Previous</button>
                <button class="arrow-button next" onclick="showSection(4)">Next →</button>
            </div>
        </div>

        <!-- Section 4: Interpreters -->
        <div class="section" id="section-4">
            <h2>Interpreters</h2>
            
            <div class="task-container">
                <div class="task-header">
                    <span class="task-title">Understanding Interpreters</span>
                    <button class="reset-button" onclick="resetInterpreterActivity()">Reset</button>
                </div>

                <div class="simulation-container">
                    <h3>Interpreter Execution Simulation</h3>
                    <p>Watch how an interpreter executes code line by line:</p>
                    <div id="interpreter-sim">
                        <div class="code-display">
                            <div id="int-line-0" class="code-line">x = 5</div>
                            <div id="int-line-1" class="code-line">y = 10</div>
                            <div id="int-line-2" class="code-line">result = x + y</div>
                            <div id="int-line-3" class="code-line">print(result)</div>
                        </div>
                        <div class="code-display" style="margin-top: 20px;">
                            <strong>Interpreter State:</strong>
                            <div id="interpreter-state">Ready to execute...</div>
                        </div>
                        <button class="button" onclick="runInterpreter()">Run Line by Line</button>
                    </div>
                </div>

                <h3>Compiler vs Interpreter Comparison</h3>
                <p>Complete the comparison table by filling in the missing information:</p>
                
                <table class="comparison-table">
                    <tr>
                        <th>Aspect</th>
                        <th>Compiler</th>
                        <th>Interpreter</th>
                    </tr>
                    <tr>
                        <td>Translation timing</td>
                        <td>Before execution</td>
                        <td><input type="text" placeholder="Enter answer..." style="width: 90%;"></td>
                    </tr>
                    <tr>
                        <td>Execution speed</td>
                        <td><input type="text" placeholder="Enter answer..." style="width: 90%;"></td>
                        <td>Slower</td>
                    </tr>
                    <tr>
                        <td>Memory usage</td>
                        <td>Less at runtime</td>
                        <td><input type="text" placeholder="Enter answer..." style="width: 90%;"></td>
                    </tr>
                    <tr>
                        <td>Error detection</td>
                        <td><input type="text" placeholder="Enter answer..." style="width: 90%;"></td>
                        <td>During execution</td>
                    </tr>
                    <tr>
                        <td>Platform independence</td>
                        <td>Platform-specific</td>
                        <td><input type="text" placeholder="Enter answer..." style="width: 90%;"></td>
                    </tr>
                </table>
                
                <button class="button" onclick="checkComparisonTable()">Check Table</button>
                <div id="comparison-feedback"></div>

                <h3>Scenario-Based Questions</h3>
                <div class="multiple-choice">
                    <p><strong>A developer is creating a web application that needs to run in browsers. Which translation method would be most appropriate?</strong></p>
                    <div class="mc-option" onclick="selectMC(this, 'scenario-1', 'a')">
                        A) Compiler - for maximum performance
                    </div>
                    <div class="mc-option" onclick="selectMC(this, 'scenario-1', 'b')">
                        B) Interpreter - JavaScript runs in browser interpreters
                    </div>
                    <div class="mc-option" onclick="selectMC(this, 'scenario-1', 'c')">
                        A) Assembler - for direct hardware control
                    </div>
                    <div class="mc-option" onclick="selectMC(this, 'scenario-1', 'd')">
                        D) Any method works equally well
                    </div>
                    <button class="button" onclick="checkMC('scenario-1', 'b')">Check Answer</button>
                    <div id="scenario-1-feedback"></div>
                </div>
            </div>

            <div class="nav-arrows">
                <button class="arrow-button" onclick="showSection(3)">← Previous</button>
                <button class="arrow-button next" onclick="showSection(5)">Next →</button>
            </div>
        </div>

        <!-- Section 5: Hybrid Approaches -->
        <div class="section" id="section-5">
            <h2>Hybrid Translation Approaches</h2>
            
            <div class="task-container">
                <div class="task-header">
                    <span class="task-title">Java's Bytecode System</span>
                    <button class="reset-button" onclick="resetHybridActivity()">Reset</button>
                </div>

                <div class="simulation-container">
                    <h3>Java Compilation and Execution Process</h3>
                    <div id="java-sim">
                        <div class="code-display">
                            <strong>Step 1: Java Source Code</strong><br>
                            public class Hello {<br>
                            &nbsp;&nbsp;public static void main(String[] args) {<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;System.out.println("Hello World");<br>
                            &nbsp;&nbsp;}<br>
                            }
                        </div>
                        
                        <button class="button" onclick="showJavaStep(2)">Compile to Bytecode</button>
                        
                        <div class="code-display" id="java-step-2" style="display: none; margin-top: 20px;">
                            <strong>Step 2: Java Bytecode</strong><br>
                            0: getstatic #2<br>
                            3: ldc #3<br>
                            5: invokevirtual #4<br>
                            8: return
                        </div>
                        
                        <button class="button" id="java-button-3" onclick="showJavaStep(3)" style="display: none;">Run on JVM</button>
                        
                        <div class="code-display" id="java-step-3" style="display: none; margin-top: 20px;">
                            <strong>Step 3: JVM Interprets/JIT Compiles</strong><br>
                            Platform-specific machine code executed
                        </div>
                    </div>
                </div>

                <h3>True or False: Hybrid Systems</h3>
                <div class="task-container">
                    <p>Determine if each statement is true or false:</p>
                    
                    <div class="multiple-choice">
                        <div class="mc-option" onclick="selectTF(this, 'hybrid-1', true)">
                            Java bytecode is platform-independent
                        </div>
                        <div class="mc-option" onclick="selectTF(this, 'hybrid-1', false)">
                            Java bytecode is machine code
                        </div>
                        <button class="button" onclick="checkTF('hybrid-1', true)">Check</button>
                        <div id="hybrid-1-feedback"></div>
                    </div>

                    <div class="multiple-choice" style="margin-top: 20px;">
                        <div class="mc-option" onclick="selectTF(this, 'hybrid-2', true)">
                            The JVM can use Just-In-Time compilation for better performance
                        </div>
                        <div class="mc-option" onclick="selectTF(this, 'hybrid-2', false)">
                            The JVM only interprets bytecode, never compiles it
                        </div>
                        <button class="button" onclick="checkTF('hybrid-2', true)">Check</button>
                        <div id="hybrid-2-feedback"></div>
                    </div>

                    <div class="multiple-choice" style="margin-top: 20px;">
                        <div class="mc-option" onclick="selectTF(this, 'hybrid-3', true)">
                            Hybrid approaches combine benefits of compilation and interpretation
                        </div>
                        <div class="mc-option" onclick="selectTF(this, 'hybrid-3', false)">
                            Hybrid approaches are always slower than pure compilation
                        </div>
                        <button class="button" onclick="checkTF('hybrid-3', true)">Check</button>
                        <div id="hybrid-3-feedback"></div>
                    </div>
                </div>

                <h3>Short Answer: Advantages of Hybrid Approach</h3>
                <p>Explain two advantages of Java's hybrid compilation approach:</p>
                <textarea id="hybrid-advantages" rows="6" placeholder="Write your answer here..."></textarea>
                <button class="button" onclick="checkHybridAnswer()">Submit Answer</button>
                <div id="hybrid-answer-feedback"></div>
            </div>

            <div class="nav-arrows">
                <button class="arrow-button" onclick="showSection(4)">← Previous</button>
                <button class="arrow-button next" onclick="showSection(6)">Next →</button>
            </div>
        </div>

        <!-- Section 6: Practice Exam Questions -->
        <div class="section" id="section-6">
            <h2>Practice Exam Questions</h2>
            
            <div class="task-container">
                <h3>Question 1 (4 marks)</h3>
                <p>Explain two benefits and two drawbacks of using a compiler compared to an interpreter for translating high-level language programs.</p>
                <textarea id="exam-q1" rows="8" placeholder="Write your answer here..."></textarea>
                <div style="margin: 10px 0;">
                    <label>Predicted marks (out of 4): </label>
                    <input type="number" id="q1-marks" min="0" max="4" style="width: 60px;">
                    <button class="button" onclick="showMarkScheme('q1')">Show Mark Scheme</button>
                </div>
                <div class="mark-scheme" id="q1-markscheme">
                    <h4>Mark Scheme:</h4>
                    <p><strong>Benefits (1 mark each, max 2):</strong></p>
                    <ul>
                        <li>Faster execution speed as code is already translated</li>
                        <li>Source code not needed for distribution/execution</li>
                        <li>Code optimization during compilation improves performance</li>
                        <li>More memory efficient at runtime</li>
                    </ul>
                    <p><strong>Drawbacks (1 mark each, max 2):</strong></p>
                    <ul>
                        <li>Slower development cycle (compile before each test)</li>
                        <li>Platform-specific executables needed</li>
                        <li>All syntax errors must be fixed before running</li>
                        <li>Harder to debug runtime errors</li>
                    </ul>
                </div>
            </div>

            <div class="task-container">
                <h3>Question 2 (3 marks)</h3>
                <p>Describe the process by which Java source code is executed, explaining why Java is considered to use a hybrid translation approach.</p>
                <textarea id="exam-q2" rows="6" placeholder="Write your answer here..."></textarea>
                <div style="margin: 10px 0;">
                    <label>Predicted marks (out of 3): </label>
                    <input type="number" id="q2-marks" min="0" max="3" style="width: 60px;">
                    <button class="button" onclick="showMarkScheme('q2')">Show Mark Scheme</button>
                </div>
                <div class="mark-scheme" id="q2-markscheme">
                    <h4>Mark Scheme:</h4>
                    <ul>
                        <li>Java source code is compiled to bytecode (1 mark)</li>
                        <li>Bytecode is platform-independent intermediate code (1 mark)</li>
                        <li>JVM interprets or JIT compiles bytecode to machine code (1 mark)</li>
                    </ul>
                </div>
            </div>

            <div class="task-container">
                <h3>Question 3 (2 marks)</h3>
                <p>State the type of translator used for assembly language and explain why this type is appropriate.</p>
                <textarea id="exam-q3" rows="4" placeholder="Write your answer here..."></textarea>
                <div style="margin: 10px 0;">
                    <label>Predicted marks (out of 2): </label>
                    <input type="number" id="q3-marks" min="0" max="2" style="width: 60px;">
                    <button class="button" onclick="showMarkScheme('q3')">Show Mark Scheme</button>
                </div>
                <div class="mark-scheme" id="q3-markscheme">
                    <h4>Mark Scheme:</h4>
                    <ul>
                        <li>Assembler (1 mark)</li>
                        <li>One assembly instruction translates to one machine instruction / Direct mapping / Simple translation (1 mark)</li>
                    </ul>
                </div>
            </div>

            <div class="nav-arrows">
                <button class="arrow-button" onclick="showSection(5)">← Previous</button>
                <button class="arrow-button next" onclick="showSection(7)">Next →</button>
            </div>
        </div>

        <!-- Section 7: Extension Activities -->
        <div class="section" id="section-7">
            <h2>Extension Activities</h2>
            
            <div class="extension-section">
                <h3>Beyond the Specification</h3>
                
                <h4>1. Just-In-Time (JIT) Compilation</h4>
                <p>Research how modern JIT compilers work and why they're used in languages like Java and C#. Consider:</p>
                <ul>
                    <li>How does the JIT decide which code to compile?</li>
                    <li>What is "hot spot" optimization?</li>
                    <li>How do tiered compilation systems work?</li>
                </ul>
                <textarea rows="6" placeholder="Write your research findings here..."></textarea>

                <h4>2. Transpilers</h4>
                <p>Investigate transpilers (source-to-source compilers) like TypeScript → JavaScript or Sass → CSS:</p>
                <ul>
                    <li>How do they differ from traditional compilers?</li>
                    <li>What advantages do they provide?</li>
                    <li>Give three examples of popular transpilers</li>
                </ul>
                <textarea rows="6" placeholder="Write your findings here..."></textarea>

                <h4>3. WebAssembly</h4>
                <p>Explore WebAssembly as a modern compilation target:</p>
                <ul>
                    <li>How does it enable near-native performance in browsers?</li>
                    <li>Which languages can compile to WebAssembly?</li>
                    <li>What are its limitations?</li>
                </ul>
                <textarea rows="6" placeholder="Write your exploration here..."></textarea>

                <button class="button" onclick="submitExtension()">Submit Extension Work</button>
            </div>

            <div class="nav-arrows">
                <button class="arrow-button" onclick="showSection(6)">← Previous</button>
                <button class="arrow-button next" onclick="showSection(8)">Next →</button>
            </div>
        </div>

        <!-- Section 8: Summary and Final Quiz -->
        <div class="section" id="section-8">
            <h2>Summary and Final Assessment</h2>
            
            <div class="task-container">
                <h3>Key Takeaways</h3>
                <ul>
                    <li>✅ Assemblers translate assembly language to machine code (1:1 mapping)</li>
                    <li>✅ Compilers translate entire programs before execution (fast runtime)</li>
                    <li>✅ Interpreters translate and execute line by line (flexible development)</li>
                    <li>✅ Hybrid approaches like Java combine compilation and interpretation</li>
                    <li>✅ Choose translator based on performance needs and development requirements</li>
                </ul>
            </div>

            <div class="task-container">
                <h3>Final Assessment Quiz</h3>
                
                <div class="multiple-choice">
                    <p><strong>1. Which translator would be most suitable for developing a mobile game requiring maximum performance?</strong></p>
                    <div class="mc-option" onclick="selectMC(this, 'final-1', 'a')">A) Interpreter</div>
                    <div class="mc-option" onclick="selectMC(this, 'final-1', 'b')">B) Compiler</div>
                    <div class="mc-option" onclick="selectMC(this, 'final-1', 'c')">C) Assembler</div>
                    <div class="mc-option" onclick="selectMC(this, 'final-1', 'd')">D) Text editor</div>
                    <button class="button" onclick="checkMC('final-1', 'b')">Check</button>
                    <div id="final-1-feedback"></div>
                </div>

                <div class="multiple-choice">
                    <p><strong>2. What is the main advantage of an interpreter during development?</strong></p>
                    <div class="mc-option" onclick="selectMC(this, 'final-2', 'a')">A) Produces faster executing code</div>
                    <div class="mc-option" onclick="selectMC(this, 'final-2', 'b')">B) Creates smaller executable files</div>
                    <div class="mc-option" onclick="selectMC(this, 'final-2', 'c')">C) Allows immediate testing without full compilation</div>
                    <div class="mc-option" onclick="selectMC(this, 'final-2', 'd')">D) Generates optimized machine code</div>
                    <button class="button" onclick="checkMC('final-2', 'c')">Check</button>
                    <div id="final-2-feedback"></div>
                </div>

                <div class="multiple-choice">
                    <p><strong>3. Java bytecode is an example of:</strong></p>
                    <div class="mc-option" onclick="selectMC(this, 'final-3', 'a')">A) Machine code</div>
                    <div class="mc-option" onclick="selectMC(this, 'final-3', 'b')">B) Assembly language</div>
                    <div class="mc-option" onclick="selectMC(this, 'final-3', 'c')">C) Source code</div>
                    <div class="mc-option" onclick="selectMC(this, 'final-3', 'd')">D) Intermediate code</div>
                    <button class="button" onclick="checkMC('final-3', 'd')">Check</button>
                    <div id="final-3-feedback"></div>
                </div>

                <div class="multiple-choice">
                    <p><strong>4. Which statement about assemblers is FALSE?</strong></p>
                    <div class="mc-option" onclick="selectMC(this, 'final-4', 'a')">A) They perform complex optimization</div>
                    <div class="mc-option" onclick="selectMC(this, 'final-4', 'b')">B) They translate assembly to machine code</div>
                    <div class="mc-option" onclick="selectMC(this, 'final-4', 'c')">C) They produce platform-specific code</div>
                    <div class="mc-option" onclick="selectMC(this, 'final-4', 'd')">D) They use one-to-one instruction mapping</div>
                    <button class="button" onclick="checkMC('final-4', 'a')">Check</button>
                    <div id="final-4-feedback"></div>
                </div>

                <div class="multiple-choice">
                    <p><strong>5. A developer needs to quickly prototype and test algorithms. Which translator is best?</strong></p>
                    <div class="mc-option" onclick="selectMC(this, 'final-5', 'a')">A) Assembler for precision</div>
                    <div class="mc-option" onclick="selectMC(this, 'final-5', 'b')">B) Compiler for speed</div>
                    <div class="mc-option" onclick="selectMC(this, 'final-5', 'c')">C) Interpreter for flexibility</div>
                    <div class="mc-option" onclick="selectMC(this, 'final-5', 'd')">D) Hybrid for balance</div>
                    <button class="button" onclick="checkMC('final-5', 'c')">Check</button>
                    <div id="final-5-feedback"></div>
                </div>

                <div class="multiple-choice">
                    <p><strong>6. Which is NOT a benefit of compilation?</strong></p>
                    <div class="mc-option" onclick="selectMC(this, 'final-6', 'a')">A) Platform independence</div>
                    <div class="mc-option" onclick="selectMC(this, 'final-6', 'b')">B) Fast execution</div>
                    <div class="mc-option" onclick="selectMC(this, 'final-6', 'c')">C) Code optimization</div>
                    <div class="mc-option" onclick="selectMC(this, 'final-6', 'd')">D) No source code needed to run</div>
                    <button class="button" onclick="checkMC('final-6', 'a')">Check</button>
                    <div id="final-6-feedback"></div>
                </div>

                <div class="multiple-choice">
                    <p><strong>7. The JVM is an example of:</strong></p>
                    <div class="mc-option" onclick="selectMC(this, 'final-7', 'a')">A) A compiler</div>
                    <div class="mc-option" onclick="selectMC(this, 'final-7', 'b')">B) An assembler</div>
                    <div class="mc-option" onclick="selectMC(this, 'final-7', 'c')">C) A virtual machine that interprets/compiles bytecode</div>
                    <div class="mc-option" onclick="selectMC(this, 'final-7', 'd')">D) A text editor</div>
                    <button class="button" onclick="checkMC('final-7', 'c')">Check</button>
                    <div id="final-7-feedback"></div>
                </div>

                <div class="multiple-choice">
                    <p><strong>8. For embedded systems with limited memory, which is most suitable?</strong></p>
                    <div class="mc-option" onclick="selectMC(this, 'final-8', 'a')">A) Interpreter (needs runtime environment)</div>
                    <div class="mc-option" onclick="selectMC(this, 'final-8', 'b')">B) Compiler (produces efficient code)</div>
                    <div class="mc-option" onclick="selectMC(this, 'final-8', 'c')">C) Hybrid system (needs JVM)</div>
                    <div class="mc-option" onclick="selectMC(this, 'final-8', 'd')">D) Any translator works equally</div>
                    <button class="button" onclick="checkMC('final-8', 'b')">Check</button>
                    <div id="final-8-feedback"></div>
                </div>

                <button class="button" onclick="calculateFinalScore()">Calculate Final Score</button>
                <div id="final-score"></div>
            </div>

            <div class="task-container">
                <h3>Videos (Placeholder)</h3>
                <p>Additional video resources will be available here to reinforce your learning:</p>
                <ul>
                    <li>📹 How Compilers Work - Deep Dive</li>
                    <li>📹 Building Your Own Interpreter</li>
                    <li>📹 JVM Architecture Explained</li>
                    <li>📹 Assembly Language Programming Basics</li>
                </ul>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progress-bar">0%</div>
            </div>

            <div class="nav-arrows">
                <button class="arrow-button" onclick="showSection(7)">← Previous</button>
                <button class="arrow-button next" disabled>Lesson Complete!</button>
            </div>
        </div>
    </div>

    <!-- Feedback Button -->
    <button class="feedback-button" onclick="openFeedback()">💬</button>

    <!-- Feedback Modal -->
    <div class="feedback-modal" id="feedbackModal">
        <div class="feedback-content">
            <h3>Send Feedback</h3>
            <p>Found a bug or have a suggestion? Let us know!</p>
            <textarea id="feedbackText" rows="6" placeholder="Describe the issue or suggestion..."></textarea>
            <div style="margin-top: 15px;">
                <button class="button" onclick="sendFeedback()">Send</button>
                <button class="button" onclick="closeFeedback()" style="background: #6b7280;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Achievement Popup -->
    <div class="achievement-popup" id="achievementPopup">
        <h3>🎉 Achievement Unlocked!</h3>
        <p id="achievementText"></p>
    </div>

    <!-- Anti-paste warning -->
    <div class="paste-shame" id="pasteShame">
        ❌ Pasting is disabled! Please type your answers to learn effectively.
    </div>

    <script>
        // Global variables
        let currentSection = 0;
        let xp = 0;
        let level = 0;
        let completedTasks = new Set();
        let selectedLanguage = null;
        let selectedCharacteristic = null;
        let characteristicDropZone = null;
        let compilerStage = 0;
        let interpreterLine = 0;
        let javaStep = 1;
        let finalQuizAnswers = {};

        // Canvas variables
        let canvas = document.getElementById('drawingCanvas');
        let ctx = canvas.getContext('2d');
        let isDrawing = false;
        let lastX = 0;
        let lastY = 0;

        // Initialize canvas
        function initCanvas() {
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            // Touch events
            canvas.addEventListener('touchstart', handleTouch);
            canvas.addEventListener('touchmove', handleTouch);
            canvas.addEventListener('touchend', stopDrawing);
        }

        function startDrawing(e) {
            isDrawing = true;
            const rect = canvas.getBoundingClientRect();
            lastX = e.clientX - rect.left;
            lastY = e.clientY - rect.top;
        }

        function draw(e) {
            if (!isDrawing) return;
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(x, y);
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            lastX = x;
            lastY = y;
        }

        function stopDrawing() {
            isDrawing = false;
        }

        function handleTouch(e) {
            e.preventDefault();
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent(e.type === 'touchstart' ? 'mousedown' : 
                                            e.type === 'touchmove' ? 'mousemove' : 'mouseup', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            canvas.dispatchEvent(mouseEvent);
        }

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            addXP(5, 'canvas-cleared');
        }

        function saveDrawing() {
            // Simulate saving
            showAchievement('Drawing Saved!', 10);
        }

        // XP and Achievement System
        function addXP(points, taskId) {
            if (completedTasks.has(taskId)) return;
            
            completedTasks.add(taskId);
            xp += points;
            
            // Level calculation
            const newLevel = Math.floor(xp / 100);
            if (newLevel > level && newLevel <= 5) {
                level = newLevel;
                showAchievement(`Level ${level} Reached!`, 50);
            }
            
            updateXPDisplay();
            updateProgress();
        }

        function updateXPDisplay() {
            document.getElementById('xp').textContent = xp;
            document.getElementById('level').textContent = Math.min(level, 5);
        }

        function showAchievement(text, xpGained) {
            const popup = document.getElementById('achievementPopup');
            document.getElementById('achievementText').textContent = `${text} (+${xpGained} XP)`;
            popup.style.display = 'block';
            
            setTimeout(() => {
                popup.style.display = 'none';
            }, 4000);
        }

        function updateProgress() {
            const totalSections = 9;
            const progress = ((currentSection + 1) / totalSections) * 100;
            const progressBar = document.getElementById('progress-bar');
            if (progressBar) {
                progressBar.style.width = progress + '%';
                progressBar.textContent = Math.round(progress) + '%';
            }
        }

        // Section Navigation
        function showSection(index) {
            const sections = document.querySelectorAll('.section');
            const navButtons = document.querySelectorAll('.nav-button');
            
            sections.forEach(section => section.classList.remove('active'));
            navButtons.forEach(button => button.classList.remove('active'));
            
            sections[index].classList.add('active');
            navButtons[index].classList.add('active');
            
            currentSection = index;
            updateProgress();
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        // Starter Activity Functions
        function selectLanguage(lang) {
            document.querySelectorAll('.drag-item').forEach(item => {
                item.style.background = '#3b82f6';
            });
            event.target.style.background = '#2563eb';
            selectedLanguage = lang;
        }

        function selectMethod(method) {
            if (!selectedLanguage) return;
            
            const dropZone = document.querySelector(`[data-method="${method}"]`);
            const langItem = document.querySelector(`[data-lang="${selectedLanguage}"]`);
            
            if (langItem && !langItem.classList.contains('used')) {
                dropZone.innerHTML = `<span>${langItem.textContent}</span>`;
                dropZone.classList.add('filled');
                dropZone.setAttribute('data-lang', selectedLanguage);
                langItem.classList.add('used');
                selectedLanguage = null;
                
                addXP(10, `starter-match-${langItem.textContent}`);
            }
        }

        function checkStarterAnswers() {
            const correct = {
                'assembly': 'assembler',
                'c++': 'compiler',
                'python': 'interpreter',
                'javascript': 'interpreter',
                'java': 'hybrid'
            };
            
            let score = 0;
            const feedback = document.getElementById('starter-feedback');
            
            Object.entries(correct).forEach(([lang, method]) => {
                const zone = document.querySelector(`[data-method="${method}"][data-lang="${lang}"]`);
                if (zone) {
                    score++;
                    zone.style.background = '#d1fae5';
                }
            });
            
            feedback.innerHTML = `<p style="color: #059669; font-weight: bold;">Score: ${score}/5</p>`;
            if (score === 5) {
                showAchievement('Perfect Start!', 25);
            } else {
                addXP(score * 5, 'starter-activity');
            }
        }

        function resetStarterActivity() {
            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.innerHTML = `<span>${zone.getAttribute('data-method').charAt(0).toUpperCase() + zone.getAttribute('data-method').slice(1)}</span>`;
                zone.classList.remove('filled');
                zone.removeAttribute('data-lang');
                zone.style.background = '';
            });
            
            document.querySelectorAll('.drag-item').forEach(item => {
                item.classList.remove('used');
                item.style.background = '#3b82f6';
            });
            
            selectedLanguage = null;
            document.getElementById('starter-feedback').innerHTML = '';
        }

        // Introduction Activity Functions
        function selectFillOption(element, value) {
            if (element.classList.contains('used')) return;
            
            const inputs = document.querySelectorAll('.fill-input');
            const emptyInput = Array.from(inputs).find(input => input.value === '');
            
            if (emptyInput) {
                emptyInput.value = value;
                element.classList.add('used');
            }
        }

        function checkIntroAnswers() {
            const answers = {
                0: ['source code', 'high-level'],
                1: ['machine code'],
                2: ['source code'],
                3: ['object code', 'executable']
            };
            
            const inputs = document.querySelectorAll('.fill-input');
            let correct = 0;
            
            inputs.forEach((input, index) => {
                const userAnswer = input.value.toLowerCase().trim();
                let isCorrect = false;
                
                if (index === 0 && (userAnswer === 'source code' || userAnswer === 'high-level')) isCorrect = true;
                if (index === 1 && userAnswer === 'machine code') isCorrect = true;
                if (index === 2 && userAnswer === 'source code') isCorrect = true;
                if (index === 3 && (userAnswer === 'object code' || userAnswer === 'executable')) isCorrect = true;
                
                if (isCorrect) {
                    input.style.borderColor = '#10b981';
                    correct++;
                } else {
                    input.style.borderColor = '#ef4444';
                }
            });
            
            const feedback = document.getElementById('intro-feedback');
            feedback.innerHTML = `<p style="color: #059669; font-weight: bold;">Score: ${correct}/4</p>`;
            
            if (correct === 4) {
                showAchievement('Definition Master!', 20);
            } else {
                addXP(correct * 5, 'intro-definitions');
            }
        }

        function showHint(section) {
            const hintBox = document.getElementById(`${section}-hint`);
            hintBox.style.display = 'block';
            addXP(2, `hint-${section}`); // Less XP for using hints
        }

        function resetIntroActivity() {
            document.querySelectorAll('.fill-input').forEach(input => {
                input.value = '';
                input.style.borderColor = '#e5e7eb';
            });
            
            document.querySelectorAll('.fill-option').forEach(option => {
                option.classList.remove('used');
            });
            
            document.getElementById('intro-feedback').innerHTML = '';
            document.getElementById('intro-hint').style.display = 'none';
        }

        function animateTranslation() {
            const machineDisplay = document.getElementById('machine-display');
            machineDisplay.style.display = 'none';
            
            setTimeout(() => {
                machineDisplay.style.display = 'block';
                machineDisplay.style.animation = 'fadeIn 1s ease';
                addXP(10, 'translation-animation');
            }, 500);
        }

        // Assembler Activity Functions
        const assemblyTranslations = {
            0: '10110000 00000101',  // MOV AX, 5
            1: '00000101 00000011',  // ADD AX, 3
            2: '10001011 11011000',  // MOV BX, AX
            3: '11110100'            // HLT
        };

        function translateAssembly(line) {
            const machineLines = document.getElementById('machine-lines');
            const asmLines = document.querySelectorAll('.asm-line');
            
            asmLines[line].style.background = '#dbeafe';
            
            const translation = document.createElement('div');
            translation.textContent = assemblyTranslations[line];
            translation.style.animation = 'fadeIn 0.5s ease';
            
            if (!machineLines.querySelector(`[data-line="${line}"]`)) {
                translation.setAttribute('data-line', line);
                machineLines.appendChild(translation);
                addXP(5, `asm-translate-${line}`);
            }
            
            if (machineLines.children.length === 4) {
                showAchievement('Assembly Expert!', 15);
            }
        }

        function resetAssemblerActivity() {
            document.getElementById('machine-lines').innerHTML = '';
            document.querySelectorAll('.asm-line').forEach(line => {
                line.style.background = '';
            });
            
            // Reset multiple choice
            document.querySelectorAll('#section-2 .mc-option').forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
            });
            document.getElementById('asm-q1-feedback').innerHTML = '';
            
            clearCanvas();
        }

        // Compiler Activity Functions
        function animateCompilation() {
            compilerStage++;
            
            if (compilerStage > 3) {
                compilerStage = 1;
                // Reset visibility
                for (let i = 1; i <= 3; i++) {
                    document.getElementById(`compile-step-${i}`).style.display = 'none';
                    document.getElementById(`compile-stage-${i}`).style.display = 'none';
                }
            }
            
            // Show current stage
            document.getElementById(`compile-step-${compilerStage}`).style.display = 'block';
            setTimeout(() => {
                document.getElementById(`compile-stage-${compilerStage}`).style.display = 'block';
                addXP(5, `compile-stage-${compilerStage}`);
            }, 500);
            
            if (compilerStage === 3) {
                showAchievement('Compilation Complete!', 15);
            }
        }

        function selectCharacteristic(char) {
            selectedCharacteristic = char;
            document.querySelectorAll('.drag-item').forEach(item => {
                item.style.background = '#3b82f6';
            });
            event.target.style.background = '#2563eb';
        }

        function dropCharacteristic(zone) {
            if (!selectedCharacteristic) return;
            
            const dropZone = document.getElementById(`compiler-${zone}`);
            const charItem = document.querySelector(`[onclick="selectCharacteristic('${selectedCharacteristic}')"]`);
            
            if (charItem && !charItem.classList.contains('used')) {
                const newItem = document.createElement('div');
                newItem.textContent = charItem.textContent;
                newItem.style.padding = '10px';
                newItem.style.margin = '5px';
                newItem.style.background = '#e0e7ff';
                newItem.style.borderRadius = '5px';
                newItem.setAttribute('data-char', selectedCharacteristic);
                
                dropZone.appendChild(newItem);
                charItem.classList.add('used');
                selectedCharacteristic = null;
                
                addXP(5, `compiler-char-${selectedCharacteristic}`);
            }
        }

        function checkCompilerCategories() {
            const correctBenefits = ['fast-execution', 'no-source', 'optimization', 'memory-efficient', 'distribution'];
            const correctDrawbacks = ['slow-development', 'platform-specific', 'error-detection'];
            
            const benefitsZone = document.getElementById('compiler-benefits');
            const drawbacksZone = document.getElementById('compiler-drawbacks');
            
            let score = 0;
            
            // Check benefits
            benefitsZone.querySelectorAll('[data-char]').forEach(item => {
                if (correctBenefits.includes(item.getAttribute('data-char'))) {
                    item.style.background = '#d1fae5';
                    score++;
                } else {
                    item.style.background = '#fee2e2';
                }
            });
            
            // Check drawbacks
            drawbacksZone.querySelectorAll('[data-char]').forEach(item => {
                if (correctDrawbacks.includes(item.getAttribute('data-char'))) {
                    item.style.background = '#d1fae5';
                    score++;
                } else {
                    item.style.background = '#fee2e2';
                }
            });
            
            const feedback = document.getElementById('compiler-feedback');
            feedback.innerHTML = `<p style="color: #059669; font-weight: bold;">Score: ${score}/8 correct placements</p>`;
            
            if (score === 8) {
                showAchievement('Compiler Expert!', 25);
            } else {
                addXP(score * 3, 'compiler-categorization');
            }
        }

        function resetCompilerActivity() {
            compilerStage = 0;
            for (let i = 1; i <= 3; i++) {
                document.getElementById(`compile-step-${i}`).style.display = i === 1 ? 'block' : 'none';
                document.getElementById(`compile-stage-${i}`).style.display = 'none';
            }
            
            document.getElementById('compiler-benefits').innerHTML = '';
            document.getElementById('compiler-drawbacks').innerHTML = '';
            document.querySelectorAll('#section-3 .drag-item').forEach(item => {
                item.classList.remove('used');
            });
            
            document.getElementById('compiler-feedback').innerHTML = '';
        }

        // Interpreter Activity Functions
        const interpreterState = {
            x: undefined,
            y: undefined,
            result: undefined
        };

        function runInterpreter() {
            if (interpreterLine > 3) {
                interpreterLine = 0;
                // Reset state
                Object.keys(interpreterState).forEach(key => {
                    interpreterState[key] = undefined;
                });
                document.querySelectorAll('.code-line').forEach(line => {
                    line.style.background = '';
                });
            }
            
            const stateDisplay = document.getElementById('interpreter-state');
            const lines = document.querySelectorAll('.code-line');
            
            // Highlight current line
            lines.forEach(line => line.style.background = '');
            lines[interpreterLine].style.background = '#fef3c7';
            
            // Execute line
            switch(interpreterLine) {
                case 0:
                    interpreterState.x = 5;
                    stateDisplay.innerHTML = 'Variables: x = 5';
                    break;
                case 1:
                    interpreterState.y = 10;
                    stateDisplay.innerHTML = 'Variables: x = 5, y = 10';
                    break;
                case 2:
                    interpreterState.result = interpreterState.x + interpreterState.y;
                    stateDisplay.innerHTML = 'Variables: x = 5, y = 10, result = 15';
                    break;
                case 3:
                    stateDisplay.innerHTML = 'Variables: x = 5, y = 10, result = 15<br>Output: 15';
                    showAchievement('Interpreter Simulation Complete!', 15);
                    break;
            }
            
            addXP(5, `interpreter-line-${interpreterLine}`);
            interpreterLine++;
        }

        function checkComparisonTable() {
            const correctAnswers = [
                'during execution',
                'faster',
                'more at runtime',
                'before execution',
                'platform independent'
            ];
            
            const inputs = document.querySelectorAll('.comparison-table input');
            let correct = 0;
            
            inputs.forEach((input, index) => {
                const userAnswer = input.value.toLowerCase().trim();
                if (userAnswer.includes(correctAnswers[index].split(' ')[0])) {
                    input.style.borderColor = '#10b981';
                    correct++;
                } else {
                    input.style.borderColor = '#ef4444';
                }
            });
            
            const feedback = document.getElementById('comparison-feedback');
            feedback.innerHTML = `<p style="color: #059669; font-weight: bold;">Score: ${correct}/5</p>`;
            
            if (correct === 5) {
                showAchievement('Comparison Master!', 20);
            } else {
                addXP(correct * 4, 'comparison-table');
            }
        }

        function resetInterpreterActivity() {
            interpreterLine = 0;
            Object.keys(interpreterState).forEach(key => {
                interpreterState[key] = undefined;
            });
            
            document.getElementById('interpreter-state').innerHTML = 'Ready to execute...';
            document.querySelectorAll('.code-line').forEach(line => {
                line.style.background = '';
            });
            
            document.querySelectorAll('.comparison-table input').forEach(input => {
                input.value = '';
                input.style.borderColor = '#e5e7eb';
            });
            
            document.getElementById('comparison-feedback').innerHTML = '';
            
            // Reset scenario question
            document.querySelectorAll('#section-4 .mc-option').forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
            });
            document.getElementById('scenario-1-feedback').innerHTML = '';
        }

        // Hybrid Activity Functions
        function showJavaStep(step) {
            javaStep = step;
            
            if (step === 2) {
                document.getElementById('java-step-2').style.display = 'block';
                document.getElementById('java-button-3').style.display = 'inline-block';
                addXP(10, 'java-compile');
            } else if (step === 3) {
                document.getElementById('java-step-3').style.display = 'block';
                addXP(10, 'java-execute');
                showAchievement('Java Process Complete!', 15);
            }
        }

        function selectTF(element, question, value) {
            const options = element.parentElement.querySelectorAll('.mc-option');
            options.forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            element.setAttribute('data-answer', value);
        }

        function checkTF(question, correct) {
            const selected = document.querySelector(`#section-5 .mc-option.selected[onclick*="${question}"]`);
            const feedback = document.getElementById(`${question}-feedback`);
            
            if (!selected) {
                feedback.innerHTML = '<p style="color: #ef4444;">Please select an answer!</p>';
                return;
            }
            
            const userAnswer = selected.getAttribute('data-answer') === 'true';
            
            if (userAnswer === correct) {
                selected.classList.add('correct');
                feedback.innerHTML = '<p style="color: #059669; font-weight: bold;">Correct! ✓</p>';
                addXP(10, `tf-${question}`);
            } else {
                selected.classList.add('incorrect');
                feedback.innerHTML = '<p style="color: #ef4444;">Incorrect. Try again!</p>';
            }
        }

        function checkHybridAnswer() {
            const answer = document.getElementById('hybrid-advantages').value.trim();
            const feedback = document.getElementById('hybrid-answer-feedback');
            
            if (answer.length < 50) {
                feedback.innerHTML = '<p style="color: #ef4444;">Please provide a more detailed answer.</p>';
                return;
            }
            
            const keywords = ['platform', 'independent', 'bytecode', 'portable', 'jit', 'performance', 'optimization'];
            const matches = keywords.filter(keyword => answer.toLowerCase().includes(keyword));
            
            const xpEarned = Math.min(matches.length * 5, 25);
            addXP(xpEarned, 'hybrid-advantages');
            
            feedback.innerHTML = `<p style="color: #059669; font-weight: bold;">Good answer! Key points identified: ${matches.length}/7 (+${xpEarned} XP)</p>`;
            
            if (matches.length >= 5) {
                showAchievement('Hybrid Expert!', 10);
            }
        }

        function resetHybridActivity() {
            javaStep = 1;
            document.getElementById('java-step-2').style.display = 'none';
            document.getElementById('java-step-3').style.display = 'none';
            document.getElementById('java-button-3').style.display = 'none';
            
            // Reset true/false questions
            document.querySelectorAll('#section-5 .mc-option').forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
            });
            
            document.getElementById('hybrid-advantages').value = '';
            
            // Clear feedback
            ['hybrid-1', 'hybrid-2', 'hybrid-3', 'hybrid-answer'].forEach(id => {
                const element = document.getElementById(`${id}-feedback`);
                if (element) element.innerHTML = '';
            });
        }

        // Multiple Choice Functions
        function selectMC(element, question, option) {
            const container = element.parentElement;
            container.querySelectorAll('.mc-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            element.classList.add('selected');
            element.setAttribute('data-answer', option);
        }

        function checkMC(question, correct) {
            const selected = document.querySelector(`.mc-option.selected[onclick*="${question}"]`);
            const feedback = document.getElementById(`${question}-feedback`);
            
            if (!selected) {
                feedback.innerHTML = '<p style="color: #ef4444;">Please select an answer!</p>';
                return;
            }
            
            const userAnswer = selected.getAttribute('data-answer');
            
            if (userAnswer === correct) {
                selected.classList.add('correct');
                feedback.innerHTML = '<p style="color: #059669; font-weight: bold;">Correct! ✓</p>';
                addXP(15, `mc-${question}`);
                
                // Track final quiz answers
                if (question.startsWith('final-')) {
                    finalQuizAnswers[question] = true;
                }
            } else {
                selected.classList.add('incorrect');
                feedback.innerHTML = '<p style="color: #ef4444;">Incorrect. Try again!</p>';
                
                if (question.startsWith('final-')) {
                    finalQuizAnswers[question] = false;
                }
            }
        }

        // Exam Question Functions
        function showMarkScheme(question) {
            const textarea = document.getElementById(`exam-${question}`);
            const marksInput = document.getElementById(`${question}-marks`);
            const markScheme = document.getElementById(`${question}-markscheme`);
            
            // Check if answer is substantial enough
            if (textarea.value.trim().length < 100) {
                alert('Please write a more detailed answer before viewing the mark scheme.');
                return;
            }
            
            // Check if predicted marks entered
            if (!marksInput.value) {
                alert('Please enter your predicted marks first.');
                return;
            }
            
            markScheme.style.display = 'block';
            addXP(20, `markscheme-${question}`);
        }

        // Extension Activity
        function submitExtension() {
            const textareas = document.querySelectorAll('#section-7 textarea');
            let filled = 0;
            
            textareas.forEach((textarea, index) => {
                if (textarea.value.trim().length > 50) {
                    filled++;
                    addXP(15, `extension-${index}`);
                }
            });
            
            if (filled === 3) {
                showAchievement('Extension Master!', 30);
            } else if (filled > 0) {
                showAchievement(`Extension Work Submitted!`, filled * 10);
            }
        }

        // Final Quiz Functions
        function calculateFinalScore() {
            const total = Object.keys(finalQuizAnswers).length;
            const correct = Object.values(finalQuizAnswers).filter(v => v).length;
            
            const scoreDiv = document.getElementById('final-score');
            scoreDiv.innerHTML = `
                <h3 style="color: #059669;">Final Score: ${correct}/${total}</h3>
                <p>${correct === total ? 'Perfect score! Outstanding work!' : 
                      correct >= total * 0.8 ? 'Excellent understanding!' :
                      correct >= total * 0.6 ? 'Good effort! Review the topics you missed.' :
                      'Keep studying! Review the lesson and try again.'}</p>
            `;
            
            if (correct === total) {
                showAchievement('Perfect Score!', 50);
            }
        }

        // Feedback System
        function openFeedback() {
            document.getElementById('feedbackModal').style.display = 'flex';
        }

        function closeFeedback() {
            document.getElementById('feedbackModal').style.display = 'none';
            document.getElementById('feedbackText').value = '';
        }

        function sendFeedback() {
            const feedbackText = document.getElementById('feedbackText').value.trim();
            if (!feedbackText) {
                alert('Please enter your feedback before sending.');
                return;
            }
            
            const currentPage = `Section ${currentSection + 1}: ${document.querySelector('.section.active h2').textContent}`;
            const emailBody = `Feedback from Language Translators Lesson\n\nPage: ${currentPage}\n\nFeedback:\n${feedbackText}`;
            
            // Simulate sending email
            console.log('Sending feedback:', emailBody);
            
            alert('Thank you for your feedback! It has been sent.');
            closeFeedback();
            addXP(5, 'feedback-sent');
        }

        // Anti-paste protection
        document.addEventListener('paste', function(e) {
            e.preventDefault();
            const pasteShame = document.getElementById('pasteShame');
            pasteShame.style.display = 'block';
            setTimeout(() => {
                pasteShame.style.display = 'none';
            }, 3000);
            return false;
        });

        // Prevent context menu on inputs/textareas
        document.addEventListener('contextmenu', function(e) {
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                e.preventDefault();
                return false;
            }
        });

        // Initialize on load
        window.onload = function() {
            initCanvas();
            updateXPDisplay();
            updateProgress();
            
            // Set canvas size based on container
            const container = canvas.parentElement;
            canvas.width = Math.min(600, container.clientWidth - 40);
            canvas.height = 400;
        };

        // Handle window resize
        window.onresize = function() {
            const container = canvas.parentElement;
            const currentWidth = canvas.width;
            const newWidth = Math.min(600, container.clientWidth - 40);
            
            if (Math.abs(currentWidth - newWidth) > 50) {
                // Save canvas content
                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                
                // Resize canvas
                canvas.width = newWidth;
                
                // Restore content (scaled)
                ctx.putImageData(imageData, 0, 0);
            }
        };
    </script>
</body>
</html>