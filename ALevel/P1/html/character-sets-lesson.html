<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Character Sets - A Level Computer Science</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            font-size: 16px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .navbar {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .nav-button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-size: 14px;
        }

        .nav-button:hover {
            background-color: #2980b9;
        }

        .nav-button.active {
            background-color: #e74c3c;
        }

        .section {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 2.5em;
        }

        h2 {
            color: #34495e;
            margin: 30px 0 20px 0;
            font-size: 1.8em;
        }

        h3 {
            color: #7f8c8d;
            margin: 20px 0 15px 0;
            font-size: 1.4em;
        }

        .learning-outcome {
            background-color: #e8f4f8;
            padding: 15px;
            border-left: 4px solid #3498db;
            margin: 10px 0;
            border-radius: 5px;
        }

        .task-box {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px solid #e9ecef;
        }

        .interactive-area {
            background-color: #fff;
            border: 2px dashed #3498db;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            min-height: 150px;
        }

        input[type="text"], input[type="number"], textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus, input[type="number"]:focus, textarea:focus {
            outline: none;
            border-color: #3498db;
        }

        button {
            background-color: #27ae60;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            margin: 5px;
        }

        button:hover {
            background-color: #229954;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .reset-button {
            background-color: #e74c3c;
        }

        .reset-button:hover {
            background-color: #c0392b;
        }

        .xp-display {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
            z-index: 1000;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .achievement-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #f39c12;
            color: white;
            padding: 20px 40px;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            z-index: 2000;
            display: none;
            animation: achievementPop 0.5s ease-out;
            box-shadow: 0 8px 16px rgba(0,0,0,0.3);
        }

        @keyframes achievementPop {
            0% { transform: translate(-50%, -50%) scale(0); }
            70% { transform: translate(-50%, -50%) scale(1.2); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        .drag-item {
            background-color: #3498db;
            color: white;
            padding: 10px;
            margin: 5px;
            border-radius: 5px;
            cursor: move;
            display: inline-block;
            transition: all 0.3s;
        }

        .drag-item:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .drop-zone {
            background-color: #ecf0f1;
            border: 2px dashed #95a5a6;
            padding: 15px;
            margin: 10px;
            min-height: 50px;
            border-radius: 5px;
            transition: all 0.3s;
        }

        .drop-zone.drag-over {
            background-color: #d5e8f4;
            border-color: #3498db;
        }

        .correct {
            background-color: #27ae60;
            color: white;
        }

        .incorrect {
            background-color: #e74c3c;
            color: white;
        }

        .hint-button {
            background-color: #f39c12;
            font-size: 14px;
            padding: 5px 10px;
        }

        .hint-button:hover {
            background-color: #e67e22;
        }

        .feedback-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #95a5a6;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            z-index: 1000;
            transition: all 0.3s;
        }

        .feedback-button:hover {
            background-color: #7f8c8d;
            transform: scale(1.1);
        }

        .feedback-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 2000;
        }

        .feedback-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
        }

        .close-modal {
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            color: #999;
        }

        .close-modal:hover {
            color: #333;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .quiz-question {
            background-color: #f8f9fa;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }

        .quiz-option {
            display: block;
            padding: 10px;
            margin: 5px 0;
            background-color: white;
            border: 2px solid #e9ecef;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quiz-option:hover {
            background-color: #e8f4f8;
            border-color: #3498db;
        }

        .quiz-option.selected {
            background-color: #3498db;
            color: white;
            border-color: #2980b9;
        }

        .canvas-container {
            border: 2px solid #3498db;
            border-radius: 8px;
            margin: 20px 0;
            position: relative;
        }

        #drawingCanvas {
            display: block;
            cursor: crosshair;
            touch-action: none;
        }

        .accessibility-controls {
            position: fixed;
            top: 20px;
            left: 20px;
            background-color: white;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .font-size-control {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 5px 0;
        }

        .high-contrast {
            background-color: #000 !important;
            color: #fff !important;
        }

        .high-contrast .container {
            background-color: #111 !important;
            color: #fff !important;
        }

        .high-contrast button {
            background-color: #fff !important;
            color: #000 !important;
            border: 2px solid #fff !important;
        }

        .simulation-display {
            font-family: 'Courier New', monospace;
            background-color: #2c3e50;
            color: #2ecc71;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            overflow-x: auto;
        }

        .binary-display {
            display: inline-block;
            margin: 0 10px;
            padding: 5px 10px;
            background-color: #34495e;
            border-radius: 5px;
            font-size: 1.2em;
        }

        .mark-scheme {
            display: none;
            background-color: #e8f8f5;
            padding: 15px;
            border-left: 4px solid #27ae60;
            margin-top: 15px;
            border-radius: 5px;
        }

        .extension-activity {
            background-color: #f4ecff;
            padding: 20px;
            border-left: 4px solid #9b59b6;
            margin: 20px 0;
            border-radius: 5px;
        }

        .common-mistakes {
            background-color: #ffe8e8;
            padding: 20px;
            border-left: 4px solid #e74c3c;
            margin: 20px 0;
            border-radius: 5px;
        }

        .real-world-context {
            background-color: #fff4e6;
            padding: 20px;
            border-left: 4px solid #f39c12;
            margin: 20px 0;
            border-radius: 5px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .nav-buttons {
                flex-direction: column;
                width: 100%;
            }
            
            .nav-button {
                width: 100%;
            }
            
            .xp-display {
                position: static;
                margin-bottom: 20px;
            }
        }

        .no-paste {
            position: relative;
        }

        .paste-shame {
            position: absolute;
            top: -30px;
            left: 0;
            background-color: #e74c3c;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 14px;
            display: none;
            animation: shame-shake 0.5s;
        }

        @keyframes shame-shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
    </style>
</head>
<body>
    <div class="accessibility-controls">
        <div class="font-size-control">
            <button onclick="changeFontSize(-2)">A-</button>
            <button onclick="changeFontSize(2)">A+</button>
        </div>
        <button onclick="toggleHighContrast()">High Contrast</button>
    </div>

    <div class="xp-display">
        <div>Level: <span id="level">0</span>/5</div>
        <div>XP: <span id="xp">0</span></div>
    </div>

    <div class="achievement-popup" id="achievementPopup"></div>

    <div class="container">
        <div class="navbar">
            <h3 style="color: white; margin: 0;">Character Sets</h3>
            <div class="nav-buttons">
                <button class="nav-button active" onclick="showSection(0)">Start</button>
                <button class="nav-button" onclick="showSection(1)">Intro</button>
                <button class="nav-button" onclick="showSection(2)">ASCII</button>
                <button class="nav-button" onclick="showSection(3)">Extended</button>
                <button class="nav-button" onclick="showSection(4)">Unicode</button>
                <button class="nav-button" onclick="showSection(5)">Practice</button>
                <button class="nav-button" onclick="showSection(6)">Summary</button>
                <button class="nav-button" onclick="showSection(7)">Exam</button>
                <button class="nav-button" onclick="showSection(8)">Extension</button>
            </div>
        </div>

        <!-- Section 0: Starter Activity -->
        <div class="section active" id="section-0">
            <h1>Character Sets - Starter Activity</h1>
            
            <div class="learning-outcome">
                <h3>Welcome!</h3>
                <p>Let's begin by exploring how computers understand the characters we type.</p>
            </div>

            <div class="task-box">
                <h3>Interactive Character Encoder</h3>
                <p>Type a character below and watch how it's converted to binary!</p>
                
                <div style="display: flex; gap: 20px; align-items: center; margin: 20px 0;">
                    <input type="text" id="charInput" maxlength="1" placeholder="Type one character" style="width: 200px;" class="no-paste">
                    <div class="paste-shame">Nice try! No pasting allowed üòä</div>
                </div>
                
                <div class="simulation-display" id="charDisplay">
                    <div id="charInfo" style="text-align: center; font-size: 1.2em;">
                        Waiting for input...
                    </div>
                </div>

                <div class="task-box" style="margin-top: 20px;">
                    <h4>Quick Quiz: What do you already know?</h4>
                    <div class="quiz-question">
                        <p>Which of these statements about computers and text is correct?</p>
                        <label class="quiz-option">
                            <input type="radio" name="starter-q1" value="a"> Computers naturally understand human languages
                        </label>
                        <label class="quiz-option">
                            <input type="radio" name="starter-q1" value="b"> Computers store everything as binary numbers
                        </label>
                        <label class="quiz-option">
                            <input type="radio" name="starter-q1" value="c"> Text doesn't need to be converted for computers
                        </label>
                        <label class="quiz-option">
                            <input type="radio" name="starter-q1" value="d"> Characters are stored as images in computers
                        </label>
                    </div>
                    <button onclick="checkStarterQuiz()">Check Answer</button>
                    <div id="starterFeedback"></div>
                </div>

                <button class="reset-button" onclick="resetStarter()">Reset Activity</button>
            </div>

            <div class="navigation-buttons">
                <button style="visibility: hidden;">Previous</button>
                <button onclick="showSection(1)">Next ‚Üí</button>
            </div>
        </div>

        <!-- Section 1: Introduction to Character Sets -->
        <div class="section" id="section-1">
            <h1>Introduction to Character Sets</h1>
            
            <div class="learning-outcome">
                <h3>Learning Outcome</h3>
                <p>By the end of this section, you will be able to define what a character set is and explain how characters are represented in computers.</p>
            </div>

            <div class="task-box">
                <h3>What is a Character Set?</h3>
                <p>A <strong>character set</strong> is a defined list of characters recognised by computer hardware and software. Each character in the set has a unique binary code.</p>
                
                <div class="interactive-area">
                    <h4>Task 1: Understanding Character Sets</h4>
                    <p>Match the following terms to their correct definitions by dragging them:</p>
                    
                    <div style="display: flex; justify-content: space-between; flex-wrap: wrap;">
                        <div style="flex: 1; min-width: 250px;">
                            <h5>Terms:</h5>
                            <div id="terms-container">
                                <div class="drag-item" draggable="true" data-term="character-set">Character Set</div>
                                <div class="drag-item" draggable="true" data-term="binary-code">Binary Code</div>
                                <div class="drag-item" draggable="true" data-term="unique-value">Unique Value</div>
                                <div class="drag-item" draggable="true" data-term="sequence">Sequence</div>
                            </div>
                        </div>
                        
                        <div style="flex: 1; min-width: 250px;">
                            <h5>Definitions:</h5>
                            <div class="drop-zone" data-answer="character-set">A defined list of characters recognised by computers</div>
                            <div class="drop-zone" data-answer="binary-code">A representation using only 0s and 1s</div>
                            <div class="drop-zone" data-answer="unique-value">Each character has one of these in a character set</div>
                            <div class="drop-zone" data-answer="sequence">How multiple character codes are stored together</div>
                        </div>
                    </div>
                    
                    <button onclick="checkMatching()" style="margin-top: 20px;">Check Answers</button>
                    <button class="hint-button" onclick="showHint('matching')">Need a Hint?</button>
                    <div id="matchingFeedback"></div>
                </div>

                <button class="reset-button" onclick="resetMatching()">Reset Activity</button>
            </div>

            <div class="task-box">
                <h3>How Words are Represented</h3>
                <p>When you type a word, each character is converted to its unique binary code. These codes are then stored in sequence.</p>
                
                <div class="simulation-display">
                    <h4>Character Encoding Simulation</h4>
                    <input type="text" id="wordInput" placeholder="Type a word (max 10 characters)" maxlength="10" style="background: white; color: black; margin-bottom: 10px;" class="no-paste">
                    <button onclick="encodeWord()">Encode Word</button>
                    <div id="wordEncoding" style="margin-top: 20px;"></div>
                </div>
            </div>

            <div class="navigation-buttons">
                <button onclick="showSection(0)">‚Üê Previous</button>
                <button onclick="showSection(2)">Next ‚Üí</button>
            </div>
        </div>

        <!-- Section 2: ASCII -->
        <div class="section" id="section-2">
            <h1>ASCII - American Standard Code for Information Interchange</h1>
            
            <div class="learning-outcome">
                <h3>Learning Outcome</h3>
                <p>Understand ASCII encoding, its limitations, and how to convert between characters and their ASCII values.</p>
            </div>

            <div class="task-box">
                <h3>Understanding ASCII</h3>
                <p>ASCII uses 7 bits to represent characters, giving us 2^7 = 128 different possible characters.</p>
                
                <div class="interactive-area">
                    <h4>Task 2: ASCII Exploration</h4>
                    <p>Explore common ASCII values by entering a decimal number (0-127):</p>
                    
                    <input type="number" id="asciiInput" min="0" max="127" placeholder="Enter a number 0-127">
                    <button onclick="showASCII()">Show Character</button>
                    
                    <div id="asciiResult" style="margin-top: 20px; font-size: 1.2em;"></div>
                    
                    <div style="margin-top: 30px;">
                        <h4>Quick ASCII Quiz</h4>
                        <div class="quiz-question">
                            <p>How many different characters can be represented using 7-bit ASCII?</p>
                            <input type="text" id="ascii-bits-answer" placeholder="Your answer" class="no-paste">
                            <button onclick="checkASCIIBits()">Check</button>
                            <div id="asciiBitsFeedback"></div>
                        </div>
                    </div>
                </div>

                <button class="reset-button" onclick="resetASCII()">Reset Activity</button>
            </div>

            <div class="task-box">
                <h3>ASCII Limitations</h3>
                <div class="common-mistakes">
                    <h4>Common Mistake Alert!</h4>
                    <p>Students often think ASCII can represent all languages. Remember: ASCII was designed for English and has significant limitations!</p>
                </div>
                
                <div class="interactive-area">
                    <h4>Task 3: Fill in the Blanks</h4>
                    <p>Complete the sentences about ASCII limitations. Choose from the options provided:</p>
                    
                    <div style="margin: 20px 0;">
                        <p>1. ASCII can only represent <select id="blank1" class="no-paste">
                            <option value="">Choose...</option>
                            <option value="64">64</option>
                            <option value="128">128</option>
                            <option value="256">256</option>
                            <option value="512">512</option>
                            <option value="1024">1024</option>
                        </select> different characters.</p>
                        
                        <p>2. ASCII uses <select id="blank2" class="no-paste">
                            <option value="">Choose...</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                        </select> bits per character.</p>
                        
                        <p>3. Many characters from <select id="blank3" class="no-paste">
                            <option value="">Choose...</option>
                            <option value="English">English</option>
                            <option value="other languages">other languages</option>
                            <option value="numbers">numbers</option>
                            <option value="punctuation">punctuation</option>
                        </select> cannot be represented in ASCII.</p>
                    </div>
                    
                    <button onclick="checkASCIIBlanks()">Check Answers</button>
                    <div id="asciiBlanksFeeback"></div>
                </div>
            </div>

            <div class="real-world-context">
                <h3>Real-World Application</h3>
                <p>ASCII is still used today in many systems, especially in programming and network protocols. For example, HTTP headers and email protocols still rely heavily on ASCII encoding.</p>
            </div>

            <div class="navigation-buttons">
                <button onclick="showSection(1)">‚Üê Previous</button>
                <button onclick="showSection(3)">Next ‚Üí</button>
            </div>
        </div>

        <!-- Section 3: Extended ASCII -->
        <div class="section" id="section-3">
            <h1>Extended ASCII</h1>
            
            <div class="learning-outcome">
                <h3>Learning Outcome</h3>
                <p>Understand how Extended ASCII improves upon standard ASCII and recognize its limitations.</p>
            </div>

            <div class="task-box">
                <h3>What is Extended ASCII?</h3>
                <p>Extended ASCII uses 8 bits instead of 7, allowing for 2^8 = 256 characters. Characters 0-127 remain the same as standard ASCII.</p>
                
                <div class="interactive-area">
                    <h4>Task 4: Extended ASCII Comparison</h4>
                    <p>Drag the features to the correct encoding system:</p>
                    
                    <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                        <div style="flex: 1;">
                            <h5>Features to Sort:</h5>
                            <div id="features-container">
                                <div class="drag-item" draggable="true" data-feature="7bit">Uses 7 bits</div>
                                <div class="drag-item" draggable="true" data-feature="8bit">Uses 8 bits</div>
                                <div class="drag-item" draggable="true" data-feature="128chars">128 characters</div>
                                <div class="drag-item" draggable="true" data-feature="256chars">256 characters</div>
                                <div class="drag-item" draggable="true" data-feature="english">Designed for English</div>
                                <div class="drag-item" draggable="true" data-feature="accents">Includes accented letters</div>
                            </div>
                        </div>
                        
                        <div style="flex: 1;">
                            <h5>Standard ASCII:</h5>
                            <div class="drop-zone" id="ascii-drop" data-accepts="7bit,128chars,english" style="min-height: 100px;"></div>
                            
                            <h5>Extended ASCII:</h5>
                            <div class="drop-zone" id="extended-drop" data-accepts="8bit,256chars,accents" style="min-height: 100px;"></div>
                        </div>
                    </div>
                    
                    <button onclick="checkExtendedComparison()">Check Sorting</button>
                    <div id="extendedFeedback"></div>
                </div>

                <button class="reset-button" onclick="resetExtended()">Reset Activity</button>
            </div>

            <div class="task-box">
                <h3>Extended ASCII Problems</h3>
                <div class="common-mistakes">
                    <h4>Important Note!</h4>
                    <p>Characters 128-255 in Extended ASCII may be coded differently in different systems. This can cause compatibility issues!</p>
                </div>
                
                <div class="quiz-question">
                    <p>What is a major issue with Extended ASCII?</p>
                    <label class="quiz-option">
                        <input type="radio" name="extended-issue" value="a"> It uses too much memory
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="extended-issue" value="b"> Characters 128-255 may differ between systems
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="extended-issue" value="c"> It cannot represent numbers
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="extended-issue" value="d"> It is slower than standard ASCII
                    </label>
                </div>
                <button onclick="checkExtendedIssue()">Check Answer</button>
                <div id="extendedIssueFeedback"></div>
            </div>

            <div class="navigation-buttons">
                <button onclick="showSection(2)">‚Üê Previous</button>
                <button onclick="showSection(4)">Next ‚Üí</button>
            </div>
        </div>

        <!-- Section 4: Unicode -->
        <div class="section" id="section-4">
            <h1>Unicode - The Modern Solution</h1>
            
            <div class="learning-outcome">
                <h3>Learning Outcome</h3>
                <p>Understand how Unicode solves the limitations of ASCII and supports global languages.</p>
            </div>

            <div class="task-box">
                <h3>Understanding Unicode</h3>
                <p>Unicode can use 16, 24, or 32 bits per character, allowing representation of characters from virtually all world languages.</p>
                
                <div class="simulation-display">
                    <h4>Unicode Demonstration</h4>
                    <p>Try entering characters from different languages:</p>
                    <input type="text" id="unicodeInput" placeholder="Try: Hello ‰Ω†Â•Ω ŸÖÿ±ÿ≠ÿ®ÿß ‡§π‡•à‡§≤‡•ã" style="background: white; color: black;" class="no-paste">
                    <button onclick="showUnicode()">Show Unicode Values</button>
                    <div id="unicodeDisplay" style="margin-top: 20px;"></div>
                </div>
            </div>

            <div class="task-box">
                <h3>Unicode vs ASCII Comparison</h3>
                <div class="interactive-area">
                    <h4>Task 5: Complete the Comparison Table</h4>
                    <p>Fill in the missing information:</p>
                    
                    <table style="width: 100%; border-collapse: collapse;">
                        <tr>
                            <th style="border: 1px solid #ddd; padding: 10px;">Feature</th>
                            <th style="border: 1px solid #ddd; padding: 10px;">ASCII</th>
                            <th style="border: 1px solid #ddd; padding: 10px;">Unicode</th>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 10px;">Bits used</td>
                            <td style="border: 1px solid #ddd; padding: 10px;">7 bits</td>
                            <td style="border: 1px solid #ddd; padding: 10px;">
                                <input type="text" id="unicode-bits" placeholder="Your answer" style="width: 100%;" class="no-paste">
                            </td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 10px;">Number of characters</td>
                            <td style="border: 1px solid #ddd; padding: 10px;">
                                <input type="text" id="ascii-chars" placeholder="Your answer" style="width: 100%;" class="no-paste">
                            </td>
                            <td style="border: 1px solid #ddd; padding: 10px;">Millions</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 10px;">Language support</td>
                            <td style="border: 1px solid #ddd; padding: 10px;">English mainly</td>
                            <td style="border: 1px solid #ddd; padding: 10px;">
                                <input type="text" id="unicode-langs" placeholder="Your answer" style="width: 100%;" class="no-paste">
                            </td>
                        </tr>
                    </table>
                    
                    <button onclick="checkUnicodeTable()" style="margin-top: 20px;">Check Answers</button>
                    <div id="unicodeTableFeedback"></div>
                </div>

                <button class="reset-button" onclick="resetUnicodeTable()">Reset Activity</button>
            </div>

            <div class="real-world-context">
                <h3>Real-World Application</h3>
                <p>Unicode is essential for modern software development. Social media platforms, messaging apps, and websites all rely on Unicode to support global communication. Even emojis are part of the Unicode standard! üòä</p>
            </div>

            <div class="navigation-buttons">
                <button onclick="showSection(3)">‚Üê Previous</button>
                <button onclick="showSection(5)">Next ‚Üí</button>
            </div>
        </div>

        <!-- Section 5: Practice and Application -->
        <div class="section" id="section-5">
            <h1>Practice and Application</h1>
            
            <div class="learning-outcome">
                <h3>Learning Outcome</h3>
                <p>Apply your knowledge of character sets to solve practical problems.</p>
            </div>

            <div class="task-box">
                <h3>Problem Solving with Character Sets</h3>
                
                <div class="quiz-question">
                    <h4>Scenario 1:</h4>
                    <p>A company's old database uses standard ASCII. They want to add support for French customers' names with accents (√©, √†, √ß). What should they upgrade to?</p>
                    <label class="quiz-option">
                        <input type="radio" name="scenario1" value="a"> Keep ASCII and remove accents
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="scenario1" value="b"> Upgrade to Extended ASCII
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="scenario1" value="c"> Upgrade to Unicode
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="scenario1" value="d"> Use a custom character set
                    </label>
                </div>
                
                <div class="quiz-question" style="margin-top: 20px;">
                    <h4>Scenario 2:</h4>
                    <p>Calculate how many bytes are needed to store "HELLO" in ASCII (each character uses 7 bits, stored in 1 byte):</p>
                    <input type="number" id="bytes-answer" placeholder="Number of bytes" class="no-paste">
                    <button onclick="checkBytesAnswer()">Check</button>
                    <div id="bytesFeedback"></div>
                </div>
                
                <button onclick="checkScenarios()">Check Scenario 1</button>
                <div id="scenariosFeedback"></div>
            </div>

            <div class="task-box">
                <h3>Drawing Canvas - Work Out Problems</h3>
                <p>Use this canvas to work out binary conversions or calculations:</p>
                <div class="canvas-container">
                    <canvas id="drawingCanvas" width="600" height="300" style="width: 100%;"></canvas>
                </div>
                <button onclick="clearCanvas()">Clear Canvas</button>
            </div>

            <div class="common-mistakes">
                <h3>Common Mistakes to Avoid</h3>
                <ul>
                    <li>Confusing bits with bytes (8 bits = 1 byte)</li>
                    <li>Thinking ASCII can handle all languages</li>
                    <li>Forgetting that Extended ASCII isn't standardized above character 127</li>
                    <li>Not considering backwards compatibility when choosing character sets</li>
                </ul>
            </div>

            <div class="navigation-buttons">
                <button onclick="showSection(4)">‚Üê Previous</button>
                <button onclick="showSection(6)">Next ‚Üí</button>
            </div>
        </div>

        <!-- Section 6: Summary Quiz -->
        <div class="section" id="section-6">
            <h1>Summary - Test Your Understanding</h1>
            
            <div class="learning-outcome">
                <h3>Final Check</h3>
                <p>Complete this quiz to test your understanding of character sets.</p>
            </div>

            <div class="task-box">
                <h3>Summary Quiz (8 Questions)</h3>
                
                <div class="quiz-question">
                    <p><strong>Q1:</strong> What is a character set?</p>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q1" value="a"> A collection of fonts
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q1" value="b"> A defined list of characters recognised by computers
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q1" value="c"> A type of computer memory
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q1" value="d"> A programming language
                    </label>
                </div>

                <div class="quiz-question">
                    <p><strong>Q2:</strong> How many bits does standard ASCII use?</p>
                    <input type="text" id="summary-q2" placeholder="Your answer" class="no-paste">
                </div>

                <div class="quiz-question">
                    <p><strong>Q3:</strong> Calculate 2^8 to find how many characters Extended ASCII can represent:</p>
                    <input type="number" id="summary-q3" placeholder="Your answer" class="no-paste">
                </div>

                <div class="quiz-question">
                    <p><strong>Q4:</strong> Which character set is designed to be a superset of ASCII?</p>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q4" value="a"> Extended ASCII
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q4" value="b"> EBCDIC
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q4" value="c"> Unicode
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q4" value="d"> Binary
                    </label>
                </div>

                <div class="quiz-question">
                    <p><strong>Q5:</strong> True or False: Characters 128-255 in Extended ASCII are standardized across all systems.</p>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q5" value="true"> True
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q5" value="false"> False
                    </label>
                </div>

                <div class="quiz-question">
                    <p><strong>Q6:</strong> How are multiple characters stored in a computer?</p>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q6" value="a"> As images
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q6" value="b"> In sequence using their binary codes
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q6" value="c"> As sound waves
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q6" value="d"> Randomly in memory
                    </label>
                </div>

                <div class="quiz-question">
                    <p><strong>Q7:</strong> What is the main limitation of ASCII?</p>
                    <textarea id="summary-q7" rows="3" placeholder="Write your answer (minimum 20 words)" class="no-paste"></textarea>
                </div>

                <div class="quiz-question">
                    <p><strong>Q8:</strong> Name one encoding method used by Unicode:</p>
                    <input type="text" id="summary-q8" placeholder="Your answer" class="no-paste">
                </div>

                <button onclick="checkSummaryQuiz()">Submit Quiz</button>
                <div id="summaryFeedback"></div>
            </div>

            <div class="navigation-buttons">
                <button onclick="showSection(5)">‚Üê Previous</button>
                <button onclick="showSection(7)">Next ‚Üí</button>
            </div>
        </div>

        <!-- Section 7: Exam Practice -->
        <div class="section" id="section-7">
            <h1>Exam Practice Questions</h1>
            
            <div class="learning-outcome">
                <h3>Exam Preparation</h3>
                <p>Practice with past paper style questions. Try to answer before viewing the mark scheme.</p>
            </div>

            <div class="task-box">
                <h3>Question 1 [4 marks]</h3>
                <p>Explain why Unicode was developed when ASCII already existed. Include two limitations of ASCII in your answer.</p>
                
                <textarea id="exam-q1" rows="6" placeholder="Write your answer here..." class="no-paste"></textarea>
                
                <div style="margin-top: 10px;">
                    <label>Predicted marks: <input type="number" id="exam-q1-marks" min="0" max="4" style="width: 50px;"> / 4</label>
                </div>
                
                <button onclick="showMarkScheme('exam-q1')">Show Mark Scheme</button>
                
                <div class="mark-scheme" id="mark-scheme-exam-q1">
                    <h4>Mark Scheme:</h4>
                    <ul>
                        <li>[1 mark] ASCII can only represent 128/256 characters</li>
                        <li>[1 mark] ASCII cannot represent characters from other languages/scripts</li>
                        <li>[1 mark] Unicode was developed to support global communication/all languages</li>
                        <li>[1 mark] Unicode provides a much larger character space / uses more bits</li>
                    </ul>
                </div>
            </div>

            <div class="task-box">
                <h3>Question 2 [3 marks]</h3>
                <p>A file contains the word "CAT" encoded in ASCII. Calculate the total number of bits required to store this word.</p>
                
                <textarea id="exam-q2" rows="4" placeholder="Show your working..." class="no-paste"></textarea>
                
                <div style="margin-top: 10px;">
                    <label>Predicted marks: <input type="number" id="exam-q2-marks" min="0" max="3" style="width: 50px;"> / 3</label>
                </div>
                
                <button onclick="showMarkScheme('exam-q2')">Show Mark Scheme</button>
                
                <div class="mark-scheme" id="mark-scheme-exam-q2">
                    <h4>Mark Scheme:</h4>
                    <ul>
                        <li>[1 mark] ASCII uses 7 bits per character</li>
                        <li>[1 mark] "CAT" has 3 characters</li>
                        <li>[1 mark] Total = 3 √ó 7 = 21 bits</li>
                    </ul>
                </div>
            </div>

            <div class="task-box">
                <h3>Question 3 [5 marks]</h3>
                <p>Compare and contrast ASCII and Unicode character encoding systems.</p>
                
                <textarea id="exam-q3" rows="8" placeholder="Write your answer here..." class="no-paste"></textarea>
                
                <div style="margin-top: 10px;">
                    <label>Predicted marks: <input type="number" id="exam-q3-marks" min="0" max="5" style="width: 50px;"> / 5</label>
                </div>
                
                <button onclick="showMarkScheme('exam-q3')">Show Mark Scheme</button>
                
                <div class="mark-scheme" id="mark-scheme-exam-q3">
                    <h4>Mark Scheme:</h4>
                    <p>Any 5 from:</p>
                    <ul>
                        <li>[1 mark] ASCII uses 7/8 bits, Unicode uses 16/24/32 bits</li>
                        <li>[1 mark] ASCII limited to 128/256 characters, Unicode can represent millions</li>
                        <li>[1 mark] ASCII mainly for English, Unicode for all languages</li>
                        <li>[1 mark] Unicode is backwards compatible with ASCII</li>
                        <li>[1 mark] ASCII uses less storage space than Unicode</li>
                        <li>[1 mark] Unicode has different encoding schemes (UTF-8, UTF-16, UTF-32)</li>
                    </ul>
                </div>
            </div>

            <div class="navigation-buttons">
                <button onclick="showSection(6)">‚Üê Previous</button>
                <button onclick="showSection(8)">Next ‚Üí</button>
            </div>
        </div>

        <!-- Section 8: Extension Activities -->
        <div class="section" id="section-8">
            <h1>Extension Activities</h1>
            
            <div class="extension-activity">
                <h3>Beyond the Specification</h3>
                <p>These activities will deepen your understanding of character encoding.</p>
                
                <h4>Activity 1: UTF-8 Encoding</h4>
                <p>Research how UTF-8 uses variable-length encoding. Why is this more efficient than fixed-length encoding?</p>
                <textarea id="extension-1" rows="4" placeholder="Your research findings..." class="no-paste"></textarea>
                
                <h4>Activity 2: Emoji and Unicode</h4>
                <p>Investigate how emojis are encoded in Unicode. What challenges do they present for character encoding?</p>
                <textarea id="extension-2" rows="4" placeholder="Your findings..." class="no-paste"></textarea>
                
                <h4>Activity 3: Create Your Own Character Set</h4>
                <p>Design a simple character set for a fictional alien language with 50 characters. How many bits would you need? Justify your design choices.</p>
                <textarea id="extension-3" rows="6" placeholder="Your character set design..." class="no-paste"></textarea>
                
                <button onclick="saveExtension()">Save Extension Work</button>
            </div>

            <div class="task-box">
                <h3>Videos and Additional Resources</h3>
                <p style="color: #7f8c8d; font-style: italic;">[Video placeholders - Your teacher will provide relevant video links]</p>
                <ul>
                    <li>Video 1: History of Character Encoding</li>
                    <li>Video 2: Unicode Explained</li>
                    <li>Video 3: Character Sets in Programming</li>
                </ul>
            </div>

            <div class="navigation-buttons">
                <button onclick="showSection(7)">‚Üê Previous</button>
                <button style="visibility: hidden;">Next</button>
            </div>
        </div>
    </div>

    <button class="feedback-button" onclick="openFeedback()">üí¨</button>

    <div class="feedback-modal" id="feedbackModal">
        <div class="feedback-content">
            <span class="close-modal" onclick="closeFeedback()">&times;</span>
            <h3>Send Feedback</h3>
            <p>Found a bug or have a suggestion? Let us know!</p>
            <textarea id="feedbackText" rows="6" placeholder="Describe the issue or suggestion..." style="width: 100%; margin: 10px 0;"></textarea>
            <button onclick="sendFeedback()">Send Feedback</button>
        </div>
    </div>

    <script>
        // Global variables
        let currentSection = 0;
        let xp = 0;
        let level = 0;
        let completedTasks = new Set();
        let usedHints = new Set();

        // Initialize drag and drop
        let draggedElement = null;

        // Prevent paste
        document.addEventListener('DOMContentLoaded', function() {
            const noPasteElements = document.querySelectorAll('.no-paste');
            noPasteElements.forEach(element => {
                element.addEventListener('paste', function(e) {
                    e.preventDefault();
                    const shameMsg = element.nextElementSibling;
                    if (shameMsg && shameMsg.classList.contains('paste-shame')) {
                        shameMsg.style.display = 'block';
                        setTimeout(() => {
                            shameMsg.style.display = 'none';
                        }, 3000);
                    }
                    return false;
                });
            });

            // Initialize drag and drop
            initializeDragAndDrop();
            
            // Initialize canvas
            initializeCanvas();
        });

        // XP and Achievement System
        function addXP(amount, taskId) {
            if (!completedTasks.has(taskId)) {
                completedTasks.add(taskId);
                xp += amount;
                updateXPDisplay();
                checkLevelUp();
            }
        }

        function updateXPDisplay() {
            document.getElementById('xp').textContent = xp;
            document.getElementById('level').textContent = level;
        }

        function checkLevelUp() {
            const newLevel = Math.floor(xp / 100);
            if (newLevel > level && newLevel <= 5) {
                level = newLevel;
                showAchievement(`Level ${level} Reached!`);
                updateXPDisplay();
            }
        }

        function showAchievement(message) {
            const popup = document.getElementById('achievementPopup');
            popup.textContent = message;
            popup.style.display = 'block';
            
            setTimeout(() => {
                popup.style.display = 'none';
            }, 3000);
        }

        // Navigation
        function showSection(sectionNum) {
            const sections = document.querySelectorAll('.section');
            const navButtons = document.querySelectorAll('.nav-button');
            
            sections.forEach((section, index) => {
                section.classList.toggle('active', index === sectionNum);
            });
            
            navButtons.forEach((button, index) => {
                button.classList.toggle('active', index === sectionNum);
            });
            
            currentSection = sectionNum;
            window.scrollTo(0, 0);
        }

        // Accessibility
        function changeFontSize(delta) {
            const currentSize = parseInt(window.getComputedStyle(document.body).fontSize);
            document.body.style.fontSize = (currentSize + delta) + 'px';
        }

        function toggleHighContrast() {
            document.body.classList.toggle('high-contrast');
        }

        // Section 0: Starter Activity
        document.getElementById('charInput').addEventListener('input', function(e) {
            const char = e.target.value;
            if (char.length > 0) {
                const ascii = char.charCodeAt(0);
                const binary = ascii.toString(2).padStart(8, '0');
                const hex = ascii.toString(16).toUpperCase();
                
                document.getElementById('charInfo').innerHTML = `
                    <div>Character: <span class="binary-display">${char}</span></div>
                    <div>ASCII Value: <span class="binary-display">${ascii}</span></div>
                    <div>Binary: <span class="binary-display">${binary}</span></div>
                    <div>Hexadecimal: <span class="binary-display">0x${hex}</span></div>
                `;
                
                addXP(10, 'char-explorer');
            }
        });

        function checkStarterQuiz() {
            const selected = document.querySelector('input[name="starter-q1"]:checked');
            const feedback = document.getElementById('starterFeedback');
            
            if (!selected) {
                feedback.innerHTML = '<p style="color: #e74c3c;">Please select an answer!</p>';
                return;
            }
            
            if (selected.value === 'b') {
                feedback.innerHTML = '<p style="color: #27ae60;">Correct! Computers store everything as binary numbers.</p>';
                addXP(20, 'starter-quiz');
            } else {
                feedback.innerHTML = '<p style="color: #e74c3c;">Not quite. Remember, computers only understand binary (0s and 1s).</p>';
            }
        }

        function resetStarter() {
            document.getElementById('charInput').value = '';
            document.getElementById('charInfo').innerHTML = 'Waiting for input...';
            document.querySelector('input[name="starter-q1"]:checked')?.checked && 
                (document.querySelector('input[name="starter-q1"]:checked').checked = false);
            document.getElementById('starterFeedback').innerHTML = '';
        }

        // Section 1: Drag and Drop
        function initializeDragAndDrop() {
            const dragItems = document.querySelectorAll('.drag-item');
            const dropZones = document.querySelectorAll('.drop-zone');

            dragItems.forEach(item => {
                item.addEventListener('dragstart', function(e) {
                    draggedElement = this;
                    e.dataTransfer.effectAllowed = 'move';
                });

                item.addEventListener('dragend', function(e) {
                    draggedElement = null;
                });
            });

            dropZones.forEach(zone => {
                zone.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.classList.add('drag-over');
                });

                zone.addEventListener('dragleave', function(e) {
                    this.classList.remove('drag-over');
                });

                zone.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.classList.remove('drag-over');
                    
                    if (draggedElement && this.children.length === 0) {
                        this.appendChild(draggedElement);
                    }
                });
            });
        }

        function checkMatching() {
            const feedback = document.getElementById('matchingFeedback');
            let correct = 0;
            const dropZones = document.querySelectorAll('.drop-zone');
            
            dropZones.forEach(zone => {
                const expected = zone.getAttribute('data-answer');
                const dragItem = zone.querySelector('.drag-item');
                
                if (dragItem && dragItem.getAttribute('data-term') === expected) {
                    correct++;
                    zone.style.backgroundColor = '#d4edda';
                } else {
                    zone.style.backgroundColor = '#f8d7da';
                }
            });
            
            if (correct === 4) {
                feedback.innerHTML = '<p style="color: #27ae60;">Perfect! All matches are correct!</p>';
                addXP(30, 'matching-task');
            } else {
                feedback.innerHTML = `<p style="color: #e74c3c;">You got ${correct}/4 correct. Try again!</p>`;
            }
        }

        function showHint(taskType) {
            if (!usedHints.has(taskType)) {
                usedHints.add(taskType);
                alert('Hint: Think about what each term means in the context of how computers store text.');
                // Reduce XP for using hint
                if (completedTasks.has(taskType)) {
                    xp = Math.max(0, xp - 5);
                    updateXPDisplay();
                }
            }
        }

        function resetMatching() {
            const termsContainer = document.getElementById('terms-container');
            const dragItems = document.querySelectorAll('.drag-item');
            const dropZones = document.querySelectorAll('.drop-zone');
            
            dragItems.forEach(item => {
                termsContainer.appendChild(item);
            });
            
            dropZones.forEach(zone => {
                zone.style.backgroundColor = '#ecf0f1';
            });
            
            document.getElementById('matchingFeedback').innerHTML = '';
        }

        // Word encoding simulation
        function encodeWord() {
            const word = document.getElementById('wordInput').value.toUpperCase();
            const display = document.getElementById('wordEncoding');
            
            if (!word) {
                display.innerHTML = '<p style="color: #e74c3c;">Please enter a word!</p>';
                return;
            }
            
            let html = '<div style="display: flex; flex-wrap: wrap; gap: 10px;">';
            
            for (let i = 0; i < word.length; i++) {
                const char = word[i];
                const ascii = char.charCodeAt(0);
                const binary = ascii.toString(2).padStart(8, '0');
                
                html += `
                    <div style="text-align: center;">
                        <div style="font-size: 1.5em; margin-bottom: 5px;">${char}</div>
                        <div class="binary-display">${binary}</div>
                        <div style="font-size: 0.8em; margin-top: 5px;">ASCII: ${ascii}</div>
                    </div>
                `;
            }
            
            html += '</div>';
            display.innerHTML = html;
            
            addXP(15, 'word-encoding');
        }

        // Section 2: ASCII
        function showASCII() {
            const input = document.getElementById('asciiInput').value;
            const result = document.getElementById('asciiResult');
            
            if (!input || input < 0 || input > 127) {
                result.innerHTML = '<p style="color: #e74c3c;">Please enter a number between 0 and 127!</p>';
                return;
            }
            
            const char = String.fromCharCode(parseInt(input));
            const binary = parseInt(input).toString(2).padStart(7, '0');
            
            result.innerHTML = `
                <div>Decimal: ${input}</div>
                <div>Character: <span style="font-size: 2em; color: #3498db;">${char}</span></div>
                <div>Binary: ${binary}</div>
            `;
            
            addXP(10, 'ascii-exploration');
        }

        function checkASCIIBits() {
            const answer = document.getElementById('ascii-bits-answer').value.trim();
            const feedback = document.getElementById('asciiBitsFeedback');
            
            if (answer === '128' || answer === '128 characters' || answer === '128 different characters') {
                feedback.innerHTML = '<p style="color: #27ae60;">Correct! 2^7 = 128 characters</p>';
                addXP(20, 'ascii-bits-quiz');
            } else {
                feedback.innerHTML = '<p style="color: #e74c3c;">Not quite. Remember: 7 bits means 2^7 possibilities.</p>';
            }
        }

        function checkASCIIBlanks() {
            const blank1 = document.getElementById('blank1').value;
            const blank2 = document.getElementById('blank2').value;
            const blank3 = document.getElementById('blank3').value;
            const feedback = document.getElementById('asciiBlanksFeeback');
            
            let correct = 0;
            if (blank1 === '128') correct++;
            if (blank2 === '7') correct++;
            if (blank3 === 'other languages') correct++;
            
            if (correct === 3) {
                feedback.innerHTML = '<p style="color: #27ae60;">Perfect! All answers are correct!</p>';
                addXP(30, 'ascii-blanks');
            } else {
                feedback.innerHTML = `<p style="color: #e74c3c;">You got ${correct}/3 correct. Review the ASCII section and try again.</p>`;
            }
        }

        function resetASCII() {
            document.getElementById('asciiInput').value = '';
            document.getElementById('asciiResult').innerHTML = '';
            document.getElementById('ascii-bits-answer').value = '';
            document.getElementById('asciiBitsFeedback').innerHTML = '';
            document.getElementById('blank1').selectedIndex = 0;
            document.getElementById('blank2').selectedIndex = 0;
            document.getElementById('blank3').selectedIndex = 0;
            document.getElementById('asciiBlanksFeeback').innerHTML = '';
        }

        // Section 3: Extended ASCII
        function checkExtendedComparison() {
            const asciiDrop = document.getElementById('ascii-drop');
            const extendedDrop = document.getElementById('extended-drop');
            const feedback = document.getElementById('extendedFeedback');
            
            const asciiFeatures = Array.from(asciiDrop.children).map(child => child.getAttribute('data-feature'));
            const extendedFeatures = Array.from(extendedDrop.children).map(child => child.getAttribute('data-feature'));
            
            const asciiCorrect = asciiFeatures.every(f => ['7bit', '128chars', 'english'].includes(f)) && asciiFeatures.length === 3;
            const extendedCorrect = extendedFeatures.every(f => ['8bit', '256chars', 'accents'].includes(f)) && extendedFeatures.length === 3;
            
            if (asciiCorrect && extendedCorrect) {
                feedback.innerHTML = '<p style="color: #27ae60;">Excellent! All features correctly sorted!</p>';
                addXP(40, 'extended-comparison');
            } else {
                feedback.innerHTML = '<p style="color: #e74c3c;">Some features are in the wrong category. Think about the differences between ASCII and Extended ASCII.</p>';
            }
        }

        function checkExtendedIssue() {
            const selected = document.querySelector('input[name="extended-issue"]:checked');
            const feedback = document.getElementById('extendedIssueFeedback');
            
            if (!selected) {
                feedback.innerHTML = '<p style="color: #e74c3c;">Please select an answer!</p>';
                return;
            }
            
            if (selected.value === 'b') {
                feedback.innerHTML = '<p style="color: #27ae60;">Correct! This inconsistency is a major compatibility issue.</p>';
                addXP(25, 'extended-issue-quiz');
            } else {
                feedback.innerHTML = '<p style="color: #e74c3c;">Not quite. Think about compatibility between different systems.</p>';
            }
        }

        function resetExtended() {
            // Reset drag items to original container
            const featuresContainer = document.getElementById('features-container');
            const dragItems = document.querySelectorAll('#ascii-drop .drag-item, #extended-drop .drag-item');
            
            dragItems.forEach(item => {
                featuresContainer.appendChild(item);
            });
            
            document.getElementById('extendedFeedback').innerHTML = '';
            const checkedRadio = document.querySelector('input[name="extended-issue"]:checked');
            if (checkedRadio) checkedRadio.checked = false;
            document.getElementById('extendedIssueFeedback').innerHTML = '';
        }

        // Section 4: Unicode
        function showUnicode() {
            const input = document.getElementById('unicodeInput').value;
            const display = document.getElementById('unicodeDisplay');
            
            if (!input) {
                display.innerHTML = '<p style="color: #e74c3c;">Please enter some text!</p>';
                return;
            }
            
            let html = '<div style="display: flex; flex-wrap: wrap; gap: 15px;">';
            
            for (let i = 0; i < input.length; i++) {
                const char = input[i];
                const unicode = char.charCodeAt(0);
                const hex = unicode.toString(16).toUpperCase().padStart(4, '0');
                
                html += `
                    <div style="text-align: center; padding: 10px; background: #34495e; border-radius: 5px;">
                        <div style="font-size: 1.5em; margin-bottom: 5px;">${char}</div>
                        <div>U+${hex}</div>
                        <div style="font-size: 0.8em; margin-top: 5px;">Decimal: ${unicode}</div>
                    </div>
                `;
            }
            
            html += '</div>';
            display.innerHTML = html;
            
            addXP(20, 'unicode-explorer');
        }

        function checkUnicodeTable() {
            const unicodeBits = document.getElementById('unicode-bits').value.toLowerCase();
            const asciiChars = document.getElementById('ascii-chars').value.trim();
            const unicodeLangs = document.getElementById('unicode-langs').value.toLowerCase();
            const feedback = document.getElementById('unicodeTableFeedback');
            
            let correct = 0;
            let messages = [];
            
            // Check Unicode bits (accept various correct answers)
            if (unicodeBits.includes('16') || unicodeBits.includes('24') || unicodeBits.includes('32') || 
                unicodeBits.includes('variable') || unicodeBits.includes('multiple')) {
                correct++;
            } else {
                messages.push('Unicode can use 16, 24, or 32 bits');
            }
            
            // Check ASCII characters
            if (asciiChars === '128' || asciiChars === '256' || asciiChars.includes('128') || asciiChars.includes('256')) {
                correct++;
            } else {
                messages.push('ASCII has 128 characters (or 256 for Extended ASCII)');
            }
            
            // Check Unicode languages
            if (unicodeLangs.includes('all') || unicodeLangs.includes('most') || unicodeLangs.includes('global') || 
                unicodeLangs.includes('world') || unicodeLangs.includes('many')) {
                correct++;
            } else {
                messages.push('Unicode supports most/all world languages');
            }
            
            if (correct === 3) {
                feedback.innerHTML = '<p style="color: #27ae60;">Excellent! Your comparison table is complete and correct!</p>';
                addXP(35, 'unicode-table');
            } else {
                feedback.innerHTML = `<p style="color: #e74c3c;">You got ${correct}/3 correct. ${messages.join('. ')}</p>`;
            }
        }

        function resetUnicodeTable() {
            document.getElementById('unicode-bits').value = '';
            document.getElementById('ascii-chars').value = '';
            document.getElementById('unicode-langs').value = '';
            document.getElementById('unicodeTableFeedback').innerHTML = '';
        }

        // Section 5: Practice
        function checkScenarios() {
            const selected = document.querySelector('input[name="scenario1"]:checked');
            const feedback = document.getElementById('scenariosFeedback');
            
            if (!selected) {
                feedback.innerHTML = '<p style="color: #e74c3c;">Please select an answer!</p>';
                return;
            }
            
            if (selected.value === 'c') {
                feedback.innerHTML = '<p style="color: #27ae60;">Excellent! Unicode is the best choice for international support and future-proofing.</p>';
                addXP(30, 'scenario1');
            } else if (selected.value === 'b') {
                feedback.innerHTML = '<p style="color: #f39c12;">Extended ASCII could work, but Unicode would be better for future expansion.</p>';
                addXP(15, 'scenario1');
            } else {
                feedback.innerHTML = '<p style="color: #e74c3c;">Not the best choice. Consider the need for proper accent support.</p>';
            }
        }

        function checkBytesAnswer() {
            const answer = document.getElementById('bytes-answer').value;
            const feedback = document.getElementById('bytesFeedback');
            
            if (answer === '5') {
                feedback.innerHTML = '<p style="color: #27ae60;">Correct! "HELLO" has 5 characters, so 5 bytes are needed.</p>';
                addXP(25, 'bytes-calculation');
            } else {
                feedback.innerHTML = '<p style="color: #e74c3c;">Not quite. Count the letters in "HELLO" - each needs 1 byte in ASCII.</p>';
            }
        }

        // Canvas for drawing
        function initializeCanvas() {
            const canvas = document.getElementById('drawingCanvas');
            const ctx = canvas.getContext('2d');
            let isDrawing = false;
            let lastX = 0;
            let lastY = 0;

            function getCoordinates(e) {
                const rect = canvas.getBoundingClientRect();
                const scaleX = canvas.width / rect.width;
                const scaleY = canvas.height / rect.height;
                
                if (e.touches) {
                    return {
                        x: (e.touches[0].clientX - rect.left) * scaleX,
                        y: (e.touches[0].clientY - rect.top) * scaleY
                    };
                } else {
                    return {
                        x: (e.clientX - rect.left) * scaleX,
                        y: (e.clientY - rect.top) * scaleY
                    };
                }
            }

            function startDrawing(e) {
                isDrawing = true;
                const coords = getCoordinates(e);
                lastX = coords.x;
                lastY = coords.y;
            }

            function draw(e) {
                if (!isDrawing) return;
                e.preventDefault();
                
                const coords = getCoordinates(e);
                
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(coords.x, coords.y);
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                lastX = coords.x;
                lastY = coords.y;
            }

            function stopDrawing() {
                isDrawing = false;
            }

            // Mouse events
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);

            // Touch events
            canvas.addEventListener('touchstart', startDrawing);
            canvas.addEventListener('touchmove', draw);
            canvas.addEventListener('touchend', stopDrawing);
        }

        function clearCanvas() {
            const canvas = document.getElementById('drawingCanvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        // Section 6: Summary Quiz
        function checkSummaryQuiz() {
            const feedback = document.getElementById('summaryFeedback');
            let score = 0;
            let totalQuestions = 8;
            
            // Q1
            const q1 = document.querySelector('input[name="summary-q1"]:checked');
            if (q1 && q1.value === 'b') score++;
            
            // Q2
            const q2 = document.getElementById('summary-q2').value.trim();
            if (q2 === '7' || q2 === '7 bits') score++;
            
            // Q3
            const q3 = document.getElementById('summary-q3').value;
            if (q3 === '256') score++;
            
            // Q4
            const q4 = document.querySelector('input[name="summary-q4"]:checked');
            if (q4 && q4.value === 'c') score++;
            
            // Q5
            const q5 = document.querySelector('input[name="summary-q5"]:checked');
            if (q5 && q5.value === 'false') score++;
            
            // Q6
            const q6 = document.querySelector('input[name="summary-q6"]:checked');
            if (q6 && q6.value === 'b') score++;
            
            // Q7 - Check for key concepts
            const q7 = document.getElementById('summary-q7').value.toLowerCase();
            const q7Words = q7.split(' ').length;
            if (q7Words >= 20 && (q7.includes('language') || q7.includes('character') || q7.includes('128') || q7.includes('english'))) {
                score++;
                addXP(10, 'summary-q7-keywords');
            }
            
            // Q8
            const q8 = document.getElementById('summary-q8').value.toUpperCase();
            if (q8.includes('UTF') || q8.includes('UTF-8') || q8.includes('UTF-16') || q8.includes('UTF-32')) score++;
            
            const percentage = Math.round((score / totalQuestions) * 100);
            let message = '';
            
            if (percentage >= 90) {
                message = 'Outstanding! You have mastered character sets!';
                addXP(100, 'summary-quiz-excellent');
            } else if (percentage >= 70) {
                message = 'Good work! Review the questions you missed.';
                addXP(70, 'summary-quiz-good');
            } else if (percentage >= 50) {
                message = 'Not bad, but you should review the material again.';
                addXP(40, 'summary-quiz-pass');
            } else {
                message = 'You need more practice. Review each section carefully.';
                addXP(20, 'summary-quiz-attempt');
            }
            
            feedback.innerHTML = `
                <h4>Score: ${score}/${totalQuestions} (${percentage}%)</h4>
                <p>${message}</p>
            `;
        }

        // Section 7: Exam Practice
        function showMarkScheme(questionId) {
            const textarea = document.getElementById(questionId);
            const markScheme = document.getElementById('mark-scheme-' + questionId);
            
            // Check if answer is long enough
            const answerLength = textarea.value.trim().split(' ').length;
            
            if (answerLength < 20) {
                alert('Please write a more detailed answer before viewing the mark scheme (at least 20 words).');
                return;
            }
            
            markScheme.style.display = 'block';
            addXP(15, 'viewed-mark-scheme-' + questionId);
        }

        // Section 8: Extension
        function saveExtension() {
            const ext1 = document.getElementById('extension-1').value;
            const ext2 = document.getElementById('extension-2').value;
            const ext3 = document.getElementById('extension-3').value;
            
            let totalWords = 0;
            totalWords += ext1.split(' ').filter(word => word.length > 0).length;
            totalWords += ext2.split(' ').filter(word => word.length > 0).length;
            totalWords += ext3.split(' ').filter(word => word.length > 0).length;
            
            if (totalWords > 50) {
                showAchievement('Extension Master!');
                addXP(50, 'extension-activities');
            }
            
            alert('Extension work saved! Great effort on going beyond the specification!');
        }

        // Feedback system
        function openFeedback() {
            document.getElementById('feedbackModal').style.display = 'block';
        }

        function closeFeedback() {
            document.getElementById('feedbackModal').style.display = 'none';
        }

        function sendFeedback() {
            const feedbackText = document.getElementById('feedbackText').value;
            const currentPage = `Section ${currentSection + 1}`;
            
            if (!feedbackText.trim()) {
                alert('Please enter some feedback before sending.');
                return;
            }
            
            // Construct email body
            const emailBody = `Feedback from Character Sets Lesson\n\nPage: ${currentPage}\n\nFeedback:\n${feedbackText}`;
            
            // Create mailto link
            const mailtoLink = `mailto:millingtond@mgs.org?subject=Character Sets Lesson Feedback&body=${encodeURIComponent(emailBody)}`;
            
            // Open email client
            window.location.href = mailtoLink;
            
            // Close modal and clear text
            closeFeedback();
            document.getElementById('feedbackText').value = '';
            
            alert('Thank you for your feedback! Your email client should now open.');
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('feedbackModal');
            if (event.target === modal) {
                closeFeedback();
            }
        }
    </script>
</body>
</html>