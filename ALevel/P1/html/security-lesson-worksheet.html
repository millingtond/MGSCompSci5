<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Security and Integrity - A Level Computer Science</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header and Navigation */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 20px;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .nav-bar {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
            justify-content: space-between;
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .nav-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }

        .nav-btn.active {
            background: #764ba2;
        }

        /* XP and Level Display */
        .stats-display {
            display: flex;
            gap: 20px;
            align-items: center;
            font-weight: bold;
        }

        .xp-bar {
            width: 200px;
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .xp-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            width: 0%;
            transition: width 0.5s ease;
        }

        .level-badge {
            background: #FFD700;
            color: #333;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
        }

        /* Section Styles */
        .section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: none;
        }

        .section.active {
            display: block;
        }

        .section-header {
            font-size: 24px;
            color: #667eea;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 10px;
        }

        /* Task Styles */
        .task {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
        }

        .task-header {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        /* Question Styles */
        .question {
            margin-bottom: 20px;
            padding: 15px;
            background: #f0f4ff;
            border-radius: 8px;
        }

        .question-text {
            font-weight: 500;
            margin-bottom: 10px;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            background: white;
            padding: 12px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .option:hover {
            background: #e3f2fd;
            border-color: #667eea;
        }

        .option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .option.correct {
            background: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }

        .option.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }

        /* Input Styles */
        input[type="text"], textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        input[type="text"]:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        /* Button Styles */
        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            margin-right: 10px;
        }

        .btn:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #4CAF50;
        }

        .btn-success:hover {
            background: #45a049;
        }

        .btn-warning {
            background: #ff9800;
        }

        .btn-warning:hover {
            background: #e68900;
        }

        /* Feedback Styles */
        .feedback {
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
            display: none;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        /* Achievement Popup */
        .achievement-popup {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #333;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            transform: translateX(400px);
            transition: transform 0.5s ease;
            z-index: 1000;
        }

        .achievement-popup.show {
            transform: translateX(0);
        }

        .achievement-icon {
            font-size: 30px;
            margin-bottom: 10px;
        }

        /* Drawing Canvas */
        .canvas-container {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            margin: 20px 0;
            position: relative;
        }

        #drawingCanvas {
            display: block;
            cursor: crosshair;
            touch-action: none;
        }

        .canvas-controls {
            padding: 10px;
            background: #f5f5f5;
            border-top: 1px solid #e0e0e0;
        }

        /* Drag and Drop (Click Style) */
        .matching-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .match-item {
            background: #f0f4ff;
            padding: 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            text-align: center;
        }

        .match-item:hover {
            background: #e3f2fd;
            border-color: #667eea;
        }

        .match-item.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .match-item.matched {
            background: #4CAF50;
            color: white;
            border-color: #4CAF50;
            cursor: default;
        }

        /* Simulation Styles */
        .simulation-container {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .simulation-step {
            margin: 10px 0;
            padding: 15px;
            background: white;
            border-radius: 5px;
            border-left: 4px solid #667eea;
        }

        .simulation-controls {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }

        /* Feedback Button */
        .feedback-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #764ba2;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 14px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            z-index: 999;
        }

        .feedback-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0,0,0,0.3);
        }

        /* Feedback Modal */
        .feedback-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1001;
            align-items: center;
            justify-content: center;
        }

        .feedback-modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        /* Anti-Paste Styles */
        .paste-shame {
            background: #ff0000;
            color: white;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            font-weight: bold;
            display: none;
            margin: 10px 0;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        /* Progress Indicator */
        .progress-indicator {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            gap: 10px;
        }

        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #e0e0e0;
            transition: all 0.3s ease;
        }

        .progress-dot.active {
            background: #667eea;
            transform: scale(1.2);
        }

        .progress-dot.completed {
            background: #4CAF50;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .nav-bar {
                flex-direction: column;
                gap: 15px;
            }

            .stats-display {
                flex-direction: column;
                align-items: flex-start;
                width: 100%;
            }

            .xp-bar {
                width: 100%;
            }

            .matching-container {
                grid-template-columns: 1fr;
            }

            .section {
                padding: 20px;
            }

            .feedback-btn {
                bottom: 10px;
                right: 10px;
            }
        }

        /* Accessibility */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0,0,0,0);
            white-space: nowrap;
            border-width: 0;
        }

        /* High Contrast Mode */
        body.high-contrast {
            background: #000;
            color: #fff;
        }

        body.high-contrast .section,
        body.high-contrast .nav-bar {
            background: #111;
            color: #fff;
        }

        body.high-contrast .task {
            background: #222;
        }

        body.high-contrast input,
        body.high-contrast textarea {
            background: #000;
            color: #fff;
            border-color: #fff;
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Hint System */
        .hint-container {
            margin-top: 10px;
        }

        .hint-btn {
            background: #ffc107;
            color: #333;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .hint-btn:hover {
            background: #ffb300;
        }

        .hint-text {
            background: #fff3cd;
            color: #856404;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            border: 1px solid #ffeaa7;
            display: none;
        }

        /* Navigation Arrows */
        .nav-arrows {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .nav-arrow {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-arrow:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }

        .nav-arrow:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        /* Mark Scheme */
        .mark-scheme {
            background: #e8f5e9;
            padding: 20px;
            border-radius: 5px;
            margin-top: 20px;
            border: 2px solid #4CAF50;
            display: none;
        }

        .mark-scheme-header {
            font-weight: bold;
            color: #2e7d32;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>Data Security and Integrity</h1>
            <p>A Level Computer Science - Cambridge 9618</p>
        </div>

        <!-- Navigation Bar -->
        <div class="nav-bar">
            <div class="nav-buttons">
                <button class="nav-btn active" onclick="showSection(0)">Start</button>
                <button class="nav-btn" onclick="showSection(1)">Security Basics</button>
                <button class="nav-btn" onclick="showSection(2)">Data Integrity</button>
                <button class="nav-btn" onclick="showSection(3)">Firewalls</button>
                <button class="nav-btn" onclick="showSection(4)">Access Control</button>
                <button class="nav-btn" onclick="showSection(5)">Encryption</button>
                <button class="nav-btn" onclick="showSection(6)">Physical Security</button>
                <button class="nav-btn" onclick="showSection(7)">Summary Quiz</button>
                <button class="nav-btn" onclick="showSection(8)">Exam Practice</button>
                <button class="nav-btn" onclick="showSection(9)">Extension</button>
            </div>
            <div class="stats-display">
                <span>Level: <span class="level-badge" id="levelDisplay">0</span></span>
                <div class="xp-bar">
                    <div class="xp-fill" id="xpFill"></div>
                </div>
                <span id="xpDisplay">0 XP</span>
            </div>
        </div>

        <!-- Progress Indicator -->
        <div class="progress-indicator">
            <div class="progress-dot active"></div>
            <div class="progress-dot"></div>
            <div class="progress-dot"></div>
            <div class="progress-dot"></div>
            <div class="progress-dot"></div>
            <div class="progress-dot"></div>
            <div class="progress-dot"></div>
            <div class="progress-dot"></div>
            <div class="progress-dot"></div>
            <div class="progress-dot"></div>
        </div>

        <!-- Section 0: Starter Activity -->
        <div class="section active" id="section-0">
            <h2 class="section-header">Starter Activity: Security Breach Simulation</h2>
            
            <div class="task">
                <h3 class="task-header">🚨 Alert: Potential Security Breach Detected!</h3>
                <p>You are the IT security manager at a large company. Several suspicious activities have been detected. Can you identify which are genuine security threats?</p>
                
                <div class="simulation-container">
                    <div id="breach-scenario" class="simulation-step">
                        <strong>Scenario 1:</strong> An employee receives an email from "IT-Support@yourcompany.co" asking them to verify their password by clicking a link.
                    </div>
                    
                    <div class="question">
                        <p class="question-text">Is this a security threat?</p>
                        <div class="options">
                            <div class="option" onclick="checkBreachAnswer(this, true, 1)">Yes - This is likely a phishing attempt</div>
                            <div class="option" onclick="checkBreachAnswer(this, false, 1)">No - IT support needs to verify passwords sometimes</div>
                        </div>
                    </div>
                    
                    <div class="feedback" id="breach-feedback-1"></div>
                </div>

                <div class="simulation-container" style="display: none;" id="scenario-2">
                    <div class="simulation-step">
                        <strong>Scenario 2:</strong> The firewall logs show multiple failed login attempts from an IP address in another country at 3 AM.
                    </div>
                    
                    <div class="question">
                        <p class="question-text">What type of attack might this indicate?</p>
                        <div class="options">
                            <div class="option" onclick="checkBreachAnswer(this, false, 2)">A legitimate user forgot their password</div>
                            <div class="option" onclick="checkBreachAnswer(this, true, 2)">A brute force attack attempting to guess passwords</div>
                            <div class="option" onclick="checkBreachAnswer(this, false, 2)">Normal network maintenance</div>
                        </div>
                    </div>
                    
                    <div class="feedback" id="breach-feedback-2"></div>
                </div>

                <button class="btn" onclick="resetSimulation()" style="margin-top: 20px;">Reset Simulation</button>
            </div>

            <div class="task">
                <h3 class="task-header">Quick Knowledge Check</h3>
                <p>Before we begin, let's test your current knowledge of security concepts.</p>
                
                <div class="question">
                    <p class="question-text">Which of the following is NOT a method of ensuring data security?</p>
                    <div class="options">
                        <div class="option" onclick="checkAnswer(this, false, 'q1')">Encryption of sensitive data</div>
                        <div class="option" onclick="checkAnswer(this, false, 'q1')">Regular software updates and patches</div>
                        <div class="option" onclick="checkAnswer(this, true, 'q1')">Sharing passwords with trusted colleagues</div>
                        <div class="option" onclick="checkAnswer(this, false, 'q1')">Using firewall protection</div>
                    </div>
                </div>
                <div class="feedback" id="feedback-q1"></div>
            </div>

            <div class="nav-arrows">
                <button class="nav-arrow" disabled>
                    <span>←</span> Previous
                </button>
                <button class="nav-arrow" onclick="showSection(1)">
                    Next <span>→</span>
                </button>
            </div>
        </div>

        <!-- Section 1: Security Fundamentals -->
        <div class="section" id="section-1">
            <h2 class="section-header">Security Fundamentals</h2>
            
            <div class="task">
                <h3 class="task-header">Learning Outcomes</h3>
                <ul>
                    <li>Understand the importance of user accounts and authentication</li>
                    <li>Explain the role of firewalls in network security</li>
                    <li>Describe anti-malware protection strategies</li>
                    <li>Understand auditing and logging practices</li>
                </ul>
            </div>

            <div class="task">
                <h3 class="task-header">User Account Security</h3>
                <p>User accounts are the first line of defense in system security. They provide controlled access to resources and help track user activities.</p>
                
                <div class="question">
                    <p class="question-text">Fill in the blanks to complete the sentence about secure passwords:</p>
                    <p>A secure password should be at least <select id="pass-length" onchange="checkFillBlanks('security1')">
                        <option value="">Choose...</option>
                        <option value="4">4</option>
                        <option value="8">8</option>
                        <option value="12">12</option>
                        <option value="20">20</option>
                    </select> characters long and include a mixture of <select id="pass-content" onchange="checkFillBlanks('security1')">
                        <option value="">Choose...</option>
                        <option value="letters">only letters</option>
                        <option value="numbers">only numbers</option>
                        <option value="mixed">numbers, letters, and symbols</option>
                        <option value="words">dictionary words</option>
                    </select>.</p>
                </div>
                <div class="feedback" id="feedback-security1"></div>
                
                <div class="hint-container">
                    <button class="hint-btn" onclick="showHint('hint-security1')">Need a hint? (-5 XP)</button>
                    <div class="hint-text" id="hint-security1">Think about what makes passwords harder to crack. Longer passwords with variety are more secure.</div>
                </div>
            </div>

            <div class="task">
                <h3 class="task-header">Matching Exercise: Security Measures and Their Purposes</h3>
                <p>Click on a security measure, then click on its matching purpose. Match all pairs correctly!</p>
                
                <div class="matching-container">
                    <div class="match-column">
                        <div class="match-item" data-pair="1" onclick="selectMatch(this)">Firewall</div>
                        <div class="match-item" data-pair="2" onclick="selectMatch(this)">Anti-malware</div>
                        <div class="match-item" data-pair="3" onclick="selectMatch(this)">Auditing</div>
                        <div class="match-item" data-pair="4" onclick="selectMatch(this)">Regular updates</div>
                    </div>
                    <div class="match-column">
                        <div class="match-item" data-pair="3" onclick="selectMatch(this)">Track unauthorized system use</div>
                        <div class="match-item" data-pair="1" onclick="selectMatch(this)">Control network traffic</div>
                        <div class="match-item" data-pair="4" onclick="selectMatch(this)">Fix security vulnerabilities</div>
                        <div class="match-item" data-pair="2" onclick="selectMatch(this)">Detect and remove viruses</div>
                    </div>
                </div>
                
                <button class="btn" onclick="resetMatching()">Reset Matching</button>
            </div>

            <div class="task">
                <h3 class="task-header">Real-World Context: The Cost of Poor Security</h3>
                <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin: 10px 0;">
                    <strong>Did you know?</strong> In 2023, the average cost of a data breach was $4.45 million globally. Poor password practices account for 81% of company data breaches.
                </div>
                
                <div class="question">
                    <p class="question-text">A company wants to implement multi-factor authentication. Which combination provides the strongest security?</p>
                    <div class="options">
                        <div class="option" onclick="checkAnswer(this, false, 'mfa1')">Password + Security question</div>
                        <div class="option" onclick="checkAnswer(this, true, 'mfa1')">Password + Fingerprint + SMS code</div>
                        <div class="option" onclick="checkAnswer(this, false, 'mfa1')">Two different passwords</div>
                        <div class="option" onclick="checkAnswer(this, false, 'mfa1')">Username + Password</div>
                    </div>
                </div>
                <div class="feedback" id="feedback-mfa1"></div>
            </div>

            <div class="nav-arrows">
                <button class="nav-arrow" onclick="showSection(0)">
                    <span>←</span> Previous
                </button>
                <button class="nav-arrow" onclick="showSection(2)">
                    Next <span>→</span>
                </button>
            </div>
        </div>

        <!-- Section 2: Data Integrity -->
        <div class="section" id="section-2">
            <h2 class="section-header">Ensuring Data Integrity</h2>
            
            <div class="task">
                <h3 class="task-header">What is Data Integrity?</h3>
                <p>Data integrity refers to the accuracy, consistency, and reliability of data throughout its lifecycle. It ensures that data remains unaltered and trustworthy.</p>
                
                <div class="simulation-container">
                    <h4>Interactive: Data Validation Simulator</h4>
                    <p>Try entering data and see how validation rules work:</p>
                    
                    <div style="margin: 15px 0;">
                        <label>Enter an email address:</label>
                        <input type="text" id="email-validator" placeholder="Enter email...">
                        <button class="btn btn-success" onclick="validateEmail()">Validate</button>
                        <div class="feedback" id="email-validation-feedback"></div>
                    </div>
                    
                    <div style="margin: 15px 0;">
                        <label>Enter a date of birth (DD/MM/YYYY):</label>
                        <input type="text" id="dob-validator" placeholder="DD/MM/YYYY">
                        <button class="btn btn-success" onclick="validateDOB()">Validate</button>
                        <div class="feedback" id="dob-validation-feedback"></div>
                    </div>
                    
                    <button class="btn btn-warning" onclick="resetValidation()">Reset Validation</button>
                </div>
            </div>

            <div class="task">
                <h3 class="task-header">Methods of Ensuring Data Integrity</h3>
                
                <div class="question">
                    <p class="question-text">Which of the following is used to ensure that related data across multiple tables remains consistent?</p>
                    <div class="options">
                        <div class="option" onclick="checkAnswer(this, false, 'integrity1')">Input masks</div>
                        <div class="option" onclick="checkAnswer(this, true, 'integrity1')">Referential integrity</div>
                        <div class="option" onclick="checkAnswer(this, false, 'integrity1')">Data compression</div>
                        <div class="option" onclick="checkAnswer(this, false, 'integrity1')">Backup procedures</div>
                    </div>
                </div>
                <div class="feedback" id="feedback-integrity1"></div>
            </div>

            <div class="task">
                <h3 class="task-header">Sequencing Activity: Backup Strategy Steps</h3>
                <p>Arrange these backup steps in the correct order by clicking them in sequence:</p>
                
                <div id="sequence-container">
                    <div class="match-item" onclick="selectSequence(this, 2)">Test the backup to ensure data can be restored</div>
                    <div class="match-item" onclick="selectSequence(this, 3)">Store backup in a secure, off-site location</div>
                    <div class="match-item" onclick="selectSequence(this, 1)">Create a full backup of critical data</div>
                    <div class="match-item" onclick="selectSequence(this, 4)">Document the backup procedure and schedule</div>
                </div>
                
                <div class="feedback" id="sequence-feedback"></div>
                <button class="btn" onclick="resetSequence()">Reset Sequence</button>
            </div>

            <div class="task">
                <h3 class="task-header">Common Mistakes to Avoid</h3>
                <div style="background: #ffebee; padding: 15px; border-radius: 5px; margin: 10px 0; border-left: 4px solid #f44336;">
                    <h4 style="color: #d32f2f; margin-bottom: 10px;">⚠️ Common Data Integrity Mistakes:</h4>
                    <ul>
                        <li>Not implementing validation rules at the database level</li>
                        <li>Forgetting to test backup restoration procedures</li>
                        <li>Allowing concurrent access without proper locking mechanisms</li>
                        <li>Not maintaining audit trails for sensitive data changes</li>
                    </ul>
                </div>
            </div>

            <div class="nav-arrows">
                <button class="nav-arrow" onclick="showSection(1)">
                    <span>←</span> Previous
                </button>
                <button class="nav-arrow" onclick="showSection(3)">
                    Next <span>→</span>
                </button>
            </div>
        </div>

        <!-- Section 3: Firewalls -->
        <div class="section" id="section-3">
            <h2 class="section-header">Understanding Firewalls</h2>
            
            <div class="task">
                <h3 class="task-header">Firewall Fundamentals</h3>
                <p>A firewall acts as a barrier between a trusted internal network and untrusted external networks, controlling incoming and outgoing network traffic based on predetermined security rules.</p>
                
                <div class="simulation-container">
                    <h4>Interactive: Packet Filtering Simulation</h4>
                    <p>Watch how a firewall filters network packets. Click "Start Simulation" to begin.</p>
                    
                    <div id="firewall-sim" style="background: #f5f5f5; padding: 20px; border-radius: 5px; min-height: 200px;">
                        <div id="packet-display" style="display: none;">
                            <div class="simulation-step" id="packet-1">
                                <strong>Incoming Packet:</strong><br>
                                Source IP: 192.168.1.100<br>
                                Destination Port: 80 (HTTP)<br>
                                <span style="color: green;">✓ Allowed - HTTP traffic permitted</span>
                            </div>
                        </div>
                        <button class="btn" onclick="startFirewallSim()">Start Simulation</button>
                    </div>
                    
                    <button class="btn btn-warning" onclick="resetFirewallSim()">Reset Simulation</button>
                </div>
            </div>

            <div class="task">
                <h3 class="task-header">Hardware vs Software Firewalls</h3>
                
                <div class="question">
                    <p class="question-text">True or False: A hardware firewall uses the processing resources of the computers it protects.</p>
                    <div class="options">
                        <div class="option" onclick="checkAnswer(this, false, 'fw1')">True</div>
                        <div class="option" onclick="checkAnswer(this, true, 'fw1')">False</div>
                    </div>
                </div>
                <div class="feedback" id="feedback-fw1"></div>
                
                <div class="question" style="margin-top: 20px;">
                    <p class="question-text">Which advantage is specific to software firewalls?</p>
                    <div class="options">
                        <div class="option" onclick="checkAnswer(this, false, 'fw2')">No impact on system performance</div>
                        <div class="option" onclick="checkAnswer(this, true, 'fw2')">Can make precise decisions about individual applications</div>
                        <div class="option" onclick="checkAnswer(this, false, 'fw2')">Protects the entire network automatically</div>
                        <div class="option" onclick="checkAnswer(this, false, 'fw2')">Requires no configuration</div>
                    </div>
                </div>
                <div class="feedback" id="feedback-fw2"></div>
            </div>

            <div class="task">
                <h3 class="task-header">Drawing Exercise: Network Diagram</h3>
                <p>Draw a simple network diagram showing where hardware and software firewalls would be positioned:</p>
                
                <div class="canvas-container">
                    <canvas id="drawingCanvas" width="600" height="300"></canvas>
                    <div class="canvas-controls">
                        <button class="btn" onclick="clearCanvas()">Clear Canvas</button>
                        <span style="margin-left: 20px;">Use your mouse or stylus to draw</span>
                    </div>
                </div>
            </div>

            <div class="nav-arrows">
                <button class="nav-arrow" onclick="showSection(2)">
                    <span>←</span> Previous
                </button>
                <button class="nav-arrow" onclick="showSection(4)">
                    Next <span>→</span>
                </button>
            </div>
        </div>

        <!-- Section 4: Access Controls and Auditing -->
        <div class="section" id="section-4">
            <h2 class="section-header">Access Controls and Auditing</h2>
            
            <div class="task">
                <h3 class="task-header">Understanding Access Rights</h3>
                <p>Access controls determine who can access what resources and what actions they can perform. This is crucial for maintaining security and preventing unauthorized access.</p>
                
                <div class="question">
                    <p class="question-text">A new employee needs access to the company database. What principle should guide the assignment of their access rights?</p>
                    <div class="options">
                        <div class="option" onclick="checkAnswer(this, false, 'access1')">Give them admin access to avoid future requests</div>
                        <div class="option" onclick="checkAnswer(this, true, 'access1')">Principle of least privilege - only what they need</div>
                        <div class="option" onclick="checkAnswer(this, false, 'access1')">Copy another employee's access rights</div>
                        <div class="option" onclick="checkAnswer(this, false, 'access1')">Wait until they request specific access</div>
                    </div>
                </div>
                <div class="feedback" id="feedback-access1"></div>
            </div>

            <div class="task">
                <h3 class="task-header">Audit Trails Activity</h3>
                <p>Examine this audit log and answer the question:</p>
                
                <div style="background: #f5f5f5; padding: 15px; border-radius: 5px; font-family: monospace; margin: 10px 0;">
                    2024-03-15 09:23:45 - User: jsmith - Action: LOGIN - Status: SUCCESS<br>
                    2024-03-15 09:24:12 - User: jsmith - Action: READ - File: customer_data.xlsx<br>
                    2024-03-15 09:25:33 - User: jsmith - Action: MODIFY - File: customer_data.xlsx<br>
                    2024-03-15 09:26:01 - User: jsmith - Action: DELETE - File: backup_2023.zip<br>
                    2024-03-15 09:26:15 - User: admin - Action: RESTORE - File: backup_2023.zip
                </div>
                
                <div class="question">
                    <p class="question-text">What suspicious activity can you identify from this audit log?</p>
                    <textarea id="audit-analysis" rows="4" placeholder="Describe what you notice..."></textarea>
                    <button class="btn" onclick="checkAuditAnalysis()">Submit Analysis</button>
                </div>
                <div class="feedback" id="feedback-audit"></div>
            </div>

            <div class="task">
                <h3 class="task-header">Concurrent Access Control</h3>
                <p>When multiple users access the same data simultaneously, problems can occur. Record locking prevents data corruption.</p>
                
                <div class="simulation-container">
                    <h4>Scenario: Two users editing the same record</h4>
                    <div class="simulation-step">
                        <p><strong>Without record locking:</strong></p>
                        <p>User A reads record: "Stock: 100 units"</p>
                        <p>User B reads record: "Stock: 100 units"</p>
                        <p>User A sells 30 units, updates: "Stock: 70 units"</p>
                        <p>User B sells 20 units, updates: "Stock: 80 units" ❌</p>
                        <p style="color: red;">Problem: Lost update! Actual stock should be 50 units.</p>
                    </div>
                    
                    <div class="question">
                        <p class="question-text">How does record locking solve this problem?</p>
                        <div class="options">
                            <div class="option" onclick="checkAnswer(this, false, 'lock1')">It prevents any user from reading the record</div>
                            <div class="option" onclick="checkAnswer(this, true, 'lock1')">It prevents other users from updating until the first update is complete</div>
                            <div class="option" onclick="checkAnswer(this, false, 'lock1')">It creates multiple copies of the record</div>
                            <div class="option" onclick="checkAnswer(this, false, 'lock1')">It deletes the record after each update</div>
                        </div>
                    </div>
                    <div class="feedback" id="feedback-lock1"></div>
                </div>
            </div>

            <div class="nav-arrows">
                <button class="nav-arrow" onclick="showSection(3)">
                    <span>←</span> Previous
                </button>
                <button class="nav-arrow" onclick="showSection(5)">
                    Next <span>→</span>
                </button>
            </div>
        </div>

        <!-- Section 5: Encryption and Digital Security -->
        <div class="section" id="section-5">
            <h2 class="section-header">Encryption and Digital Security</h2>
            
            <div class="task">
                <h3 class="task-header">Understanding Encryption</h3>
                <p>Encryption transforms readable data (plaintext) into an unreadable format (ciphertext) using mathematical algorithms and keys.</p>
                
                <div class="simulation-container">
                    <h4>Simple Encryption Demo</h4>
                    <p>Try a basic Caesar cipher encryption:</p>
                    
                    <input type="text" id="plaintext" placeholder="Enter message to encrypt...">
                    <button class="btn" onclick="encryptMessage()">Encrypt</button>
                    <div style="margin-top: 10px;">
                        <strong>Encrypted:</strong> <span id="ciphertext" style="font-family: monospace; color: #667eea;"></span>
                    </div>
                    <button class="btn btn-warning" onclick="resetEncryption()">Reset</button>
                </div>
            </div>

            <div class="task">
                <h3 class="task-header">Digital Signatures</h3>
                <p>Digital signatures ensure document authenticity and detect tampering.</p>
                
                <div class="question">
                    <p class="question-text">What are the two main purposes of a digital signature? (Select all that apply)</p>
                    <div id="multi-select-container">
                        <label><input type="checkbox" value="auth"> Verify the document came from a trusted source</label><br>
                        <label><input type="checkbox" value="encrypt"> Encrypt the entire document</label><br>
                        <label><input type="checkbox" value="integrity"> Ensure the document hasn't been altered</label><br>
                        <label><input type="checkbox" value="compress"> Compress the document size</label>
                    </div>
                    <button class="btn" onclick="checkMultiSelect()">Check Answer</button>
                </div>
                <div class="feedback" id="feedback-multi"></div>
            </div>

            <div class="task">
                <h3 class="task-header">Anti-virus Software</h3>
                
                <div class="question">
                    <p class="question-text">When should anti-virus software perform checks? Order these by importance (1 = most important):</p>
                    
                    <div style="margin: 10px 0;">
                        <select id="av1" onchange="checkAVOrder()">
                            <option value="">Choose priority...</option>
                            <option value="1">1 - Most Important</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4 - Least Important</option>
                        </select>
                        When downloading files from the internet
                    </div>
                    
                    <div style="margin: 10px 0;">
                        <select id="av2" onchange="checkAVOrder()">
                            <option value="">Choose priority...</option>
                            <option value="1">1 - Most Important</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4 - Least Important</option>
                        </select>
                        During scheduled weekly scans
                    </div>
                    
                    <div style="margin: 10px 0;">
                        <select id="av3" onchange="checkAVOrder()">
                            <option value="">Choose priority...</option>
                            <option value="1">1 - Most Important</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4 - Least Important</option>
                        </select>
                        When external storage is connected
                    </div>
                    
                    <div style="margin: 10px 0;">
                        <select id="av4" onchange="checkAVOrder()">
                            <option value="">Choose priority...</option>
                            <option value="1">1 - Most Important</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4 - Least Important</option>
                        </select>
                        At system startup for boot sector viruses
                    </div>
                </div>
                <div class="feedback" id="feedback-avorder"></div>
            </div>

            <div class="nav-arrows">
                <button class="nav-arrow" onclick="showSection(4)">
                    <span>←</span> Previous
                </button>
                <button class="nav-arrow" onclick="showSection(6)">
                    Next <span>→</span>
                </button>
            </div>
        </div>

        <!-- Section 6: Physical Security and Backup -->
        <div class="section" id="section-6">
            <h2 class="section-header">Physical Security and Backup Strategies</h2>
            
            <div class="task">
                <h3 class="task-header">Physical Security Measures</h3>
                <p>Digital security is only as strong as physical security. Unauthorized physical access can bypass all digital protections.</p>
                
                <div class="question">
                    <p class="question-text">Categorize these security measures as Physical or Digital:</p>
                    
                    <div class="matching-container">
                        <div>
                            <h4>Security Measures:</h4>
                            <div class="match-item" data-category="physical" onclick="categorizeItem(this)">Biometric door locks</div>
                            <div class="match-item" data-category="digital" onclick="categorizeItem(this)">Encryption algorithms</div>
                            <div class="match-item" data-category="physical" onclick="categorizeItem(this)">CCTV cameras</div>
                            <div class="match-item" data-category="digital" onclick="categorizeItem(this)">Firewall rules</div>
                            <div class="match-item" data-category="physical" onclick="categorizeItem(this)">Security guards</div>
                            <div class="match-item" data-category="digital" onclick="categorizeItem(this)">Password policies</div>
                        </div>
                        <div>
                            <h4>Categories:</h4>
                            <div id="physical-category" style="min-height: 100px; background: #e3f2fd; padding: 10px; border-radius: 5px; margin-bottom: 10px;">
                                <strong>Physical Security</strong>
                            </div>
                            <div id="digital-category" style="min-height: 100px; background: #f3e5f5; padding: 10px; border-radius: 5px;">
                                <strong>Digital Security</strong>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn" onclick="resetCategorization()">Reset Categories</button>
                </div>
            </div>

            <div class="task">
                <h3 class="task-header">Backup Strategies</h3>
                
                <div class="question">
                    <p class="question-text">A company implements the 3-2-1 backup rule. What does this mean?</p>
                    <p>Fill in the blanks:</p>
                    <p>Keep <select id="backup1" onchange="checkBackupRule()">
                        <option value="">?</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                    </select> copies of important data, on <select id="backup2" onchange="checkBackupRule()">
                        <option value="">?</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                    </select> different media types, with <select id="backup3" onchange="checkBackupRule()">
                        <option value="">?</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                    </select> backup stored off-site.</p>
                </div>
                <div class="feedback" id="feedback-backup"></div>
            </div>

            <div class="task">
                <h3 class="task-header">Disaster Recovery Planning</h3>
                <p>Create a brief disaster recovery plan for a small business:</p>
                
                <textarea id="dr-plan" rows="6" placeholder="Include: backup frequency, storage locations, recovery time objectives, responsible personnel..."></textarea>
                <button class="btn" onclick="checkDRPlan()">Submit Plan</button>
                <div class="feedback" id="feedback-drplan"></div>
            </div>

            <div class="nav-arrows">
                <button class="nav-arrow" onclick="showSection(5)">
                    <span>←</span> Previous
                </button>
                <button class="nav-arrow" onclick="showSection(7)">
                    Next <span>→</span>
                </button>
            </div>
        </div>

        <!-- Section 7: Summary Quiz -->
        <div class="section" id="section-7">
            <h2 class="section-header">Summary Quiz</h2>
            <p>Test your understanding of the key concepts covered in this lesson.</p>
            
            <div class="task">
                <div class="question">
                    <p class="question-text"><strong>Question 1:</strong> Which type of firewall has no impact on the processing performance of protected computers?</p>
                    <div class="options">
                        <div class="option" onclick="checkSummaryAnswer(this, true, 'sum1')">Hardware firewall</div>
                        <div class="option" onclick="checkSummaryAnswer(this, false, 'sum1')">Software firewall</div>
                        <div class="option" onclick="checkSummaryAnswer(this, false, 'sum1')">Cloud firewall</div>
                        <div class="option" onclick="checkSummaryAnswer(this, false, 'sum1')">Application firewall</div>
                    </div>
                </div>
                <div class="feedback" id="feedback-sum1"></div>
            </div>

            <div class="task">
                <div class="question">
                    <p class="question-text"><strong>Question 2:</strong> What is the primary purpose of referential integrity?</p>
                    <div class="options">
                        <div class="option" onclick="checkSummaryAnswer(this, false, 'sum2')">To encrypt database records</div>
                        <div class="option" onclick="checkSummaryAnswer(this, true, 'sum2')">To ensure consistency between related tables</div>
                        <div class="option" onclick="checkSummaryAnswer(this, false, 'sum2')">To compress database size</div>
                        <div class="option" onclick="checkSummaryAnswer(this, false, 'sum2')">To speed up queries</div>
                    </div>
                </div>
                <div class="feedback" id="feedback-sum2"></div>
            </div>

            <div class="task">
                <div class="question">
                    <p class="question-text"><strong>Question 3:</strong> Which of these is NOT a recommended password practice?</p>
                    <div class="options">
                        <div class="option" onclick="checkSummaryAnswer(this, false, 'sum3')">Using a minimum of 12 characters</div>
                        <div class="option" onclick="checkSummaryAnswer(this, false, 'sum3')">Including symbols like &, !, #</div>
                        <div class="option" onclick="checkSummaryAnswer(this, true, 'sum3')">Using your birth date in the password</div>
                        <div class="option" onclick="checkSummaryAnswer(this, false, 'sum3')">Mixing uppercase and lowercase letters</div>
                    </div>
                </div>
                <div class="feedback" id="feedback-sum3"></div>
            </div>

            <div class="task">
                <div class="question">
                    <p class="question-text"><strong>Question 4:</strong> What does packet filtering examine?</p>
                    <div class="options">
                        <div class="option" onclick="checkSummaryAnswer(this, false, 'sum4')">The size of files being downloaded</div>
                        <div class="option" onclick="checkSummaryAnswer(this, true, 'sum4')">IP and TCP headers to check port access</div>
                        <div class="option" onclick="checkSummaryAnswer(this, false, 'sum4')">The color of network cables</div>
                        <div class="option" onclick="checkSummaryAnswer(this, false, 'sum4')">User passwords</div>
                    </div>
                </div>
                <div class="feedback" id="feedback-sum4"></div>
            </div>

            <div class="task">
                <div class="question">
                    <p class="question-text"><strong>Question 5:</strong> True or False: Audit trails help identify unauthorized system use by logging all actions and changes.</p>
                    <div class="options">
                        <div class="option" onclick="checkSummaryAnswer(this, true, 'sum5')">True</div>
                        <div class="option" onclick="checkSummaryAnswer(this, false, 'sum5')">False</div>
                    </div>
                </div>
                <div class="feedback" id="feedback-sum5"></div>
            </div>

            <div class="task">
                <div class="question">
                    <p class="question-text"><strong>Question 6:</strong> What prevents simultaneous updates from being lost in a database?</p>
                    <div class="options">
                        <div class="option" onclick="checkSummaryAnswer(this, false, 'sum6')">Data encryption</div>
                        <div class="option" onclick="checkSummaryAnswer(this, false, 'sum6')">Regular backups</div>
                        <div class="option" onclick="checkSummaryAnswer(this, true, 'sum6')">Record locking/Concurrent access control</div>
                        <div class="option" onclick="checkSummaryAnswer(this, false, 'sum6')">Input validation</div>
                    </div>
                </div>
                <div class="feedback" id="feedback-sum6"></div>
            </div>

            <div class="task">
                <div class="question">
                    <p class="question-text"><strong>Question 7:</strong> Which backup strategy component ensures geographic redundancy?</p>
                    <div class="options">
                        <div class="option" onclick="checkSummaryAnswer(this, false, 'sum7')">RAID configuration</div>
                        <div class="option" onclick="checkSummaryAnswer(this, true, 'sum7')">Off-site backup storage</div>
                        <div class="option" onclick="checkSummaryAnswer(this, false, 'sum7')">Incremental backups</div>
                        <div class="option" onclick="checkSummaryAnswer(this, false, 'sum7')">Backup compression</div>
                    </div>
                </div>
                <div class="feedback" id="feedback-sum7"></div>
            </div>

            <div class="task">
                <div class="question">
                    <p class="question-text"><strong>Question 8:</strong> What is the main purpose of a digital signature?</p>
                    <div class="options">
                        <div class="option" onclick="checkSummaryAnswer(this, false, 'sum8')">To make documents look professional</div>
                        <div class="option" onclick="checkSummaryAnswer(this, true, 'sum8')">To verify authenticity and detect tampering</div>
                        <div class="option" onclick="checkSummaryAnswer(this, false, 'sum8')">To compress document size</div>
                        <div class="option" onclick="checkSummaryAnswer(this, false, 'sum8')">To translate documents</div>
                    </div>
                </div>
                <div class="feedback" id="feedback-sum8"></div>
            </div>

            <div style="background: #e8f5e9; padding: 20px; border-radius: 5px; margin-top: 30px;">
                <h3>Quiz Complete!</h3>
                <p>Your score: <span id="quiz-score">0</span>/8</p>
                <p id="quiz-feedback"></p>
            </div>

            <div class="nav-arrows">
                <button class="nav-arrow" onclick="showSection(6)">
                    <span>←</span> Previous
                </button>
                <button class="nav-arrow" onclick="showSection(8)">
                    Next <span>→</span>
                </button>
            </div>
        </div>

        <!-- Section 8: Practice Exam Questions -->
        <div class="section" id="section-8">
            <h2 class="section-header">Practice Exam Questions</h2>
            
            <div class="task">
                <h3 class="task-header">Question 1 (6 marks)</h3>
                <p>A small business wants to implement a comprehensive security strategy. Describe THREE different types of security measures they should implement, explaining how each protects their data.</p>
                
                <textarea id="exam1" rows="8" placeholder="Write your answer here..."></textarea>
                
                <div style="margin-top: 10px;">
                    <label>Predicted marks (out of 6): </label>
                    <input type="number" id="marks1" min="0" max="6" style="width: 60px;">
                    <button class="btn" onclick="showMarkScheme('exam1', 'ms1')">Show Mark Scheme</button>
                </div>
                
                <div class="mark-scheme" id="ms1">
                    <div class="mark-scheme-header">Mark Scheme:</div>
                    <p><strong>1 mark</strong> for each security measure identified (max 3)</p>
                    <p><strong>1 mark</strong> for each explanation of how it protects data (max 3)</p>
                    <p>Example answers:</p>
                    <ul>
                        <li>Firewall - Controls network traffic and blocks unauthorized access</li>
                        <li>Encryption - Converts data to unreadable format, protecting confidentiality</li>
                        <li>Access controls - Limits who can view/modify data based on permissions</li>
                        <li>Regular backups - Ensures data can be recovered if lost/corrupted</li>
                        <li>Physical security - Prevents unauthorized physical access to servers</li>
                    </ul>
                </div>
            </div>

            <div class="task">
                <h3 class="task-header">Question 2 (4 marks)</h3>
                <p>Explain the difference between hardware and software firewalls, including one advantage of each type.</p>
                
                <textarea id="exam2" rows="6" placeholder="Write your answer here..."></textarea>
                
                <div style="margin-top: 10px;">
                    <label>Predicted marks (out of 4): </label>
                    <input type="number" id="marks2" min="0" max="4" style="width: 60px;">
                    <button class="btn" onclick="showMarkScheme('exam2', 'ms2')">Show Mark Scheme</button>
                </div>
                
                <div class="mark-scheme" id="ms2">
                    <div class="mark-scheme-header">Mark Scheme:</div>
                    <p><strong>1 mark</strong> - Hardware firewall is a physical device/separate from computers</p>
                    <p><strong>1 mark</strong> - Software firewall runs on the computer it protects</p>
                    <p><strong>1 mark</strong> - Hardware advantage: No impact on computer performance / protects entire network</p>
                    <p><strong>1 mark</strong> - Software advantage: Can control individual applications / more precise control</p>
                </div>
            </div>

            <div class="task">
                <h3 class="task-header">Question 3 (5 marks)</h3>
                <p>A database administrator needs to ensure data integrity. Describe FIVE methods they could use.</p>
                
                <textarea id="exam3" rows="8" placeholder="Write your answer here..."></textarea>
                
                <div style="margin-top: 10px;">
                    <label>Predicted marks (out of 5): </label>
                    <input type="number" id="marks3" min="0" max="5" style="width: 60px;">
                    <button class="btn" onclick="showMarkScheme('exam3', 'ms3')">Show Mark Scheme</button>
                </div>
                
                <div class="mark-scheme" id="ms3">
                    <div class="mark-scheme-header">Mark Scheme:</div>
                    <p><strong>1 mark each</strong> for any five of:</p>
                    <ul>
                        <li>Validation rules - check data meets specific criteria</li>
                        <li>Referential integrity - ensures consistency between related tables</li>
                        <li>Verification - double-entry or visual checks</li>
                        <li>Input masks - control format of data entry</li>
                        <li>Setting appropriate data types - prevents wrong type of data</li>
                        <li>Removing redundant data - prevents inconsistencies</li>
                        <li>Access controls - limits who can modify data</li>
                        <li>Audit trails - tracks all changes made</li>
                        <li>Regular backups - allows recovery if data corrupted</li>
                    </ul>
                </div>
            </div>

            <div class="nav-arrows">
                <button class="nav-arrow" onclick="showSection(7)">
                    <span>←</span> Previous
                </button>
                <button class="nav-arrow" onclick="showSection(9)">
                    Next <span>→</span>
                </button>
            </div>
        </div>

        <!-- Section 9: Extension Activities -->
        <div class="section" id="section-9">
            <h2 class="section-header">Extension Activities</h2>
            
            <div class="task">
                <h3 class="task-header">Advanced Topic: Zero Trust Security Model</h3>
                <p>The Zero Trust model assumes no user or device should be automatically trusted, even if they're inside the network perimeter.</p>
                
                <div class="question">
                    <p class="question-text">Research and explain how Zero Trust differs from traditional perimeter-based security:</p>
                    <textarea id="extension1" rows="6" placeholder="Consider: verification methods, network segmentation, principle of least privilege..."></textarea>
                    <button class="btn" onclick="checkExtension1()">Submit</button>
                </div>
                <div class="feedback" id="feedback-ext1"></div>
            </div>

            <div class="task">
                <h3 class="task-header">Cryptography Challenge</h3>
                <p>Try to crack this simple substitution cipher:</p>
                
                <div style="background: #f5f5f5; padding: 15px; border-radius: 5px; font-family: monospace; margin: 10px 0;">
                    WKH TXLFN EURZQ IRA MXPSV RYHU WKH ODCB GRJ
                </div>
                
                <div class="hint-container">
                    <button class="hint-btn" onclick="showHint('cipher-hint')">Need a hint? (-10 XP)</button>
                    <div class="hint-text" id="cipher-hint">This is a Caesar cipher. Each letter has been shifted by the same amount.</div>
                </div>
                
                <input type="text" id="cipher-answer" placeholder="Enter the decoded message...">
                <button class="btn" onclick="checkCipher()">Check Answer</button>
                <div class="feedback" id="feedback-cipher"></div>
            </div>

            <div class="task">
                <h3 class="task-header">Security Incident Response Plan</h3>
                <p>Create a step-by-step incident response plan for a ransomware attack:</p>
                
                <textarea id="incident-plan" rows="10" placeholder="Include: immediate actions, communication plan, recovery steps, prevention measures..."></textarea>
                <button class="btn" onclick="submitIncidentPlan()">Submit Plan</button>
                <div class="feedback" id="feedback-incident"></div>
            </div>

            <div class="task">
                <h3 class="task-header">Videos and Additional Resources</h3>
                <div style="background: #f0f4ff; padding: 20px; border-radius: 5px; text-align: center;">
                    <p style="font-size: 18px; margin-bottom: 10px;">📹 Video Resources</p>
                    <p>Additional video tutorials and demonstrations will be added here to reinforce key concepts.</p>
                    <p style="color: #666; font-style: italic;">Check back soon for updated content!</p>
                </div>
            </div>

            <div class="nav-arrows">
                <button class="nav-arrow" onclick="showSection(8)">
                    <span>←</span> Previous
                </button>
                <button class="nav-arrow" disabled>
                    Next <span>→</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Achievement Popup -->
    <div class="achievement-popup" id="achievementPopup">
        <div class="achievement-icon">🏆</div>
        <div id="achievementText">Achievement Unlocked!</div>
    </div>

    <!-- Feedback Button -->
    <button class="feedback-btn" onclick="openFeedbackModal()">
        💬 Feedback
    </button>

    <!-- Feedback Modal -->
    <div class="feedback-modal" id="feedbackModal">
        <div class="feedback-modal-content">
            <h3>Send Feedback</h3>
            <p>Found a bug or have a suggestion? Let us know!</p>
            
            <label>Your feedback:</label>
            <textarea id="feedbackText" rows="6" placeholder="Describe the issue or suggestion..."></textarea>
            
            <div style="margin-top: 20px;">
                <button class="btn" onclick="sendFeedback()">Send Feedback</button>
                <button class="btn btn-warning" onclick="closeFeedbackModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Paste Shame Message -->
    <div class="paste-shame" id="pasteShame">
        🚫 Nice try! Pasting is disabled. Type your answers to earn XP!
    </div>

    <script>
        // Global Variables
        let currentSection = 0;
        let userXP = 0;
        let userLevel = 0;
        let completedTasks = new Set();
        let achievements = new Set();
        let selectedMatch = null;
        let matchedPairs = new Set();
        let sequenceOrder = [];
        let summaryScore = 0;
        let firewallSimStep = 0;

        // XP and Achievement System
        const XP_LEVELS = [0, 100, 250, 450, 700, 1000];
        
        function addXP(amount, taskId) {
            if (completedTasks.has(taskId)) return;
            
            completedTasks.add(taskId);
            userXP += amount;
            updateXPDisplay();
            checkLevelUp();
            
            // Check for achievements
            checkAchievements();
        }

        function updateXPDisplay() {
            document.getElementById('xpDisplay').textContent = userXP + ' XP';
            
            // Calculate XP progress for current level
            let currentLevelXP = XP_LEVELS[userLevel] || 0;
            let nextLevelXP = XP_LEVELS[userLevel + 1] || XP_LEVELS[XP_LEVELS.length - 1];
            let progress = ((userXP - currentLevelXP) / (nextLevelXP - currentLevelXP)) * 100;
            
            document.getElementById('xpFill').style.width = progress + '%';
        }

        function checkLevelUp() {
            for (let i = XP_LEVELS.length - 1; i >= 0; i--) {
                if (userXP >= XP_LEVELS[i] && userLevel < i) {
                    userLevel = i;
                    document.getElementById('levelDisplay').textContent = userLevel;
                    showAchievement('Level Up!', 'You reached Level ' + userLevel + '!');
                    break;
                }
            }
        }

        function showAchievement(title, description) {
            let popup = document.getElementById('achievementPopup');
            document.getElementById('achievementText').innerHTML = '<strong>' + title + '</strong><br>' + description;
            popup.classList.add('show');
            
            setTimeout(() => {
                popup.classList.remove('show');
            }, 3000);
        }

        function checkAchievements() {
            // First correct answer
            if (completedTasks.size === 1 && !achievements.has('first_answer')) {
                achievements.add('first_answer');
                showAchievement('First Steps!', 'Completed your first task!');
                addXP(20, 'achievement_first');
            }
            
            // Complete all matching
            if (matchedPairs.size === 4 && !achievements.has('match_master')) {
                achievements.add('match_master');
                showAchievement('Match Master!', 'Completed all matching pairs!');
                addXP(30, 'achievement_match');
            }
            
            // Perfect quiz score
            if (summaryScore === 8 && !achievements.has('quiz_perfect')) {
                achievements.add('quiz_perfect');
                showAchievement('Perfect Score!', 'Got 100% on the summary quiz!');
                addXP(50, 'achievement_quiz');
            }
        }

        // Anti-paste functionality
        document.addEventListener('paste', function(e) {
            e.preventDefault();
            document.getElementById('pasteShame').style.display = 'block';
            setTimeout(() => {
                document.getElementById('pasteShame').style.display = 'none';
            }, 3000);
            return false;
        });

        // Disable right-click on inputs
        document.addEventListener('contextmenu', function(e) {
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                e.preventDefault();
                return false;
            }
        });

        // Navigation
        function showSection(index) {
            let sections = document.querySelectorAll('.section');
            let navBtns = document.querySelectorAll('.nav-btn');
            let progressDots = document.querySelectorAll('.progress-dot');
            
            sections.forEach(s => s.classList.remove('active'));
            navBtns.forEach(b => b.classList.remove('active'));
            
            sections[index].classList.add('active');
            navBtns[index].classList.add('active');
            currentSection = index;
            
            // Update progress dots
            progressDots.forEach((dot, i) => {
                dot.classList.remove('active');
                if (i < index) {
                    dot.classList.add('completed');
                } else if (i === index) {
                    dot.classList.add('active');
                }
            });
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        // Starter Activity Functions
        function checkBreachAnswer(option, isCorrect, scenario) {
            let options = option.parentElement.querySelectorAll('.option');
            options.forEach(opt => {
                opt.onclick = null;
                opt.style.cursor = 'default';
            });
            
            if (isCorrect) {
                option.classList.add('correct');
                document.getElementById('breach-feedback-' + scenario).innerHTML = 
                    '<strong>Correct!</strong> ' + 
                    (scenario === 1 ? 'The misspelled domain is a red flag for phishing.' : 
                     'Multiple failed logins from abroad at odd hours indicates a brute force attack.');
                document.getElementById('breach-feedback-' + scenario).className = 'feedback correct';
                addXP(15, 'breach_' + scenario);
                
                if (scenario === 1) {
                    setTimeout(() => {
                        document.getElementById('scenario-2').style.display = 'block';
                    }, 1500);
                }
            } else {
                option.classList.add('incorrect');
                document.getElementById('breach-feedback-' + scenario).innerHTML = 
                    '<strong>Not quite.</strong> ' + 
                    (scenario === 1 ? 'Look carefully at the email domain - legitimate IT would use the correct domain.' : 
                     'Consider the time, location, and number of attempts.');
                document.getElementById('breach-feedback-' + scenario).className = 'feedback incorrect';
            }
            
            document.getElementById('breach-feedback-' + scenario).style.display = 'block';
        }

        function resetSimulation() {
            // Reset breach simulation
            document.getElementById('scenario-2').style.display = 'none';
            let feedbacks = document.querySelectorAll('[id^="breach-feedback"]');
            feedbacks.forEach(f => {
                f.style.display = 'none';
                f.innerHTML = '';
            });
            
            // Reset option states
            let options = document.querySelectorAll('.option');
            options.forEach(opt => {
                opt.classList.remove('correct', 'incorrect', 'selected');
            });
            
            // Re-enable clicking
            let scenario1Options = document.querySelector('#section-0 .simulation-container').querySelectorAll('.option');
            scenario1Options[0].onclick = function() { checkBreachAnswer(this, true, 1); };
            scenario1Options[1].onclick = function() { checkBreachAnswer(this, false, 1); };
            
            let scenario2Options = document.querySelector('#scenario-2').querySelectorAll('.option');
            scenario2Options[0].onclick = function() { checkBreachAnswer(this, false, 2); };
            scenario2Options[1].onclick = function() { checkBreachAnswer(this, true, 2); };
            scenario2Options[2].onclick = function() { checkBreachAnswer(this, false, 2); };
        }

        // Question Checking Functions
        function checkAnswer(option, isCorrect, questionId) {
            let options = option.parentElement.querySelectorAll('.option');
            options.forEach(opt => {
                opt.onclick = null;
                opt.style.cursor = 'default';
            });
            
            let feedback = document.getElementById('feedback-' + questionId);
            
            if (isCorrect) {
                option.classList.add('correct');
                feedback.innerHTML = '<strong>Correct!</strong> Well done!';
                feedback.className = 'feedback correct';
                addXP(10, questionId);
            } else {
                option.classList.add('incorrect');
                feedback.innerHTML = '<strong>Not quite.</strong> Think about what makes systems secure.';
                feedback.className = 'feedback incorrect';
            }
            
            feedback.style.display = 'block';
        }

        // Fill in the blanks
        function checkFillBlanks(id) {
            if (id === 'security1') {
                let length = document.getElementById('pass-length').value;
                let content = document.getElementById('pass-content').value;
                
                if (length && content) {
                    let feedback = document.getElementById('feedback-security1');
                    if (length === '12' && content === 'mixed') {
                        feedback.innerHTML = '<strong>Perfect!</strong> A 12+ character password with mixed content is very secure.';
                        feedback.className = 'feedback correct';
                        feedback.style.display = 'block';
                        addXP(15, 'fillblank_security1');
                    } else {
                        feedback.innerHTML = '<strong>Not quite.</strong> Secure passwords need to be longer with more variety.';
                        feedback.className = 'feedback incorrect';
                        feedback.style.display = 'block';
                    }
                }
            }
        }

        // Hint System
        function showHint(hintId) {
            document.getElementById(hintId).style.display = 'block';
            addXP(-5, 'hint_penalty_' + hintId);
        }

        // Matching Exercise
        function selectMatch(item) {
            if (item.classList.contains('matched')) return;
            
            if (selectedMatch === null) {
                selectedMatch = item;
                item.classList.add('selected');
            } else {
                if (selectedMatch === item) {
                    item.classList.remove('selected');
                    selectedMatch = null;
                } else if (selectedMatch.getAttribute('data-pair') === item.getAttribute('data-pair')) {
                    selectedMatch.classList.add('matched');
                    item.classList.add('matched');
                    selectedMatch.classList.remove('selected');
                    matchedPairs.add(selectedMatch.getAttribute('data-pair'));
                    selectedMatch = null;
                    
                    if (matchedPairs.size === 4) {
                        addXP(25, 'matching_complete');
                        checkAchievements();
                    }
                } else {
                    selectedMatch.classList.remove('selected');
                    selectedMatch = item;
                    item.classList.add('selected');
                }
            }
        }

        function resetMatching() {
            matchedPairs.clear();
            selectedMatch = null;
            let items = document.querySelectorAll('.match-item');
            items.forEach(item => {
                item.classList.remove('selected', 'matched');
            });
        }

        // Validation Simulator
        function validateEmail() {
            let email = document.getElementById('email-validator').value;
            let feedback = document.getElementById('email-validation-feedback');
            
            let emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            
            if (emailRegex.test(email)) {
                feedback.innerHTML = '<strong>✓ Valid email!</strong> The email passes validation rules.';
                feedback.className = 'feedback correct';
                addXP(10, 'email_validation');
            } else {
                feedback.innerHTML = '<strong>✗ Invalid email!</strong> Must be in format: name@domain.com';
                feedback.className = 'feedback incorrect';
            }
            feedback.style.display = 'block';
        }

        function validateDOB() {
            let dob = document.getElementById('dob-validator').value;
            let feedback = document.getElementById('dob-validation-feedback');
            
            let dobRegex = /^(0[1-9]|[12][0-9]|3[01])\/(0[1-9]|1[012])\/\d{4}$/;
            
            if (dobRegex.test(dob)) {
                feedback.innerHTML = '<strong>✓ Valid date!</strong> The date is in the correct format.';
                feedback.className = 'feedback correct';
                addXP(10, 'dob_validation');
            } else {
                feedback.innerHTML = '<strong>✗ Invalid date!</strong> Must be DD/MM/YYYY format.';
                feedback.className = 'feedback incorrect';
            }
            feedback.style.display = 'block';
        }

        function resetValidation() {
            document.getElementById('email-validator').value = '';
            document.getElementById('dob-validator').value = '';
            document.getElementById('email-validation-feedback').style.display = 'none';
            document.getElementById('dob-validation-feedback').style.display = 'none';
        }

        // Sequence Activity
        function selectSequence(item, correctOrder) {
            if (item.classList.contains('matched')) return;
            
            item.classList.add('selected');
            item.style.pointerEvents = 'none';
            sequenceOrder.push({item: item, order: correctOrder});
            
            if (sequenceOrder.length === 4) {
                let correct = true;
                for (let i = 0; i < sequenceOrder.length; i++) {
                    if (sequenceOrder[i].order !== i + 1) {
                        correct = false;
                        break;
                    }
                }
                
                let feedback = document.getElementById('sequence-feedback');
                if (correct) {
                    feedback.innerHTML = '<strong>Perfect!</strong> You arranged the backup steps in the correct order.';
                    feedback.className = 'feedback correct';
                    sequenceOrder.forEach(s => s.item.classList.add('matched'));
                    addXP(20, 'sequence_backup');
                } else {
                    feedback.innerHTML = '<strong>Not quite right.</strong> Think about the logical order: create, test, store, document.';
                    feedback.className = 'feedback incorrect';
                }
                feedback.style.display = 'block';
            }
        }

        function resetSequence() {
            sequenceOrder = [];
            let items = document.getElementById('sequence-container').querySelectorAll('.match-item');
            items.forEach(item => {
                item.classList.remove('selected', 'matched');
                item.style.pointerEvents = 'auto';
            });
            document.getElementById('sequence-feedback').style.display = 'none';
        }

        // Firewall Simulation
        function startFirewallSim() {
            let simContainer = document.getElementById('firewall-sim');
            let packetDisplay = document.getElementById('packet-display');
            
            packetDisplay.style.display = 'block';
            
            let packets = [
                {
                    html: '<strong>Incoming Packet 1:</strong><br>Source IP: 192.168.1.100<br>Destination Port: 80 (HTTP)<br><span style="color: green;">✓ Allowed - HTTP traffic permitted</span>',
                    delay: 0
                },
                {
                    html: '<strong>Incoming Packet 2:</strong><br>Source IP: 185.243.218.50 (Unknown)<br>Destination Port: 22 (SSH)<br><span style="color: red;">✗ Blocked - SSH from external IP not allowed</span>',
                    delay: 2000
                },
                {
                    html: '<strong>Incoming Packet 3:</strong><br>Source IP: 10.0.0.50<br>Destination Port: 445 (SMB)<br><span style="color: orange;">⚠ Logged - Internal file sharing monitored</span>',
                    delay: 4000
                }
            ];
            
            packets.forEach((packet, index) => {
                setTimeout(() => {
                    let step = document.createElement('div');
                    step.className = 'simulation-step';
                    step.innerHTML = packet.html;
                    packetDisplay.appendChild(step);
                    
                    if (index === packets.length - 1) {
                        addXP(15, 'firewall_sim_complete');
                    }
                }, packet.delay);
            });
            
            simContainer.querySelector('button').style.display = 'none';
        }

        function resetFirewallSim() {
            let packetDisplay = document.getElementById('packet-display');
            packetDisplay.innerHTML = '<div class="simulation-step" id="packet-1"><strong>Incoming Packet:</strong><br>Source IP: 192.168.1.100<br>Destination Port: 80 (HTTP)<br><span style="color: green;">✓ Allowed - HTTP traffic permitted</span></div>';
            packetDisplay.style.display = 'none';
            document.getElementById('firewall-sim').querySelector('button').style.display = 'inline-block';
        }

        // Drawing Canvas
        let canvas = document.getElementById('drawingCanvas');
        let ctx = canvas ? canvas.getContext('2d') : null;
        let isDrawing = false;

        if (canvas) {
            // Set canvas size
            canvas.width = 600;
            canvas.height = 300;
            
            // Drawing events
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            // Touch events for mobile
            canvas.addEventListener('touchstart', handleTouch);
            canvas.addEventListener('touchmove', handleTouch);
            canvas.addEventListener('touchend', stopDrawing);
        }

        function startDrawing(e) {
            isDrawing = true;
            let rect = canvas.getBoundingClientRect();
            ctx.beginPath();
            ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
        }

        function draw(e) {
            if (!isDrawing) return;
            
            let rect = canvas.getBoundingClientRect();
            ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
            ctx.stroke();
        }

        function stopDrawing() {
            if (isDrawing) {
                isDrawing = false;
                addXP(5, 'canvas_draw');
            }
        }

        function handleTouch(e) {
            e.preventDefault();
            let touch = e.touches[0];
            let mouseEvent = new MouseEvent(e.type === 'touchstart' ? 'mousedown' : 
                                          e.type === 'touchmove' ? 'mousemove' : 'mouseup', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            canvas.dispatchEvent(mouseEvent);
        }

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        // Encryption Demo
        function encryptMessage() {
            let plaintext = document.getElementById('plaintext').value.toUpperCase();
            let shift = 3; // Caesar cipher shift
            let ciphertext = '';
            
            for (let i = 0; i < plaintext.length; i++) {
                let char = plaintext[i];
                if (char >= 'A' && char <= 'Z') {
                    let shifted = ((char.charCodeAt(0) - 65 + shift) % 26) + 65;
                    ciphertext += String.fromCharCode(shifted);
                } else {
                    ciphertext += char;
                }
            }
            
            document.getElementById('ciphertext').textContent = ciphertext;
            if (plaintext.length > 0) {
                addXP(10, 'encryption_demo');
            }
        }

        function resetEncryption() {
            document.getElementById('plaintext').value = '';
            document.getElementById('ciphertext').textContent = '';
        }

        // Multi-select Check
        function checkMultiSelect() {
            let checkboxes = document.querySelectorAll('#multi-select-container input[type="checkbox"]');
            let selected = [];
            
            checkboxes.forEach(cb => {
                if (cb.checked) {
                    selected.push(cb.value);
                }
            });
            
            let feedback = document.getElementById('feedback-multi');
            
            if (selected.length === 2 && selected.includes('auth') && selected.includes('integrity')) {
                feedback.innerHTML = '<strong>Correct!</strong> Digital signatures verify authenticity and ensure integrity.';
                feedback.className = 'feedback correct';
                addXP(15, 'digital_sig_multi');
            } else {
                feedback.innerHTML = '<strong>Not quite.</strong> Digital signatures verify the source and detect changes, but don\'t encrypt or compress.';
                feedback.className = 'feedback incorrect';
            }
            feedback.style.display = 'block';
        }

        // Anti-virus Order Check
        function checkAVOrder() {
            let av1 = document.getElementById('av1').value;
            let av2 = document.getElementById('av2').value;
            let av3 = document.getElementById('av3').value;
            let av4 = document.getElementById('av4').value;
            
            if (av1 && av2 && av3 && av4) {
                let feedback = document.getElementById('feedback-avorder');
                
                // Expected order: Download=1, External=2, Boot=3, Weekly=4
                if (av1 === '1' && av3 === '2' && av4 === '3' && av2 === '4') {
                    feedback.innerHTML = '<strong>Perfect!</strong> Real-time protection is most important, followed by external device scanning.';
                    feedback.className = 'feedback correct';
                    addXP(20, 'av_order');
                } else {
                    feedback.innerHTML = '<strong>Not quite.</strong> Think about when malware is most likely to enter the system.';
                    feedback.className = 'feedback incorrect';
                }
                feedback.style.display = 'block';
            }
        }

        // Audit Analysis
        function checkAuditAnalysis() {
            let analysis = document.getElementById('audit-analysis').value.toLowerCase();
            let feedback = document.getElementById('feedback-audit');
            
            if (analysis.length < 20) {
                feedback.innerHTML = 'Please provide a more detailed analysis.';
                feedback.className = 'feedback incorrect';
                feedback.style.display = 'block';
                return;
            }
            
            let keywords = ['delete', 'backup', 'unauthorized', 'suspicious', 'restore', 'admin'];
            let matches = keywords.filter(keyword => analysis.includes(keyword)).length;
            
            if (matches >= 2) {
                feedback.innerHTML = '<strong>Good analysis!</strong> You identified the unauthorized deletion of a backup file.';
                feedback.className = 'feedback correct';
                addXP(25, 'audit_analysis');
            } else {
                feedback.innerHTML = '<strong>Look closer.</strong> Focus on the DELETE action and what happened immediately after.';
                feedback.className = 'feedback incorrect';
            }
            feedback.style.display = 'block';
        }

        // Categorization
        function categorizeItem(item) {
            if (item.classList.contains('matched')) return;
            
            let category = item.getAttribute('data-category');
            let targetDiv = document.getElementById(category + '-category');
            
            item.classList.add('matched');
            let clone = item.cloneNode(true);
            clone.style.margin = '5px';
            clone.onclick = null;
            targetDiv.appendChild(clone);
            
            item.style.opacity = '0.3';
            item.style.cursor = 'default';
            
            // Check if all categorized
            let allItems = document.querySelectorAll('[data-category]');
            let categorized = document.querySelectorAll('[data-category].matched');
            
            if (allItems.length === categorized.length) {
                addXP(20, 'categorization_complete');
            }
        }

        function resetCategorization() {
            let items = document.querySelectorAll('[data-category]');
            items.forEach(item => {
                item.classList.remove('matched');
                item.style.opacity = '1';
                item.style.cursor = 'pointer';
            });
            
            document.getElementById('physical-category').innerHTML = '<strong>Physical Security</strong>';
            document.getElementById('digital-category').innerHTML = '<strong>Digital Security</strong>';
        }

        // Backup Rule Check
        function checkBackupRule() {
            let b1 = document.getElementById('backup1').value;
            let b2 = document.getElementById('backup2').value;
            let b3 = document.getElementById('backup3').value;
            
            if (b1 && b2 && b3) {
                let feedback = document.getElementById('feedback-backup');
                
                if (b1 === '3' && b2 === '2' && b3 === '1') {
                    feedback.innerHTML = '<strong>Correct!</strong> The 3-2-1 rule: 3 copies, 2 different media types, 1 off-site backup.';
                    feedback.className = 'feedback correct';
                    addXP(15, 'backup_rule');
                } else {
                    feedback.innerHTML = '<strong>Not quite.</strong> Remember: it\'s called the 3-2-1 rule for a reason!';
                    feedback.className = 'feedback incorrect';
                }
                feedback.style.display = 'block';
            }
        }

        // Disaster Recovery Plan Check
        function checkDRPlan() {
            let plan = document.getElementById('dr-plan').value.toLowerCase();
            let feedback = document.getElementById('feedback-drplan');
            
            if (plan.length < 50) {
                feedback.innerHTML = 'Please provide a more comprehensive disaster recovery plan.';
                feedback.className = 'feedback incorrect';
                feedback.style.display = 'block';
                return;
            }
            
            let keywords = ['backup', 'frequency', 'daily', 'weekly', 'storage', 'off-site', 'cloud', 
                           'recovery', 'time', 'objective', 'rto', 'personnel', 'responsible', 'test'];
            let matches = keywords.filter(keyword => plan.includes(keyword)).length;
            
            let xp = Math.min(matches * 5, 30);
            addXP(xp, 'dr_plan');
            
            if (matches >= 6) {
                feedback.innerHTML = '<strong>Excellent plan!</strong> You covered the key components of disaster recovery.';
                feedback.className = 'feedback correct';
            } else {
                feedback.innerHTML = '<strong>Good start!</strong> Consider adding more details about backup frequency, storage locations, and recovery objectives.';
                feedback.className = 'feedback correct';
            }
            feedback.style.display = 'block';
        }

        // Summary Quiz Functions
        function checkSummaryAnswer(option, isCorrect, questionId) {
            let options = option.parentElement.querySelectorAll('.option');
            options.forEach(opt => {
                opt.onclick = null;
                opt.style.cursor = 'default';
            });
            
            let feedback = document.getElementById('feedback-' + questionId);
            
            if (isCorrect) {
                option.classList.add('correct');
                feedback.innerHTML = '<strong>Correct!</strong>';
                feedback.className = 'feedback correct';
                summaryScore++;
                addXP(10, 'summary_' + questionId);
            } else {
                option.classList.add('incorrect');
                feedback.innerHTML = '<strong>Incorrect.</strong> Review the relevant section.';
                feedback.className = 'feedback incorrect';
            }
            
            feedback.style.display = 'block';
            
            // Update quiz score
            document.getElementById('quiz-score').textContent = summaryScore;
            
            if (summaryScore === 8) {
                document.getElementById('quiz-feedback').textContent = 'Perfect score! You have mastered this topic!';
                checkAchievements();
            } else if (summaryScore >= 6) {
                document.getElementById('quiz-feedback').textContent = 'Great job! You have a solid understanding.';
            } else if (summaryScore >= 4) {
                document.getElementById('quiz-feedback').textContent = 'Good effort! Review the sections you found challenging.';
            }
        }

        // Mark Scheme Functions
        function showMarkScheme(examId, msId) {
            let answer = document.getElementById(examId).value;
            let marks = document.getElementById('marks' + examId.slice(-1)).value;
            
            if (answer.length < 50 || !marks) {
                alert('Please write a complete answer and enter your predicted marks before viewing the mark scheme.');
                return;
            }
            
            document.getElementById(msId).style.display = 'block';
            addXP(20, 'exam_' + examId);
        }

        // Extension Activities
        function checkExtension1() {
            let answer = document.getElementById('extension1').value.toLowerCase();
            let feedback = document.getElementById('feedback-ext1');
            
            if (answer.length < 30) {
                feedback.innerHTML = 'Please provide a more detailed explanation.';
                feedback.className = 'feedback incorrect';
                feedback.style.display = 'block';
                return;
            }
            
            let keywords = ['verify', 'trust', 'authentication', 'continuous', 'segment', 'least privilege', 
                           'perimeter', 'assume', 'breach', 'identity'];
            let matches = keywords.filter(keyword => answer.includes(keyword)).length;
            
            let xp = Math.min(matches * 10, 50);
            addXP(xp, 'extension_zerotrust');
            
            feedback.innerHTML = '<strong>Great research!</strong> Zero Trust is indeed about never trusting and always verifying.';
            feedback.className = 'feedback correct';
            feedback.style.display = 'block';
        }

        function checkCipher() {
            let answer = document.getElementById('cipher-answer').value.toUpperCase();
            let feedback = document.getElementById('feedback-cipher');
            
            if (answer === 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG') {
                feedback.innerHTML = '<strong>Excellent!</strong> You cracked the Caesar cipher (shift of 3).';
                feedback.className = 'feedback correct';
                addXP(30, 'cipher_challenge');
            } else {
                feedback.innerHTML = '<strong>Not quite.</strong> Try shifting each letter back by 3 positions.';
                feedback.className = 'feedback incorrect';
            }
            feedback.style.display = 'block';
        }

        function submitIncidentPlan() {
            let plan = document.getElementById('incident-plan').value.toLowerCase();
            let feedback = document.getElementById('feedback-incident');
            
            if (plan.length < 100) {
                feedback.innerHTML = 'Please provide a more comprehensive incident response plan.';
                feedback.className = 'feedback incorrect';
                feedback.style.display = 'block';
                return;
            }
            
            let keywords = ['isolate', 'disconnect', 'network', 'backup', 'restore', 'communicate', 
                           'stakeholder', 'law enforcement', 'forensic', 'patch', 'update', 'training'];
            let matches = keywords.filter(keyword => plan.includes(keyword)).length;
            
            let xp = Math.min(matches * 8, 60);
            addXP(xp, 'incident_response_plan');
            
            if (matches >= 8) {
                feedback.innerHTML = '<strong>Outstanding plan!</strong> You covered isolation, communication, recovery, and prevention.';
                feedback.className = 'feedback correct';
            } else {
                feedback.innerHTML = '<strong>Good plan!</strong> Consider adding more about immediate isolation and stakeholder communication.';
                feedback.className = 'feedback correct';
            }
            feedback.style.display = 'block';
        }

        // Feedback System
        function openFeedbackModal() {
            document.getElementById('feedbackModal').style.display = 'flex';
        }

        function closeFeedbackModal() {
            document.getElementById('feedbackModal').style.display = 'none';
            document.getElementById('feedbackText').value = '';
        }

        function sendFeedback() {
            let feedbackText = document.getElementById('feedbackText').value;
            if (feedbackText.trim() === '') {
                alert('Please enter your feedback before sending.');
                return;
            }
            
            let currentPage = 'Section ' + (currentSection + 1);
            let emailBody = 'Page: ' + currentPage + '\n\nFeedback: ' + feedbackText + 
                          '\n\nUser Level: ' + userLevel + '\nUser XP: ' + userXP;
            
            // Create mailto link
            let mailtoLink = 'mailto:millingtond@mgs.org?subject=Security Lesson Feedback&body=' + 
                           encodeURIComponent(emailBody);
            
            window.location.href = mailtoLink;
            
            closeFeedbackModal();
            showAchievement('Feedback Sent!', 'Thank you for helping improve this lesson!');
            addXP(10, 'feedback_sent');
        }

        // Initialize
        window.onload = function() {
            updateXPDisplay();
            
            // Set up keyboard navigation
            document.addEventListener('keydown', function(e) {
                if (e.key === 'ArrowRight' && currentSection < 9) {
                    showSection(currentSection + 1);
                } else if (e.key === 'ArrowLeft' && currentSection > 0) {
                    showSection(currentSection - 1);
                }
            });
        };

        // Accessibility: High Contrast Toggle
        function toggleHighContrast() {
            document.body.classList.toggle('high-contrast');
        }

        // Mobile touch optimization
        if ('ontouchstart' in window) {
            document.body.classList.add('touch-device');
        }
    </script>
</body>
</html>