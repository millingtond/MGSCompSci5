<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Types - Interactive Lesson Worksheet</title>
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #8b5cf6;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --info: #3b82f6;
            --dark: #1f2937;
            --light: #f3f4f6;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-primary: #111827;
            --text-secondary: #6b7280;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            --gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: var(--text-primary);
            line-height: 1.6;
        }

        /* Header Styles */
        .header {
            background: var(--gradient);
            padding: 2rem;
            color: white;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1%, transparent 1%);
            background-size: 50px 50px;
            animation: headerMove 20s linear infinite;
        }

        @keyframes headerMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        .header h1 {
            position: relative;
            z-index: 1;
            font-size: 2.5rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        /* XP Bar */
        .xp-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.9);
            backdrop-filter: blur(10px);
            padding: 0.5rem 1rem;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 1rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .xp-bar {
            flex: 1;
            height: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .xp-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #34d399);
            width: 0%;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .xp-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shine 2s ease-in-out infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .xp-text {
            color: white;
            font-weight: bold;
            min-width: 150px;
            text-align: center;
        }

        .level-badge {
            background: linear-gradient(135deg, #f59e0b, #f97316);
            color: white;
            padding: 0.25rem 1rem;
            border-radius: 20px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* Navigation */
        .nav-container {
            position: sticky;
            top: 40px;
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            padding: 1rem;
            margin: 1rem 2rem;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            z-index: 100;
        }

        .nav-buttons {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .nav-btn {
            padding: 0.5rem 1rem;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
            font-size: 0.9rem;
            color: var(--text-primary);
        }

        .nav-btn:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(99, 102, 241, 0.3);
        }

        .nav-btn.active {
            background: var(--primary);
            color: white;
        }

        /* Sections */
        .section {
            display: none;
            margin: 2rem;
            padding: 2rem;
            background: white;
            border-radius: 20px;
            box-shadow: var(--shadow);
            animation: fadeIn 0.5s ease-out;
            position: relative;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section h2 {
            color: var(--primary);
            margin-bottom: 1.5rem;
            font-size: 2rem;
            position: relative;
            padding-bottom: 1rem;
        }

        .section h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 4px;
            background: var(--gradient);
            border-radius: 2px;
        }

        /* Activity Cards */
        .activity-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 1.5rem;
            border: 2px solid transparent;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .activity-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .activity-card:hover::before {
            transform: scaleX(1);
        }

        .activity-card h3 {
            color: var(--primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Interactive Elements */
        .drag-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .drag-item {
            padding: 1rem;
            background: white;
            border: 2px solid var(--primary);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .drag-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(99, 102, 241, 0.3);
        }

        .drag-item.selected {
            background: var(--primary);
            color: white;
            transform: scale(0.95);
        }

        .drop-zone {
            min-height: 100px;
            padding: 1rem;
            border: 3px dashed var(--primary);
            border-radius: 15px;
            background: rgba(99, 102, 241, 0.05);
            margin: 1rem 0;
            transition: all 0.3s ease;
            position: relative;
        }

        .drop-zone.highlight {
            background: rgba(99, 102, 241, 0.15);
            border-color: var(--primary-dark);
            transform: scale(1.02);
        }

        .drop-zone h4 {
            color: var(--primary);
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .dropped-item {
            display: inline-block;
            padding: 0.5rem 1rem;
            background: var(--primary);
            color: white;
            border-radius: 20px;
            margin: 0.25rem;
            font-size: 0.9rem;
            animation: dropIn 0.3s ease;
        }

        @keyframes dropIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Buttons */
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:active::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: var(--gradient);
            color: white;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
        }

        .btn-secondary {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981, #34d399);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #ef4444, #f87171);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #f59e0b, #fbbf24);
            color: white;
        }

        /* Input Fields */
        input[type="text"], input[type="number"], select, textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        input[type="text"]:focus, input[type="number"]:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        /* Quiz Options */
        .quiz-option {
            padding: 1rem;
            margin: 0.5rem 0;
            background: #f8f9fa;
            border: 2px solid transparent;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .quiz-option:hover {
            border-color: var(--primary);
            background: rgba(99, 102, 241, 0.05);
            transform: translateX(5px);
        }

        .quiz-option.selected {
            border-color: var(--primary);
            background: rgba(99, 102, 241, 0.1);
        }

        .quiz-option.correct {
            border-color: var(--success);
            background: rgba(16, 185, 129, 0.1);
            animation: correctPulse 0.5s ease;
        }

        .quiz-option.incorrect {
            border-color: var(--danger);
            background: rgba(239, 68, 68, 0.1);
            animation: shake 0.5s ease;
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* Achievement Popup */
        .achievement-popup {
            position: fixed;
            top: 60px;
            right: -400px;
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            transition: right 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            max-width: 350px;
            border: 3px solid transparent;
            background-image: linear-gradient(white, white), var(--gradient);
            background-origin: border-box;
            background-clip: content-box, border-box;
        }

        .achievement-popup.show {
            right: 20px;
        }

        .achievement-popup h4 {
            color: var(--primary);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .achievement-icon {
            font-size: 2rem;
            animation: bounce 1s ease infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* Canvas */
        .canvas-container {
            position: relative;
            border: 2px solid var(--primary);
            border-radius: 10px;
            overflow: hidden;
            margin: 1rem 0;
            background: white;
        }

        #drawingCanvas {
            display: block;
            cursor: crosshair;
            touch-action: none;
        }

        .canvas-tools {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 0.5rem;
        }

        /* Feedback Button */
        .feedback-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: var(--gradient);
            border-radius: 50%;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            z-index: 999;
        }

        .feedback-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        /* Feedback Modal */
        .feedback-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            backdrop-filter: blur(5px);
        }

        .feedback-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 2rem;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            animation: modalIn 0.3s ease;
        }

        @keyframes modalIn {
            from {
                opacity: 0;
                transform: translate(-50%, -40%);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%);
            }
        }

        /* Navigation Arrows */
        .section-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 2px solid #e5e7eb;
        }

        /* Hint System */
        .hint-container {
            margin: 1rem 0;
            padding: 1rem;
            background: rgba(59, 130, 246, 0.05);
            border-left: 4px solid var(--info);
            border-radius: 0 10px 10px 0;
            display: none;
        }

        .hint-container.show {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Code Block */
        .code-block {
            background: #1f2937;
            color: #e5e7eb;
            padding: 1rem;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 1rem 0;
            position: relative;
        }

        .code-block::before {
            content: 'PSEUDO-CODE';
            position: absolute;
            top: 0;
            right: 0;
            background: var(--primary);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 0 10px 0 10px;
            font-size: 0.75rem;
            font-family: sans-serif;
        }

        /* Simulation Container */
        .simulation-container {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 2rem;
            border-radius: 15px;
            margin: 1.5rem 0;
            position: relative;
            overflow: hidden;
        }

        .simulation-controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .memory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .memory-cell {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
        }

        .memory-cell.active {
            border-color: var(--primary);
            background: rgba(99, 102, 241, 0.1);
            transform: scale(1.05);
        }

        .memory-cell.pointed {
            border-color: var(--warning);
            background: rgba(245, 158, 11, 0.1);
        }

        /* Fill in the blanks */
        .fill-blank-container {
            margin: 1rem 0;
            line-height: 2.5;
        }

        .blank-select {
            display: inline-block;
            min-width: 150px;
            margin: 0 0.5rem;
            padding: 0.5rem;
            border: 2px solid var(--primary);
            border-radius: 5px;
            background: white;
            font-size: 1rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8rem;
            }

            .section {
                margin: 1rem;
                padding: 1rem;
            }

            .nav-container {
                margin: 1rem;
            }

            .drag-container {
                grid-template-columns: 1fr;
            }

            .xp-container {
                flex-wrap: wrap;
                gap: 0.5rem;
            }

            .xp-text {
                min-width: auto;
            }

            .section-nav {
                flex-direction: column;
                gap: 1rem;
            }

            .simulation-controls {
                flex-direction: column;
            }
        }

        /* Animation for XP gain */
        .xp-float {
            position: fixed;
            color: var(--success);
            font-weight: bold;
            font-size: 1.2rem;
            pointer-events: none;
            z-index: 2000;
            animation: floatUp 2s ease-out forwards;
        }

        @keyframes floatUp {
            0% {
                opacity: 1;
                transform: translateY(0);
            }
            100% {
                opacity: 0;
                transform: translateY(-100px);
            }
        }

        /* Loading state */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Mark scheme */
        .mark-scheme {
            background: rgba(16, 185, 129, 0.05);
            border: 2px solid var(--success);
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
            display: none;
        }

        .mark-scheme.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .mark-scheme h4 {
            color: var(--success);
            margin-bottom: 0.5rem;
        }

        /* Real world context box */
        .context-box {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(99, 102, 241, 0.1));
            border-left: 4px solid var(--secondary);
            padding: 1rem;
            border-radius: 0 10px 10px 0;
            margin: 1rem 0;
        }

        .context-box h4 {
            color: var(--secondary);
            margin-bottom: 0.5rem;
        }

        /* Common mistakes */
        .mistakes-box {
            background: rgba(239, 68, 68, 0.05);
            border-left: 4px solid var(--danger);
            padding: 1rem;
            border-radius: 0 10px 10px 0;
            margin: 1rem 0;
        }

        .mistakes-box h4 {
            color: var(--danger);
            margin-bottom: 0.5rem;
        }

        /* Particle effect */
        .particle {
            position: fixed;
            pointer-events: none;
            opacity: 0;
            z-index: 2000;
        }

        /* Prevent text selection during drag */
        .no-select {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* Enhanced visual indicators */
        .highlight-box {
            animation: highlightPulse 2s ease-in-out infinite;
        }

        @keyframes highlightPulse {
            0%, 100% { 
                box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4);
            }
            50% { 
                box-shadow: 0 0 0 10px rgba(99, 102, 241, 0);
            }
        }

        /* Step indicator for simulations */
        .step-indicator {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .step-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #e5e7eb;
            transition: all 0.3s ease;
        }

        .step-dot.active {
            background: var(--primary);
            transform: scale(1.5);
        }
    </style>
</head>
<body>
    <!-- XP Bar -->
    <div class="xp-container">
        <div class="xp-bar">
            <div class="xp-fill" id="xpFill"></div>
        </div>
        <span class="xp-text" id="xpText">0 / 100 XP</span>
        <span class="level-badge" id="levelBadge">Level 0</span>
    </div>

    <!-- Header -->
    <div class="header">
        <h1>🎮 Data Types: Pre-defined & User-defined</h1>
        <p>Master the fundamentals of data types in programming</p>
    </div>

    <!-- Navigation -->
    <div class="nav-container">
        <div class="nav-buttons" id="navButtons">
            <button class="nav-btn active" onclick="showSection(0)">Starter</button>
            <button class="nav-btn" onclick="showSection(1)">Pre-defined</button>
            <button class="nav-btn" onclick="showSection(2)">User-defined</button>
            <button class="nav-btn" onclick="showSection(3)">Composite vs Non</button>
            <button class="nav-btn" onclick="showSection(4)">Enumerated</button>
            <button class="nav-btn" onclick="showSection(5)">Pointer</button>
            <button class="nav-btn" onclick="showSection(6)">Record</button>
            <button class="nav-btn" onclick="showSection(7)">Set</button>
            <button class="nav-btn" onclick="showSection(8)">Practice</button>
            <button class="nav-btn" onclick="showSection(9)">Summary</button>
        </div>
    </div>

    <!-- Section 0: Starter Activity -->
    <div class="section active" id="section0">
        <h2>🚀 Starter Activity: Data Type Detective</h2>
        
        <div class="activity-card">
            <h3>🔍 Can you categorize these data types?</h3>
            <p>Click on each data type and then click the appropriate category. Some are built into programming languages, others are created by programmers!</p>
            
            <div class="drag-container" id="starterItems">
                <div class="drag-item" onclick="selectItem(this, 'integer')">integer</div>
                <div class="drag-item" onclick="selectItem(this, 'record')">record</div>
                <div class="drag-item" onclick="selectItem(this, 'boolean')">boolean</div>
                <div class="drag-item" onclick="selectItem(this, 'enumerated')">enumerated</div>
                <div class="drag-item" onclick="selectItem(this, 'float')">float</div>
                <div class="drag-item" onclick="selectItem(this, 'pointer')">pointer</div>
                <div class="drag-item" onclick="selectItem(this, 'char')">char</div>
                <div class="drag-item" onclick="selectItem(this, 'set')">set</div>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 2rem;">
                <div class="drop-zone" id="predefinedZone" onclick="dropItem('predefined')">
                    <h4>Pre-defined Data Types</h4>
                    <div id="predefinedItems"></div>
                </div>
                <div class="drop-zone" id="userdefinedZone" onclick="dropItem('userdefined')">
                    <h4>User-defined Data Types</h4>
                    <div id="userdefinedItems"></div>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 1rem;">
                <button class="btn btn-primary" onclick="checkStarterActivity()">Check Answers</button>
                <button class="btn btn-secondary" onclick="resetStarterActivity()">Reset</button>
            </div>
            
            <div id="starterFeedback" style="margin-top: 1rem; text-align: center; font-weight: bold;"></div>
        </div>

        <div class="section-nav">
            <div></div>
            <button class="btn btn-primary" onclick="showSection(1)">Next: Pre-defined Types →</button>
        </div>
    </div>

    <!-- Section 1: Pre-defined Data Types -->
    <div class="section" id="section1">
        <h2>📦 Pre-defined Data Types</h2>
        
        <div class="activity-card">
            <h3>🎯 Learning Outcomes</h3>
            <ul>
                <li>Identify built-in data types in programming languages</li>
                <li>Understand the characteristics and ranges of pre-defined types</li>
                <li>Apply pre-defined data types in practical scenarios</li>
            </ul>
        </div>

        <div class="activity-card">
            <h3>📚 What are Pre-defined Data Types?</h3>
            <p>Pre-defined data types are built into programming languages and available for immediate use. They form the foundation of all programs!</p>
            
            <div class="context-box">
                <h4>🌍 Real-World Context</h4>
                <p>Just like we use standard units (meters, kilograms, seconds) in science, programming languages provide standard data types that everyone understands and can use consistently.</p>
            </div>
        </div>

        <div class="activity-card">
            <h3>✏️ Fill in the Blanks</h3>
            <p>Complete the following statements about pre-defined data types:</p>
            
            <div class="fill-blank-container">
                <p>1. Pre-defined data types are 
                    <select class="blank-select" id="blank1">
                        <option value="">Choose...</option>
                        <option value="created">created by programmers</option>
                        <option value="built">built into languages</option>
                        <option value="optional">optional to use</option>
                        <option value="complex">always complex</option>
                    </select>
                    and can be used by any program.</p>
                
                <p>2. Examples include integer, 
                    <select class="blank-select" id="blank2">
                        <option value="">Choose...</option>
                        <option value="record">record</option>
                        <option value="float">float</option>
                        <option value="pointer">pointer</option>
                        <option value="enumerated">enumerated</option>
                    </select>
                    , and boolean.</p>
                
                <p>3. Each pre-defined type has a pre-defined 
                    <select class="blank-select" id="blank3">
                        <option value="">Choose...</option>
                        <option value="name">name only</option>
                        <option value="range">range of values</option>
                        <option value="color">color code</option>
                        <option value="password">password</option>
                    </select>
                    that it can store.</p>
            </div>
            
            <button class="btn btn-primary" onclick="checkFillBlanks1()">Check Answers</button>
            <button class="btn btn-warning" onclick="showHint('hint1')">💡 Need a hint?</button>
            <div id="hint1" class="hint-container">
                <p><strong>Hint:</strong> Think about what makes pre-defined types special - they're ready to use without any extra work from the programmer!</p>
            </div>
            <div id="fillFeedback1" style="margin-top: 1rem;"></div>
        </div>

        <div class="activity-card">
            <h3>🎯 Multiple Choice: Type Characteristics</h3>
            <p>Which statement about pre-defined data types is TRUE?</p>
            
            <div class="quiz-option" onclick="selectQuizOption(this, 'q1', 'a')">
                <strong>A)</strong> They must be declared before use in all languages
            </div>
            <div class="quiz-option" onclick="selectQuizOption(this, 'q1', 'b')">
                <strong>B)</strong> They have inherent properties and operations
            </div>
            <div class="quiz-option" onclick="selectQuizOption(this, 'q1', 'c')">
                <strong>C)</strong> They can only store text values
            </div>
            <div class="quiz-option" onclick="selectQuizOption(this, 'q1', 'd')">
                <strong>D)</strong> They are created by the programmer
            </div>
            
            <button class="btn btn-primary" onclick="checkQuiz('q1', 'b')">Submit Answer</button>
            <div id="q1Feedback" style="margin-top: 1rem;"></div>
        </div>

        <div class="mistakes-box">
            <h4>⚠️ Common Mistakes</h4>
            <ul>
                <li>Confusing pre-defined types with user-defined types</li>
                <li>Assuming all languages have the same pre-defined types</li>
                <li>Not considering the range limitations of numeric types</li>
            </ul>
        </div>

        <div class="section-nav">
            <button class="btn btn-secondary" onclick="showSection(0)">← Previous</button>
            <button class="btn btn-primary" onclick="showSection(2)">Next: User-defined →</button>
        </div>
    </div>

    <!-- Section 2: User-defined Data Types -->
    <div class="section" id="section2">
        <h2>🛠️ User-defined Data Types</h2>
        
        <div class="activity-card">
            <h3>📖 Understanding User-defined Types</h3>
            <p>User-defined data types are created by programmers to extend the built-in types and meet specific application requirements.</p>
            
            <div class="code-block">
TYPE TRating = 1..5
TYPE TCity = ["London", "Manchester", "Birmingham"]
TYPE TStudent = RECORD
    name: STRING
    age: INTEGER
    grade: CHAR
ENDRECORD</div>
        </div>

        <div class="activity-card">
            <h3>🔄 Matching Exercise</h3>
            <p>Match each user-defined type with its description:</p>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                <div>
                    <h4>Types</h4>
                    <div class="drag-item" onclick="selectMatch(this, 'enumerated')">Enumerated</div>
                    <div class="drag-item" onclick="selectMatch(this, 'pointer')">Pointer</div>
                    <div class="drag-item" onclick="selectMatch(this, 'record')">Record</div>
                    <div class="drag-item" onclick="selectMatch(this, 'set')">Set</div>
                </div>
                <div>
                    <h4>Descriptions</h4>
                    <div class="drop-zone match-zone" id="match1" onclick="dropMatch('match1')">
                        <p>Collection of related items with different data types</p>
                    </div>
                    <div class="drop-zone match-zone" id="match2" onclick="dropMatch('match2')">
                        <p>References a memory location</p>
                    </div>
                    <div class="drop-zone match-zone" id="match3" onclick="dropMatch('match3')">
                        <p>Fixed set of possible named values</p>
                    </div>
                    <div class="drop-zone match-zone" id="match4" onclick="dropMatch('match4')">
                        <p>Unordered collection of unique elements</p>
                    </div>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 1rem;">
                <button class="btn btn-primary" onclick="checkMatching()">Check Matches</button>
                <button class="btn btn-secondary" onclick="resetMatching()">Reset</button>
            </div>
            <div id="matchFeedback" style="margin-top: 1rem; text-align: center;"></div>
        </div>

        <div class="activity-card">
            <h3>💭 Short Answer: Why User-defined?</h3>
            <p>In your own words, explain why programmers need to create user-defined data types. Give at least two reasons.</p>
            
            <textarea id="shortAnswer1" rows="4" placeholder="Start your answer here..."></textarea>
            
            <button class="btn btn-primary" onclick="checkShortAnswer1()">Submit Answer</button>
            <div id="shortAnswer1Feedback" style="margin-top: 1rem;"></div>
        </div>

        <div class="context-box">
            <h4>🌍 Real-World Example</h4>
            <p>A game developer creating a chess program might define a "ChessPiece" type that includes the piece type (King, Queen, etc.), color, and position. This is more meaningful than using separate variables!</p>
        </div>

        <div class="section-nav">
            <button class="btn btn-secondary" onclick="showSection(1)">← Previous</button>
            <button class="btn btn-primary" onclick="showSection(3)">Next: Composite vs Non →</button>
        </div>
    </div>

    <!-- Section 3: Composite vs Non-composite -->
    <div class="section" id="section3">
        <h2>🔀 Composite vs Non-composite Data Types</h2>
        
        <div class="activity-card">
            <h3>📊 Understanding the Difference</h3>
            <p><strong>Composite types</strong> are made up of multiple values/elements and reference other data types.</p>
            <p><strong>Non-composite types</strong> contain only a single value and don't reference other types.</p>
        </div>

        <div class="activity-card">
            <h3>🎯 Categorization Challenge</h3>
            <p>Drag each data type to the correct category:</p>
            
            <div class="drag-container" id="compositeItems">
                <div class="drag-item" onclick="selectItem(this, 'array')">Array</div>
                <div class="drag-item" onclick="selectItem(this, 'integer')">Integer</div>
                <div class="drag-item" onclick="selectItem(this, 'record')">Record</div>
                <div class="drag-item" onclick="selectItem(this, 'boolean')">Boolean</div>
                <div class="drag-item" onclick="selectItem(this, 'list')">List</div>
                <div class="drag-item" onclick="selectItem(this, 'char')">Char</div>
                <div class="drag-item" onclick="selectItem(this, 'class')">Class</div>
                <div class="drag-item" onclick="selectItem(this, 'pointer')">Pointer</div>
                <div class="drag-item" onclick="selectItem(this, 'set')">Set</div>
                <div class="drag-item" onclick="selectItem(this, 'float')">Float</div>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 2rem;">
                <div class="drop-zone" id="compositeZone" onclick="dropItem('composite')">
                    <h4>Composite Types</h4>
                    <div id="compositeDropped"></div>
                </div>
                <div class="drop-zone" id="nonCompositeZone" onclick="dropItem('noncomposite')">
                    <h4>Non-composite Types</h4>
                    <div id="nonCompositeDropped"></div>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 1rem;">
                <button class="btn btn-primary" onclick="checkCompositeActivity()">Check Answers</button>
                <button class="btn btn-secondary" onclick="resetCompositeActivity()">Reset</button>
            </div>
            <div id="compositeFeedback" style="margin-top: 1rem; text-align: center;"></div>
        </div>

        <div class="activity-card">
            <h3>✅ True or False</h3>
            <p>Determine if each statement is true or false:</p>
            
            <div style="margin: 1rem 0;">
                <p>1. A string is always considered a non-composite data type.</p>
                <div style="display: flex; gap: 1rem; margin: 0.5rem 0;">
                    <button class="btn btn-secondary" onclick="checkTrueFalse('tf1', false)">True</button>
                    <button class="btn btn-secondary" onclick="checkTrueFalse('tf1', true)">False</button>
                </div>
                <div id="tf1Feedback"></div>
            </div>
            
            <div style="margin: 1rem 0;">
                <p>2. Composite types can contain elements of different data types.</p>
                <div style="display: flex; gap: 1rem; margin: 0.5rem 0;">
                    <button class="btn btn-secondary" onclick="checkTrueFalse('tf2', true)">True</button>
                    <button class="btn btn-secondary" onclick="checkTrueFalse('tf2', false)">False</button>
                </div>
                <div id="tf2Feedback"></div>
            </div>
            
            <div style="margin: 1rem 0;">
                <p>3. All user-defined types are composite types.</p>
                <div style="display: flex; gap: 1rem; margin: 0.5rem 0;">
                    <button class="btn btn-secondary" onclick="checkTrueFalse('tf3', false)">True</button>
                    <button class="btn btn-secondary" onclick="checkTrueFalse('tf3', true)">False</button>
                </div>
                <div id="tf3Feedback"></div>
            </div>
        </div>

        <div class="section-nav">
            <button class="btn btn-secondary" onclick="showSection(2)">← Previous</button>
            <button class="btn btn-primary" onclick="showSection(4)">Next: Enumerated →</button>
        </div>
    </div>

    <!-- Section 4: Enumerated Data Types -->
    <div class="section" id="section4">
        <h2>🔢 Enumerated Data Types</h2>
        
        <div class="activity-card">
            <h3>📚 What are Enumerated Types?</h3>
            <p>Enumerated types define a fixed set of named values. They're perfect when you have a limited set of options!</p>
            
            <div class="code-block">
TYPE TDirections = (North, East, South, West)
TYPE TDays = (Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, Sunday)
TYPE TTrafficLight = (Red, Amber, Green)</div>
        </div>

        <div class="activity-card">
            <h3>🎮 Interactive Enumerated Type Simulator</h3>
            <p>Let's create and use an enumerated type step by step!</p>
            
            <div class="simulation-container">
                <div class="step-indicator">
                    <span class="step-dot active" id="step1"></span>
                    <span class="step-dot" id="step2"></span>
                    <span class="step-dot" id="step3"></span>
                    <span class="step-dot" id="step4"></span>
                </div>
                
                <div id="enumSimulation">
                    <div id="enumStep1" class="sim-step">
                        <h4>Step 1: Define the Type</h4>
                        <p>First, we declare our enumerated type with possible values:</p>
                        <div class="code-block highlight-box">TYPE TSeasons = (Spring, Summer, Autumn, Winter)</div>
                        <p>Notice: Values are NOT strings - no quotes needed!</p>
                    </div>
                    
                    <div id="enumStep2" class="sim-step" style="display: none;">
                        <h4>Step 2: Declare a Variable</h4>
                        <p>Now we create a variable of our new type:</p>
                        <div class="code-block highlight-box">DECLARE currentSeason : TSeasons</div>
                        <p>This variable can only hold one of our four season values.</p>
                    </div>
                    
                    <div id="enumStep3" class="sim-step" style="display: none;">
                        <h4>Step 3: Assign a Value</h4>
                        <p>Let's assign a value to our variable:</p>
                        <div class="code-block highlight-box">currentSeason <- Summer</div>
                        <p>Remember: Summer is a value, not a string!</p>
                    </div>
                    
                    <div id="enumStep4" class="sim-step" style="display: none;">
                        <h4>Step 4: Order Comparisons</h4>
                        <p>Enumerated values have order, so we can compare them:</p>
                        <div class="code-block highlight-box">IF currentSeason > Spring THEN
    OUTPUT "It's not Spring anymore!"
ENDIF</div>
                        <p>The order is: Spring < Summer < Autumn < Winter</p>
                    </div>
                </div>
                
                <div class="simulation-controls">
                    <button class="btn btn-secondary" onclick="prevEnumStep()" id="enumPrev" disabled>← Previous</button>
                    <button class="btn btn-primary" onclick="nextEnumStep()" id="enumNext">Next →</button>
                    <button class="btn btn-danger" onclick="resetEnumSimulation()">Reset</button>
                </div>
            </div>
        </div>

        <div class="activity-card">
            <h3>💻 Code Completion Exercise</h3>
            <p>Complete the following enumerated type declaration and usage:</p>
            
            <div class="code-block">
TYPE TGrades = (<input type="text" id="enum1" style="width: 60px;" placeholder="?">, B, C, D, <input type="text" id="enum2" style="width: 60px;" placeholder="?">)
DECLARE studentGrade : <input type="text" id="enum3" style="width: 100px;" placeholder="?">
studentGrade <- <input type="text" id="enum4" style="width: 60px;" placeholder="?">

IF studentGrade < C THEN
    OUTPUT "Good grade!"
ENDIF</div>
            
            <button class="btn btn-primary" onclick="checkEnumCode()">Check Code</button>
            <div id="enumCodeFeedback" style="margin-top: 1rem;"></div>
        </div>

        <div class="activity-card">
            <h3>🧩 Problem Solving: Day Calculator</h3>
            <p>If Monday = 1, Tuesday = 2, etc., and today is Thursday, what day will it be in 5 days?</p>
            
            <input type="text" id="dayAnswer" placeholder="Enter day name">
            <button class="btn btn-primary" onclick="checkDayProblem()">Submit</button>
            <div id="dayFeedback" style="margin-top: 1rem;"></div>
        </div>

        <div class="mistakes-box">
            <h4>⚠️ Common Mistakes with Enumerated Types</h4>
            <ul>
                <li>Using quotes around enumerated values (they're not strings!)</li>
                <li>Trying to assign values not in the defined set</li>
                <li>Forgetting that enumerated values have an implicit order</li>
            </ul>
        </div>

        <div class="section-nav">
            <button class="btn btn-secondary" onclick="showSection(3)">← Previous</button>
            <button class="btn btn-primary" onclick="showSection(5)">Next: Pointer →</button>
        </div>
    </div>

    <!-- Section 5: Pointer Data Types -->
    <div class="section" id="section5">
        <h2>👉 Pointer Data Types</h2>
        
        <div class="activity-card">
            <h3>🎯 Understanding Pointers</h3>
            <p>Pointers store memory addresses rather than values. They "point" to where data is stored!</p>
            
            <div class="context-box">
                <h4>🌍 Real-World Analogy</h4>
                <p>A pointer is like a home address - it doesn't contain the house itself, but tells you exactly where to find it!</p>
            </div>
        </div>

        <div class="activity-card">
            <h3>🎮 Interactive Memory Visualization</h3>
            <p>See how pointers work with this interactive memory simulator:</p>
            
            <div class="simulation-container">
                <h4>Memory Locations</h4>
                <div class="memory-grid" id="memoryGrid">
                    <div class="memory-cell" id="mem1000">
                        <small>Address: 1000</small>
                        <div>Value: <span id="val1000">?</span></div>
                    </div>
                    <div class="memory-cell" id="mem1001">
                        <small>Address: 1001</small>
                        <div>Value: <span id="val1001">?</span></div>
                    </div>
                    <div class="memory-cell" id="mem1002">
                        <small>Address: 1002</small>
                        <div>Value: <span id="val1002">?</span></div>
                    </div>
                    <div class="memory-cell" id="mem1003">
                        <small>Address: 1003</small>
                        <div>Value: <span id="val1003">?</span></div>
                    </div>
                </div>
                
                <div class="simulation-controls">
                    <button class="btn btn-primary" onclick="runPointerDemo(1)">1. Create Integer Variable</button>
                    <button class="btn btn-primary" onclick="runPointerDemo(2)">2. Create Pointer</button>
                    <button class="btn btn-primary" onclick="runPointerDemo(3)">3. Point to Variable</button>
                    <button class="btn btn-primary" onclick="runPointerDemo(4)">4. Dereference Pointer</button>
                    <button class="btn btn-danger" onclick="resetPointerDemo()">Reset</button>
                </div>
                
                <div id="pointerExplanation" style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 10px;">
                    <p>Click the buttons above to see how pointers work!</p>
                </div>
            </div>
        </div>

        <div class="activity-card">
            <h3>📝 Pointer Notation Quiz</h3>
            <p>Match the notation with its meaning:</p>
            
            <div style="margin: 1rem 0;">
                <p>1. <code>MyPointer <- @IntVar</code> means:</p>
                <div class="quiz-option" onclick="selectQuizOption(this, 'ptr1', 'a')">
                    Assign the value of IntVar to MyPointer
                </div>
                <div class="quiz-option" onclick="selectQuizOption(this, 'ptr1', 'b')">
                    Assign the address of IntVar to MyPointer
                </div>
                <div class="quiz-option" onclick="selectQuizOption(this, 'ptr1', 'c')">
                    Delete IntVar from memory
                </div>
                <button class="btn btn-primary" onclick="checkQuiz('ptr1', 'b')">Check</button>
                <div id="ptr1Feedback"></div>
            </div>
            
            <div style="margin: 1rem 0;">
                <p>2. <code>TempVar <- MyPointer^</code> means:</p>
                <div class="quiz-option" onclick="selectQuizOption(this, 'ptr2', 'a')">
                    Assign the address stored in MyPointer to TempVar
                </div>
                <div class="quiz-option" onclick="selectQuizOption(this, 'ptr2', 'b')">
                    Assign the value at the address pointed to by MyPointer
                </div>
                <div class="quiz-option" onclick="selectQuizOption(this, 'ptr2', 'c')">
                    Create a new pointer called TempVar
                </div>
                <button class="btn btn-primary" onclick="checkQuiz('ptr2', 'b')">Check</button>
                <div id="ptr2Feedback"></div>
            </div>
        </div>

        <div class="activity-card">
            <h3>🔗 Pointer Applications</h3>
            <p>Identify which scenarios would benefit from using pointers:</p>
            
            <div style="margin: 1rem 0;">
                <label><input type="checkbox" id="ptrUse1"> Building a linked list data structure</label><br>
                <label><input type="checkbox" id="ptrUse2"> Storing a person's age</label><br>
                <label><input type="checkbox" id="ptrUse3"> Implementing a queue</label><br>
                <label><input type="checkbox" id="ptrUse4"> Calculating the area of a circle</label><br>
                <label><input type="checkbox" id="ptrUse5"> Creating dynamic data structures</label><br>
            </div>
            
            <button class="btn btn-primary" onclick="checkPointerUses()">Check Answers</button>
            <div id="ptrUsesFeedback" style="margin-top: 1rem;"></div>
        </div>

        <div class="section-nav">
            <button class="btn btn-secondary" onclick="showSection(4)">← Previous</button>
            <button class="btn btn-primary" onclick="showSection(6)">Next: Record →</button>
        </div>
    </div>

    <!-- Section 6: Record Data Types -->
    <div class="section" id="section6">
        <h2>📋 Record Data Types</h2>
        
        <div class="activity-card">
            <h3>📚 Understanding Records</h3>
            <p>Records group related data items of different types together - like a form with multiple fields!</p>
            
            <div class="code-block">
TYPE TEmployee = RECORD
    name: STRING
    employeeID: INTEGER
    salary: REAL
    dateEmployed: DATE
    isFullTime: BOOLEAN
ENDRECORD</div>
        </div>

        <div class="activity-card">
            <h3>🏗️ Interactive Record Builder</h3>
            <p>Build your own record type for a student management system:</p>
            
            <div class="simulation-container">
                <h4>Define Your Student Record</h4>
                
                <div style="margin: 1rem 0;">
                    <label>Record Name: TYPE <input type="text" id="recordName" placeholder="TStudent" style="width: 150px;"> = RECORD</label>
                </div>
                
                <div id="recordFields">
                    <div class="record-field">
                        <input type="text" placeholder="Field name" class="field-name" style="width: 150px;">
                        : 
                        <select class="field-type">
                            <option value="STRING">STRING</option>
                            <option value="INTEGER">INTEGER</option>
                            <option value="REAL">REAL</option>
                            <option value="BOOLEAN">BOOLEAN</option>
                            <option value="CHAR">CHAR</option>
                            <option value="DATE">DATE</option>
                        </select>
                    </div>
                </div>
                
                <button class="btn btn-secondary" onclick="addRecordField()">+ Add Field</button>
                <button class="btn btn-primary" onclick="generateRecord()">Generate Record</button>
                <button class="btn btn-danger" onclick="resetRecordBuilder()">Reset</button>
                
                <div id="generatedRecord" style="margin-top: 1rem;"></div>
            </div>
        </div>

        <div class="activity-card">
            <h3>🎯 Dot Notation Practice</h3>
            <p>Given the following record, complete the operations:</p>
            
            <div class="code-block">
TYPE TCar = RECORD
    make: STRING
    model: STRING
    year: INTEGER
    price: REAL
ENDRECORD

DECLARE myCar : TCar</div>
            
            <div style="margin: 1rem 0;">
                <p>1. Assign "Toyota" to the make field:</p>
                <input type="text" id="dot1" placeholder="Complete the statement..." style="width: 300px;">
                
                <p>2. Retrieve the year and store in a variable:</p>
                <input type="text" id="dot2" placeholder="Complete the statement..." style="width: 300px;">
                
                <p>3. Update the price to 25000.50:</p>
                <input type="text" id="dot3" placeholder="Complete the statement..." style="width: 300px;">
            </div>
            
            <button class="btn btn-primary" onclick="checkDotNotation()">Check Answers</button>
            <div id="dotFeedback" style="margin-top: 1rem;"></div>
        </div>

        <div class="activity-card">
            <h3>💡 Case Study: Library System</h3>
            <p>A library needs to track books. Design a suitable record type that includes:</p>
            <ul>
                <li>ISBN (unique identifier)</li>
                <li>Title</li>
                <li>Author</li>
                <li>Publication year</li>
                <li>Number of copies</li>
                <li>Is available for loan</li>
            </ul>
            
            <textarea id="libraryRecord" rows="8" placeholder="TYPE TBook = RECORD
    ...
ENDRECORD"></textarea>
            
            <button class="btn btn-primary" onclick="checkLibraryRecord()">Submit Design</button>
            <div id="libraryFeedback" style="margin-top: 1rem;"></div>
        </div>

        <div class="context-box">
            <h4>🌍 Real-World Application</h4>
            <p>Records are used everywhere! From storing patient information in hospitals to managing product inventory in stores. They keep related data organized and accessible.</p>
        </div>

        <div class="section-nav">
            <button class="btn btn-secondary" onclick="showSection(5)">← Previous</button>
            <button class="btn btn-primary" onclick="showSection(7)">Next: Set →</button>
        </div>
    </div>

    <!-- Section 7: Set Data Types -->
    <div class="section" id="section7">
        <h2>🎲 Set Data Types</h2>
        
        <div class="activity-card">
            <h3>📚 Understanding Sets</h3>
            <p>Sets are unordered collections of unique elements of the same type. Think of them as mathematical sets!</p>
            
            <div class="code-block">
TYPE SymbolSet = SET OF CHAR
DEFINE Operators : SymbolSet
Operators <- {'+', '-', '*', '/', '^'}

// Python example:
colors = {'red', 'green', 'blue'}</div>
        </div>

        <div class="activity-card">
            <h3>🎮 Interactive Set Operations</h3>
            <p>Explore set operations with this visual simulator:</p>
            
            <div class="simulation-container">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div>
                        <h4>Set A</h4>
                        <div id="setA" class="drop-zone" style="min-height: 80px;">
                            <span class="dropped-item">1</span>
                            <span class="dropped-item">2</span>
                            <span class="dropped-item">3</span>
                            <span class="dropped-item">4</span>
                        </div>
                    </div>
                    <div>
                        <h4>Set B</h4>
                        <div id="setB" class="drop-zone" style="min-height: 80px;">
                            <span class="dropped-item">3</span>
                            <span class="dropped-item">4</span>
                            <span class="dropped-item">5</span>
                            <span class="dropped-item">6</span>
                        </div>
                    </div>
                </div>
                
                <div class="simulation-controls">
                    <button class="btn btn-primary" onclick="performSetOperation('union')">Union (A ∪ B)</button>
                    <button class="btn btn-primary" onclick="performSetOperation('intersection')">Intersection (A ∩ B)</button>
                    <button class="btn btn-primary" onclick="performSetOperation('difference')">Difference (A - B)</button>
                    <button class="btn btn-danger" onclick="resetSetOperation()">Reset</button>
                </div>
                
                <div id="setResult" style="margin-top: 1rem;">
                    <h4>Result:</h4>
                    <div id="resultSet" class="drop-zone" style="min-height: 80px;"></div>
                </div>
            </div>
        </div>

        <div class="activity-card">
            <h3>✏️ Set Theory Problems</h3>
            
            <div style="margin: 1rem 0;">
                <p>1. Given: Vowels = {'a', 'e', 'i', 'o', 'u'} and Letters = {'a', 'b', 'c', 'd', 'e'}</p>
                <p>What is Vowels ∩ Letters?</p>
                <input type="text" id="setProb1" placeholder="Enter as {x, y, ...}">
                <button class="btn btn-primary" onclick="checkSetProblem(1)">Check</button>
                <div id="setProblem1Feedback"></div>
            </div>
            
            <div style="margin: 1rem 0;">
                <p>2. If Primary = {'red', 'blue', 'yellow'} and MyColors = {'red', 'green', 'purple'}</p>
                <p>How many elements are in Primary ∪ MyColors?</p>
                <input type="number" id="setProb2" placeholder="Enter number">
                <button class="btn btn-primary" onclick="checkSetProblem(2)">Check</button>
                <div id="setProblem2Feedback"></div>
            </div>
        </div>

        <div class="activity-card">
            <h3>🔍 Set Properties Quiz</h3>
            <p>Which statements about sets are TRUE?</p>
            
            <div style="margin: 0.5rem 0;">
                <label><input type="checkbox" id="setProp1"> Sets can contain duplicate elements</label>
            </div>
            <div style="margin: 0.5rem 0;">
                <label><input type="checkbox" id="setProp2"> Elements in a set have no specific order</label>
            </div>
            <div style="margin: 0.5rem 0;">
                <label><input type="checkbox" id="setProp3"> All elements must be of the same data type</label>
            </div>
            <div style="margin: 0.5rem 0;">
                <label><input type="checkbox" id="setProp4"> Sets support mathematical operations</label>
            </div>
            
            <button class="btn btn-primary" onclick="checkSetProperties()">Check Answers</button>
            <div id="setPropFeedback" style="margin-top: 1rem;"></div>
        </div>

        <div class="section-nav">
            <button class="btn btn-secondary" onclick="showSection(6)">← Previous</button>
            <button class="btn btn-primary" onclick="showSection(8)">Next: Practice →</button>
        </div>
    </div>

    <!-- Section 8: Practice Exam Questions -->
    <div class="section" id="section8">
        <h2>📝 Practice Exam Questions</h2>
        
        <div class="activity-card">
            <h3>Question 1 (4 marks)</h3>
            <p>Explain the difference between pre-defined and user-defined data types. Give two examples of each.</p>
            
            <textarea id="exam1" rows="6" placeholder="Write your answer here..."></textarea>
            
            <div style="margin-top: 1rem;">
                <label>Predicted marks: <input type="number" id="exam1Marks" min="0" max="4" style="width: 60px;"> / 4</label>
                <button class="btn btn-primary" onclick="showMarkScheme('exam1')">Show Mark Scheme</button>
            </div>
            
            <div id="exam1MarkScheme" class="mark-scheme">
                <h4>Mark Scheme:</h4>
                <ul>
                    <li><strong>1 mark:</strong> Pre-defined types are built into programming languages</li>
                    <li><strong>1 mark:</strong> User-defined types are created by programmers</li>
                    <li><strong>1 mark:</strong> Two valid examples of pre-defined (e.g., integer, float, boolean, char)</li>
                    <li><strong>1 mark:</strong> Two valid examples of user-defined (e.g., enumerated, pointer, record, set)</li>
                </ul>
            </div>
        </div>

        <div class="activity-card">
            <h3>Question 2 (6 marks)</h3>
            <p>A school needs to store information about students. Design a suitable record data type that includes at least 5 different fields. Write the declaration in pseudo-code and explain your choice of data types for each field.</p>
            
            <textarea id="exam2" rows="10" placeholder="Write your answer here..."></textarea>
            
            <div style="margin-top: 1rem;">
                <label>Predicted marks: <input type="number" id="exam2Marks" min="0" max="6" style="width: 60px;"> / 6</label>
                <button class="btn btn-primary" onclick="showMarkScheme('exam2')">Show Mark Scheme</button>
            </div>
            
            <div id="exam2MarkScheme" class="mark-scheme">
                <h4>Mark Scheme:</h4>
                <ul>
                    <li><strong>1 mark:</strong> Correct record syntax (TYPE...RECORD...ENDRECORD)</li>
                    <li><strong>1 mark:</strong> At least 5 appropriate fields</li>
                    <li><strong>2 marks:</strong> Appropriate data types chosen (1 mark per 2-3 correct choices)</li>
                    <li><strong>2 marks:</strong> Clear justification for data type choices</li>
                </ul>
                <p><strong>Example answer:</strong></p>
                <div class="code-block">
TYPE TStudent = RECORD
    studentID: INTEGER      // Unique identifier
    name: STRING           // Student's full name
    dateOfBirth: DATE      // For age calculation
    gradeLevel: INTEGER    // Year group (7-13)
    isBoarding: BOOLEAN    // Boarding student?
    housePoints: REAL      // Can have decimals
ENDRECORD</div>
            </div>
        </div>

        <div class="activity-card">
            <h3>Question 3 (5 marks)</h3>
            <p>Write pseudo-code to:</p>
            <ol>
                <li>Declare an enumerated type for months of the year</li>
                <li>Create a variable of this type</li>
                <li>Use it in a comparison to check if it's a summer month</li>
            </ol>
            
            <textarea id="exam3" rows="8" placeholder="Write your answer here..."></textarea>
            
            <div style="margin-top: 1rem;">
                <label>Predicted marks: <input type="number" id="exam3Marks" min="0" max="5" style="width: 60px;"> / 5</label>
                <button class="btn btn-primary" onclick="showMarkScheme('exam3')">Show Mark Scheme</button>
            </div>
            
            <div id="exam3MarkScheme" class="mark-scheme">
                <h4>Mark Scheme:</h4>
                <ul>
                    <li><strong>2 marks:</strong> Correct enumerated type declaration with all 12 months</li>
                    <li><strong>1 mark:</strong> Variable declaration using the type</li>
                    <li><strong>2 marks:</strong> Correct comparison logic for summer months</li>
                </ul>
                <p><strong>Example answer:</strong></p>
                <div class="code-block">
TYPE TMonths = (January, February, March, April, May, June, 
                July, August, September, October, November, December)
DECLARE currentMonth : TMonths
currentMonth <- July

IF currentMonth >= June AND currentMonth <= August THEN
    OUTPUT "It's a summer month!"
ENDIF</div>
            </div>
        </div>

        <div class="section-nav">
            <button class="btn btn-secondary" onclick="showSection(7)">← Previous</button>
            <button class="btn btn-primary" onclick="showSection(9)">Next: Summary →</button>
        </div>
    </div>

    <!-- Section 9: Summary -->
    <div class="section" id="section9">
        <h2>🎯 Summary & Final Assessment</h2>
        
        <div class="activity-card">
            <h3>📚 Key Takeaways</h3>
            <ul>
                <li><strong>Pre-defined types</strong> are built-in (integer, float, boolean, char)</li>
                <li><strong>User-defined types</strong> extend functionality for specific needs</li>
                <li><strong>Composite types</strong> contain multiple values (array, record, set)</li>
                <li><strong>Non-composite types</strong> contain single values (integer, enumerated)</li>
                <li><strong>Enumerated types</strong> define fixed sets of named values with order</li>
                <li><strong>Pointers</strong> reference memory locations</li>
                <li><strong>Records</strong> group related items of different types</li>
                <li><strong>Sets</strong> are unordered collections of unique elements</li>
            </ul>
        </div>

        <div class="activity-card">
            <h3>🎮 Final Assessment</h3>
            <p>Test your understanding with these comprehensive questions:</p>
            
            <!-- Question 1 -->
            <div style="margin: 2rem 0;">
                <h4>1. Which is NOT a characteristic of pre-defined data types?</h4>
                <div class="quiz-option" onclick="selectQuizOption(this, 'final1', 'a')">
                    They are built into programming languages
                </div>
                <div class="quiz-option" onclick="selectQuizOption(this, 'final1', 'b')">
                    They must be declared by the programmer before use
                </div>
                <div class="quiz-option" onclick="selectQuizOption(this, 'final1', 'c')">
                    They have pre-defined ranges of values
                </div>
                <div class="quiz-option" onclick="selectQuizOption(this, 'final1', 'd')">
                    They can be used by any program
                </div>
                <button class="btn btn-primary" onclick="checkQuiz('final1', 'b')">Submit</button>
                <div id="final1Feedback"></div>
            </div>

            <!-- Question 2 -->
            <div style="margin: 2rem 0;">
                <h4>2. A record data type is best described as:</h4>
                <div class="quiz-option" onclick="selectQuizOption(this, 'final2', 'a')">
                    A collection of items all of the same type
                </div>
                <div class="quiz-option" onclick="selectQuizOption(this, 'final2', 'b')">
                    A single memory address reference
                </div>
                <div class="quiz-option" onclick="selectQuizOption(this, 'final2', 'c')">
                    A collection of related items with different data types
                </div>
                <div class="quiz-option" onclick="selectQuizOption(this, 'final2', 'd')">
                    An unordered set of unique values
                </div>
                <button class="btn btn-primary" onclick="checkQuiz('final2', 'c')">Submit</button>
                <div id="final2Feedback"></div>
            </div>

            <!-- Question 3 -->
            <div style="margin: 2rem 0;">
                <h4>3. In enumerated types, which statement is TRUE?</h4>
                <div class="quiz-option" onclick="selectQuizOption(this, 'final3', 'a')">
                    Values must be enclosed in quotes
                </div>
                <div class="quiz-option" onclick="selectQuizOption(this, 'final3', 'b')">
                    Values have an implicit order and can be compared
                </div>
                <div class="quiz-option" onclick="selectQuizOption(this, 'final3', 'c')">
                    Multiple values can be stored at once
                </div>
                <div class="quiz-option" onclick="selectQuizOption(this, 'final3', 'd')">
                    Values are stored as strings internally
                </div>
                <button class="btn btn-primary" onclick="checkQuiz('final3', 'b')">Submit</button>
                <div id="final3Feedback"></div>
            </div>

            <!-- Question 4 -->
            <div style="margin: 2rem 0;">
                <h4>4. Which notation assigns a memory address to a pointer?</h4>
                <div class="quiz-option" onclick="selectQuizOption(this, 'final4', 'a')">
                    <code>MyPointer <- IntVar</code>
                </div>
                <div class="quiz-option" onclick="selectQuizOption(this, 'final4', 'b')">
                    <code>MyPointer <- @IntVar</code>
                </div>
                <div class="quiz-option" onclick="selectQuizOption(this, 'final4', 'c')">
                    <code>MyPointer^ <- IntVar</code>
                </div>
                <div class="quiz-option" onclick="selectQuizOption(this, 'final4', 'd')">
                    <code>IntVar <- MyPointer^</code>
                </div>
                <button class="btn btn-primary" onclick="checkQuiz('final4', 'b')">Submit</button>
                <div id="final4Feedback"></div>
            </div>

            <!-- Question 5 -->
            <div style="margin: 2rem 0;">
                <h4>5. Which data types are composite? (Select all that apply)</h4>
                <div>
                    <label><input type="checkbox" id="comp1"> Array</label><br>
                    <label><input type="checkbox" id="comp2"> Integer</label><br>
                    <label><input type="checkbox" id="comp3"> Record</label><br>
                    <label><input type="checkbox" id="comp4"> Enumerated</label><br>
                    <label><input type="checkbox" id="comp5"> Set</label><br>
                    <label><input type="checkbox" id="comp6"> Pointer</label><br>
                </div>
                <button class="btn btn-primary" onclick="checkCompositeQuiz()">Submit</button>
                <div id="compositeQuizFeedback"></div>
            </div>

            <!-- Question 6 -->
            <div style="margin: 2rem 0;">
                <h4>6. Complete: To access a field in a record, we use ___ notation.</h4>
                <input type="text" id="final6" placeholder="Your answer">
                <button class="btn btn-primary" onclick="checkFinalFill()">Submit</button>
                <div id="final6Feedback"></div>
            </div>

            <!-- Question 7 -->
            <div style="margin: 2rem 0;">
                <h4>7. If Set A = {1, 2, 3} and Set B = {2, 3, 4}, what is A ∩ B?</h4>
                <input type="text" id="final7" placeholder="Format: {x, y}">
                <button class="btn btn-primary" onclick="checkFinalSet()">Submit</button>
                <div id="final7Feedback"></div>
            </div>

            <!-- Question 8 -->
            <div style="margin: 2rem 0;">
                <h4>8. Order these steps for using an enumerated type:</h4>
                <div id="orderItems">
                    <div class="drag-item" draggable="true" ondragstart="drag(event)" id="order1">Assign a value to the variable</div>
                    <div class="drag-item" draggable="true" ondragstart="drag(event)" id="order2">Define the enumerated type</div>
                    <div class="drag-item" draggable="true" ondragstart="drag(event)" id="order3">Use in comparisons or operations</div>
                    <div class="drag-item" draggable="true" ondragstart="drag(event)" id="order4">Declare a variable of the type</div>
                </div>
                <button class="btn btn-primary" onclick="checkOrder()">Check Order</button>
                <div id="orderFeedback"></div>
            </div>
        </div>

        <div class="activity-card">
            <h3>🏆 Your Achievement Summary</h3>
            <div id="achievementSummary">
                <p>Loading your achievements...</p>
            </div>
        </div>

        <div class="activity-card">
            <h3>🎥 Extension Resources</h3>
            <p>Ready to learn more? Check out these video resources:</p>
            <div style="background: #f8f9fa; padding: 2rem; border-radius: 10px; text-align: center;">
                <p>📹 Video content placeholder</p>
                <p>Videos on advanced data structures, ADTs, and real-world applications would appear here</p>
            </div>
        </div>

        <div class="section-nav">
            <button class="btn btn-secondary" onclick="showSection(8)">← Previous</button>
            <button class="btn btn-success" onclick="completeLesson()">Complete Lesson! 🎉</button>
        </div>
    </div>

    <!-- Achievement Popup -->
    <div class="achievement-popup" id="achievementPopup">
        <h4><span class="achievement-icon">🏆</span> <span id="achievementTitle">Achievement Unlocked!</span></h4>
        <p id="achievementDesc">Description</p>
    </div>

    <!-- Feedback Button -->
    <button class="feedback-btn" onclick="openFeedback()">💬</button>

    <!-- Feedback Modal -->
    <div class="feedback-modal" id="feedbackModal" onclick="closeFeedbackModal(event)">
        <div class="feedback-content">
            <h3>📝 Send Feedback</h3>
            <p>Found a bug or have a suggestion? Let us know!</p>
            
            <div style="margin: 1rem 0;">
                <label>Type of feedback:</label>
                <select id="feedbackType" style="width: 100%;">
                    <option value="bug">Bug Report</option>
                    <option value="suggestion">Feature Suggestion</option>
                    <option value="other">Other</option>
                </select>
            </div>
            
            <div style="margin: 1rem 0;">
                <label>Your message:</label>
                <textarea id="feedbackMessage" rows="4" placeholder="Describe the issue or suggestion..."></textarea>
            </div>
            
            <input type="hidden" id="currentPage" value="">
            
            <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                <button class="btn btn-secondary" onclick="closeFeedback()">Cancel</button>
                <button class="btn btn-primary" onclick="sendFeedback()">Send Feedback</button>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentSection = 0;
        let xp = 0;
        let level = 0;
        let achievements = new Set();
        let selectedItem = null;
        let selectedType = '';
        let currentEnumStep = 1;
        let completedActivities = new Set();
        let quizAnswers = {};
        let matchingPairs = {};
        let selectedMatch = null;

        // XP thresholds for each level
        const levelThresholds = [0, 100, 250, 450, 700, 1000];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateXPDisplay();
            preventPaste();
            setupCanvasIfNeeded();
        });

        // Prevent paste
        function preventPaste() {
            document.addEventListener('paste', function(e) {
                e.preventDefault();
                showShameMessage();
                return false;
            });

            // Also prevent context menu
            document.addEventListener('contextmenu', function(e) {
                if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                    e.preventDefault();
                    return false;
                }
            });
        }

        function showShameMessage() {
            const shame = document.createElement('div');
            shame.innerHTML = '🚫 Pasting is disabled! Do your own work! 🚫';
            shame.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: #ef4444;
                color: white;
                padding: 2rem;
                border-radius: 15px;
                font-size: 1.5rem;
                font-weight: bold;
                z-index: 10000;
                animation: shake 0.5s ease;
                box-shadow: 0 10px 30px rgba(239, 68, 68, 0.5);
            `;
            document.body.appendChild(shame);
            
            setTimeout(() => shame.remove(), 3000);
        }

        // XP and Achievement System
        function addXP(amount, activity) {
            if (completedActivities.has(activity)) {
                return; // Already completed
            }
            
            completedActivities.add(activity);
            const prevLevel = level;
            xp += amount;
            
            // Show floating XP
            showFloatingXP(amount);
            
            // Check level up
            for (let i = levelThresholds.length - 1; i >= 0; i--) {
                if (xp >= levelThresholds[i]) {
                    level = i;
                    break;
                }
            }
            
            if (level > prevLevel) {
                showAchievement('Level Up!', `You reached Level ${level}! Keep going!`);
                createParticles();
            }
            
            updateXPDisplay();
            checkAchievements();
        }

        function showFloatingXP(amount) {
            const float = document.createElement('div');
            float.className = 'xp-float';
            float.textContent = `+${amount} XP`;
            float.style.left = `${Math.random() * 80 + 10}%`;
            float.style.top = '50%';
            document.body.appendChild(float);
            
            setTimeout(() => float.remove(), 2000);
        }

        function updateXPDisplay() {
            const fill = document.getElementById('xpFill');
            const text = document.getElementById('xpText');
            const badge = document.getElementById('levelBadge');
            
            const currentThreshold = levelThresholds[level] || 0;
            const nextThreshold = levelThresholds[level + 1] || levelThresholds[levelThresholds.length - 1];
            const levelXP = xp - currentThreshold;
            const levelMax = nextThreshold - currentThreshold;
            const percentage = (levelXP / levelMax) * 100;
            
            fill.style.width = `${percentage}%`;
            text.textContent = `${xp} / ${nextThreshold} XP`;
            badge.textContent = `Level ${level}`;
        }

        function showAchievement(title, description) {
            const popup = document.getElementById('achievementPopup');
            document.getElementById('achievementTitle').textContent = title;
            document.getElementById('achievementDesc').textContent = description;
            
            popup.classList.add('show');
            
            setTimeout(() => {
                popup.classList.remove('show');
            }, 4000);
        }

        function checkAchievements() {
            // First activity
            if (completedActivities.size === 1 && !achievements.has('first')) {
                achievements.add('first');
                showAchievement('First Steps!', 'Completed your first activity!');
            }
            
            // Starter master
            if (completedActivities.has('starter') && !achievements.has('starter-master')) {
                achievements.add('starter-master');
                showAchievement('Quick Starter!', 'Aced the starter activity!');
            }
            
            // Halfway
            if (currentSection >= 5 && !achievements.has('halfway')) {
                achievements.add('halfway');
                showAchievement('Halfway There!', 'You\'ve reached the midpoint!');
            }
            
            // Quiz master
            const quizCount = Array.from(completedActivities).filter(a => a.includes('quiz')).length;
            if (quizCount >= 5 && !achievements.has('quiz-master')) {
                achievements.add('quiz-master');
                showAchievement('Quiz Master!', 'Answered 5 quiz questions correctly!');
            }
        }

        function createParticles() {
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.innerHTML = ['🌟', '✨', '⭐', '💫', '🎉'][Math.floor(Math.random() * 5)];
                    particle.style.left = `${Math.random() * 100}%`;
                    particle.style.top = `${Math.random() * 100}%`;
                    particle.style.fontSize = `${Math.random() * 20 + 20}px`;
                    particle.style.animation = `floatUp ${Math.random() * 2 + 1}s ease-out forwards`;
                    document.body.appendChild(particle);
                    
                    setTimeout(() => particle.remove(), 3000);
                }, i * 50);
            }
        }

        // Navigation
        function showSection(index) {
            const sections = document.querySelectorAll('.section');
            const navBtns = document.querySelectorAll('.nav-btn');
            
            sections.forEach(s => s.classList.remove('active'));
            navBtns.forEach(b => b.classList.remove('active'));
            
            sections[index].classList.add('active');
            navBtns[index].classList.add('active');
            
            currentSection = index;
            document.getElementById('currentPage').value = `Section ${index + 1}`;
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Starter Activity Functions
        function selectItem(element, type) {
            // Remove previous selection
            document.querySelectorAll('.drag-item').forEach(item => {
                item.classList.remove('selected');
            });
            
            element.classList.add('selected');
            selectedItem = element;
            selectedType = type;
        }

        function dropItem(zone) {
            if (!selectedItem) return;
            
            const container = zone === 'predefined' ? 
                document.getElementById('predefinedItems') : 
                document.getElementById('userdefinedItems');
            
            const dropped = document.createElement('span');
            dropped.className = 'dropped-item';
            dropped.textContent = selectedType;
            container.appendChild(dropped);
            
            selectedItem.style.display = 'none';
            selectedItem = null;
            selectedType = '';
        }

        function checkStarterActivity() {
            const predefined = ['integer', 'boolean', 'float', 'char'];
            const userdefined = ['record', 'enumerated', 'pointer', 'set'];
            
            const predefinedItems = Array.from(document.querySelectorAll('#predefinedItems .dropped-item'))
                .map(item => item.textContent);
            const userdefinedItems = Array.from(document.querySelectorAll('#userdefinedItems .dropped-item'))
                .map(item => item.textContent);
            
            const correctPredefined = predefinedItems.every(item => predefined.includes(item)) && 
                                     predefinedItems.length === 4;
            const correctUserdefined = userdefinedItems.every(item => userdefined.includes(item)) && 
                                      userdefinedItems.length === 4;
            
            const feedback = document.getElementById('starterFeedback');
            
            if (correctPredefined && correctUserdefined) {
                feedback.innerHTML = '<span style="color: #10b981;">✅ Perfect! You correctly categorized all data types!</span>';
                addXP(50, 'starter');
            } else {
                feedback.innerHTML = '<span style="color: #ef4444;">❌ Not quite right. Remember: pre-defined types are built into languages!</span>';
            }
        }

        function resetStarterActivity() {
            document.getElementById('predefinedItems').innerHTML = '';
            document.getElementById('userdefinedItems').innerHTML = '';
            document.getElementById('starterFeedback').innerHTML = '';
            document.querySelectorAll('#starterItems .drag-item').forEach(item => {
                item.style.display = 'block';
                item.classList.remove('selected');
            });
            selectedItem = null;
            selectedType = '';
        }

        // Fill in the blanks
        function checkFillBlanks1() {
            const blank1 = document.getElementById('blank1').value;
            const blank2 = document.getElementById('blank2').value;
            const blank3 = document.getElementById('blank3').value;
            
            const feedback = document.getElementById('fillFeedback1');
            let correct = 0;
            
            if (blank1 === 'built') correct++;
            if (blank2 === 'float') correct++;
            if (blank3 === 'range') correct++;
            
            if (correct === 3) {
                feedback.innerHTML = '<span style="color: #10b981;">✅ Excellent! All answers are correct!</span>';
                addXP(30, 'fill1');
            } else {
                feedback.innerHTML = `<span style="color: #ef4444;">❌ You got ${correct}/3 correct. Try again!</span>`;
            }
        }

        // Quiz functions
        function selectQuizOption(element, questionId, option) {
            const options = element.parentElement.querySelectorAll('.quiz-option');
            options.forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            quizAnswers[questionId] = option;
        }

        function checkQuiz(questionId, correctAnswer) {
            const selected = quizAnswers[questionId];
            if (!selected) {
                document.getElementById(`${questionId}Feedback`).innerHTML = 
                    '<span style="color: #f59e0b;">⚠️ Please select an answer!</span>';
                return;
            }
            
            const options = document.querySelectorAll(`[onclick*="${questionId}"]`);
            const feedback = document.getElementById(`${questionId}Feedback`);
            
            options.forEach(opt => {
                opt.classList.remove('correct', 'incorrect');
                if (opt.getAttribute('onclick').includes(correctAnswer)) {
                    opt.classList.add('correct');
                } else if (opt.getAttribute('onclick').includes(selected)) {
                    opt.classList.add('incorrect');
                }
            });
            
            if (selected === correctAnswer) {
                feedback.innerHTML = '<span style="color: #10b981;">✅ Correct! Well done!</span>';
                addXP(20, `quiz-${questionId}`);
            } else {
                feedback.innerHTML = '<span style="color: #ef4444;">❌ Not quite. Think about what makes pre-defined types special.</span>';
            }
        }

        // Hints
        function showHint(hintId) {
            const hint = document.getElementById(hintId);
            hint.classList.add('show');
            // Reduce XP for next correct answer by 20%
        }

        // Matching exercise
        function selectMatch(element, type) {
            document.querySelectorAll('.drag-item').forEach(item => {
                item.classList.remove('selected');
            });
            element.classList.add('selected');
            selectedMatch = { element, type };
        }

        function dropMatch(zoneId) {
            if (!selectedMatch) return;
            
            const zone = document.getElementById(zoneId);
            const existing = zone.querySelector('.dropped-item');
            if (existing) {
                existing.remove();
            }
            
            const dropped = document.createElement('span');
            dropped.className = 'dropped-item';
            dropped.textContent = selectedMatch.element.textContent;
            zone.appendChild(dropped);
            
            matchingPairs[zoneId] = selectedMatch.type;
            selectedMatch.element.style.opacity = '0.5';
            selectedMatch = null;
        }

        function checkMatching() {
            const correct = {
                'match1': 'record',
                'match2': 'pointer',
                'match3': 'enumerated',
                'match4': 'set'
            };
            
            let score = 0;
            for (const [zone, type] of Object.entries(correct)) {
                if (matchingPairs[zone] === type) score++;
            }
            
            const feedback = document.getElementById('matchFeedback');
            if (score === 4) {
                feedback.innerHTML = '<span style="color: #10b981;">✅ Perfect matching! You understand all the types!</span>';
                addXP(40, 'matching');
            } else {
                feedback.innerHTML = `<span style="color: #ef4444;">❌ ${score}/4 correct. Review the descriptions carefully.</span>`;
            }
        }

        function resetMatching() {
            document.querySelectorAll('.match-zone .dropped-item').forEach(item => item.remove());
            document.querySelectorAll('.drag-item').forEach(item => {
                item.style.opacity = '1';
                item.classList.remove('selected');
            });
            matchingPairs = {};
            selectedMatch = null;
            document.getElementById('matchFeedback').innerHTML = '';
        }

        // Short answer
        function checkShortAnswer1() {
            const answer = document.getElementById('shortAnswer1').value.toLowerCase();
            const feedback = document.getElementById('shortAnswer1Feedback');
            
            if (answer.length < 50) {
                feedback.innerHTML = '<span style="color: #f59e0b;">⚠️ Please provide a more detailed answer.</span>';
                return;
            }
            
            const keywords = ['specific', 'requirements', 'extend', 'application', 'complex', 'organize', 'meaningful'];
            const foundKeywords = keywords.filter(keyword => answer.includes(keyword));
            
            const xpEarned = Math.min(50, 10 + foundKeywords.length * 10);
            
            feedback.innerHTML = `<span style="color: #10b981;">✅ Good answer! Key points: User-defined types help meet specific application requirements and organize complex data meaningfully.</span>`;
            addXP(xpEarned, 'shortanswer1');
        }

        // Composite activity
        function checkCompositeActivity() {
            const composite = ['array', 'record', 'list', 'class', 'set'];
            const nonComposite = ['integer', 'boolean', 'char', 'pointer', 'float'];
            
            const compositeDropped = Array.from(document.querySelectorAll('#compositeDropped .dropped-item'))
                .map(item => item.textContent);
            const nonCompositeDropped = Array.from(document.querySelectorAll('#nonCompositeDropped .dropped-item'))
                .map(item => item.textContent);
            
            let correct = 0;
            compositeDropped.forEach(item => {
                if (composite.includes(item)) correct++;
            });
            nonCompositeDropped.forEach(item => {
                if (nonComposite.includes(item)) correct++;
            });
            
            const feedback = document.getElementById('compositeFeedback');
            if (correct === 10) {
                feedback.innerHTML = '<span style="color: #10b981;">✅ Perfect! You understand composite vs non-composite types!</span>';
                addXP(50, 'composite-sort');
            } else {
                feedback.innerHTML = `<span style="color: #ef4444;">❌ ${correct}/10 correct. Remember: composite types contain multiple elements!</span>`;
            }
        }

        function resetCompositeActivity() {
            document.getElementById('compositeDropped').innerHTML = '';
            document.getElementById('nonCompositeDropped').innerHTML = '';
            document.getElementById('compositeFeedback').innerHTML = '';
            document.querySelectorAll('#compositeItems .drag-item').forEach(item => {
                item.style.display = 'block';
                item.classList.remove('selected');
            });
        }

        // True/False
        function checkTrueFalse(id, isCorrect) {
            const feedback = document.getElementById(`${id}Feedback`);
            if (isCorrect) {
                feedback.innerHTML = '<span style="color: #10b981;">✅ Correct!</span>';
                addXP(15, `tf-${id}`);
            } else {
                feedback.innerHTML = '<span style="color: #ef4444;">❌ Incorrect. Think again!</span>';
            }
        }

        // Enumerated simulation
        function nextEnumStep() {
            if (currentEnumStep < 4) {
                document.getElementById(`enumStep${currentEnumStep}`).style.display = 'none';
                currentEnumStep++;
                document.getElementById(`enumStep${currentEnumStep}`).style.display = 'block';
                
                // Update step indicators
                document.querySelectorAll('.step-dot').forEach(dot => dot.classList.remove('active'));
                document.getElementById(`step${currentEnumStep}`).classList.add('active');
                
                if (currentEnumStep === 4) {
                    document.getElementById('enumNext').textContent = 'Complete';
                }
                document.getElementById('enumPrev').disabled = false;
            } else {
                addXP(30, 'enum-simulation');
                showAchievement('Simulation Complete!', 'You mastered enumerated types!');
            }
        }

        function prevEnumStep() {
            if (currentEnumStep > 1) {
                document.getElementById(`enumStep${currentEnumStep}`).style.display = 'none';
                currentEnumStep--;
                document.getElementById(`enumStep${currentEnumStep}`).style.display = 'block';
                
                // Update step indicators
                document.querySelectorAll('.step-dot').forEach(dot => dot.classList.remove('active'));
                document.getElementById(`step${currentEnumStep}`).classList.add('active');
                
                document.getElementById('enumNext').textContent = 'Next →';
                if (currentEnumStep === 1) {
                    document.getElementById('enumPrev').disabled = true;
                }
            }
        }

        function resetEnumSimulation() {
            currentEnumStep = 1;
            document.querySelectorAll('.sim-step').forEach((step, i) => {
                step.style.display = i === 0 ? 'block' : 'none';
            });
            document.querySelectorAll('.step-dot').forEach((dot, i) => {
                dot.classList.toggle('active', i === 0);
            });
            document.getElementById('enumPrev').disabled = true;
            document.getElementById('enumNext').textContent = 'Next →';
        }

        // Enum code check
        function checkEnumCode() {
            const enum1 = document.getElementById('enum1').value.trim();
            const enum2 = document.getElementById('enum2').value.trim();
            const enum3 = document.getElementById('enum3').value.trim();
            const enum4 = document.getElementById('enum4').value.trim();
            
            const feedback = document.getElementById('enumCodeFeedback');
            let correct = 0;
            
            if (enum1.toUpperCase() === 'A') correct++;
            if (enum2.toUpperCase() === 'E' || enum2.toUpperCase() === 'F') correct++;
            if (enum3 === 'TGrades') correct++;
            if (['A', 'B'].includes(enum4.toUpperCase())) correct++;
            
            if (correct === 4) {
                feedback.innerHTML = '<span style="color: #10b981;">✅ Perfect code! You understand enumerated type syntax!</span>';
                addXP(40, 'enum-code');
            } else {
                feedback.innerHTML = `<span style="color: #ef4444;">❌ ${correct}/4 correct. Check your syntax carefully.</span>`;
            }
        }

        // Day problem
        function checkDayProblem() {
            const answer = document.getElementById('dayAnswer').value.trim().toLowerCase();
            const feedback = document.getElementById('dayFeedback');
            
            if (answer === 'tuesday') {
                feedback.innerHTML = '<span style="color: #10b981;">✅ Correct! Thursday(4) + 5 = 9. 9 mod 7 = 2 (Tuesday)!</span>';
                addXP(30, 'day-problem');
            } else {
                feedback.innerHTML = '<span style="color: #ef4444;">❌ Not quite. Thursday is day 4, add 5 days...</span>';
            }
        }

        // Pointer simulation
        let pointerState = {
            variables: {},
            pointers: {}
        };

        function runPointerDemo(step) {
            const cells = document.querySelectorAll('.memory-cell');
            const explanation = document.getElementById('pointerExplanation');
            
            cells.forEach(cell => cell.classList.remove('active', 'pointed'));
            
            switch(step) {
                case 1:
                    document.getElementById('val1001').textContent = '42';
                    document.getElementById('mem1001').classList.add('active');
                    pointerState.variables['IntVar'] = { address: 1001, value: 42 };
                    explanation.innerHTML = '<strong>Step 1:</strong> Created integer variable IntVar = 42 at address 1001';
                    break;
                    
                case 2:
                    document.getElementById('val1003').textContent = '?';
                    document.getElementById('mem1003').classList.add('active');
                    explanation.innerHTML = '<strong>Step 2:</strong> Created pointer MyPointer at address 1003 (currently uninitialized)';
                    break;
                    
                case 3:
                    document.getElementById('val1003').textContent = '→1001';
                    document.getElementById('mem1003').classList.add('active');
                    document.getElementById('mem1001').classList.add('pointed');
                    pointerState.pointers['MyPointer'] = { address: 1003, pointsTo: 1001 };
                    explanation.innerHTML = '<strong>Step 3:</strong> MyPointer now points to address 1001 (where IntVar is stored)';
                    break;
                    
                case 4:
                    document.getElementById('mem1003').classList.add('active');
                    document.getElementById('mem1001').classList.add('pointed');
                    explanation.innerHTML = '<strong>Step 4:</strong> Dereferencing MyPointer^ gives us the value 42 (the value at address 1001)';
                    addXP(25, 'pointer-demo');
                    break;
            }
        }

        function resetPointerDemo() {
            document.querySelectorAll('.memory-cell span[id^="val"]').forEach(span => {
                span.textContent = '?';
            });
            document.querySelectorAll('.memory-cell').forEach(cell => {
                cell.classList.remove('active', 'pointed');
            });
            document.getElementById('pointerExplanation').innerHTML = '<p>Click the buttons above to see how pointers work!</p>';
            pointerState = { variables: {}, pointers: {} };
        }

        // Pointer uses check
        function checkPointerUses() {
            const correct = [
                document.getElementById('ptrUse1').checked, // linked list - YES
                !document.getElementById('ptrUse2').checked, // age - NO
                document.getElementById('ptrUse3').checked, // queue - YES
                !document.getElementById('ptrUse4').checked, // area - NO
                document.getElementById('ptrUse5').checked  // dynamic structures - YES
            ];
            
            const score = correct.filter(c => c).length;
            const feedback = document.getElementById('ptrUsesFeedback');
            
            if (score === 5) {
                feedback.innerHTML = '<span style="color: #10b981;">✅ Perfect! Pointers are essential for dynamic data structures!</span>';
                addXP(35, 'pointer-uses');
            } else {
                feedback.innerHTML = `<span style="color: #ef4444;">❌ ${score}/5 correct. Pointers are used for dynamic structures and memory management.</span>`;
            }
        }

        // Record builder
        function addRecordField() {
            const container = document.getElementById('recordFields');
            const field = document.createElement('div');
            field.className = 'record-field';
            field.innerHTML = `
                <input type="text" placeholder="Field name" class="field-name" style="width: 150px;">
                : 
                <select class="field-type">
                    <option value="STRING">STRING</option>
                    <option value="INTEGER">INTEGER</option>
                    <option value="REAL">REAL</option>
                    <option value="BOOLEAN">BOOLEAN</option>
                    <option value="CHAR">CHAR</option>
                    <option value="DATE">DATE</option>
                </select>
                <button class="btn btn-danger" onclick="this.parentElement.remove()" style="margin-left: 1rem;">Remove</button>
            `;
            container.appendChild(field);
        }

        function generateRecord() {
            const name = document.getElementById('recordName').value || 'TRecord';
            const fields = document.querySelectorAll('.record-field');
            
            let code = `TYPE ${name} = RECORD\n`;
            fields.forEach(field => {
                const fieldName = field.querySelector('.field-name').value;
                const fieldType = field.querySelector('.field-type').value;
                if (fieldName) {
                    code += `    ${fieldName}: ${fieldType}\n`;
                }
            });
            code += 'ENDRECORD';
            
            const output = document.getElementById('generatedRecord');
            output.innerHTML = `<div class="code-block">${code}</div>`;
            
            if (fields.length >= 3) {
                addXP(30, 'record-builder');
            }
        }

        function resetRecordBuilder() {
            document.getElementById('recordName').value = '';
            document.getElementById('recordFields').innerHTML = `
                <div class="record-field">
                    <input type="text" placeholder="Field name" class="field-name" style="width: 150px;">
                    : 
                    <select class="field-type">
                        <option value="STRING">STRING</option>
                        <option value="INTEGER">INTEGER</option>
                        <option value="REAL">REAL</option>
                        <option value="BOOLEAN">BOOLEAN</option>
                        <option value="CHAR">CHAR</option>
                        <option value="DATE">DATE</option>
                    </select>
                </div>
            `;
            document.getElementById('generatedRecord').innerHTML = '';
        }

        // Dot notation check
        function checkDotNotation() {
            const dot1 = document.getElementById('dot1').value.trim();
            const dot2 = document.getElementById('dot2').value.trim();
            const dot3 = document.getElementById('dot3').value.trim();
            
            const feedback = document.getElementById('dotFeedback');
            let correct = 0;
            
            // Accept various valid formats
            if (dot1.includes('myCar.make') && dot1.includes('Toyota')) correct++;
            if (dot2.includes('myCar.year') && (dot2.includes('<-') || dot2.includes('='))) correct++;
            if (dot3.includes('myCar.price') && dot3.includes('25000')) correct++;
            
            if (correct === 3) {
                feedback.innerHTML = '<span style="color: #10b981;">✅ Excellent! You\'ve mastered dot notation!</span>';
                addXP(35, 'dot-notation');
            } else {
                feedback.innerHTML = `<span style="color: #ef4444;">❌ ${correct}/3 correct. Use format: recordName.fieldName</span>`;
            }
        }

        // Library record check
        function checkLibraryRecord() {
            const answer = document.getElementById('libraryRecord').value.toLowerCase();
            const feedback = document.getElementById('libraryFeedback');
            
            const requiredFields = ['isbn', 'title', 'author', 'year', 'copies', 'available'];
            const foundFields = requiredFields.filter(field => answer.includes(field));
            
            if (foundFields.length >= 5 && answer.includes('record') && answer.includes('endrecord')) {
                feedback.innerHTML = '<span style="color: #10b981;">✅ Excellent record design! You included all necessary fields with appropriate types!</span>';
                addXP(45, 'library-record');
            } else {
                feedback.innerHTML = `<span style="color: #ef4444;">❌ Missing some fields. You included ${foundFields.length}/6 required fields.</span>`;
            }
        }

        // Set operations
        function performSetOperation(operation) {
            const resultSet = document.getElementById('resultSet');
            resultSet.innerHTML = '';
            
            const setA = [1, 2, 3, 4];
            const setB = [3, 4, 5, 6];
            let result = [];
            
            switch(operation) {
                case 'union':
                    result = [...new Set([...setA, ...setB])];
                    break;
                case 'intersection':
                    result = setA.filter(x => setB.includes(x));
                    break;
                case 'difference':
                    result = setA.filter(x => !setB.includes(x));
                    break;
            }
            
            result.forEach(item => {
                const span = document.createElement('span');
                span.className = 'dropped-item';
                span.textContent = item;
                resultSet.appendChild(span);
            });
            
            addXP(20, `set-${operation}`);
        }

        function resetSetOperation() {
            document.getElementById('resultSet').innerHTML = '';
        }

        // Set problems
        function checkSetProblem(num) {
            if (num === 1) {
                const answer = document.getElementById('setProb1').value.replace(/\s/g, '');
                const feedback = document.getElementById('setProblem1Feedback');
                
                if (answer === '{a,e}' || answer === '{e,a}') {
                    feedback.innerHTML = '<span style="color: #10b981;">✅ Correct! The intersection contains elements in both sets.</span>';
                    addXP(25, 'set-problem1');
                } else {
                    feedback.innerHTML = '<span style="color: #ef4444;">❌ Not quite. Which letters appear in BOTH sets?</span>';
                }
            } else if (num === 2) {
                const answer = parseInt(document.getElementById('setProb2').value);
                const feedback = document.getElementById('setProblem2Feedback');
                
                if (answer === 5) {
                    feedback.innerHTML = '<span style="color: #10b981;">✅ Correct! Union combines unique elements: red, blue, yellow, green, purple.</span>';
                    addXP(25, 'set-problem2');
                } else {
                    feedback.innerHTML = '<span style="color: #ef4444;">❌ Count the unique colors when combining both sets.</span>';
                }
            }
        }

        // Set properties
        function checkSetProperties() {
            const correct = [
                !document.getElementById('setProp1').checked, // NO duplicates
                document.getElementById('setProp2').checked,  // NO order
                document.getElementById('setProp3').checked,  // Same type
                document.getElementById('setProp4').checked   // Math operations
            ];
            
            const score = correct.filter(c => c).length;
            const feedback = document.getElementById('setPropFeedback');
            
            if (score === 4) {
                feedback.innerHTML = '<span style="color: #10b981;">✅ Perfect! You understand all set properties!</span>';
                addXP(30, 'set-properties');
            } else {
                feedback.innerHTML = `<span style="color: #ef4444;">❌ ${score}/4 correct. Remember: sets have unique, unordered elements.</span>`;
            }
        }

        // Mark scheme functions
        function showMarkScheme(examId) {
            const answer = document.getElementById(examId).value;
            const marks = document.getElementById(`${examId}Marks`).value;
            
            if (answer.length < 100) {
                alert('Please attempt the question more thoroughly before viewing the mark scheme.');
                return;
            }
            
            if (!marks) {
                alert('Please enter your predicted marks first.');
                return;
            }
            
            document.getElementById(`${examId}MarkScheme`).classList.add('show');
            addXP(20, `markscheme-${examId}`);
        }

        // Final quiz functions
        function checkCompositeQuiz() {
            const correct = [
                document.getElementById('comp1').checked,  // Array - YES
                !document.getElementById('comp2').checked, // Integer - NO
                document.getElementById('comp3').checked,  // Record - YES
                !document.getElementById('comp4').checked, // Enumerated - NO
                document.getElementById('comp5').checked,  // Set - YES
                !document.getElementById('comp6').checked  // Pointer - NO
            ];
            
            const score = correct.filter(c => c).length;
            const feedback = document.getElementById('compositeQuizFeedback');
            
            if (score === 6) {
                feedback.innerHTML = '<span style="color: #10b981;">✅ Perfect! Array, Record, and Set are composite types!</span>';
                addXP(40, 'final-composite');
            } else {
                feedback.innerHTML = `<span style="color: #ef4444;">❌ ${score}/6 correct. Composite types contain multiple elements.</span>`;
            }
        }

        function checkFinalFill() {
            const answer = document.getElementById('final6').value.toLowerCase().trim();
            const feedback = document.getElementById('final6Feedback');
            
            if (answer === 'dot') {
                feedback.innerHTML = '<span style="color: #10b981;">✅ Correct! We use dot notation.</span>';
                addXP(20, 'final-fill');
            } else {
                feedback.innerHTML = '<span style="color: #ef4444;">❌ Think about the notation: record.field</span>';
            }
        }

        function checkFinalSet() {
            const answer = document.getElementById('final7').value.replace(/\s/g, '');
            const feedback = document.getElementById('final7Feedback');
            
            if (answer === '{2,3}' || answer === '{3,2}') {
                feedback.innerHTML = '<span style="color: #10b981;">✅ Correct! The intersection is {2, 3}.</span>';
                addXP(25, 'final-set');
            } else {
                feedback.innerHTML = '<span style="color: #ef4444;">❌ Find elements that appear in BOTH sets.</span>';
            }
        }

        // Drag and drop for ordering
        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.id);
        }

        function allowDrop(ev) {
            ev.preventDefault();
        }

        function drop(ev) {
            ev.preventDefault();
            const data = ev.dataTransfer.getData("text");
            ev.target.appendChild(document.getElementById(data));
        }

        function checkOrder() {
            const items = document.getElementById('orderItems').children;
            const order = Array.from(items).map(item => item.textContent);
            const correct = [
                'Define the enumerated type',
                'Declare a variable of the type',
                'Assign a value to the variable',
                'Use in comparisons or operations'
            ];
            
            let isCorrect = true;
            for (let i = 0; i < order.length; i++) {
                if (order[i] !== correct[i]) {
                    isCorrect = false;
                    break;
                }
            }
            
            const feedback = document.getElementById('orderFeedback');
            if (isCorrect) {
                feedback.innerHTML = '<span style="color: #10b981;">✅ Perfect order! You understand the process!</span>';
                addXP(30, 'final-order');
            } else {
                feedback.innerHTML = '<span style="color: #ef4444;">❌ Not quite right. Think about what must come first.</span>';
            }
        }

        // Complete lesson
        function completeLesson() {
            if (level < 5) {
                showAchievement('Lesson Complete!', `Great work! You reached Level ${level}. Try to reach Level 5!`);
            } else {
                showAchievement('Master Achievement!', 'You completed the lesson at maximum level! Outstanding!');
                createParticles();
            }
            
            // Show achievement summary
            const summary = document.getElementById('achievementSummary');
            summary.innerHTML = `
                <h4>Your Progress:</h4>
                <ul>
                    <li>Final Level: ${level}</li>
                    <li>Total XP: ${xp}</li>
                    <li>Activities Completed: ${completedActivities.size}</li>
                    <li>Achievements Earned: ${achievements.size}</li>
                </ul>
                <p><strong>Well done on completing the Data Types lesson!</strong></p>
            `;
        }

        // Canvas setup for drawing
        function setupCanvasIfNeeded() {
            // Would be implemented if drawing exercises were added
        }

        // Feedback system
        function openFeedback() {
            document.getElementById('feedbackModal').style.display = 'block';
        }

        function closeFeedback() {
            document.getElementById('feedbackModal').style.display = 'none';
        }

        function closeFeedbackModal(event) {
            if (event.target === document.getElementById('feedbackModal')) {
                closeFeedback();
            }
        }

        function sendFeedback() {
            const type = document.getElementById('feedbackType').value;
            const message = document.getElementById('feedbackMessage').value;
            const page = document.getElementById('currentPage').value;
            
            if (!message.trim()) {
                alert('Please enter a message');
                return;
            }
            
            // Construct email content
            const subject = `Data Types Worksheet - ${type}`;
            const body = `Feedback Type: ${type}\nPage: ${page}\n\nMessage:\n${message}\n\nCode Context:\nSection ${currentSection + 1}`;
            
            // Create mailto link
            const mailtoLink = `mailto:millingtond@mgs.org?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            window.location.href = mailtoLink;
            
            // Close modal
            closeFeedback();
            
            // Clear form
            document.getElementById('feedbackMessage').value = '';
            
            showAchievement('Feedback Sent!', 'Thank you for helping improve this worksheet!');
        }

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case 'ArrowLeft':
                        if (currentSection > 0) {
                            showSection(currentSection - 1);
                        }
                        break;
                    case 'ArrowRight':
                        if (currentSection < 9) {
                            showSection(currentSection + 1);
                        }
                        break;
                }
            }
        });

        // Touch support for mobile
        let touchStartX = 0;
        let touchEndX = 0;

        document.addEventListener('touchstart', function(e) {
            touchStartX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', function(e) {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            const swipeThreshold = 50;
            const diff = touchStartX - touchEndX;
            
            if (Math.abs(diff) > swipeThreshold) {
                if (diff > 0 && currentSection < 9) {
                    // Swipe left - next section
                    showSection(currentSection + 1);
                } else if (diff < 0 && currentSection > 0) {
                    // Swipe right - previous section
                    showSection(currentSection - 1);
                }
            }
        }

        // Performance optimization - lazy load images if any
        if ('IntersectionObserver' in window) {
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const image = entry.target;
                        image.src = image.dataset.src;
                        image.classList.remove('lazy');
                        imageObserver.unobserve(image);
                    }
                });
            });

            // Observe all images with class 'lazy'
            document.querySelectorAll('img.lazy').forEach(img => {
                imageObserver.observe(img);
            });
        }

        // Auto-save progress (would normally save to localStorage but that's disabled)
        let progress = {
            section: currentSection,
            xp: xp,
            level: level,
            completed: Array.from(completedActivities)
        };

        // Accessibility improvements
        document.querySelectorAll('button').forEach(button => {
            if (!button.getAttribute('aria-label')) {
                button.setAttribute('aria-label', button.textContent);
            }
        });

        // Add ARIA labels to interactive elements
        document.querySelectorAll('.drag-item').forEach(item => {
            item.setAttribute('role', 'button');
            item.setAttribute('aria-label', `Select ${item.textContent}`);
        });

        document.querySelectorAll('.drop-zone').forEach(zone => {
            zone.setAttribute('role', 'region');
            zone.setAttribute('aria-label', 'Drop zone for items');
        });

        // Reduced motion support
        if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
            document.documentElement.style.setProperty('--animation-duration', '0.01s');
        }

        // Extension activity tracker
        const extensionActivities = {
            'abstract-data-types': false,
            'linked-lists': false,
            'custom-types': false
        };

        // Initialize on page load
        window.addEventListener('load', function() {
            // Smooth scroll behavior
            document.documentElement.style.scrollBehavior = 'smooth';
            
            // Set initial state
            updateXPDisplay();
            
            // Focus management for accessibility
            document.querySelector('.section.active h2').focus();
        });

        // Handle visibility change to pause animations
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                // Pause any running animations
                document.querySelectorAll('.particle').forEach(p => p.remove());
            }
        });

        // Error boundary for robustness
        window.addEventListener('error', function(e) {
            console.error('Error caught:', e.error);
            // Could send error reports here
        });

        // Utility functions
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Debounced resize handler
        window.addEventListener('resize', debounce(function() {
            // Handle responsive layout adjustments
            if (window.innerWidth < 768) {
                document.body.classList.add('mobile');
            } else {
                document.body.classList.remove('mobile');
            }
        }, 250));

        // Print friendly version
        window.addEventListener('beforeprint', function() {
            document.body.classList.add('print-mode');
        });

        window.addEventListener('afterprint', function() {
            document.body.classList.remove('print-mode');
        });
    </script>
</body>
</html>