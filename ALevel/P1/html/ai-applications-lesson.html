<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Applications - A Level Computer Science</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --primary-dark: #1e40af;
            --primary-light: #60a5fa;
            --secondary-color: #7c3aed;
            --success-color: #10b981;
            --error-color: #ef4444;
            --warning-color: #f59e0b;
            --background: #f8fafc;
            --card-bg: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
            --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
        }

        body.high-contrast {
            --background: #000000;
            --card-bg: #1a1a1a;
            --text-primary: #ffffff;
            --text-secondary: #e0e0e0;
            --border-color: #4a4a4a;
        }

        body.dyslexia-font {
            font-family: 'OpenDyslexic', 'Comic Sans MS', sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 16px;
        }

        body.font-small { font-size: 14px; }
        body.font-large { font-size: 18px; }

        .header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1.5rem;
            box-shadow: var(--shadow-lg);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .xp-container {
            display: flex;
            align-items: center;
            gap: 1rem;
            background: rgba(255,255,255,0.2);
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            backdrop-filter: blur(10px);
        }

        .xp-bar {
            width: 200px;
            height: 20px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .xp-fill {
            height: 100%;
            background: linear-gradient(90deg, #fbbf24, #f59e0b);
            width: 0%;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        .xp-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.5) 50%, transparent 70%);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .nav-container {
            background: var(--card-bg);
            border-bottom: 1px solid var(--border-color);
            padding: 1rem;
            position: sticky;
            top: 80px;
            z-index: 999;
            box-shadow: var(--shadow);
        }

        .nav-pills {
            display: flex;
            gap: 0.5rem;
            overflow-x: auto;
            padding: 0.5rem;
            max-width: 1200px;
            margin: 0 auto;
            scrollbar-width: thin;
        }

        .nav-pill {
            padding: 0.5rem 1rem;
            background: var(--background);
            border: 1px solid var(--border-color);
            border-radius: 2rem;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s ease;
            color: var(--text-primary);
            text-decoration: none;
            font-size: 0.875rem;
        }

        .nav-pill:hover {
            background: var(--primary-light);
            color: white;
            transform: translateY(-2px);
        }

        .nav-pill.active {
            background: var(--primary-color);
            color: white;
            box-shadow: var(--shadow);
        }

        .nav-pill.completed::after {
            content: ' ‚úì';
            color: var(--success-color);
        }

        .main-content {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: var(--card-bg);
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }

        .card-title {
            font-size: 1.75rem;
            margin-bottom: 1.5rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .task-box {
            background: var(--background);
            border: 2px dashed var(--border-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .task-box.highlight {
            border-color: var(--primary-color);
            background: rgba(37, 99, 235, 0.05);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.4); }
            50% { box-shadow: 0 0 0 10px rgba(37, 99, 235, 0); }
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            margin: 0.25rem;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:active::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: var(--background);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: var(--border-color);
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-danger {
            background: var(--error-color);
            color: white;
        }

        .quiz-option {
            display: block;
            width: 100%;
            padding: 1rem;
            margin: 0.5rem 0;
            background: var(--background);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            cursor: pointer;
            text-align: left;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            background: var(--border-color);
            transform: translateX(5px);
        }

        .quiz-option.selected {
            background: var(--primary-light);
            color: white;
            border-color: var(--primary-color);
        }

        .quiz-option.correct {
            background: var(--success-color);
            color: white;
            border-color: var(--success-color);
        }

        .quiz-option.incorrect {
            background: var(--error-color);
            color: white;
            border-color: var(--error-color);
        }

        .input-field {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            font-size: 1rem;
            transition: border-color 0.3s ease;
            background: var(--card-bg);
            color: var(--text-primary);
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .matching-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }

        .matching-item {
            padding: 1rem;
            background: var(--background);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0.5rem 0;
        }

        .matching-item:hover {
            background: var(--border-color);
            transform: scale(1.02);
        }

        .matching-item.selected {
            background: var(--primary-light);
            color: white;
            border-color: var(--primary-color);
        }

        .matching-item.matched {
            background: var(--success-color);
            color: white;
            cursor: default;
            opacity: 0.7;
        }

        .achievement-popup {
            position: fixed;
            top: 100px;
            right: 20px;
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: var(--shadow-lg);
            transform: translateX(400px);
            transition: transform 0.5s ease;
            z-index: 2000;
            max-width: 300px;
            border: 2px solid var(--success-color);
        }

        .achievement-popup.show {
            transform: translateX(0);
        }

        .achievement-icon {
            font-size: 3rem;
            text-align: center;
            margin-bottom: 0.5rem;
            animation: bounce 0.5s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .simulation-container {
            background: var(--text-primary);
            color: white;
            padding: 2rem;
            border-radius: 0.5rem;
            margin: 1.5rem 0;
            position: relative;
            overflow: hidden;
        }

        .simulation-step {
            display: none;
            animation: slideIn 0.5s ease;
        }

        .simulation-step.active {
            display: block;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 1rem 0;
        }

        .highlight-box {
            background: rgba(37, 99, 235, 0.1);
            border-left: 4px solid var(--primary-color);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 0.5rem 0.5rem 0;
        }

        .feedback-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .feedback-btn:hover {
            transform: scale(1.1);
        }

        .feedback-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .feedback-content {
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 1rem;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .shame-message {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: var(--error-color);
            color: white;
            padding: 2rem;
            border-radius: 1rem;
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            z-index: 3000;
            box-shadow: var(--shadow-lg);
        }

        .shame-message.show {
            display: block;
            animation: shameAnimation 3s ease forwards;
        }

        @keyframes shameAnimation {
            0% { transform: translate(-50%, -50%) scale(0); }
            20% { transform: translate(-50%, -50%) scale(1.2); }
            40% { transform: translate(-50%, -50%) scale(0.9); }
            60% { transform: translate(-50%, -50%) scale(1.1); }
            80% { transform: translate(-50%, -50%) scale(1); }
            100% { transform: translate(-50%, -50%) scale(0); }
        }

        .canvas-container {
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            margin: 1rem 0;
            position: relative;
            background: white;
        }

        canvas {
            display: block;
            cursor: crosshair;
            touch-action: none;
        }

        .hint-container {
            display: none;
            background: rgba(245, 158, 11, 0.1);
            border-left: 4px solid var(--warning-color);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 0.5rem 0.5rem 0;
        }

        .hint-container.show {
            display: block;
        }

        .mark-scheme {
            display: none;
            background: rgba(16, 185, 129, 0.1);
            border: 2px solid var(--success-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .mark-scheme.show {
            display: block;
        }

        .progress-dots {
            display: flex;
            gap: 0.5rem;
            margin: 1rem 0;
            justify-content: center;
        }

        .progress-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--border-color);
            transition: all 0.3s ease;
        }

        .progress-dot.active {
            background: var(--primary-color);
            transform: scale(1.2);
        }

        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }

        .particle {
            position: absolute;
            background: var(--warning-color);
            border-radius: 50%;
            pointer-events: none;
            animation: fall linear forwards;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .accessibility-controls {
            position: fixed;
            top: 120px;
            right: 20px;
            background: var(--card-bg);
            padding: 1rem;
            border-radius: 0.5rem;
            box-shadow: var(--shadow-lg);
            display: none;
            z-index: 1000;
        }

        .accessibility-controls.show {
            display: block;
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }

            .xp-bar {
                width: 150px;
            }

            .matching-container {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .nav-pills {
                justify-content: flex-start;
            }

            .card {
                padding: 1rem;
            }

            .nav-container {
                top: 140px;
            }
        }

        /* Navigation arrows */
        .nav-arrows {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
            gap: 1rem;
        }

        /* Fill-in-blank specific styles */
        .fill-options {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 1rem 0;
            padding: 1rem;
            background: var(--background);
            border-radius: 0.5rem;
        }

        .fill-option {
            padding: 0.5rem 1rem;
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: 0.25rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .fill-option:hover {
            background: var(--primary-light);
            color: white;
        }

        .fill-option.used {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Sequencing styles */
        .sequence-container {
            margin: 1rem 0;
        }

        .sequence-item {
            padding: 1rem;
            background: var(--background);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            margin: 0.5rem 0;
            cursor: move;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .sequence-item.correct {
            background: rgba(16, 185, 129, 0.1);
            border-color: var(--success-color);
        }

        .sequence-number {
            width: 30px;
            height: 30px;
            background: var(--primary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header" role="banner">
        <div class="header-content">
            <h1>AI Applications - A Level Computer Science</h1>
            <div class="xp-container" role="status" aria-live="polite">
                <span>Level <span id="current-level">1</span></span>
                <div class="xp-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                    <div class="xp-fill" id="xp-fill"></div>
                </div>
                <span id="xp-text">0 / 100 XP</span>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav-container" role="navigation">
        <div class="nav-pills">
            <a href="#" class="nav-pill active" data-section="starter">Starter</a>
            <a href="#" class="nav-pill" data-section="fundamentals">AI Fundamentals</a>
            <a href="#" class="nav-pill" data-section="transportation">Transportation</a>
            <a href="#" class="nav-pill" data-section="medicine">Medicine</a>
            <a href="#" class="nav-pill" data-section="daily-life">Daily Life</a>
            <a href="#" class="nav-pill" data-section="data-analysis">Data Analysis</a>
            <a href="#" class="nav-pill" data-section="machine-learning">Machine Learning</a>
            <a href="#" class="nav-pill" data-section="impact">AI Impact</a>
            <a href="#" class="nav-pill" data-section="exam-practice">Exam Practice</a>
            <a href="#" class="nav-pill" data-section="summary">Summary</a>
            <a href="#" class="nav-pill" data-section="extension">Extension</a>
            <a href="#" class="nav-pill" data-section="videos">Videos</a>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Starter Activity -->
        <section id="starter" class="section active">
            <div class="card">
                <h2 class="card-title">üöÄ Starter Activity: AI in Our World</h2>
                
                <div class="highlight-box">
                    <p><strong>Learning Outcomes:</strong></p>
                    <ul>
                        <li>Show understanding of Artificial Intelligence (AI)</li>
                        <li>Understand the impact of AI including social, economic and environmental issues</li>
                        <li>Understand the applications of AI</li>
                    </ul>
                </div>

                <div class="task-box highlight">
                    <h3>Match the AI Application to its Real-World Use</h3>
                    <p>Click on an AI application, then click on its matching real-world use.</p>
                    
                    <div class="matching-container">
                        <div>
                            <h4>AI Applications</h4>
                            <div class="matching-item" data-match="1" data-id="app1">Facial Recognition</div>
                            <div class="matching-item" data-match="2" data-id="app2">Language Translation</div>
                            <div class="matching-item" data-match="3" data-id="app3">Medical Imaging</div>
                            <div class="matching-item" data-match="4" data-id="app4">Traffic Management</div>
                            <div class="matching-item" data-match="5" data-id="app5">Climate Modeling</div>
                        </div>
                        <div>
                            <h4>Real-World Uses</h4>
                            <div class="matching-item" data-match="3" data-id="use3">Detecting tumors in X-rays</div>
                            <div class="matching-item" data-match="1" data-id="use1">Unlocking smartphones</div>
                            <div class="matching-item" data-match="5" data-id="use5">Predicting weather patterns</div>
                            <div class="matching-item" data-match="4" data-id="use4">Optimizing traffic flow</div>
                            <div class="matching-item" data-match="2" data-id="use2">Real-time conversation translation</div>
                        </div>
                    </div>
                    
                    <button class="btn btn-secondary" onclick="resetMatching()">Reset Activity</button>
                    <button class="btn btn-primary" onclick="checkMatching()">Check Answers</button>
                </div>

                <div class="nav-arrows">
                    <button class="btn btn-secondary" disabled>‚Üê Previous</button>
                    <button class="btn btn-primary" onclick="navigateSection('fundamentals')">Next ‚Üí</button>
                </div>
            </div>
        </section>

        <!-- AI Fundamentals -->
        <section id="fundamentals" class="section">
            <div class="card">
                <h2 class="card-title">üß† AI Fundamentals</h2>
                
                <p>Artificial Intelligence (AI) refers to computer systems that can perform tasks that typically require human intelligence.</p>

                <div class="task-box">
                    <h3>True or False Quiz</h3>
                    <p>Determine if each statement about AI is true or false.</p>
                    
                    <div style="margin: 1rem 0;">
                        <p>1. AI can only work with numerical data.</p>
                        <button class="quiz-option" onclick="checkTrueFalse(this, 1, false)">True</button>
                        <button class="quiz-option" onclick="checkTrueFalse(this, 1, true)">False</button>
                    </div>
                    
                    <div style="margin: 1rem 0;">
                        <p>2. Machine learning is a subset of AI.</p>
                        <button class="quiz-option" onclick="checkTrueFalse(this, 2, true)">True</button>
                        <button class="quiz-option" onclick="checkTrueFalse(this, 2, false)">False</button>
                    </div>
                    
                    <div style="margin: 1rem 0;">
                        <p>3. AI systems can learn from past mistakes.</p>
                        <button class="quiz-option" onclick="checkTrueFalse(this, 3, true)">True</button>
                        <button class="quiz-option" onclick="checkTrueFalse(this, 3, false)">False</button>
                    </div>
                </div>

                <div class="task-box">
                    <h3>Fill in the Blanks</h3>
                    <p>Complete the sentences about AI by selecting the correct words.</p>
                    
                    <div class="fill-options">
                        <span class="fill-option" onclick="selectFillOption(this)">patterns</span>
                        <span class="fill-option" onclick="selectFillOption(this)">randomness</span>
                        <span class="fill-option" onclick="selectFillOption(this)">datasets</span>
                        <span class="fill-option" onclick="selectFillOption(this)">emotions</span>
                        <span class="fill-option" onclick="selectFillOption(this)">training</span>
                        <span class="fill-option" onclick="selectFillOption(this)">forgetting</span>
                        <span class="fill-option" onclick="selectFillOption(this)">analyzing</span>
                        <span class="fill-option" onclick="selectFillOption(this)">ignoring</span>
                    </div>
                    
                    <p>AI models are trained on large <input type="text" class="input-field" id="blank1" style="width: 150px;" placeholder="Select word"> 
                    by <input type="text" class="input-field" id="blank2" style="width: 150px;" placeholder="Select word"> 
                    data to identify <input type="text" class="input-field" id="blank3" style="width: 150px;" placeholder="Select word">.</p>
                    
                    <button class="btn btn-primary" onclick="checkFillBlanks()">Check Answers</button>
                    <button class="btn btn-secondary" onclick="resetFillBlanks()">Reset</button>
                </div>

                <div class="nav-arrows">
                    <button class="btn btn-secondary" onclick="navigateSection('starter')">‚Üê Previous</button>
                    <button class="btn btn-primary" onclick="navigateSection('transportation')">Next ‚Üí</button>
                </div>
            </div>
        </section>

        <!-- AI in Transportation -->
        <section id="transportation" class="section">
            <div class="card">
                <h2 class="card-title">üöó AI in Transportation</h2>
                
                <div class="highlight-box">
                    <p><strong>Key Applications:</strong></p>
                    <ul>
                        <li>Autonomous cars</li>
                        <li>Traffic management systems</li>
                        <li>Delay predictions</li>
                        <li>Drone taxis</li>
                    </ul>
                </div>

                <div class="task-box">
                    <h3>Simulation: Autonomous Vehicle Decision Making</h3>
                    <div class="simulation-container">
                        <div class="simulation-step active" data-step="1">
                            <h4>Step 1: Sensor Data Collection</h4>
                            <p>The autonomous vehicle uses multiple sensors to gather information:</p>
                            <ul>
                                <li>üé• Cameras detect objects and road signs</li>
                                <li>üì° LIDAR creates 3D maps of surroundings</li>
                                <li>üìä Radar measures object distances and speeds</li>
                            </ul>
                        </div>
                        
                        <div class="simulation-step" data-step="2">
                            <h4>Step 2: Data Processing</h4>
                            <p>AI algorithms process sensor data in real-time:</p>
                            <div class="code-block">
                                sensor_data = collect_all_sensors()<br>
                                objects = identify_objects(sensor_data)<br>
                                risks = assess_risk_levels(objects)
                            </div>
                        </div>
                        
                        <div class="simulation-step" data-step="3">
                            <h4>Step 3: Decision Making</h4>
                            <p>The AI makes driving decisions based on:</p>
                            <ul>
                                <li>Current traffic conditions</li>
                                <li>Road rules and regulations</li>
                                <li>Safety priorities</li>
                                <li>Destination route</li>
                            </ul>
                        </div>
                        
                        <div class="simulation-step" data-step="4">
                            <h4>Step 4: Action Execution</h4>
                            <p>The vehicle executes the decision:</p>
                            <ul>
                                <li>Adjusts speed accordingly</li>
                                <li>Changes lanes if necessary</li>
                                <li>Applies brakes for obstacles</li>
                                <li>Signals to other vehicles</li>
                            </ul>
                        </div>
                        
                        <div class="progress-dots">
                            <span class="progress-dot active" data-step="1"></span>
                            <span class="progress-dot" data-step="2"></span>
                            <span class="progress-dot" data-step="3"></span>
                            <span class="progress-dot" data-step="4"></span>
                        </div>
                        
                        <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                            <button class="btn btn-secondary" onclick="previousSimStep()">‚Üê Previous</button>
                            <button class="btn btn-primary" onclick="nextSimStep()">Next ‚Üí</button>
                        </div>
                    </div>
                </div>

                <div class="task-box">
                    <h3>Multiple Choice: Traffic Management AI</h3>
                    <p>How does AI improve traffic flow in smart cities?</p>
                    
                    <button class="quiz-option" onclick="checkMCQ(this, 'traffic', false)">By randomly changing traffic light timings</button>
                    <button class="quiz-option" onclick="checkMCQ(this, 'traffic', false)">By closing roads during rush hour</button>
                    <button class="quiz-option" onclick="checkMCQ(this, 'traffic', true)">By analyzing real-time data to optimize signal timing</button>
                    <button class="quiz-option" onclick="checkMCQ(this, 'traffic', false)">By preventing all vehicles from entering the city</button>
                </div>

                <div class="nav-arrows">
                    <button class="btn btn-secondary" onclick="navigateSection('fundamentals')">‚Üê Previous</button>
                    <button class="btn btn-primary" onclick="navigateSection('medicine')">Next ‚Üí</button>
                </div>
            </div>
        </section>

        <!-- AI in Medicine -->
        <section id="medicine" class="section">
            <div class="card">
                <h2 class="card-title">‚öïÔ∏è AI in Medicine</h2>
                
                <div class="highlight-box">
                    <p><strong>Medical AI Applications:</strong></p>
                    <ul>
                        <li>Virtual Nursing Assistants</li>
                        <li>Robot-assisted surgery</li>
                        <li>Precision Medicine (individualized drugs)</li>
                        <li>Early disease detection</li>
                        <li>Symptom checkers</li>
                        <li>Drug development simulations</li>
                    </ul>
                </div>

                <div class="task-box">
                    <h3>Sequencing: AI Medical Diagnosis Process</h3>
                    <p>Arrange these steps in the correct order for AI medical diagnosis:</p>
                    
                    <div class="sequence-container" id="medical-sequence">
                        <div class="sequence-item" data-order="3">
                            <span class="sequence-number">?</span>
                            <span>AI compares scan with database of known conditions</span>
                        </div>
                        <div class="sequence-item" data-order="1">
                            <span class="sequence-number">?</span>
                            <span>Patient undergoes medical imaging (X-ray, MRI, etc.)</span>
                        </div>
                        <div class="sequence-item" data-order="4">
                            <span class="sequence-number">?</span>
                            <span>AI generates probability scores for different diagnoses</span>
                        </div>
                        <div class="sequence-item" data-order="2">
                            <span class="sequence-number">?</span>
                            <span>Digital scan is processed and enhanced by AI</span>
                        </div>
                        <div class="sequence-item" data-order="5">
                            <span class="sequence-number">?</span>
                            <span>Doctor reviews AI findings and makes final diagnosis</span>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="checkSequence()">Check Order</button>
                    <button class="btn btn-secondary" onclick="resetSequence()">Reset</button>
                </div>

                <div class="task-box">
                    <h3>Analysis Question</h3>
                    <p>Explain how AI improves precision medicine. Include at least 3 key points.</p>
                    <textarea class="input-field" id="precision-medicine" rows="6" placeholder="Start your answer here..."></textarea>
                    <button class="btn btn-primary" onclick="checkAnalysis('precision-medicine')">Submit Answer</button>
                    <button class="btn btn-secondary" onclick="showHint('precision-medicine')">Show Hint</button>
                    
                    <div class="hint-container" id="hint-precision-medicine">
                        <p>üí° Think about: genetic analysis, personalized treatment plans, drug dosage optimization</p>
                    </div>
                </div>

                <div class="nav-arrows">
                    <button class="btn btn-secondary" onclick="navigateSection('transportation')">‚Üê Previous</button>
                    <button class="btn btn-primary" onclick="navigateSection('daily-life')">Next ‚Üí</button>
                </div>
            </div>
        </section>

        <!-- AI in Daily Life -->
        <section id="daily-life" class="section">
            <div class="card">
                <h2 class="card-title">üì± AI in Daily Life</h2>
                
                <div class="task-box">
                    <h3>Categorization: AI Applications</h3>
                    <p>Categorize these AI applications by their primary function:</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin: 1rem 0;">
                        <div>
                            <h4>Security & Authentication</h4>
                            <div class="category-box" id="security" style="min-height: 100px; border: 2px dashed var(--border-color); padding: 1rem; border-radius: 0.5rem;"></div>
                        </div>
                        <div>
                            <h4>Communication</h4>
                            <div class="category-box" id="communication" style="min-height: 100px; border: 2px dashed var(--border-color); padding: 1rem; border-radius: 0.5rem;"></div>
                        </div>
                        <div>
                            <h4>Entertainment</h4>
                            <div class="category-box" id="entertainment" style="min-height: 100px; border: 2px dashed var(--border-color); padding: 1rem; border-radius: 0.5rem;"></div>
                        </div>
                    </div>
                    
                    <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 1rem 0;">
                        <span class="fill-option" onclick="categorizeItem(this, 'security')">Face ID</span>
                        <span class="fill-option" onclick="categorizeItem(this, 'communication')">Voice assistants</span>
                        <span class="fill-option" onclick="categorizeItem(this, 'entertainment')">Movie recommendations</span>
                        <span class="fill-option" onclick="categorizeItem(this, 'security')">Fingerprint scanning</span>
                        <span class="fill-option" onclick="categorizeItem(this, 'communication')">Email spam filters</span>
                        <span class="fill-option" onclick="categorizeItem(this, 'entertainment')">Music playlists</span>
                    </div>
                    
                    <button class="btn btn-primary" onclick="checkCategories()">Check Categories</button>
                    <button class="btn btn-secondary" onclick="resetCategories()">Reset</button>
                </div>

                <div class="task-box">
                    <h3>Problem Solving: Language Translation AI</h3>
                    <p>A company needs to translate their website into 20 languages. Calculate the time saved using AI:</p>
                    
                    <ul>
                        <li>Human translator: 40 hours per language</li>
                        <li>AI translation + human review: 5 hours per language</li>
                    </ul>
                    
                    <p>Show your calculation:</p>
                    <div class="canvas-container">
                        <canvas id="calculation-canvas" width="600" height="200"></canvas>
                    </div>
                    <button class="btn btn-secondary" onclick="clearCanvas()">Clear Canvas</button>
                    
                    <p>Total hours saved: <input type="number" class="input-field" id="hours-saved" style="width: 100px;"> hours</p>
                    <button class="btn btn-primary" onclick="checkCalculation()">Check Answer</button>
                </div>

                <div class="nav-arrows">
                    <button class="btn btn-secondary" onclick="navigateSection('medicine')">‚Üê Previous</button>
                    <button class="btn btn-primary" onclick="navigateSection('data-analysis')">Next ‚Üí</button>
                </div>
            </div>
        </section>

        <!-- Data Analysis -->
        <section id="data-analysis" class="section">
            <div class="card">
                <h2 class="card-title">üìä AI in Data Analysis</h2>
                
                <div class="highlight-box">
                    <p><strong>Key Applications:</strong></p>
                    <ul>
                        <li>Weather forecasting</li>
                        <li>Climate change predictions</li>
                        <li>Financial market analysis</li>
                        <li>Scientific research</li>
                    </ul>
                </div>

                <div class="task-box">
                    <h3>Odd One Out</h3>
                    <p>Which of these is NOT typically a use of AI in weather forecasting?</p>
                    
                    <button class="quiz-option" onclick="checkOddOne(this, false)">Analyzing satellite imagery</button>
                    <button class="quiz-option" onclick="checkOddOne(this, false)">Processing historical weather data</button>
                    <button class="quiz-option" onclick="checkOddOne(this, true)">Controlling the weather patterns</button>
                    <button class="quiz-option" onclick="checkOddOne(this, false)">Predicting storm paths</button>
                </div>

                <div class="task-box">
                    <h3>Compare and Contrast</h3>
                    <p>Compare traditional weather forecasting with AI-powered forecasting:</p>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin: 1rem 0;">
                        <div>
                            <h4>Traditional Forecasting</h4>
                            <textarea class="input-field" id="traditional-forecast" rows="5" placeholder="List characteristics..."></textarea>
                        </div>
                        <div>
                            <h4>AI-Powered Forecasting</h4>
                            <textarea class="input-field" id="ai-forecast" rows="5" placeholder="List characteristics..."></textarea>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="checkComparison()">Submit Comparison</button>
                </div>

                <div class="nav-arrows">
                    <button class="btn btn-secondary" onclick="navigateSection('daily-life')">‚Üê Previous</button>
                    <button class="btn btn-primary" onclick="navigateSection('machine-learning')">Next ‚Üí</button>
                </div>
            </div>
        </section>

        <!-- Machine Learning -->
        <section id="machine-learning" class="section">
            <div class="card">
                <h2 class="card-title">ü§ñ Machine Learning</h2>
                
                <div class="highlight-box">
                    <p><strong>Key Concepts:</strong></p>
                    <ul>
                        <li>AI models are trained on large datasets</li>
                        <li>Running many times using data</li>
                        <li>Machines can learn from past mistakes</li>
                        <li>Analysing patterns of choices</li>
                        <li>Storing positive or negative results</li>
                        <li>Changing future choices</li>
                    </ul>
                </div>

                <div class="task-box">
                    <h3>Interactive Simulation: Training an AI Model</h3>
                    <div class="simulation-container">
                        <div class="simulation-step active" data-step="1">
                            <h4>Step 1: Data Collection</h4>
                            <p>Gather large amounts of relevant data for training:</p>
                            <div class="code-block">
                                training_data = collect_data(source="various_databases")<br>
                                data_size = len(training_data)  # e.g., 1,000,000 samples
                            </div>
                        </div>
                        
                        <div class="simulation-step" data-step="2">
                            <h4>Step 2: Data Preprocessing</h4>
                            <p>Clean and prepare data for training:</p>
                            <ul>
                                <li>Remove errors and duplicates</li>
                                <li>Normalize values</li>
                                <li>Split into training and testing sets</li>
                            </ul>
                        </div>
                        
                        <div class="simulation-step" data-step="3">
                            <h4>Step 3: Model Training</h4>
                            <p>The AI learns patterns from the data:</p>
                            <div class="code-block">
                                model = create_neural_network()<br>
                                epochs = 100  # Run training 100 times<br>
                                model.train(training_data, epochs)
                            </div>
                        </div>
                        
                        <div class="simulation-step" data-step="4">
                            <h4>Step 4: Learning from Mistakes</h4>
                            <p>The model adjusts based on errors:</p>
                            <ul>
                                <li>Calculate prediction error</li>
                                <li>Adjust model weights</li>
                                <li>Store successful patterns</li>
                                <li>Improve future predictions</li>
                            </ul>
                        </div>
                        
                        <div class="progress-dots">
                            <span class="progress-dot active" data-step="1"></span>
                            <span class="progress-dot" data-step="2"></span>
                            <span class="progress-dot" data-step="3"></span>
                            <span class="progress-dot" data-step="4"></span>
                        </div>
                        
                        <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                            <button class="btn btn-secondary" onclick="previousMLStep()">‚Üê Previous</button>
                            <button class="btn btn-primary" onclick="nextMLStep()">Next ‚Üí</button>
                        </div>
                    </div>
                </div>

                <div class="task-box">
                    <h3>Short Answer: Machine Learning Process</h3>
                    <p>Explain how machines learn from past mistakes in your own words:</p>
                    <textarea class="input-field" id="ml-explanation" rows="4" placeholder="Your explanation..."></textarea>
                    <button class="btn btn-primary" onclick="checkMLExplanation()">Submit Answer</button>
                </div>

                <div class="nav-arrows">
                    <button class="btn btn-secondary" onclick="navigateSection('data-analysis')">‚Üê Previous</button>
                    <button class="btn btn-primary" onclick="navigateSection('impact')">Next ‚Üí</button>
                </div>
            </div>
        </section>

        <!-- AI Impact -->
        <section id="impact" class="section">
            <div class="card">
                <h2 class="card-title">üåç Impact of AI</h2>
                
                <div class="task-box">
                    <h3>Ranking Exercise: AI Impacts</h3>
                    <p>Rank these AI impacts from most positive (1) to most concerning (5):</p>
                    
                    <div id="ranking-items">
                        <div class="sequence-item" data-item="healthcare">
                            <input type="number" class="input-field" style="width: 50px;" min="1" max="5">
                            <span>Improved healthcare diagnosis and treatment</span>
                        </div>
                        <div class="sequence-item" data-item="jobs">
                            <input type="number" class="input-field" style="width: 50px;" min="1" max="5">
                            <span>Job displacement in certain industries</span>
                        </div>
                        <div class="sequence-item" data-item="efficiency">
                            <input type="number" class="input-field" style="width: 50px;" min="1" max="5">
                            <span>Increased productivity and efficiency</span>
                        </div>
                        <div class="sequence-item" data-item="privacy">
                            <input type="number" class="input-field" style="width: 50px;" min="1" max="5">
                            <span>Privacy concerns with data collection</span>
                        </div>
                        <div class="sequence-item" data-item="accessibility">
                            <input type="number" class="input-field" style="width: 50px;" min="1" max="5">
                            <span>Better accessibility for disabled users</span>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="checkRanking()">Submit Ranking</button>
                    <p style="margin-top: 1rem; font-style: italic;">Note: There's no single correct answer - justify your ranking!</p>
                </div>

                <div class="task-box">
                    <h3>Evaluation: AI's Environmental Impact</h3>
                    <p>Evaluate the environmental impact of AI. Consider both positive and negative aspects:</p>
                    
                    <div style="margin: 1rem 0;">
                        <h4>Positive Environmental Impacts:</h4>
                        <textarea class="input-field" id="positive-impact" rows="3" placeholder="List positive impacts..."></textarea>
                    </div>
                    
                    <div style="margin: 1rem 0;">
                        <h4>Negative Environmental Impacts:</h4>
                        <textarea class="input-field" id="negative-impact" rows="3" placeholder="List negative impacts..."></textarea>
                    </div>
                    
                    <button class="btn btn-primary" onclick="checkEnvironmentalImpact()">Submit Evaluation</button>
                </div>

                <div class="nav-arrows">
                    <button class="btn btn-secondary" onclick="navigateSection('machine-learning')">‚Üê Previous</button>
                    <button class="btn btn-primary" onclick="navigateSection('exam-practice')">Next ‚Üí</button>
                </div>
            </div>
        </section>

        <!-- Exam Practice -->
        <section id="exam-practice" class="section">
            <div class="card">
                <h2 class="card-title">üìù Exam Practice</h2>
                
                <div class="task-box">
                    <h3>Question 1 (4 marks)</h3>
                    <p>Explain how AI models are trained. In your answer, refer to:</p>
                    <ul>
                        <li>Large datasets</li>
                        <li>Running many times using data</li>
                        <li>Learning from mistakes</li>
                        <li>Pattern analysis</li>
                    </ul>
                    
                    <textarea class="input-field" id="exam-q1" rows="8" placeholder="Write your answer here..."></textarea>
                    
                    <div style="margin-top: 1rem;">
                        <label>Predicted marks: <input type="number" id="marks-q1" min="0" max="4" style="width: 50px;" class="input-field"></label>
                        <button class="btn btn-secondary" onclick="showMarkScheme('q1')">Show Mark Scheme</button>
                    </div>
                    
                    <div class="mark-scheme" id="mark-scheme-q1">
                        <h4>Mark Scheme:</h4>
                        <ul>
                            <li>Reference to training on large datasets (1 mark)</li>
                            <li>Explanation of running multiple iterations/epochs (1 mark)</li>
                            <li>Description of error correction/learning from mistakes (1 mark)</li>
                            <li>Mention of pattern recognition and storage (1 mark)</li>
                        </ul>
                    </div>
                </div>

                <div class="task-box">
                    <h3>Question 2 (6 marks)</h3>
                    <p>Discuss three applications of AI in medicine. For each application, explain how it improves healthcare.</p>
                    
                    <textarea class="input-field" id="exam-q2" rows="10" placeholder="Write your answer here..."></textarea>
                    
                    <div style="margin-top: 1rem;">
                        <label>Predicted marks: <input type="number" id="marks-q2" min="0" max="6" style="width: 50px;" class="input-field"></label>
                        <button class="btn btn-secondary" onclick="showMarkScheme('q2')">Show Mark Scheme</button>
                    </div>
                    
                    <div class="mark-scheme" id="mark-scheme-q2">
                        <h4>Mark Scheme:</h4>
                        <p>2 marks per application (1 for naming, 1 for explanation):</p>
                        <ul>
                            <li>Virtual Nursing Assistants - 24/7 patient monitoring</li>
                            <li>Robot surgery - increased precision</li>
                            <li>Early disease detection - improved survival rates</li>
                            <li>Precision medicine - personalized treatment</li>
                            <li>Drug development - faster testing</li>
                        </ul>
                    </div>
                </div>

                <div class="nav-arrows">
                    <button class="btn btn-secondary" onclick="navigateSection('impact')">‚Üê Previous</button>
                    <button class="btn btn-primary" onclick="navigateSection('summary')">Next ‚Üí</button>
                </div>
            </div>
        </section>

        <!-- Summary -->
        <section id="summary" class="section">
            <div class="card">
                <h2 class="card-title">üìã Summary & Final Quiz</h2>
                
                <div class="highlight-box">
                    <p><strong>Key Takeaways:</strong></p>
                    <ul>
                        <li>AI can perform tasks requiring human intelligence</li>
                        <li>Applications span transportation, medicine, daily life, and data analysis</li>
                        <li>Machine learning allows AI to improve over time</li>
                        <li>AI has significant social, economic, and environmental impacts</li>
                    </ul>
                </div>

                <div class="task-box">
                    <h3>Final Assessment Quiz</h3>
                    
                    <div style="margin: 1rem 0;">
                        <p><strong>1. Which AI application is used for unlocking smartphones?</strong></p>
                        <button class="quiz-option" onclick="checkFinalQuiz(this, 1, false)">Language translation</button>
                        <button class="quiz-option" onclick="checkFinalQuiz(this, 1, true)">Facial recognition</button>
                        <button class="quiz-option" onclick="checkFinalQuiz(this, 1, false)">Climate modeling</button>
                        <button class="quiz-option" onclick="checkFinalQuiz(this, 1, false)">Traffic management</button>
                    </div>

                    <div style="margin: 1rem 0;">
                        <p><strong>2. What do autonomous vehicles use to detect obstacles?</strong></p>
                        <button class="quiz-option" onclick="checkFinalQuiz(this, 2, false)">Only GPS signals</button>
                        <button class="quiz-option" onclick="checkFinalQuiz(this, 2, false)">Human drivers</button>
                        <button class="quiz-option" onclick="checkFinalQuiz(this, 2, true)">Multiple sensors including cameras and LIDAR</button>
                        <button class="quiz-option" onclick="checkFinalQuiz(this, 2, false)">Radio waves only</button>
                    </div>

                    <div style="margin: 1rem 0;">
                        <p><strong>3. How does AI improve drug development?</strong></p>
                        <button class="quiz-option" onclick="checkFinalQuiz(this, 3, true)">Through more accurate simulations</button>
                        <button class="quiz-option" onclick="checkFinalQuiz(this, 3, false)">By replacing all human researchers</button>
                        <button class="quiz-option" onclick="checkFinalQuiz(this, 3, false)">By making drugs unnecessary</button>
                        <button class="quiz-option" onclick="checkFinalQuiz(this, 3, false)">By slowing down the process</button>
                    </div>

                    <div style="margin: 1rem 0;">
                        <p><strong>4. What is precision medicine?</strong></p>
                        <button class="quiz-option" onclick="checkFinalQuiz(this, 4, false)">Using robots for all surgeries</button>
                        <button class="quiz-option" onclick="checkFinalQuiz(this, 4, true)">Individualized treatment based on patient data</button>
                        <button class="quiz-option" onclick="checkFinalQuiz(this, 4, false)">Making medicine more expensive</button>
                        <button class="quiz-option" onclick="checkFinalQuiz(this, 4, false)">Removing human doctors</button>
                    </div>

                    <div style="margin: 1rem 0;">
                        <p><strong>5. How do AI models learn from mistakes?</strong></p>
                        <button class="quiz-option" onclick="checkFinalQuiz(this, 5, false)">They don't learn from mistakes</button>
                        <button class="quiz-option" onclick="checkFinalQuiz(this, 5, false)">By deleting all data</button>
                        <button class="quiz-option" onclick="checkFinalQuiz(this, 5, true)">By analyzing patterns and adjusting future choices</button>
                        <button class="quiz-option" onclick="checkFinalQuiz(this, 5, false)">By asking humans for help</button>
                    </div>

                    <div style="margin: 1rem 0;">
                        <p><strong>6. Which is NOT a typical use of AI in transportation?</strong></p>
                        <button class="quiz-option" onclick="checkFinalQuiz(this, 6, false)">Traffic flow optimization</button>
                        <button class="quiz-option" onclick="checkFinalQuiz(this, 6, true)">Teleportation of vehicles</button>
                        <button class="quiz-option" onclick="checkFinalQuiz(this, 6, false)">Delay predictions</button>
                        <button class="quiz-option" onclick="checkFinalQuiz(this, 6, false)">Route planning</button>
                    </div>

                    <button class="btn btn-primary" onclick="calculateFinalScore()">Calculate Final Score</button>
                    <div id="final-score" style="margin-top: 1rem; font-size: 1.2rem; font-weight: bold;"></div>
                </div>

                <div class="nav-arrows">
                    <button class="btn btn-secondary" onclick="navigateSection('exam-practice')">‚Üê Previous</button>
                    <button class="btn btn-primary" onclick="navigateSection('extension')">Next ‚Üí</button>
                </div>
            </div>
        </section>

        <!-- Extension -->
        <section id="extension" class="section">
            <div class="card">
                <h2 class="card-title">üåü Extension Activities</h2>
                
                <div class="task-box">
                    <h3>Research Task: Emerging AI Technologies</h3>
                    <p>Research and describe an emerging AI technology not covered in this lesson:</p>
                    
                    <textarea class="input-field" id="extension-research" rows="6" placeholder="Describe the technology, its applications, and potential impacts..."></textarea>
                    
                    <button class="btn btn-primary" onclick="submitExtension('research')">Submit Research</button>
                </div>

                <div class="task-box">
                    <h3>Creative Task: Design an AI Solution</h3>
                    <p>Design an AI solution for a real-world problem in your community:</p>
                    
                    <div style="margin: 1rem 0;">
                        <label>Problem to solve:</label>
                        <input type="text" class="input-field" id="ai-problem" placeholder="Describe the problem...">
                    </div>
                    
                    <div style="margin: 1rem 0;">
                        <label>AI solution:</label>
                        <textarea class="input-field" id="ai-solution" rows="4" placeholder="Describe your AI solution..."></textarea>
                    </div>
                    
                    <button class="btn btn-primary" onclick="submitExtension('creative')">Submit Design</button>
                </div>

                <div class="nav-arrows">
                    <button class="btn btn-secondary" onclick="navigateSection('summary')">‚Üê Previous</button>
                    <button class="btn btn-primary" onclick="navigateSection('videos')">Next ‚Üí</button>
                </div>
            </div>
        </section>

        <!-- Videos -->
        <section id="videos" class="section">
            <div class="card">
                <h2 class="card-title">üé• Video Resources</h2>
                
                <div class="highlight-box">
                    <p>Your teacher will add relevant video links here to support your learning about AI applications.</p>
                </div>

                <div style="background: var(--background); padding: 3rem; text-align: center; border-radius: 1rem; margin: 2rem 0;">
                    <p style="font-size: 4rem;">üìπ</p>
                    <p style="color: var(--text-secondary);">Video content will be added here</p>
                </div>

                <div class="nav-arrows">
                    <button class="btn btn-secondary" onclick="navigateSection('extension')">‚Üê Previous</button>
                    <button class="btn btn-primary" onclick="navigateSection('starter')">Back to Start</button>
                </div>
            </div>
        </section>
    </main>

    <!-- Achievement Popup -->
    <div class="achievement-popup" id="achievement-popup">
        <div class="achievement-icon">üèÜ</div>
        <h3 id="achievement-title">Achievement Unlocked!</h3>
        <p id="achievement-desc">Description</p>
    </div>

    <!-- Shame Message -->
    <div class="shame-message" id="shame-message">
        üö´ No pasting allowed! Type your own answers! üö´
    </div>

    <!-- Feedback Button -->
    <button class="feedback-btn" onclick="openFeedback()" aria-label="Send feedback">
        üí¨
    </button>

    <!-- Feedback Modal -->
    <div class="feedback-modal" id="feedback-modal">
        <div class="feedback-content">
            <h3>Send Feedback</h3>
            <p>Found a bug or have a suggestion?</p>
            <p>Current section: <span id="feedback-section"></span></p>
            <textarea class="input-field" id="feedback-text" rows="4" placeholder="Describe the issue..."></textarea>
            <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                <button class="btn btn-secondary" onclick="closeFeedback()">Cancel</button>
                <button class="btn btn-primary" onclick="sendFeedback()">Send</button>
            </div>
        </div>
    </div>

    <!-- Accessibility Controls -->
    <button class="btn btn-secondary" style="position: fixed; top: 120px; right: 20px;" onclick="toggleAccessibility()">
        ‚ôø Accessibility
    </button>
    
    <div class="accessibility-controls" id="accessibility-controls">
        <h4>Accessibility Options</h4>
        <button class="btn btn-secondary" onclick="toggleHighContrast()">High Contrast</button>
        <button class="btn btn-secondary" onclick="toggleDyslexiaFont()">Dyslexia Font</button>
        <div style="margin-top: 1rem;">
            <label>Font Size:</label>
            <button class="btn btn-secondary" onclick="changeFontSize('small')">A-</button>
            <button class="btn btn-secondary" onclick="changeFontSize('normal')">A</button>
            <button class="btn btn-secondary" onclick="changeFontSize('large')">A+</button>
        </div>
    </div>

    <!-- Particle Container -->
    <div class="particles" id="particles"></div>

    <script>
        // Game State
        let gameState = {
            xp: 0,
            level: 1,
            completedSections: new Set(),
            achievements: new Set(),
            currentSection: 'starter',
            matchingSelections: {},
            correctAnswers: 0,
            totalQuestions: 0,
            actionsPerformed: new Set()
        };

        // XP Requirements per level
        const XP_PER_LEVEL = [0, 100, 250, 450, 700];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            updateXPDisplay();
            initCanvas();
            setupAccessibility();
        });

        // Event Listeners
        function setupEventListeners() {
            // Navigation
            document.querySelectorAll('.nav-pill').forEach(pill => {
                pill.addEventListener('click', function(e) {
                    e.preventDefault();
                    navigateToSection(this.dataset.section);
                });
            });

            // Prevent paste only in input fields and textareas
            document.addEventListener('paste', function(e) {
                if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                    e.preventDefault();
                    showShameMessage();
                    return false;
                }
            });

            // Keyboard navigation
            document.addEventListener('keydown', function(e) {
                if (e.key === 'ArrowLeft') {
                    navigatePrevious();
                } else if (e.key === 'ArrowRight') {
                    navigateNext();
                }
            });

            // Touch gestures for mobile
            let touchStartX = 0;
            document.addEventListener('touchstart', function(e) {
                touchStartX = e.touches[0].clientX;
            });

            document.addEventListener('touchend', function(e) {
                const touchEndX = e.changedTouches[0].clientX;
                const diff = touchStartX - touchEndX;
                
                if (Math.abs(diff) > 50) {
                    if (diff > 0) {
                        navigateNext();
                    } else {
                        navigatePrevious();
                    }
                }
            });
        }

        // Navigation
        function navigateToSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-pill').forEach(p => p.classList.remove('active'));
            
            document.getElementById(sectionId).classList.add('active');
            document.querySelector(`[data-section="${sectionId}"]`).classList.add('active');
            
            gameState.currentSection = sectionId;
            document.getElementById('feedback-section').textContent = sectionId;
            
            if (!gameState.completedSections.has(sectionId)) {
                awardXP(5, 'Section visited: ' + sectionId);
            }
        }

        function navigateSection(sectionId) {
            navigateToSection(sectionId);
        }

        function navigatePrevious() {
            const sections = ['starter', 'fundamentals', 'transportation', 'medicine', 'daily-life', 
                            'data-analysis', 'machine-learning', 'impact', 'exam-practice', 'summary', 
                            'extension', 'videos'];
            const currentIndex = sections.indexOf(gameState.currentSection);
            if (currentIndex > 0) {
                navigateToSection(sections[currentIndex - 1]);
            }
        }

        function navigateNext() {
            const sections = ['starter', 'fundamentals', 'transportation', 'medicine', 'daily-life', 
                            'data-analysis', 'machine-learning', 'impact', 'exam-practice', 'summary', 
                            'extension', 'videos'];
            const currentIndex = sections.indexOf(gameState.currentSection);
            if (currentIndex < sections.length - 1) {
                navigateToSection(sections[currentIndex + 1]);
            }
        }

        // XP System
        function awardXP(amount, action, once = true) {
            if (once && gameState.actionsPerformed.has(action)) {
                return;
            }
            
            gameState.actionsPerformed.add(action);
            gameState.xp += amount;
            updateXPDisplay();
            checkLevelUp();
            createParticles();
        }

        function updateXPDisplay() {
            const xpRequired = XP_PER_LEVEL[gameState.level] || XP_PER_LEVEL[XP_PER_LEVEL.length - 1];
            const xpProgress = (gameState.xp / xpRequired) * 100;
            
            document.getElementById('xp-fill').style.width = xpProgress + '%';
            document.getElementById('xp-text').textContent = `${gameState.xp} / ${xpRequired} XP`;
            document.getElementById('current-level').textContent = gameState.level;
        }

        function checkLevelUp() {
            if (gameState.level >= 5) return;
            
            const xpRequired = XP_PER_LEVEL[gameState.level];
            if (gameState.xp >= xpRequired) {
                gameState.level++;
                showAchievement('Level Up!', `You reached Level ${gameState.level}!`);
                updateXPDisplay();
            }
        }

        // Achievements
        function showAchievement(title, desc) {
            const popup = document.getElementById('achievement-popup');
            document.getElementById('achievement-title').textContent = title;
            document.getElementById('achievement-desc').textContent = desc;
            
            popup.classList.add('show');
            setTimeout(() => popup.classList.remove('show'), 3000);
            
            // Haptic feedback for mobile
            if ('vibrate' in navigator) {
                navigator.vibrate(200);
            }
        }

        // Particle Effects
        function createParticles() {
            const container = document.getElementById('particles');
            for (let i = 0; i < 10; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * window.innerWidth + 'px';
                particle.style.width = particle.style.height = (Math.random() * 8 + 4) + 'px';
                particle.style.animationDuration = (Math.random() * 2 + 1) + 's';
                container.appendChild(particle);
                
                setTimeout(() => particle.remove(), 3000);
            }
        }

        // Starter Activity - Matching
        let selectedItem = null;

        document.querySelectorAll('.matching-item').forEach(item => {
            item.addEventListener('click', function() {
                if (this.classList.contains('matched')) return;
                
                if (!selectedItem) {
                    selectedItem = this;
                    this.classList.add('selected');
                } else {
                    if (selectedItem.dataset.match === this.dataset.match) {
                        selectedItem.classList.add('matched');
                        this.classList.add('matched');
                        selectedItem.classList.remove('selected');
                        awardXP(10, 'Match: ' + selectedItem.dataset.id);
                    } else {
                        selectedItem.classList.remove('selected');
                    }
                    selectedItem = null;
                }
            });
        });

        function resetMatching() {
            document.querySelectorAll('.matching-item').forEach(item => {
                item.classList.remove('matched', 'selected');
            });
            selectedItem = null;
        }

        function checkMatching() {
            const matched = document.querySelectorAll('.matching-item.matched').length;
            if (matched === 10) {
                awardXP(20, 'Completed matching activity');
                markSectionComplete('starter');
                showAchievement('Perfect Match!', 'All items correctly matched!');
            } else {
                alert(`You matched ${matched/2} out of 5 pairs correctly. Try again!`);
            }
        }

        // True/False Questions
        function checkTrueFalse(button, questionNum, isCorrect) {
            const buttons = button.parentElement.querySelectorAll('.quiz-option');
            buttons.forEach(btn => btn.classList.remove('selected', 'correct', 'incorrect'));
            
            button.classList.add('selected');
            if (isCorrect) {
                button.classList.add('correct');
                awardXP(5, `TF Question ${questionNum}`);
            } else {
                button.classList.add('incorrect');
            }
        }

        // Fill in the Blanks
        let selectedFillOption = null;

        function selectFillOption(option) {
            if (option.classList.contains('used')) return;
            
            document.querySelectorAll('.fill-option').forEach(opt => {
                if (!opt.classList.contains('used')) {
                    opt.style.background = '';
                    opt.style.color = '';
                }
            });
            
            selectedFillOption = option;
            option.style.background = 'var(--primary-color)';
            option.style.color = 'white';
        }

        document.querySelectorAll('#blank1, #blank2, #blank3').forEach(input => {
            input.addEventListener('click', function() {
                if (selectedFillOption && !selectedFillOption.classList.contains('used')) {
                    this.value = selectedFillOption.textContent;
                    selectedFillOption.classList.add('used');
                    selectedFillOption.style.background = '';
                    selectedFillOption.style.color = '';
                    selectedFillOption = null;
                }
            });
        });

        function checkFillBlanks() {
            const answers = {
                blank1: ['datasets', 'data sets'],
                blank2: ['analyzing', 'analysing', 'training'],
                blank3: ['patterns', 'pattern']
            };
            
            let correct = 0;
            
            ['blank1', 'blank2', 'blank3'].forEach(id => {
                const input = document.getElementById(id);
                const userAnswer = input.value.toLowerCase().trim();
                
                if (answers[id].some(ans => ans === userAnswer)) {
                    input.style.borderColor = 'var(--success-color)';
                    correct++;
                } else {
                    input.style.borderColor = 'var(--error-color)';
                }
            });
            
            if (correct === 3) {
                awardXP(15, 'Fill blanks completed');
                markSectionComplete('fundamentals');
            }
        }

        function resetFillBlanks() {
            document.querySelectorAll('#blank1, #blank2, #blank3').forEach(input => {
                input.value = '';
                input.style.borderColor = '';
            });
            document.querySelectorAll('.fill-option').forEach(opt => {
                opt.classList.remove('used');
                opt.style.background = '';
                opt.style.color = '';
            });
        }

        // Multiple Choice
        function checkMCQ(button, question, isCorrect) {
            const buttons = button.parentElement.querySelectorAll('.quiz-option');
            buttons.forEach(btn => btn.classList.remove('selected', 'correct', 'incorrect'));
            
            button.classList.add('selected');
            if (isCorrect) {
                button.classList.add('correct');
                awardXP(10, `MCQ ${question}`);
            } else {
                button.classList.add('incorrect');
                // Show correct answer
                buttons.forEach(btn => {
                    if (btn.onclick.toString().includes('true')) {
                        btn.classList.add('correct');
                    }
                });
            }
        }

        // Simulations
        let currentSimStep = 1;
        let currentMLStep = 1;

        function nextSimStep() {
            if (currentSimStep < 4) {
                document.querySelectorAll('.simulation-step').forEach(step => {
                    step.classList.remove('active');
                });
                document.querySelectorAll('.progress-dot').forEach(dot => {
                    dot.classList.remove('active');
                });
                
                currentSimStep++;
                document.querySelector(`.simulation-step[data-step="${currentSimStep}"]`).classList.add('active');
                document.querySelector(`.progress-dot[data-step="${currentSimStep}"]`).classList.add('active');
                
                if (currentSimStep === 4) {
                    awardXP(15, 'Completed transport simulation');
                }
            }
        }

        function previousSimStep() {
            if (currentSimStep > 1) {
                document.querySelectorAll('.simulation-step').forEach(step => {
                    step.classList.remove('active');
                });
                document.querySelectorAll('.progress-dot').forEach(dot => {
                    dot.classList.remove('active');
                });
                
                currentSimStep--;
                document.querySelector(`.simulation-step[data-step="${currentSimStep}"]`).classList.add('active');
                document.querySelector(`.progress-dot[data-step="${currentSimStep}"]`).classList.add('active');
            }
        }

        function nextMLStep() {
            const section = document.querySelector('#machine-learning .simulation-container');
            const steps = section.querySelectorAll('.simulation-step');
            const dots = section.querySelectorAll('.progress-dot');
            
            if (currentMLStep < 4) {
                steps.forEach(step => step.classList.remove('active'));
                dots.forEach(dot => dot.classList.remove('active'));
                
                currentMLStep++;
                steps[currentMLStep - 1].classList.add('active');
                dots[currentMLStep - 1].classList.add('active');
                
                if (currentMLStep === 4) {
                    awardXP(15, 'Completed ML simulation');
                }
            }
        }

        function previousMLStep() {
            const section = document.querySelector('#machine-learning .simulation-container');
            const steps = section.querySelectorAll('.simulation-step');
            const dots = section.querySelectorAll('.progress-dot');
            
            if (currentMLStep > 1) {
                steps.forEach(step => step.classList.remove('active'));
                dots.forEach(dot => dot.classList.remove('active'));
                
                currentMLStep--;
                steps[currentMLStep - 1].classList.add('active');
                dots[currentMLStep - 1].classList.add('active');
            }
        }

        // Sequencing
        function checkSequence() {
            const items = document.querySelectorAll('#medical-sequence .sequence-item');
            let correct = true;
            
            items.forEach((item, index) => {
                const expectedOrder = parseInt(item.dataset.order);
                if (index + 1 !== expectedOrder) {
                    correct = false;
                }
            });
            
            if (correct) {
                items.forEach(item => item.classList.add('correct'));
                awardXP(15, 'Medical sequence correct');
                markSectionComplete('medicine');
            } else {
                alert('The sequence is not correct. Try again!');
            }
        }

        function resetSequence() {
            const container = document.getElementById('medical-sequence');
            const items = Array.from(container.children);
            
            // Shuffle items
            for (let i = items.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                container.insertBefore(items[j], items[i].nextSibling);
            }
            
            document.querySelectorAll('#medical-sequence .sequence-item').forEach(item => {
                item.classList.remove('correct');
            });
        }

        // Make sequence items draggable
        let draggedItem = null;

        document.querySelectorAll('.sequence-item').forEach(item => {
            item.addEventListener('click', function() {
                if (!draggedItem) {
                    draggedItem = this;
                    this.style.opacity = '0.5';
                } else {
                    this.parentNode.insertBefore(draggedItem, this.nextSibling);
                    draggedItem.style.opacity = '1';
                    draggedItem = null;
                }
            });
        });

        // Analysis Questions
        function checkAnalysis(questionId) {
            const textarea = document.getElementById(questionId);
            const text = textarea.value.toLowerCase();
            const wordCount = text.split(' ').filter(word => word.length > 0).length;
            
            if (wordCount < 20) {
                alert('Please provide a more detailed answer (at least 20 words).');
                return;
            }
            
            // Check for keywords
            const keywords = {
                'precision-medicine': ['genetic', 'personalized', 'individual', 'dna', 'targeted', 'specific']
            };
            
            let keywordCount = 0;
            keywords[questionId].forEach(keyword => {
                if (text.includes(keyword)) {
                    keywordCount++;
                }
            });
            
            const xpAwarded = Math.min(keywordCount * 5 + 10, 25);
            awardXP(xpAwarded, `Analysis: ${questionId}`);
            
            if (keywordCount >= 3) {
                showAchievement('Excellent Analysis!', 'You included key concepts in your answer.');
            }
        }

        function showHint(questionId) {
            const hint = document.getElementById(`hint-${questionId}`);
            hint.classList.add('show');
            // Reduce XP for using hint
            gameState.xp = Math.max(0, gameState.xp - 5);
            updateXPDisplay();
        }

        // Categorization
        function categorizeItem(item, category) {
            const box = document.getElementById(category);
            if (!box.contains(item)) {
                box.appendChild(item.cloneNode(true));
                item.style.display = 'none';
            }
        }

        function checkCategories() {
            // Implementation for checking categories
            awardXP(15, 'Categories checked');
        }

        function resetCategories() {
            document.querySelectorAll('.category-box').forEach(box => {
                box.innerHTML = '';
            });
            document.querySelectorAll('.fill-option').forEach(item => {
                item.style.display = '';
            });
        }

        // Canvas for calculations
        function initCanvas() {
            const canvas = document.getElementById('calculation-canvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            let isDrawing = false;
            let lastX = 0;
            let lastY = 0;
            
            function getCoordinates(e) {
                const rect = canvas.getBoundingClientRect();
                const scaleX = canvas.width / rect.width;
                const scaleY = canvas.height / rect.height;
                
                if (e.touches) {
                    return {
                        x: (e.touches[0].clientX - rect.left) * scaleX,
                        y: (e.touches[0].clientY - rect.top) * scaleY
                    };
                } else {
                    return {
                        x: (e.clientX - rect.left) * scaleX,
                        y: (e.clientY - rect.top) * scaleY
                    };
                }
            }
            
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            canvas.addEventListener('touchstart', startDrawing);
            canvas.addEventListener('touchmove', draw);
            canvas.addEventListener('touchend', stopDrawing);
            
            function startDrawing(e) {
                isDrawing = true;
                const coords = getCoordinates(e);
                lastX = coords.x;
                lastY = coords.y;
                e.preventDefault();
            }
            
            function draw(e) {
                if (!isDrawing) return;
                
                const coords = getCoordinates(e);
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(coords.x, coords.y);
                ctx.strokeStyle = '#000';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                lastX = coords.x;
                lastY = coords.y;
                e.preventDefault();
            }
            
            function stopDrawing() {
                isDrawing = false;
            }
        }

        function clearCanvas() {
            const canvas = document.getElementById('calculation-canvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        function checkCalculation() {
            const input = document.getElementById('hours-saved');
            const answer = parseInt(input.value);
            
            // Correct answer: (40-5) * 20 = 700
            if (answer === 700) {
                input.style.borderColor = 'var(--success-color)';
                awardXP(20, 'Calculation correct');
                showAchievement('Math Master!', 'Perfect calculation!');
            } else {
                input.style.borderColor = 'var(--error-color)';
                alert('Check your calculation. Human: 40h √ó 20 = 800h, AI: 5h √ó 20 = 100h');
            }
        }

        // Odd One Out
        function checkOddOne(button, isOdd) {
            const buttons = button.parentElement.querySelectorAll('.quiz-option');
            buttons.forEach(btn => btn.classList.remove('selected', 'correct', 'incorrect'));
            
            button.classList.add('selected');
            if (isOdd) {
                button.classList.add('correct');
                awardXP(10, 'Odd one out correct');
            } else {
                button.classList.add('incorrect');
            }
        }

        // Comparison
        function checkComparison() {
            const traditional = document.getElementById('traditional-forecast').value;
            const ai = document.getElementById('ai-forecast').value;
            
            if (traditional.length < 30 || ai.length < 30) {
                alert('Please provide more detailed comparisons.');
                return;
            }
            
            awardXP(15, 'Comparison completed');
        }

        // Machine Learning Explanation
        function checkMLExplanation() {
            const text = document.getElementById('ml-explanation').value.toLowerCase();
            const keywords = ['error', 'adjust', 'pattern', 'improve', 'learn'];
            
            let keywordCount = 0;
            keywords.forEach(keyword => {
                if (text.includes(keyword)) {
                    keywordCount++;
                }
            });
            
            if (text.length > 50 && keywordCount >= 2) {
                awardXP(20, 'ML explanation');
                markSectionComplete('machine-learning');
            } else {
                alert('Please include more detail about how machines learn from mistakes.');
            }
        }

        // Ranking
        function checkRanking() {
            const inputs = document.querySelectorAll('#ranking-items input');
            const values = Array.from(inputs).map(i => parseInt(i.value));
            
            // Check if all values are filled and unique
            const uniqueValues = new Set(values);
            if (uniqueValues.size === 5 && !values.includes(NaN)) {
                awardXP(15, 'Ranking completed');
                showAchievement('Critical Thinker!', 'You evaluated AI impacts thoughtfully.');
            } else {
                alert('Please assign a unique rank (1-5) to each item.');
            }
        }

        // Environmental Impact
        function checkEnvironmentalImpact() {
            const positive = document.getElementById('positive-impact').value;
            const negative = document.getElementById('negative-impact').value;
            
            if (positive.length > 30 && negative.length > 30) {
                awardXP(20, 'Environmental impact analysis');
                markSectionComplete('impact');
            } else {
                alert('Please provide more detailed impacts for both positive and negative aspects.');
            }
        }

        // Exam Practice
        function showMarkScheme(question) {
            const textarea = document.getElementById(`exam-${question}`);
            const marks = document.getElementById(`marks-${question}`);
            
            if (textarea.value.length < 50 || !marks.value) {
                alert('Please write a detailed answer and predict your marks before viewing the mark scheme.');
                return;
            }
            
            document.getElementById(`mark-scheme-${question}`).classList.add('show');
            awardXP(10, `Exam practice ${question}`);
        }

        // Final Quiz
        let finalQuizAnswers = {};

        function checkFinalQuiz(button, question, isCorrect) {
            const buttons = button.parentElement.querySelectorAll('.quiz-option');
            buttons.forEach(btn => btn.classList.remove('selected', 'correct', 'incorrect'));
            
            button.classList.add('selected');
            finalQuizAnswers[question] = isCorrect;
            
            if (isCorrect) {
                button.classList.add('correct');
            } else {
                button.classList.add('incorrect');
            }
        }

        function calculateFinalScore() {
            const correctCount = Object.values(finalQuizAnswers).filter(v => v === true).length;
            const totalQuestions = 6;
            const percentage = Math.round((correctCount / totalQuestions) * 100);
            
            document.getElementById('final-score').textContent = 
                `Score: ${correctCount}/${totalQuestions} (${percentage}%)`;
            
            awardXP(correctCount * 10, 'Final quiz completed');
            
            if (percentage === 100) {
                showAchievement('Perfect Score!', 'You mastered AI applications!');
                markSectionComplete('summary');
            } else if (percentage >= 80) {
                showAchievement('Great Job!', 'Excellent understanding of AI!');
            }
        }

        // Extension
        function submitExtension(type) {
            const textarea = type === 'research' 
                ? document.getElementById('extension-research')
                : document.getElementById('ai-solution');
                
            if (textarea.value.length < 50) {
                alert('Please provide a more detailed response.');
                return;
            }
            
            awardXP(25, `Extension ${type}`);
            markSectionComplete('extension');
            showAchievement('Going Beyond!', 'Excellent extension work!');
        }

        // Mark section complete
        function markSectionComplete(section) {
            gameState.completedSections.add(section);
            const pill = document.querySelector(`[data-section="${section}"]`);
            if (pill) {
                pill.classList.add('completed');
            }
            
            // Check for level completion achievement
            if (gameState.completedSections.size === 10) {
                showAchievement('Course Complete!', 'You completed all main sections!');
                awardXP(100, 'All sections complete');
            }
        }

        // Shame message
        function showShameMessage() {
            const message = document.getElementById('shame-message');
            message.style.display = 'block';
            setTimeout(() => {
                message.style.display = 'none';
            }, 3000);
        }

        // Feedback
        function openFeedback() {
            document.getElementById('feedback-modal').style.display = 'flex';
            document.getElementById('feedback-section').textContent = gameState.currentSection;
        }

        function closeFeedback() {
            document.getElementById('feedback-modal').style.display = 'none';
            document.getElementById('feedback-text').value = '';
        }

        function sendFeedback() {
            const text = document.getElementById('feedback-text').value;
            const section = gameState.currentSection;
            
            if (!text) {
                alert('Please enter your feedback');
                return;
            }
            
            const subject = encodeURIComponent('AI Lesson Feedback');
            const body = encodeURIComponent(`Section: ${section}\n\nFeedback: ${text}`);
            
            window.location.href = `mailto:millingtond@mgs.org?subject=${subject}&body=${body}`;
            closeFeedback();
            awardXP(5, 'Feedback sent');
        }

        // Accessibility
        function setupAccessibility() {
            const controls = document.getElementById('accessibility-controls');
            controls.style.display = 'none';
        }

        function toggleAccessibility() {
            const controls = document.getElementById('accessibility-controls');
            controls.classList.toggle('show');
        }

        function toggleHighContrast() {
            document.body.classList.toggle('high-contrast');
        }

        function toggleDyslexiaFont() {
            document.body.classList.toggle('dyslexia-font');
        }

        function changeFontSize(size) {
            document.body.classList.remove('font-small', 'font-large');
            if (size !== 'normal') {
                document.body.classList.add('font-' + size);
            }
        }

        // Click outside to close modals
        window.onclick = function(event) {
            const feedbackModal = document.getElementById('feedback-modal');
            if (event.target === feedbackModal) {
                closeFeedback();
            }
        }
    </script>
</body>
</html>