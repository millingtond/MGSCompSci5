<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cloud Computing - A Level Computer Science</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }

        /* Header and Navigation */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 0;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header .container {
            position: relative;
        }

        .mobile-menu-btn {
            display: none;
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 8px 12px;
            border-radius: 5px;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 1002;
        }

        .mobile-menu-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .nav-menu {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .nav-item {
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .nav-item:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }

        .nav-item.active {
            background: white;
            color: #667eea;
        }

        /* XP and Level System */
        .xp-container {
            position: fixed;
            top: 100px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 999;
        }

        .xp-bar {
            width: 150px;
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 5px;
        }

        .xp-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            transition: width 0.5s ease;
            width: 0%;
        }

        /* Pages */
        .page {
            display: none;
            animation: fadeIn 0.5s;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .nav-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
        }

        .nav-btn:hover {
            background: #764ba2;
            transform: translateY(-2px);
        }

        .nav-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        /* Interactive Elements */
        .task-container {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #e0e0e0;
        }

        .draggable, .clickable {
            background: white;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid #e0e0e0;
            display: inline-block;
        }

        .draggable:hover, .clickable:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            border-color: #667eea;
        }

        .drop-zone {
            min-height: 50px;
            background: #f0f0f0;
            border: 2px dashed #ccc;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            transition: all 0.3s;
        }

        .drop-zone.highlight {
            border-color: #667eea;
            background: #e8eaf6;
        }

        /* Buttons */
        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            margin: 5px;
        }

        .btn:hover {
            background: #764ba2;
            transform: translateY(-2px);
        }

        .btn-reset {
            background: #f44336;
        }

        .btn-reset:hover {
            background: #d32f2f;
        }

        .btn-hint {
            background: #ff9800;
        }

        .btn-hint:hover {
            background: #f57c00;
        }

        /* Achievement Popup */
        .achievement-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            text-align: center;
            z-index: 2000;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .achievement-popup.show {
            transform: translate(-50%, -50%) scale(1);
        }

        .achievement-icon {
            font-size: 60px;
            margin-bottom: 10px;
        }

        /* Feedback Button */
        .feedback-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #ff5722;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: all 0.3s;
            z-index: 998;
        }

        .feedback-btn:hover {
            background: #e64a19;
            transform: translateY(-2px);
        }

        /* Feedback Modal */
        .feedback-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 3000;
        }

        .feedback-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
        }

        /* Accessibility Features */
        .accessibility-controls {
            position: fixed;
            top: 100px;
            left: 20px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 999;
        }

        .control-btn {
            display: block;
            width: 100%;
            margin: 5px 0;
            padding: 8px;
            background: #f0f0f0;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .control-btn:hover {
            background: #e0e0e0;
        }

        /* High Contrast Mode */
        body.high-contrast {
            background: black;
            color: white;
        }

        body.high-contrast .page,
        body.high-contrast .xp-container,
        body.high-contrast .accessibility-controls {
            background: #222;
            color: white;
        }

        body.high-contrast .btn {
            background: white;
            color: black;
        }

        /* Dyslexia Font */
        body.dyslexia-font {
            font-family: 'OpenDyslexic', Arial, sans-serif;
        }

        /* Large Font */
        body.large-font {
            font-size: 120%;
        }

        body.large-font .btn,
        body.large-font .nav-item {
            font-size: 18px;
        }

        /* Canvas for Drawing */
        #drawingCanvas {
            border: 2px solid #ccc;
            border-radius: 5px;
            touch-action: none;
            cursor: crosshair;
            background: white;
            display: block;
            margin: 20px auto;
        }

        /* Correct/Incorrect Feedback */
        .correct {
            color: #4CAF50;
            font-weight: bold;
        }

        .incorrect {
            color: #f44336;
            font-weight: bold;
        }

        /* Simulation Container */
        .simulation {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            position: relative;
            min-height: 300px;
        }

        .server {
            width: 80px;
            height: 100px;
            background: #2196F3;
            border-radius: 5px;
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            transition: all 0.3s;
        }

        .server.active {
            background: #4CAF50;
            transform: scale(1.1);
        }

        .client {
            width: 60px;
            height: 60px;
            background: #ff9800;
            border-radius: 50%;
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
                margin-top: 70px !important;
            }

            .header {
                padding: 8px 0;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
            }

            .header .container {
                margin-top: 0 !important;
            }

            .header h1 {
                font-size: 16px;
                margin-bottom: 5px;
                padding: 0 10px;
                padding-right: 50px;
            }

            .mobile-menu-btn {
                display: block;
            }

            .nav-menu {
                display: flex;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: rgba(102, 126, 234, 0.98);
                flex-direction: column;
                padding: 0;
                gap: 5px;
                max-height: 0;
                overflow: hidden;
                box-shadow: 0 4px 20px rgba(0,0,0,0.3);
                z-index: 1001;
                opacity: 0;
                transition: all 0.3s ease;
            }

            .nav-menu.show {
                opacity: 1;
                max-height: 70vh;
                overflow-y: auto;
                padding: 10px;
            }

            .nav-item {
                width: 100%;
                text-align: center;
                font-size: 14px;
                padding: 10px;
            }

            .page {
                margin-top: 10px;
                padding: 15px;
                margin-bottom: 10px;
            }

            .xp-container {
                position: fixed;
                top: 60px;
                right: 10px;
                padding: 6px 8px;
                font-size: 10px;
                background: rgba(255,255,255,0.95);
                box-shadow: 0 2px 5px rgba(0,0,0,0.1);
                border-radius: 8px;
                border: 1px solid rgba(0,0,0,0.1);
            }

            .xp-container h3 {
                font-size: 12px;
                margin-bottom: 3px;
            }

            .xp-bar {
                width: 70px;
                height: 12px;
            }

            .accessibility-controls {
                display: none;
            }

            .feedback-btn {
                bottom: 10px;
                right: 10px;
                padding: 8px 12px;
                font-size: 11px;
            }

            .task-container {
                padding: 15px;
                margin: 15px 0;
            }

            .simulation {
                min-height: 250px;
            }

            .server {
                width: 50px;
                height: 70px;
                font-size: 10px;
            }

            .client {
                width: 40px;
                height: 40px;
                font-size: 10px;
            }

            .nav-buttons {
                flex-direction: column;
                gap: 10px;
            }

            .nav-btn {
                width: 100%;
            }

            .clickable {
                padding: 8px 12px;
                font-size: 14px;
            }

            input[type="text"], textarea {
                font-size: 14px;
                padding: 8px;
            }

            .btn {
                font-size: 14px;
                padding: 8px 16px;
            }

            #drawingCanvas {
                width: 100%;
                height: 200px;
            }

            /* Cloud simulation mobile adjustments */
            #cloudSimulationArea {
                min-height: 300px !important;
                padding: 10px !important;
            }

            #publicCloudSection, #privateCloudSection {
                position: static !important;
                margin: 10px 0;
                width: 100%;
            }

            #publicServers, #privateServers {
                justify-content: center;
            }

            #companyBuilding {
                position: static !important;
                margin: 20px auto;
                transform: none !important;
            }

            #companyBuilding > div {
                width: 100px !important;
                height: 80px !important;
                margin: 0 auto;
            }

            .cloud-server {
                width: 50px !important;
                height: 60px !important;
                font-size: 10px !important;
            }

            #simulationStatus {
                position: static !important;
                margin: 20px auto;
                transform: none !important;
                max-width: 100% !important;
            }

            #dataPathsSvg {
                display: none;
            }

            #simulationSteps button {
                width: 100%;
                margin-bottom: 5px;
            }

            .cost-comparison {
                position: static !important;
                margin: 20px auto !important;
                transform: none !important;
            }
        }

        /* Ensure nav menu displays properly on desktop */
        @media (min-width: 769px) {
            .nav-menu {
                display: flex !important;
            }

            /* Cloud simulation desktop layout */
            #cloudSimulationArea {
                position: relative !important;
            }

            #publicCloudSection {
                position: absolute !important;
                left: 20px !important;
                top: 20px !important;
            }

            #privateCloudSection {
                position: absolute !important;
                right: 20px !important;
                top: 20px !important;
            }

            #companyBuilding {
                position: absolute !important;
                left: 50% !important;
                bottom: 20px !important;
                transform: translateX(-50%) !important;
            }

            #simulationStatus {
                position: absolute !important;
                bottom: 100px !important;
                left: 50% !important;
                transform: translateX(-50%) !important;
            }

            #dataPathsSvg {
                display: block !important;
            }

            .cost-comparison {
                position: absolute !important;
                bottom: 150px !important;
                left: 50% !important;
                transform: translateX(-50%) !important;
                margin: 0 !important;
            }
        }

        /* Extra small devices */
        @media (max-width: 400px) {
            .header h1 {
                font-size: 14px;
            }

            .xp-container {
                top: 55px;
                right: 5px;
                padding: 5px 6px;
            }

            .xp-container h3 {
                font-size: 11px;
            }

            .xp-bar {
                width: 60px;
                height: 10px;
            }

            .feedback-btn {
                bottom: 5px;
                right: 5px;
                padding: 6px 10px;
                font-size: 10px;
            }

            .page {
                padding: 15px;
            }

            .task-container {
                padding: 12px;
            }

            .btn {
                font-size: 13px;
                padding: 6px 12px;
            }
        }

        /* Input validation */
        input[type="text"], textarea {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            font-size: 16px;
        }

        input[type="text"]:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        /* Mark scheme */
        .mark-scheme {
            display: none;
            background: #e8f5e9;
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
        }

        .mark-scheme.show {
            display: block;
        }

        /* Shame message for paste attempts */
        .shame-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #f44336;
            color: white;
            padding: 20px;
            border-radius: 10px;
            font-size: 18px;
            display: none;
            z-index: 4000;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container" style="margin-top: 0;">
            <h1>Cloud Computing - A Level Computer Science</h1>
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Toggle menu">☰</button>
            <div class="nav-menu" role="navigation" aria-label="Page navigation">
                <div class="nav-item active" onclick="showPage(0)" tabindex="0" role="button" aria-label="Introduction">Introduction</div>
                <div class="nav-item" onclick="showPage(1)" tabindex="0" role="button" aria-label="Cloud Fundamentals">Cloud Fundamentals</div>
                <div class="nav-item" onclick="showPage(2)" tabindex="0" role="button" aria-label="Cloud Storage">Cloud Storage</div>
                <div class="nav-item" onclick="showPage(3)" tabindex="0" role="button" aria-label="Cloud Software">Cloud Software</div>
                <div class="nav-item" onclick="showPage(4)" tabindex="0" role="button" aria-label="Public vs Private">Public vs Private</div>
                <div class="nav-item" onclick="showPage(5)" tabindex="0" role="button" aria-label="Thin vs Thick">Thin vs Thick</div>
                <div class="nav-item" onclick="showPage(6)" tabindex="0" role="button" aria-label="Exam Practice">Exam Practice</div>
                <div class="nav-item" onclick="showPage(7)" tabindex="0" role="button" aria-label="Extension">Extension</div>
                <div class="nav-item" onclick="showPage(8)" tabindex="0" role="button" aria-label="Summary">Summary</div>
            </div>
        </div>
    </div>

    <div class="xp-container" role="complementary" aria-label="Experience points">
        <h3>Level <span id="level">0</span></h3>
        <div class="xp-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
            <div class="xp-fill" id="xpBar"></div>
        </div>
        <p>XP: <span id="xp">0</span>/100</p>
    </div>

    <div class="accessibility-controls" role="complementary" aria-label="Accessibility controls">
        <button class="control-btn" onclick="toggleHighContrast()" aria-label="Toggle high contrast mode">High Contrast</button>
        <button class="control-btn" onclick="toggleDyslexiaFont()" aria-label="Toggle dyslexia-friendly font">Dyslexia Font</button>
        <button class="control-btn" onclick="toggleLargeFont()" aria-label="Toggle large font size">Large Font</button>
    </div>

    <div class="container">
        <!-- Page 0: Introduction -->
        <div class="page active" id="page0">
            <h2>Welcome to Cloud Computing!</h2>
            
            <div class="task-container">
                <h3>Learning Outcomes</h3>
                <ul>
                    <li>Understand what cloud computing is and how it works</li>
                    <li>Explain the benefits and drawbacks of cloud storage and software</li>
                    <li>Compare public and private cloud solutions</li>
                    <li>Differentiate between thin and thick client architectures</li>
                    <li>Apply cloud computing concepts to real-world scenarios</li>
                </ul>
            </div>

            <div class="task-container">
                <h3>Starter Activity: Cloud or Local?</h3>
                <p>Click to categorize each service as either cloud-based or locally-based:</p>
                
                <div id="starterItems" style="margin: 20px 0;">
                    <div class="clickable" data-type="cloud" onclick="categorizeItem(this)">Google Drive</div>
                    <div class="clickable" data-type="local" onclick="categorizeItem(this)">Microsoft Word (Desktop)</div>
                    <div class="clickable" data-type="cloud" onclick="categorizeItem(this)">Netflix</div>
                    <div class="clickable" data-type="local" onclick="categorizeItem(this)">VLC Media Player</div>
                    <div class="clickable" data-type="cloud" onclick="categorizeItem(this)">Gmail</div>
                    <div class="clickable" data-type="local" onclick="categorizeItem(this)">Photoshop (Installed)</div>
                    <div class="clickable" data-type="cloud" onclick="categorizeItem(this)">Spotify</div>
                    <div class="clickable" data-type="local" onclick="categorizeItem(this)">Notepad</div>
                </div>

                <div style="display: flex; gap: 20px; margin-top: 20px;">
                    <div style="flex: 1;">
                        <h4>Cloud Services</h4>
                        <div class="drop-zone" id="cloudZone" style="min-height: 100px;"></div>
                    </div>
                    <div style="flex: 1;">
                        <h4>Local Services</h4>
                        <div class="drop-zone" id="localZone" style="min-height: 100px;"></div>
                    </div>
                </div>

                <button class="btn" onclick="checkStarter()">Check Answers</button>
                <button class="btn btn-reset" onclick="resetStarter()">Reset</button>
                <p id="starterFeedback" style="margin-top: 10px;"></p>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" disabled>Previous</button>
                <button class="nav-btn" onclick="showPage(1)">Next</button>
            </div>
        </div>

        <!-- Page 1: Cloud Computing Fundamentals -->
        <div class="page" id="page1">
            <h2>Cloud Computing Fundamentals</h2>
            
            <div class="task-container">
                <h3>What is Cloud Computing?</h3>
                <p><strong>Cloud Computing</strong> refers to software or services that are hosted remotely on the internet, usually using multiple redundant servers.</p>
                
                <div class="simulation" id="cloudSimulation">
                    <div class="client" style="left: 50%; bottom: 20px; transform: translateX(-50%);">You</div>
                    <div class="server" style="top: 20px; left: 20%;" id="server1">Server 1</div>
                    <div class="server" style="top: 20px; left: 50%; transform: translateX(-50%);" id="server2">Server 2</div>
                    <div class="server" style="top: 20px; right: 20%;" id="server3">Server 3</div>
                    
                    <div style="position: absolute; bottom: 80px; left: 50%; transform: translateX(-50%); text-align: center;">
                        <button class="btn" onclick="simulateCloudAccess()">Access File</button>
                        <p id="simFeedback" style="margin-top: 10px;"></p>
                    </div>
                </div>
            </div>

            <div class="task-container">
                <h3>Fill in the Blanks</h3>
                <p>Complete the definition of cloud computing by selecting the correct words:</p>
                
                <div style="margin: 20px 0;">
                    <div class="clickable" onclick="selectWord(this, 'blank1')">remotely</div>
                    <div class="clickable" onclick="selectWord(this, 'blank1')">locally</div>
                    <div class="clickable" onclick="selectWord(this, 'blank1')">manually</div>
                    <div class="clickable" onclick="selectWord(this, 'blank1')">physically</div>
                    <div class="clickable" onclick="selectWord(this, 'blank2')">redundant</div>
                    <div class="clickable" onclick="selectWord(this, 'blank2')">single</div>
                    <div class="clickable" onclick="selectWord(this, 'blank2')">isolated</div>
                    <div class="clickable" onclick="selectWord(this, 'blank2')">expensive</div>
                </div>
                
                <p style="font-size: 18px; line-height: 2;">
                    Cloud computing involves services hosted 
                    <span id="blank1" style="border-bottom: 2px solid #667eea; min-width: 100px; display: inline-block;">_______</span> 
                    on the internet, using multiple 
                    <span id="blank2" style="border-bottom: 2px solid #667eea; min-width: 100px; display: inline-block;">_______</span> 
                    servers.
                </p>
                
                <button class="btn" onclick="checkFillBlanks()">Check Answer</button>
                <button class="btn btn-reset" onclick="resetFillBlanks()">Reset</button>
                <p id="fillFeedback" style="margin-top: 10px;"></p>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="showPage(0)">Previous</button>
                <button class="nav-btn" onclick="showPage(2)">Next</button>
            </div>
        </div>

        <!-- Page 2: Cloud Storage -->
        <div class="page" id="page2">
            <h2>Cloud Storage Deep Dive</h2>
            
            <div class="task-container">
                <h3>Cloud Storage Definition</h3>
                <p><strong>Cloud storage</strong> means files are stored offsite on multiple internet-connected servers. When you want to access a file, your computer connects to the nearest available server.</p>
            </div>

            <div class="task-container">
                <h3>Benefits vs Drawbacks Matching</h3>
                <p>Click to match each statement with either "Benefit" or "Drawback":</p>
                
                <div id="storageStatements" style="margin: 20px 0;">
                    <div class="clickable" data-type="benefit" onclick="categorizeStorage(this)">Access files from anywhere with internet</div>
                    <div class="clickable" data-type="drawback" onclick="categorizeStorage(this)">No control over security measures</div>
                    <div class="clickable" data-type="benefit" onclick="categorizeStorage(this)">Automatic backups</div>
                    <div class="clickable" data-type="drawback" onclick="categorizeStorage(this)">Requires internet connection</div>
                    <div class="clickable" data-type="benefit" onclick="categorizeStorage(this)">Easy file sharing with others</div>
                    <div class="clickable" data-type="drawback" onclick="categorizeStorage(this)">Upload/download can be slow</div>
                    <div class="clickable" data-type="benefit" onclick="categorizeStorage(this)">Scalable storage space</div>
                    <div class="clickable" data-type="drawback" onclick="categorizeStorage(this)">Long-term costs may be higher</div>
                </div>

                <div style="display: flex; gap: 20px; margin-top: 20px;">
                    <div style="flex: 1;">
                        <h4>Benefits</h4>
                        <div class="drop-zone" id="benefitZone" style="min-height: 150px;"></div>
                    </div>
                    <div style="flex: 1;">
                        <h4>Drawbacks</h4>
                        <div class="drop-zone" id="drawbackZone" style="min-height: 150px;"></div>
                    </div>
                </div>

                <button class="btn" onclick="checkStorageMatch()">Check Answers</button>
                <button class="btn btn-reset" onclick="resetStorageMatch()">Reset</button>
                <button class="btn btn-hint" onclick="showStorageHint()">Hint (-5 XP)</button>
                <p id="storageFeedback" style="margin-top: 10px;"></p>
            </div>

            <div class="task-container">
                <h3>Common Mistake Alert!</h3>
                <p style="background: #ffe0b2; padding: 15px; border-radius: 5px;">
                    <strong>⚠️ Common Mistake:</strong> Students often think cloud storage is always more expensive than local storage. This depends on usage! For small amounts of data, cloud storage can be free or very cheap. It's the large-scale, long-term storage that can become expensive.
                </p>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="showPage(1)">Previous</button>
                <button class="nav-btn" onclick="showPage(3)">Next</button>
            </div>
        </div>

        <!-- Page 3: Cloud Software -->
        <div class="page" id="page3">
            <h2>Cloud Software</h2>
            
            <div class="task-container">
                <h3>Understanding Cloud Software</h3>
                <p><strong>Cloud software</strong> is software that is hosted and run entirely or partly on offsite servers. You access it through your web browser.</p>
                
                <h3>Traditional vs Cloud Software Comparison</h3>
                <p>Click pairs of cards to match traditional software with their cloud equivalents:</p>
                
                <div id="softwareComparison" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin: 20px 0;">
                    <div class="clickable" data-pair="office" onclick="flipCard(this)">Microsoft Office (Desktop)</div>
                    <div class="clickable" data-pair="office" onclick="flipCard(this)">Google Workspace</div>
                    <div class="clickable" data-pair="photoshop" onclick="flipCard(this)">Adobe Photoshop (Installed)</div>
                    <div class="clickable" data-pair="photoshop" onclick="flipCard(this)">Photopea (Browser)</div>
                    <div class="clickable" data-pair="storage" onclick="flipCard(this)">External Hard Drive</div>
                    <div class="clickable" data-pair="storage" onclick="flipCard(this)">Dropbox</div>
                    <div class="clickable" data-pair="ide" onclick="flipCard(this)">Visual Studio (Desktop)</div>
                    <div class="clickable" data-pair="ide" onclick="flipCard(this)">CodePen</div>
                </div>
                
                <p id="softwareMatchFeedback" style="margin-top: 10px;"></p>
                <button class="btn btn-reset" onclick="resetSoftwareMatch()">Reset</button>
            </div>

            <div class="task-container">
                <h3>Reflection Question</h3>
                <p>Consider a small business deciding between traditional desktop software and cloud software. What factors should they consider?</p>
                <textarea id="reflectionAnswer" rows="4" placeholder="Think about costs, accessibility, updates, and technical requirements..."></textarea>
                <button class="btn" onclick="checkReflection()">Submit Answer</button>
                <p id="reflectionFeedback" style="margin-top: 10px;"></p>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="showPage(2)">Previous</button>
                <button class="nav-btn" onclick="showPage(4)">Next</button>
            </div>
        </div>

        <!-- Page 4: Public vs Private Cloud -->
        <div class="page" id="page4">
            <h2>Public vs Private Cloud</h2>
            
            <div class="task-container">
                <h3>🎮 Interactive Cloud Journey</h3>
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px;">Welcome to TechCorp's Cloud Decision!</h4>
                    <p>You're the IT Manager at TechCorp. Your company needs to choose between public and private cloud. Let's explore both options through an interactive journey!</p>
                </div>
            </div>

            <div class="task-container" style="background: #f5f5f5;">
                <h3>🚀 Cloud Comparison Simulator</h3>
                
                <!-- Scenario Setup -->
                <div style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; border-left: 5px solid #ff9800;">
                    <h4>📋 Your Mission:</h4>
                    <p>TechCorp needs to store:</p>
                    <ul>
                        <li>💾 Customer database (sensitive data)</li>
                        <li>📄 Company documents</li>
                        <li>🌐 Website files</li>
                        <li>📧 Email system</li>
                    </ul>
                    <p><strong>Budget:</strong> $100,000/year | <strong>Timeline:</strong> Need solution ASAP</p>
                </div>

                <!-- Main Simulation Area -->
                <div id="mainSimulation" style="background: white; border-radius: 15px; padding: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
                    
                    <!-- Progress Tracker -->
                    <div style="margin-bottom: 30px;">
                        <h4 style="text-align: center;">Your Cloud Journey Progress</h4>
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-top: 20px; position: relative;">
                            <div style="position: absolute; top: 20px; left: 0; right: 0; height: 4px; background: #e0e0e0; z-index: 1;"></div>
                            <div id="progressLine" style="position: absolute; top: 20px; left: 0; height: 4px; background: #4CAF50; z-index: 2; width: 0%; transition: width 0.5s;"></div>
                            
                            <div class="journey-step" id="journey1" style="position: relative; z-index: 3; text-align: center;">
                                <div style="width: 40px; height: 40px; background: #4CAF50; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; margin: 0 auto;">1</div>
                                <p style="font-size: 12px; margin-top: 5px;">Setup</p>
                            </div>
                            <div class="journey-step" id="journey2" style="position: relative; z-index: 3; text-align: center;">
                                <div style="width: 40px; height: 40px; background: #e0e0e0; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #666; font-weight: bold; margin: 0 auto;">2</div>
                                <p style="font-size: 12px; margin-top: 5px;">Deploy</p>
                            </div>
                            <div class="journey-step" id="journey3" style="position: relative; z-index: 3; text-align: center;">
                                <div style="width: 40px; height: 40px; background: #e0e0e0; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #666; font-weight: bold; margin: 0 auto;">3</div>
                                <p style="font-size: 12px; margin-top: 5px;">Manage</p>
                            </div>
                            <div class="journey-step" id="journey4" style="position: relative; z-index: 3; text-align: center;">
                                <div style="width: 40px; height: 40px; background: #e0e0e0; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #666; font-weight: bold; margin: 0 auto;">4</div>
                                <p style="font-size: 12px; margin-top: 5px;">Scale</p>
                            </div>
                            <div class="journey-step" id="journey5" style="position: relative; z-index: 3; text-align: center;">
                                <div style="width: 40px; height: 40px; background: #e0e0e0; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #666; font-weight: bold; margin: 0 auto;">5</div>
                                <p style="font-size: 12px; margin-top: 5px;">Review</p>
                            </div>
                        </div>
                    </div>

                    <!-- Simulation Content Area -->
                    <div id="simContent" style="min-height: 400px; position: relative;">
                        
                        <!-- Step 1: Initial State -->
                        <div id="simStep1" class="sim-step" style="display: block;">
                            <h3 style="text-align: center; color: #667eea;">Step 1: Getting Started</h3>
                            
                            <div style="display: flex; gap: 20px; margin-top: 30px; flex-wrap: wrap;">
                                <!-- Public Cloud Option -->
                                <div style="flex: 1; min-width: 250px; background: #e8f5e9; padding: 20px; border-radius: 10px; border: 2px solid #4CAF50;">
                                    <h4 style="color: #4CAF50; text-align: center;">☁️ Public Cloud</h4>
                                    <div style="text-align: center; margin: 20px 0;">
                                        <div style="font-size: 48px;">⏱️</div>
                                        <p style="font-size: 24px; font-weight: bold; color: #4CAF50;">5 Minutes</p>
                                        <p>to get started!</p>
                                    </div>
                                    <div style="background: white; padding: 15px; border-radius: 5px;">
                                        <p style="margin: 5px 0;">✅ Sign up online</p>
                                        <p style="margin: 5px 0;">✅ Enter credit card</p>
                                        <p style="margin: 5px 0;">✅ Start using immediately</p>
                                        <p style="margin: 5px 0;">✅ No hardware needed</p>
                                    </div>
                                </div>

                                <!-- Private Cloud Option -->
                                <div style="flex: 1; min-width: 250px; background: #e3f2fd; padding: 20px; border-radius: 10px; border: 2px solid #2196F3;">
                                    <h4 style="color: #2196F3; text-align: center;">🏢 Private Cloud</h4>
                                    <div style="text-align: center; margin: 20px 0;">
                                        <div style="font-size: 48px;">📅</div>
                                        <p style="font-size: 24px; font-weight: bold; color: #2196F3;">3-6 Months</p>
                                        <p>to fully deploy!</p>
                                    </div>
                                    <div style="background: white; padding: 15px; border-radius: 5px;">
                                        <p style="margin: 5px 0;">🔧 Buy servers ($50k+)</p>
                                        <p style="margin: 5px 0;">🏗️ Set up data center</p>
                                        <p style="margin: 5px 0;">👥 Hire IT team</p>
                                        <p style="margin: 5px 0;">⚙️ Configure everything</p>
                                    </div>
                                </div>
                            </div>

                            <div style="text-align: center; margin-top: 30px;">
                                <p style="font-size: 18px; margin-bottom: 20px;">Which setup timeline works for TechCorp?</p>
                                <button class="btn" onclick="chooseCloud('public', 1)" style="background: #4CAF50; margin: 0 10px;">Choose Public Cloud</button>
                                <button class="btn" onclick="chooseCloud('private', 1)" style="background: #2196F3; margin: 0 10px;">Choose Private Cloud</button>
                            </div>
                        </div>

                        <!-- Step 2: Deploy Data -->
                        <div id="simStep2" class="sim-step" style="display: none;">
                            <h3 style="text-align: center; color: #667eea;">Step 2: Deploying Your Data</h3>
                            
                            <div id="deployAnimation" style="height: 300px; position: relative; margin: 30px 0;">
                                <!-- Will be populated by JavaScript -->
                            </div>

                            <div style="background: #f5f5f5; padding: 20px; border-radius: 10px; margin-top: 20px;">
                                <h4>What's happening?</h4>
                                <div id="deployExplanation"></div>
                            </div>

                            <div style="text-align: center; margin-top: 20px;">
                                <button class="btn" onclick="continueSimulation(3)" id="continueBtn2" disabled>Continue to Management</button>
                            </div>
                        </div>

                        <!-- Step 3: Management -->
                        <div id="simStep3" class="sim-step" style="display: none;">
                            <h3 style="text-align: center; color: #667eea;">Step 3: Day-to-Day Management</h3>
                            
                            <div style="margin: 30px 0;">
                                <h4>🎯 Management Tasks Challenge!</h4>
                                <p>Match each task to who handles it in your chosen cloud type:</p>
                                
                                <div id="managementTasks" style="margin: 20px 0;">
                                    <!-- Will be populated by JavaScript -->
                                </div>
                            </div>

                            <div style="text-align: center; margin-top: 20px;">
                                <button class="btn" onclick="checkManagement()">Check Answers</button>
                                <p id="managementFeedback" style="margin-top: 10px;"></p>
                            </div>
                        </div>

                        <!-- Step 4: Scaling -->
                        <div id="simStep4" class="sim-step" style="display: none;">
                            <h3 style="text-align: center; color: #667eea;">Step 4: Time to Scale!</h3>
                            
                            <div style="background: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
                                <h4>📈 Breaking News!</h4>
                                <p>TechCorp just landed a huge client! You need to <strong>DOUBLE</strong> your storage capacity immediately!</p>
                            </div>

                            <div id="scalingVisual" style="margin: 30px 0;">
                                <!-- Will be populated by JavaScript -->
                            </div>

                            <div style="text-align: center; margin-top: 20px;">
                                <button class="btn" onclick="executeScaling()">Execute Scaling Plan</button>
                            </div>
                        </div>

                        <!-- Step 5: Review -->
                        <div id="simStep5" class="sim-step" style="display: none;">
                            <h3 style="text-align: center; color: #667eea;">Step 5: Final Review</h3>
                            
                            <div id="finalComparison" style="margin: 30px 0;">
                                <!-- Will be populated by JavaScript -->
                            </div>

                            <div style="text-align: center; margin-top: 30px;">
                                <button class="btn" onclick="completeSimulation()">Complete Simulation</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Help Panel -->
                <div style="background: #e8eaf6; padding: 20px; border-radius: 10px; margin-top: 20px;">
                    <h4>💡 Need Help?</h4>
                    <div id="currentHelp">
                        <p>Remember: Public cloud is like renting an apartment (quick, flexible, shared). Private cloud is like buying a house (takes time, full control, all yours).</p>
                    </div>
                    <button class="btn btn-hint" onclick="getContextualHint()">Get Hint for This Step (-5 XP)</button>
                </div>
            </div>

            <div class="task-container">
                <h3>📊 Quick Knowledge Check</h3>
                <p>After completing the simulation, test your understanding:</p>
                
                <div id="knowledgeCheck" style="margin: 20px 0;">
                    <div style="margin: 20px 0; padding: 15px; background: #f5f5f5; border-radius: 10px;">
                        <p><strong>1. Which cloud type requires purchasing physical servers?</strong></p>
                        <label style="display: block; margin: 10px 0;"><input type="radio" name="kc1" value="public"> Public Cloud</label>
                        <label style="display: block; margin: 10px 0;"><input type="radio" name="kc1" value="private"> Private Cloud</label>
                        <label style="display: block; margin: 10px 0;"><input type="radio" name="kc1" value="both"> Both</label>
                        <label style="display: block; margin: 10px 0;"><input type="radio" name="kc1" value="neither"> Neither</label>
                    </div>

                    <div style="margin: 20px 0; padding: 15px; background: #f5f5f5; border-radius: 10px;">
                        <p><strong>2. For highly sensitive medical records, which is typically recommended?</strong></p>
                        <label style="display: block; margin: 10px 0;"><input type="radio" name="kc2" value="public"> Public Cloud</label>
                        <label style="display: block; margin: 10px 0;"><input type="radio" name="kc2" value="private"> Private Cloud</label>
                        <label style="display: block; margin: 10px 0;"><input type="radio" name="kc2" value="either"> Either is fine</label>
                        <label style="display: block; margin: 10px 0;"><input type="radio" name="kc2" value="neither"> Neither - use local storage</label>
                    </div>

                    <div style="margin: 20px 0; padding: 15px; background: #f5f5f5; border-radius: 10px;">
                        <p><strong>3. Which offers faster scaling when you need more resources?</strong></p>
                        <label style="display: block; margin: 10px 0;"><input type="radio" name="kc3" value="public"> Public Cloud</label>
                        <label style="display: block; margin: 10px 0;"><input type="radio" name="kc3" value="private"> Private Cloud</label>
                        <label style="display: block; margin: 10px 0;"><input type="radio" name="kc3" value="same"> Both scale equally fast</label>
                        <label style="display: block; margin: 10px 0;"><input type="radio" name="kc3" value="depends"> Depends on the provider</label>
                    </div>
                </div>

                <button class="btn" onclick="checkKnowledge()">Check All Answers</button>
                <div id="knowledgeFeedback" style="margin-top: 20px;"></div>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="showPage(3)">Previous</button>
                <button class="nav-btn" onclick="showPage(5)">Next</button>
            </div>
        </div>

        <!-- Page 5: Thin vs Thick Clients -->
        <div class="page" id="page5">
            <h2>Thin vs Thick Clients</h2>
            
            <div class="task-container">
                <h3>Interactive Client Simulation</h3>
                <p>Click the buttons to see how thin and thick clients handle processing differently:</p>
                
                <div class="simulation" style="height: 400px;">
                    <div style="position: absolute; left: 25%; top: 50%; transform: translate(-50%, -50%); text-align: center;">
                        <h4>Thin Client</h4>
                        <div class="client" id="thinClient" style="position: relative; margin: 20px auto;">Thin</div>
                        <button class="btn" onclick="simulateThinClient()">Process Task</button>
                        <p id="thinProcessing" style="margin-top: 10px;"></p>
                    </div>
                    
                    <div style="position: absolute; right: 25%; top: 50%; transform: translate(50%, -50%); text-align: center;">
                        <h4>Thick Client</h4>
                        <div class="client" id="thickClient" style="position: relative; margin: 20px auto; width: 80px; height: 80px;">Thick</div>
                        <button class="btn" onclick="simulateThickClient()">Process Task</button>
                        <p id="thickProcessing" style="margin-top: 10px;"></p>
                    </div>
                    
                    <div class="server" style="top: 20px; left: 50%; transform: translateX(-50%);" id="centralServer">Server</div>
                </div>
            </div>

            <div class="task-container">
                <h3>Odd One Out</h3>
                <p>In each group, identify which characteristic doesn't belong and explain why:</p>
                
                <div style="margin: 20px 0;">
                    <h4>Group 1 - Thin Client Characteristics:</h4>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <div class="clickable" onclick="checkOddOne('group1', 'expensive')">Inexpensive hardware</div>
                        <div class="clickable" onclick="checkOddOne('group1', 'correct')">Powerful GPU required</div>
                        <div class="clickable" onclick="checkOddOne('group1', 'central')">Central software updates</div>
                        <div class="clickable" onclick="checkOddOne('group1', 'minimal')">Minimal local storage</div>
                    </div>
                    <p id="group1Feedback" style="margin-top: 10px;"></p>
                </div>
                
                <div style="margin: 20px 0;">
                    <h4>Group 2 - Thick Client Characteristics:</h4>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <div class="clickable" onclick="checkOddOne('group2', 'local')">Local processing power</div>
                        <div class="clickable" onclick="checkOddOne('group2', 'correct')">Useless without internet</div>
                        <div class="clickable" onclick="checkOddOne('group2', 'adaptable')">Adaptable to different uses</div>
                        <div class="clickable" onclick="checkOddOne('group2', 'expensive')">Higher purchase cost</div>
                    </div>
                    <p id="group2Feedback" style="margin-top: 10px;"></p>
                </div>
            </div>

            <div class="task-container">
                <h3>Compare and Contrast</h3>
                <p>Complete this comparison table by filling in the missing information:</p>
                
                <table style="width: 100%; border-collapse: collapse;">
                    <tr>
                        <th style="border: 1px solid #ddd; padding: 10px;">Aspect</th>
                        <th style="border: 1px solid #ddd; padding: 10px;">Thin Client</th>
                        <th style="border: 1px solid #ddd; padding: 10px;">Thick Client</th>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #ddd; padding: 10px;">Processing Location</td>
                        <td style="border: 1px solid #ddd; padding: 10px;">
                            <input type="text" id="thin1" style="width: 100%;" placeholder="Where does processing happen?">
                        </td>
                        <td style="border: 1px solid #ddd; padding: 10px;">
                            <input type="text" id="thick1" style="width: 100%;" placeholder="Where does processing happen?">
                        </td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #ddd; padding: 10px;">Cost</td>
                        <td style="border: 1px solid #ddd; padding: 10px;">
                            <input type="text" id="thin2" style="width: 100%;" placeholder="Initial cost level?">
                        </td>
                        <td style="border: 1px solid #ddd; padding: 10px;">
                            <input type="text" id="thick2" style="width: 100%;" placeholder="Initial cost level?">
                        </td>
                    </tr>
                </table>
                
                <button class="btn" onclick="checkComparison()" style="margin-top: 10px;">Check Answers</button>
                <p id="comparisonFeedback" style="margin-top: 10px;"></p>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="showPage(4)">Previous</button>
                <button class="nav-btn" onclick="showPage(6)">Next</button>
            </div>
        </div>

        <!-- Page 6: Practice Exam Questions -->
        <div class="page" id="page6">
            <h2>Practice Exam Questions</h2>
            
            <div class="task-container">
                <h3>Question 1 (4 marks)</h3>
                <p>Explain two benefits of using cloud storage for a small business compared to traditional local storage.</p>
                <textarea id="exam1" rows="6" placeholder="Write your answer here..."></textarea>
                <div style="margin-top: 10px;">
                    <label>Predicted marks: <input type="number" id="marks1" min="0" max="4" style="width: 50px;"></label>
                    <button class="btn" onclick="checkExamAnswer(1, 4)">Show Mark Scheme</button>
                </div>
                <div class="mark-scheme" id="markScheme1">
                    <h4>Mark Scheme:</h4>
                    <p>1 mark for each valid benefit (max 2) + 1 mark for each explanation (max 2)</p>
                    <p>Possible benefits:</p>
                    <ul>
                        <li>Accessibility - Can access files from anywhere with internet connection</li>
                        <li>Cost savings - No need to purchase expensive storage hardware upfront</li>
                        <li>Automatic backups - Data is backed up automatically by the provider</li>
                        <li>Scalability - Can easily increase storage as business grows</li>
                        <li>Collaboration - Multiple employees can access and share files easily</li>
                    </ul>
                </div>
            </div>

            <div class="task-container">
                <h3>Question 2 (6 marks)</h3>
                <p>A hospital is deciding between using public cloud or private cloud for storing patient medical records. Discuss the advantages and disadvantages of each option in this context.</p>
                <textarea id="exam2" rows="8" placeholder="Write your answer here..."></textarea>
                <div style="margin-top: 10px;">
                    <label>Predicted marks: <input type="number" id="marks2" min="0" max="6" style="width: 50px;"></label>
                    <button class="btn" onclick="checkExamAnswer(2, 6)">Show Mark Scheme</button>
                </div>
                <div class="mark-scheme" id="markScheme2">
                    <h4>Mark Scheme:</h4>
                    <p>Up to 3 marks for public cloud discussion, up to 3 marks for private cloud discussion</p>
                    <p>Public Cloud:</p>
                    <ul>
                        <li>Advantage: Lower upfront costs, no infrastructure maintenance</li>
                        <li>Disadvantage: Security concerns with sensitive medical data on third-party servers</li>
                        <li>Disadvantage: Compliance issues with data protection regulations</li>
                    </ul>
                    <p>Private Cloud:</p>
                    <ul>
                        <li>Advantage: Full control over security and data location</li>
                        <li>Advantage: Better compliance with healthcare regulations</li>
                        <li>Disadvantage: Higher costs for infrastructure and IT staff</li>
                    </ul>
                </div>
            </div>

            <div class="task-container">
                <h3>Question 3 (3 marks)</h3>
                <p>Draw a diagram showing how a thin client system works. Label the key components.</p>
                <canvas id="drawingCanvas" width="600" height="300"></canvas>
                <button class="btn btn-reset" onclick="clearCanvas()">Clear Canvas</button>
                <div style="margin-top: 10px;">
                    <label>Predicted marks: <input type="number" id="marks3" min="0" max="3" style="width: 50px;"></label>
                    <button class="btn" onclick="checkExamAnswer(3, 3)">Show Mark Scheme</button>
                </div>
                <div class="mark-scheme" id="markScheme3">
                    <h4>Mark Scheme:</h4>
                    <p>1 mark for showing thin client device(s)</p>
                    <p>1 mark for showing central server</p>
                    <p>1 mark for showing connection/network between them with correct data flow</p>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="showPage(5)">Previous</button>
                <button class="nav-btn" onclick="showPage(7)">Next</button>
            </div>
        </div>

        <!-- Page 7: Extension Activities -->
        <div class="page" id="page7">
            <h2>Extension Activities</h2>
            
            <div class="task-container">
                <h3>Beyond the Specification</h3>
                <p>These activities go beyond the A-level requirements to deepen your understanding:</p>
            </div>

            <div class="task-container">
                <h3>Research Task: Edge Computing</h3>
                <p>Edge computing is becoming increasingly important alongside cloud computing. Research and explain:</p>
                <ol>
                    <li>What is edge computing?</li>
                    <li>How does it differ from traditional cloud computing?</li>
                    <li>Give two real-world applications where edge computing is beneficial</li>
                </ol>
                <textarea id="edgeComputing" rows="8" placeholder="Write your research findings here..."></textarea>
                <button class="btn" onclick="checkExtension('edge')">Submit Research</button>
                <p id="edgeFeedback" style="margin-top: 10px;"></p>
            </div>

            <div class="task-container">
                <h3>Future Trends Analysis</h3>
                <p>Consider how cloud computing might evolve in the next 10 years. Address:</p>
                <ul>
                    <li>Quantum computing in the cloud</li>
                    <li>AI-driven cloud optimization</li>
                    <li>Environmental sustainability</li>
                </ul>
                <textarea id="futureTrends" rows="6" placeholder="Share your predictions..."></textarea>
                <button class="btn" onclick="checkExtension('future')">Submit Analysis</button>
                <p id="futureFeedback" style="margin-top: 10px;"></p>
            </div>

            <div class="task-container">
                <h3>Mini Project: Cloud Cost Calculator</h3>
                <p>Design a simple algorithm (in pseudocode) that calculates whether cloud storage or local storage would be more cost-effective for a business based on:</p>
                <ul>
                    <li>Amount of data (GB)</li>
                    <li>Expected growth rate</li>
                    <li>Number of users</li>
                    <li>Time period (years)</li>
                </ul>
                <textarea id="algorithm" rows="10" placeholder="Write your pseudocode here..."></textarea>
                <button class="btn" onclick="checkExtension('algorithm')">Submit Algorithm</button>
                <p id="algorithmFeedback" style="margin-top: 10px;"></p>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="showPage(6)">Previous</button>
                <button class="nav-btn" onclick="showPage(8)">Next</button>
            </div>
        </div>

        <!-- Page 8: Summary and Final Quiz -->
        <div class="page" id="page8">
            <h2>Summary and Final Assessment</h2>
            
            <div class="task-container">
                <h3>Key Takeaways</h3>
                <ul>
                    <li>Cloud computing uses remote servers accessed via the internet</li>
                    <li>Cloud storage offers accessibility and automatic backups but requires internet</li>
                    <li>Cloud software reduces hardware requirements but needs constant connectivity</li>
                    <li>Public cloud is cost-effective; private cloud offers more control</li>
                    <li>Thin clients rely on servers; thick clients process locally</li>
                </ul>
            </div>

            <div class="task-container">
                <h3>Final Quiz</h3>
                <div id="finalQuiz">
                    <div style="margin: 20px 0;">
                        <p><strong>1. What is the main characteristic of cloud computing?</strong></p>
                        <label><input type="radio" name="q1" value="a"> Processing happens on your local computer</label><br>
                        <label><input type="radio" name="q1" value="b"> Services are hosted remotely on internet servers</label><br>
                        <label><input type="radio" name="q1" value="c"> Data is stored only on physical drives</label><br>
                        <label><input type="radio" name="q1" value="d"> No internet connection is required</label>
                    </div>

                    <div style="margin: 20px 0;">
                        <p><strong>2. Which is NOT a benefit of cloud storage?</strong></p>
                        <label><input type="radio" name="q2" value="a"> Automatic backups</label><br>
                        <label><input type="radio" name="q2" value="b"> Access from anywhere</label><br>
                        <label><input type="radio" name="q2" value="c"> Works without internet</label><br>
                        <label><input type="radio" name="q2" value="d"> Easy file sharing</label>
                    </div>

                    <div style="margin: 20px 0;">
                        <p><strong>3. True or False: Thin clients have powerful local processors</strong></p>
                        <label><input type="radio" name="q3" value="true"> True</label><br>
                        <label><input type="radio" name="q3" value="false"> False</label>
                    </div>

                    <div style="margin: 20px 0;">
                        <p><strong>4. Private cloud is best for organizations that need:</strong></p>
                        <label><input type="radio" name="q4" value="a"> The lowest possible costs</label><br>
                        <label><input type="radio" name="q4" value="b"> No IT staff</label><br>
                        <label><input type="radio" name="q4" value="c"> Maximum control over their data</label><br>
                        <label><input type="radio" name="q4" value="d"> Minimal setup time</label>
                    </div>

                    <div style="margin: 20px 0;">
                        <p><strong>5. Which client type continues to work without network connection?</strong></p>
                        <label><input type="radio" name="q5" value="a"> Thin client</label><br>
                        <label><input type="radio" name="q5" value="b"> Thick client</label><br>
                        <label><input type="radio" name="q5" value="c"> Both equally</label><br>
                        <label><input type="radio" name="q5" value="d"> Neither</label>
                    </div>

                    <div style="margin: 20px 0;">
                        <p><strong>6. Cloud software updates are typically:</strong></p>
                        <label><input type="radio" name="q6" value="a"> Installed manually by users</label><br>
                        <label><input type="radio" name="q6" value="b"> Handled automatically by the provider</label><br>
                        <label><input type="radio" name="q6" value="c"> Not possible</label><br>
                        <label><input type="radio" name="q6" value="d"> Require downloading patches</label>
                    </div>

                    <div style="margin: 20px 0;">
                        <p><strong>7. The main cost advantage of public cloud is:</strong></p>
                        <label><input type="radio" name="q7" value="a"> No subscription fees</label><br>
                        <label><input type="radio" name="q7" value="b"> Lower upfront infrastructure costs</label><br>
                        <label><input type="radio" name="q7" value="c"> Free unlimited storage</label><br>
                        <label><input type="radio" name="q7" value="d"> No internet costs</label>
                    </div>

                    <div style="margin: 20px 0;">
                        <p><strong>8. True or False: Cloud storage files are typically stored on a single server</strong></p>
                        <label><input type="radio" name="q8" value="true"> True</label><br>
                        <label><input type="radio" name="q8" value="false"> False</label>
                    </div>
                </div>

                <button class="btn" onclick="checkFinalQuiz()">Submit Quiz</button>
                <p id="quizFeedback" style="margin-top: 20px;"></p>
            </div>

            <div class="task-container" style="background: #e3f2fd;">
                <h3>🎥 Additional Resources</h3>
                <p>Your teacher may provide video links here for further learning:</p>
                <div style="border: 2px dashed #2196F3; padding: 40px; text-align: center; border-radius: 10px;">
                    <p style="color: #666;">Video links will be added by your teacher</p>
                </div>
            </div>

            <div class="task-container" style="background: #f3e5f5;">
                <h3>🎉 Congratulations!</h3>
                <p>You've completed the Cloud Computing lesson!</p>
                <p>Your final level: <strong><span id="finalLevel">0</span></strong></p>
                <p>Total XP earned: <strong><span id="finalXP">0</span></strong></p>
                <h4>Achievements Unlocked:</h4>
                <div id="achievementsList"></div>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="showPage(7)">Previous</button>
                <button class="nav-btn" disabled>Next</button>
            </div>
        </div>
    </div>

    <!-- Achievement Popup -->
    <div class="achievement-popup" id="achievementPopup">
        <div class="achievement-icon">🏆</div>
        <h3 id="achievementTitle">Achievement Unlocked!</h3>
        <p id="achievementDesc">Description</p>
    </div>

    <!-- Feedback Modal -->
    <div class="feedback-modal" id="feedbackModal">
        <div class="feedback-content">
            <h3>Send Feedback</h3>
            <p>Found a bug or have a suggestion? Let us know!</p>
            <textarea id="feedbackText" rows="6" placeholder="Describe the issue or suggestion..."></textarea>
            <div style="margin-top: 10px;">
                <button class="btn" onclick="sendFeedback()">Send</button>
                <button class="btn btn-reset" onclick="closeFeedback()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Feedback Button -->
    <button class="feedback-btn" onclick="openFeedback()" aria-label="Send feedback">Feedback</button>

    <!-- Shame Message -->
    <div class="shame-message" id="shameMessage">
        Nice try! But pasting is disabled. Type it yourself! 😊
    </div>

    <script>
        // Mobile menu toggle
        function toggleMobileMenu() {
            let menu = document.querySelector('.nav-menu');
            menu.classList.toggle('show');
        }

        // Close mobile menu when clicking a nav item
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function() {
                if (window.innerWidth <= 768) {
                    document.querySelector('.nav-menu').classList.remove('show');
                }
            });
        });

        // Close mobile menu when clicking outside
        document.addEventListener('click', function(e) {
            if (window.innerWidth <= 768) {
                let menu = document.querySelector('.nav-menu');
                let menuBtn = document.querySelector('.mobile-menu-btn');
                
                if (!menu.contains(e.target) && !menuBtn.contains(e.target) && menu.classList.contains('show')) {
                    menu.classList.remove('show');
                }
            }
        });

        // Handle window resize
        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
                document.querySelector('.nav-menu').classList.remove('show');
            }
        });

        // Global variables
        let currentPage = 0;
        let xp = 0;
        let level = 0;
        let achievements = [];
        let completedTasks = new Set();
        let selectedCards = [];
        let matchedPairs = 0;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setupAntiPaste();
            setupKeyboardNavigation();
            setupCanvas();
            updateXPDisplay();
        });

        // Page navigation
        function showPage(pageNum) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            
            document.getElementById('page' + pageNum).classList.add('active');
            document.querySelectorAll('.nav-item')[pageNum].classList.add('active');
            
            currentPage = pageNum;
            window.scrollTo(0, 0);
        }

        // XP System
        function addXP(amount, taskId) {
            if (completedTasks.has(taskId)) return;
            
            completedTasks.add(taskId);
            xp += amount;
            
            // Calculate level (20 XP per level, max level 5)
            let newLevel = Math.min(Math.floor(xp / 20), 5);
            
            if (newLevel > level) {
                level = newLevel;
                showAchievement('Level Up!', 'You reached Level ' + level + '!');
            }
            
            updateXPDisplay();
        }

        function updateXPDisplay() {
            document.getElementById('xp').textContent = xp;
            document.getElementById('level').textContent = level;
            
            let xpPercentage = (xp % 20) * 5;
            if (level >= 5) xpPercentage = 100;
            
            document.getElementById('xpBar').style.width = xpPercentage + '%';
        }

        // Achievement System
        function showAchievement(title, description) {
            achievements.push(title);
            
            document.getElementById('achievementTitle').textContent = title;
            document.getElementById('achievementDesc').textContent = description;
            
            let popup = document.getElementById('achievementPopup');
            popup.classList.add('show');
            
            setTimeout(() => {
                popup.classList.remove('show');
            }, 3000);
        }

        // Anti-paste functionality
        function setupAntiPaste() {
            let inputs = document.querySelectorAll('input[type="text"], textarea');
            inputs.forEach(input => {
                input.addEventListener('paste', function(e) {
                    e.preventDefault();
                    showShameMessage();
                });
                
                input.addEventListener('contextmenu', function(e) {
                    e.preventDefault();
                });
            });
        }

        function showShameMessage() {
            let shame = document.getElementById('shameMessage');
            shame.style.display = 'block';
            setTimeout(() => {
                shame.style.display = 'none';
            }, 3000);
        }

        // Keyboard Navigation
        function setupKeyboardNavigation() {
            document.addEventListener('keydown', function(e) {
                if (e.key === 'ArrowLeft' && currentPage > 0) {
                    showPage(currentPage - 1);
                } else if (e.key === 'ArrowRight' && currentPage < 8) {
                    showPage(currentPage + 1);
                }
            });
        }

        // Canvas Setup
        function setupCanvas() {
            let canvas = document.getElementById('drawingCanvas');
            if (!canvas) return;
            
            let ctx = canvas.getContext('2d');
            let drawing = false;
            
            function getCoordinates(e) {
                let rect = canvas.getBoundingClientRect();
                let x, y;
                
                if (e.touches) {
                    x = e.touches[0].clientX - rect.left;
                    y = e.touches[0].clientY - rect.top;
                } else {
                    x = e.clientX - rect.left;
                    y = e.clientY - rect.top;
                }
                
                return { x: x * (canvas.width / rect.width), y: y * (canvas.height / rect.height) };
            }
            
            function startDrawing(e) {
                drawing = true;
                let coords = getCoordinates(e);
                ctx.beginPath();
                ctx.moveTo(coords.x, coords.y);
            }
            
            function draw(e) {
                if (!drawing) return;
                e.preventDefault();
                
                let coords = getCoordinates(e);
                ctx.lineTo(coords.x, coords.y);
                ctx.stroke();
            }
            
            function stopDrawing() {
                drawing = false;
            }
            
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            canvas.addEventListener('touchstart', startDrawing);
            canvas.addEventListener('touchmove', draw);
            canvas.addEventListener('touchend', stopDrawing);
            
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            ctx.strokeStyle = '#333';
        }

        function clearCanvas() {
            let canvas = document.getElementById('drawingCanvas');
            let ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        // Accessibility Functions
        function toggleHighContrast() {
            document.body.classList.toggle('high-contrast');
        }

        function toggleDyslexiaFont() {
            document.body.classList.toggle('dyslexia-font');
        }

        function toggleLargeFont() {
            document.body.classList.toggle('large-font');
        }

        // Page 0: Starter Activity
        function categorizeItem(element) {
            let type = element.getAttribute('data-type');
            let zone = type === 'cloud' ? 'cloudZone' : 'localZone';
            
            if (!element.parentElement.id.includes('Zone')) {
                document.getElementById(zone).appendChild(element);
            }
        }

        function checkStarter() {
            let cloudItems = document.getElementById('cloudZone').children;
            let localItems = document.getElementById('localZone').children;
            
            let correctCloud = 0;
            let correctLocal = 0;
            
            for (let item of cloudItems) {
                if (item.getAttribute('data-type') === 'cloud') correctCloud++;
            }
            
            for (let item of localItems) {
                if (item.getAttribute('data-type') === 'local') correctLocal++;
            }
            
            let total = correctCloud + correctLocal;
            let feedback = document.getElementById('starterFeedback');
            
            if (total === 8) {
                feedback.innerHTML = '<span class="correct">Perfect! All items correctly categorized!</span>';
                addXP(10, 'starter');
            } else {
                feedback.innerHTML = '<span class="incorrect">Not quite right. ' + total + '/8 correct. Try again!</span>';
            }
        }

        function resetStarter() {
            let items = document.querySelectorAll('#cloudZone .clickable, #localZone .clickable');
            let container = document.getElementById('starterItems');
            
            items.forEach(item => {
                container.appendChild(item);
            });
            
            document.getElementById('starterFeedback').innerHTML = '';
        }

        // Page 1: Cloud Simulation
        function simulateCloudAccess() {
            let servers = ['server1', 'server2', 'server3'];
            let randomServer = servers[Math.floor(Math.random() * servers.length)];
            
            // Reset all servers
            servers.forEach(id => {
                document.getElementById(id).classList.remove('active');
            });
            
            // Activate random server
            setTimeout(() => {
                document.getElementById(randomServer).classList.add('active');
                document.getElementById('simFeedback').innerHTML = 
                    '<span class="correct">File accessed from ' + randomServer.replace('server', 'Server ') + '!</span>';
            }, 500);
            
            addXP(5, 'cloudSim');
        }

        // Fill in blanks
        function selectWord(element, blankId) {
            document.getElementById(blankId).textContent = element.textContent;
        }

        function checkFillBlanks() {
            let blank1 = document.getElementById('blank1').textContent.trim();
            let blank2 = document.getElementById('blank2').textContent.trim();
            
            let feedback = document.getElementById('fillFeedback');
            
            if (blank1 === 'remotely' && blank2 === 'redundant') {
                feedback.innerHTML = '<span class="correct">Excellent! Cloud computing uses remote, redundant servers.</span>';
                addXP(10, 'fillBlanks');
            } else {
                feedback.innerHTML = '<span class="incorrect">Not quite. Think about where cloud services are hosted and why multiple servers are used.</span>';
            }
        }

        function resetFillBlanks() {
            document.getElementById('blank1').textContent = '_______';
            document.getElementById('blank2').textContent = '_______';
            document.getElementById('fillFeedback').innerHTML = '';
        }

        // Page 2: Storage Benefits/Drawbacks
        function categorizeStorage(element) {
            let type = element.getAttribute('data-type');
            let zone = type === 'benefit' ? 'benefitZone' : 'drawbackZone';
            
            if (!element.parentElement.id.includes('Zone')) {
                document.getElementById(zone).appendChild(element);
            }
        }

        function checkStorageMatch() {
            let benefits = document.getElementById('benefitZone').children;
            let drawbacks = document.getElementById('drawbackZone').children;
            
            let correctBenefits = 0;
            let correctDrawbacks = 0;
            
            for (let item of benefits) {
                if (item.getAttribute('data-type') === 'benefit') correctBenefits++;
            }
            
            for (let item of drawbacks) {
                if (item.getAttribute('data-type') === 'drawback') correctDrawbacks++;
            }
            
            let total = correctBenefits + correctDrawbacks;
            let feedback = document.getElementById('storageFeedback');
            
            if (total === 8) {
                feedback.innerHTML = '<span class="correct">Outstanding! You understand the trade-offs of cloud storage.</span>';
                addXP(15, 'storageMatch');
            } else {
                feedback.innerHTML = '<span class="incorrect">' + total + '/8 correct. Remember: benefits help users, drawbacks create limitations.</span>';
            }
        }

        function resetStorageMatch() {
            let items = document.querySelectorAll('#benefitZone .clickable, #drawbackZone .clickable');
            let container = document.getElementById('storageStatements');
            
            items.forEach(item => {
                container.appendChild(item);
            });
            
            document.getElementById('storageFeedback').innerHTML = '';
        }

        function showStorageHint() {
            addXP(-5, 'storageHint');
            alert('Hint: Benefits make things easier or better for users. Drawbacks create restrictions or dependencies.');
        }

        // Page 3: Software Matching
        function flipCard(element) {
            element.style.background = '#e3f2fd';
            selectedCards.push(element);
            
            if (selectedCards.length === 2) {
                checkSoftwareMatch();
            }
        }

        function checkSoftwareMatch() {
            let card1 = selectedCards[0];
            let card2 = selectedCards[1];
            
            if (card1.getAttribute('data-pair') === card2.getAttribute('data-pair')) {
                card1.style.background = '#c8e6c9';
                card2.style.background = '#c8e6c9';
                card1.onclick = null;
                card2.onclick = null;
                matchedPairs++;
                
                if (matchedPairs === 4) {
                    document.getElementById('softwareMatchFeedback').innerHTML = 
                        '<span class="correct">Perfect matching! You understand traditional vs cloud software.</span>';
                    addXP(10, 'softwareMatch');
                }
            } else {
                setTimeout(() => {
                    card1.style.background = 'white';
                    card2.style.background = 'white';
                }, 1000);
            }
            
            selectedCards = [];
        }

        function resetSoftwareMatch() {
            let cards = document.querySelectorAll('#softwareComparison .clickable');
            cards.forEach(card => {
                card.style.background = 'white';
                card.onclick = function() { flipCard(this); };
            });
            matchedPairs = 0;
            selectedCards = [];
            document.getElementById('softwareMatchFeedback').innerHTML = '';
        }

        // Reflection Question
        function checkReflection() {
            let answer = document.getElementById('reflectionAnswer').value;
            let wordCount = answer.trim().split(/\s+/).length;
            
            if (wordCount < 30) {
                document.getElementById('reflectionFeedback').innerHTML = 
                    '<span class="incorrect">Please provide a more detailed response (at least 30 words).</span>';
                return;
            }
            
            let keywords = ['cost', 'access', 'update', 'internet', 'hardware', 'software', 'maintenance', 'security'];
            let keywordsFound = 0;
            
            keywords.forEach(keyword => {
                if (answer.toLowerCase().includes(keyword)) keywordsFound++;
            });
            
            let xpAwarded = Math.min(keywordsFound * 3, 15);
            addXP(xpAwarded, 'reflection');
            
            document.getElementById('reflectionFeedback').innerHTML = 
                '<span class="correct">Good reflection! You covered ' + keywordsFound + ' key considerations. (+' + xpAwarded + ' XP)</span>';
        }

        // Page 4: Cloud Simulation Functions
        let currentSimStep = 0;
        
        function runStep(step) {
            currentSimStep = step;
            let statusText = document.getElementById('statusText');
            let svg = document.getElementById('dataPathsSvg');
            
            // Highlight current step
            document.getElementById('step' + step).style.boxShadow = '0 0 10px rgba(102, 126, 234, 0.5)';
            
            // Update progress bar
            document.getElementById('progressBar').style.width = (step * 20) + '%';
            
            // Clear previous paths
            svg.innerHTML = `<defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
                </marker>
            </defs>`;
            
            switch(step) {
                case 1:
                    // Initial Setup
                    statusText.innerHTML = '<strong>Step 1: Initial Setup</strong><br>Public Cloud: Ready to use immediately - just sign up!<br>Private Cloud: Need to purchase servers, set up data center, hire IT staff.';
                    
                    // Animate public cloud
                    document.querySelectorAll('#publicServers .cloud-server').forEach((server, i) => {
                        setTimeout(() => {
                            server.style.transform = 'scale(1.1)';
                            server.style.background = '#4CAF50';
                            setTimeout(() => {
                                server.style.transform = 'scale(1)';
                            }, 300);
                        }, i * 200);
                    });
                    
                    // Show setup time
                    setTimeout(() => {
                        let publicCost = document.getElementById('publicCost');
                        publicCost.innerHTML += '<br>⏱️ Setup: Minutes';
                        
                        let privateCost = document.getElementById('privateCost');
                        privateCost.innerHTML += '<br>⏱️ Setup: Weeks/Months';
                    }, 1000);
                    
                    document.getElementById('step1Status').innerHTML = '✅';
                    document.getElementById('step1').style.borderColor = '#4CAF50';
                    document.getElementById('step1').style.background = '#e8f5e9';
                    document.getElementById('btn2').disabled = false;
                    addXP(5, 'cloudSim1');
                    
                    // Haptic feedback on mobile
                    if (navigator.vibrate) navigator.vibrate(50);
                    break;
                    
                case 2:
                    // Store Data
                    statusText.innerHTML = '<strong>Step 2: Storing Data</strong><br>Watch how data is stored in each cloud type!';
                    
                    // Add other companies to public cloud
                    let publicUsers = document.getElementById('publicUsers');
                    publicUsers.innerHTML = `
                        <p style="font-size: 12px; margin-top: 10px;">Shared with:</p>
                        <div style="display: flex; gap: 5px; justify-content: center;">
                            <div style="width: 40px; height: 40px; background: #FFC107; border-radius: 5px; font-size: 10px; display: flex; align-items: center; justify-content: center;">Shop</div>
                            <div style="width: 40px; height: 40px; background: #9C27B0; border-radius: 5px; font-size: 10px; display: flex; align-items: center; justify-content: center;">Bank</div>
                            <div style="width: 40px; height: 40px; background: #E91E63; border-radius: 5px; font-size: 10px; display: flex; align-items: center; justify-content: center;">Tech</div>
                        </div>
                    `;
                    
                    // Animate data flow
                    animateDataFlow('public');
                    setTimeout(() => animateDataFlow('private'), 1500);
                    
                    document.getElementById('step2Status').innerHTML = '✅';
                    document.getElementById('step2').style.borderColor = '#4CAF50';
                    document.getElementById('step2').style.background = '#e8f5e9';
                    document.getElementById('btn3').disabled = false;
                    addXP(5, 'cloudSim2');
                    if (navigator.vibrate) navigator.vibrate(50);
                    break;
                    
                case 3:
                    // Access & Control
                    statusText.innerHTML = '<strong>Step 3: Access & Control</strong><br>Public Cloud: Provider controls security, updates, backups<br>Private Cloud: You control everything - full responsibility!';
                    
                    // Show control indicators
                    let publicSection = document.getElementById('publicCloudSection');
                    let controlIndicator = document.createElement('div');
                    controlIndicator.style.cssText = 'margin-top: 10px; padding: 5px; background: #ffeb3b; border-radius: 5px; font-size: 12px;';
                    controlIndicator.innerHTML = '🏢 Provider Controlled';
                    publicSection.appendChild(controlIndicator);
                    
                    let privateControl = document.getElementById('privateControl');
                    privateControl.style.background = '#e3f2fd';
                    privateControl.style.padding = '5px';
                    privateControl.style.borderRadius = '5px';
                    privateControl.style.animation = 'pulse 1s 3';
                    
                    document.getElementById('step3Status').innerHTML = '✅';
                    document.getElementById('btn4').disabled = false;
                    addXP(5, 'cloudSim3');
                    break;
                    
                case 4:
                    // Scaling
                    statusText.innerHTML = '<strong>Step 4: Scaling</strong><br>Need more storage? Watch how each cloud type scales!';
                    
                    // Public cloud scaling
                    let newPublicServer = document.createElement('div');
                    newPublicServer.className = 'cloud-server';
                    newPublicServer.style.cssText = 'width: 60px; height: 80px; background: #81C784; border-radius: 5px; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; opacity: 0; transition: opacity 0.5s;';
                    newPublicServer.textContent = 'NEW';
                    document.getElementById('publicServers').appendChild(newPublicServer);
                    
                    setTimeout(() => {
                        newPublicServer.style.opacity = '1';
                        newPublicServer.style.background = '#4CAF50';
                    }, 100);
                    
                    // Private cloud scaling message
                    setTimeout(() => {
                        let privateSection = document.getElementById('privateCloudSection');
                        let scaleMsg = document.createElement('div');
                        scaleMsg.style.cssText = 'margin-top: 10px; padding: 5px; background: #ffcdd2; border-radius: 5px; font-size: 12px;';
                        scaleMsg.innerHTML = '📈 Need to buy more hardware!';
                        privateSection.appendChild(scaleMsg);
                    }, 1000);
                    
                    document.getElementById('step4Status').innerHTML = '✅';
                    document.getElementById('btn5').disabled = false;
                    addXP(5, 'cloudSim4');
                    break;
                    
                case 5:
                    // Cost Analysis
                    statusText.innerHTML = '<strong>Step 5: Cost Analysis Over Time</strong><br>Public: Low start, ongoing fees | Private: High start, lower ongoing';
                    
                    // Create cost comparison
                    let costComparison = document.createElement('div');
                    costComparison.style.cssText = 'position: absolute; bottom: 150px; left: 50%; transform: translateX(-50%); background: white; padding: 15px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);';
                    costComparison.innerHTML = `
                        <h4 style="margin-bottom: 10px;">5-Year Cost Comparison</h4>
                        <div style="display: flex; gap: 20px;">
                            <div style="text-align: center;">
                                <div style="font-weight: bold; color: #4CAF50;">Public Cloud</div>
                                <div style="font-size: 24px;">$$</div>
                                <div style="font-size: 12px;">Predictable monthly</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-weight: bold; color: #2196F3;">Private Cloud</div>
                                <div style="font-size: 24px;">$$$</div>
                                <div style="font-size: 12px;">High upfront</div>
                            </div>
                        </div>
                    `;
                    document.getElementById('cloudSimulationArea').appendChild(costComparison);
                    
                    document.getElementById('step5Status').innerHTML = '✅';
                    addXP(10, 'cloudSim5');
                    showAchievement('Cloud Expert', 'Completed the cloud simulation!');
                    break;
            }
        }
        
        function animateDataFlow(type) {
            let svg = document.getElementById('dataPathsSvg');
            let company = document.getElementById('companyBuilding').getBoundingClientRect();
            let container = document.getElementById('cloudSimulationArea').getBoundingClientRect();
            
            let servers;
            if (type === 'public') {
                servers = document.querySelectorAll('#publicServers .cloud-server');
            } else {
                servers = document.querySelectorAll('#privateServers .cloud-server');
            }
            
            servers.forEach((server, i) => {
                let serverRect = server.getBoundingClientRect();
                
                // Calculate positions relative to container
                let startX = company.left + company.width/2 - container.left;
                let startY = company.top - container.top;
                let endX = serverRect.left + serverRect.width/2 - container.left;
                let endY = serverRect.top + serverRect.height - container.top;
                
                // Create animated path
                let path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                let d = `M ${startX} ${startY} Q ${(startX + endX)/2} ${startY - 50} ${endX} ${endY}`;
                path.setAttribute('d', d);
                path.setAttribute('fill', 'none');
                path.setAttribute('stroke', type === 'public' ? '#4CAF50' : '#2196F3');
                path.setAttribute('stroke-width', '2');
                path.setAttribute('marker-end', 'url(#arrowhead)');
                path.style.strokeDasharray = '300';
                path.style.strokeDashoffset = '300';
                path.style.animation = 'dash 1s ease-in-out forwards';
                path.style.animationDelay = i * 0.2 + 's';
                
                svg.appendChild(path);
                
                // Highlight server when data arrives
                setTimeout(() => {
                    server.style.transform = 'scale(1.1)';
                    server.style.boxShadow = '0 0 20px rgba(0,0,0,0.3)';
                    setTimeout(() => {
                        server.style.transform = 'scale(1)';
                        server.style.boxShadow = 'none';
                    }, 500);
                }, 1000 + i * 200);
            });
        }
        
        function resetCloudSimulation() {
            // Reset all steps
            currentSimStep = 0;
            document.getElementById('statusText').innerHTML = 'Ready to start the simulation!';
            
            // Clear SVG
            document.getElementById('dataPathsSvg').innerHTML = `<defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
                </marker>
            </defs>`;
            
            // Reset progress bar
            document.getElementById('progressBar').style.width = '0%';
            
            // Reset buttons
            for (let i = 1; i <= 5; i++) {
                document.getElementById('btn' + i).disabled = i > 1;
                document.getElementById('step' + i + 'Status').innerHTML = '';
                document.getElementById('step' + i).style.borderColor = '#e0e0e0';
                document.getElementById('step' + i).style.background = 'white';
                document.getElementById('step' + i).style.boxShadow = 'none';
            }
            
            // Reset displays
            document.getElementById('publicCost').innerHTML = '💰 Pay-as-you-go';
            document.getElementById('privateCost').innerHTML = '💰 High upfront cost';
            document.getElementById('publicUsers').innerHTML = '';
            
            // Remove added elements
            let addedElements = document.querySelectorAll('.cloud-server:nth-child(n+4), [style*="margin-top: 10px"]');
            addedElements.forEach(el => {
                if (el.parentElement.id !== 'privateControl') {
                    el.remove();
                }
            });
            
            // Remove cost comparison if exists
            let costComp = document.querySelector('.cost-comparison');
            if (costComp) costComp.remove();
        }
        
        function showCloudHint() {
            addXP(-5, 'cloudHint');
            alert('Hint: Public cloud is like renting an apartment - shared building, lower upfront cost. Private cloud is like owning a house - full control, higher initial investment!');
        }
        
        function checkQuizAnswer(question, answer) {
            let feedback = document.getElementById(question + 'Feedback');
            let correct = false;
            
            if (question === 'q1' && answer === 'public') {
                feedback.innerHTML = '<span class="correct">Correct! Public cloud servers are shared among multiple organizations.</span>';
                correct = true;
            } else if (question === 'q2' && answer === 'private') {
                feedback.innerHTML = '<span class="correct">Correct! Private cloud requires purchasing servers and infrastructure upfront.</span>';
                correct = true;
            } else if (question === 'q3' && answer === 'private') {
                feedback.innerHTML = '<span class="correct">Correct! Private cloud gives you full control over security settings and policies.</span>';
                correct = true;
            } else {
                feedback.innerHTML = '<span class="incorrect">Not quite. Think about what the simulation showed you.</span>';
            }
            
            if (correct) {
                addXP(5, 'quiz_' + question);
            }
        }
        
        function checkScenarioAnswer() {
            let answer = document.getElementById('scenarioAnswer').value;
            let wordCount = answer.trim().split(/\s+/).length;
            
            if (wordCount < 20) {
                document.getElementById('scenarioFeedback').innerHTML = 
                    '<span class="incorrect">Please provide more detail (at least 20 words).</span>';
                return;
            }
            
            let keywords = ['private', 'security', 'control', 'sensitive', 'compliance', 'patient', 'medical', 'confidential'];
            let keywordsFound = 0;
            
            keywords.forEach(keyword => {
                if (answer.toLowerCase().includes(keyword)) keywordsFound++;
            });
            
            if (answer.toLowerCase().includes('private')) {
                document.getElementById('scenarioFeedback').innerHTML = 
                    '<span class="correct">Excellent! You correctly identified that private cloud is better for sensitive medical data due to security and compliance requirements. (+15 XP)</span>';
                addXP(15, 'cloudScenario');
            } else {
                document.getElementById('scenarioFeedback').innerHTML = 
                    '<span class="incorrect">Consider the sensitive nature of medical records and regulatory requirements. Private cloud offers better control for healthcare data.</span>';
            }
        }

        // Page 5: Client Simulations
        function simulateThinClient() {
            let client = document.getElementById('thinClient');
            let server = document.getElementById('centralServer');
            let feedback = document.getElementById('thinProcessing');
            
            client.style.background = '#ffeb3b';
            feedback.textContent = 'Sending request to server...';
            
            setTimeout(() => {
                server.classList.add('active');
                feedback.textContent = 'Server processing...';
                
                setTimeout(() => {
                    client.style.background = '#4CAF50';
                    feedback.innerHTML = '<span class="correct">Results received from server!</span>';
                    server.classList.remove('active');
                    addXP(5, 'thinSim');
                }, 1500);
            }, 1000);
        }

        function simulateThickClient() {
            let client = document.getElementById('thickClient');
            let feedback = document.getElementById('thickProcessing');
            
            client.style.background = '#ffeb3b';
            feedback.textContent = 'Processing locally...';
            
            setTimeout(() => {
                client.style.background = '#4CAF50';
                feedback.innerHTML = '<span class="correct">Task completed using local resources!</span>';
                addXP(5, 'thickSim');
            }, 1500);
        }

        // Odd One Out
        function checkOddOne(group, answer) {
            let feedback = document.getElementById(group + 'Feedback');
            
            if ((group === 'group1' && answer === 'correct') || 
                (group === 'group2' && answer === 'correct')) {
                feedback.innerHTML = '<span class="correct">Correct! That characteristic belongs to the opposite client type.</span>';
                addXP(5, group);
            } else {
                feedback.innerHTML = '<span class="incorrect">Try again. Which characteristic doesn\'t fit with the others?</span>';
            }
        }

        // Comparison Table
        function checkComparison() {
            let thin1 = document.getElementById('thin1').value.toLowerCase();
            let thick1 = document.getElementById('thick1').value.toLowerCase();
            let thin2 = document.getElementById('thin2').value.toLowerCase();
            let thick2 = document.getElementById('thick2').value.toLowerCase();
            
            let correct = 0;
            if (thin1.includes('server') || thin1.includes('remote')) correct++;
            if (thick1.includes('local') || thick1.includes('client')) correct++;
            if (thin2.includes('low') || thin2.includes('cheap')) correct++;
            if (thick2.includes('high') || thick2.includes('expensive')) correct++;
            
            let feedback = document.getElementById('comparisonFeedback');
            
            if (correct === 4) {
                feedback.innerHTML = '<span class="correct">Perfect comparison! You understand the key differences.</span>';
                addXP(10, 'comparison');
            } else {
                feedback.innerHTML = '<span class="incorrect">' + correct + '/4 correct. Think about where processing happens and cost implications.</span>';
            }
        }

        // Page 6: Exam Questions
        function checkExamAnswer(questionNum, maxMarks) {
            let answer = document.getElementById('exam' + questionNum).value;
            let predictedMarks = parseInt(document.getElementById('marks' + questionNum).value) || 0;
            
            let wordCount = answer.trim().split(/\s+/).length;
            let minWords = maxMarks * 15;
            
            if (wordCount < minWords) {
                alert('Please write a more detailed answer before viewing the mark scheme (aim for at least ' + minWords + ' words).');
                return;
            }
            
            document.getElementById('markScheme' + questionNum).classList.add('show');
            addXP(predictedMarks * 2, 'exam' + questionNum);
        }

        // Page 7: Extension Activities
        function checkExtension(type) {
            let fieldMap = {
                'edge': 'edgeComputing',
                'future': 'futureTrends',
                'algorithm': 'algorithm'
            };
            
            let answer = document.getElementById(fieldMap[type]).value;
            let wordCount = answer.trim().split(/\s+/).length;
            
            if (wordCount < 50) {
                document.getElementById(type + 'Feedback').innerHTML = 
                    '<span class="incorrect">Please provide more detail (at least 50 words).</span>';
                return;
            }
            
            document.getElementById(type + 'Feedback').innerHTML = 
                '<span class="correct">Excellent extension work! This shows deep understanding beyond the specification.</span>';
            addXP(20, 'extension_' + type);
            
            if (!achievements.includes('Extension Master')) {
                showAchievement('Extension Master', 'Completed an extension activity!');
            }
        }

        // Page 8: Final Quiz
        function checkFinalQuiz() {
            let answers = {
                q1: 'b',
                q2: 'c',
                q3: 'false',
                q4: 'c',
                q5: 'b',
                q6: 'b',
                q7: 'b',
                q8: 'false'
            };
            
            let correct = 0;
            
            for (let q in answers) {
                let selected = document.querySelector('input[name="' + q + '"]:checked');
                if (selected && selected.value === answers[q]) {
                    correct++;
                }
            }
            
            let feedback = document.getElementById('quizFeedback');
            let percentage = Math.round((correct / 8) * 100);
            
            feedback.innerHTML = '<h3>Quiz Results: ' + correct + '/8 (' + percentage + '%)</h3>';
            
            if (percentage >= 80) {
                feedback.innerHTML += '<span class="correct">Excellent work! You have mastered cloud computing concepts.</span>';
                showAchievement('Quiz Master', 'Scored 80% or higher on the final quiz!');
            } else if (percentage >= 60) {
                feedback.innerHTML += '<span style="color: orange;">Good effort! Review the topics you found challenging.</span>';
            } else {
                feedback.innerHTML += '<span class="incorrect">Keep studying! Review the lesson and try again.</span>';
            }
            
            addXP(correct * 5, 'finalQuiz');
            
            // Update final stats
            document.getElementById('finalLevel').textContent = level;
            document.getElementById('finalXP').textContent = xp;
            
            // Display achievements
            let achievementsList = document.getElementById('achievementsList');
            achievementsList.innerHTML = achievements.map(a => '<li>' + a + '</li>').join('');
        }

        // Feedback System
        function openFeedback() {
            document.getElementById('feedbackModal').style.display = 'flex';
        }

        function closeFeedback() {
            document.getElementById('feedbackModal').style.display = 'none';
        }

        function sendFeedback() {
            let feedbackText = document.getElementById('feedbackText').value;
            if (!feedbackText.trim()) {
                alert('Please enter your feedback before sending.');
                return;
            }
            
            let pageInfo = 'Page ' + (currentPage + 1) + ' - ' + document.querySelector('.page.active h2').textContent;
            let subject = 'Cloud Computing Lesson Feedback - ' + pageInfo;
            let body = 'Feedback from: ' + pageInfo + '\n\n' + feedbackText;
            
            // Create mailto link
            let mailtoLink = 'mailto:millingtond@mgs.org?subject=' + encodeURIComponent(subject) + 
                           '&body=' + encodeURIComponent(body);
            
            window.location.href = mailtoLink;
            
            closeFeedback();
            document.getElementById('feedbackText').value = '';
            alert('Thank you for your feedback!');
        }

        // Mobile touch support
        if ('ontouchstart' in window) {
            document.body.addEventListener('touchstart', function() {
                if (navigator.vibrate) {
                    navigator.vibrate(10);
                }
            });
        }
    </script>
</body>
</html>