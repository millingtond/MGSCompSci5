<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Copyright and Software Licensing - A Level Computer Science</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f7fa;
            min-height: 100vh;
        }
        
        .high-contrast {
            background: #000 !important;
            color: #fff !important;
        }
        
        .high-contrast * {
            background: #000 !important;
            color: #fff !important;
            border-color: #fff !important;
        }
        
        .dyslexia-font {
            font-family: 'OpenDyslexic', Arial, sans-serif !important;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            padding: 30px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: relative;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            padding: 0 20px;
        }
        
        h1 {
            font-size: 2.5rem;
            font-weight: 700;
        }
        
        .stats {
            display: flex;
            gap: 30px;
            align-items: center;
            background: rgba(255,255,255,0.2);
            padding: 15px 25px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }
        
        .xp-display, .level-display {
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .xp-bar {
            width: 200px;
            height: 10px;
            background: rgba(255,255,255,0.3);
            border-radius: 5px;
            overflow: hidden;
            margin-top: 5px;
        }
        
        .xp-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981 0%, #34d399 100%);
            width: 0%;
            transition: width 0.5s ease;
        }
        
        nav {
            background: white;
            padding: 15px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .nav-container {
            display: flex;
            gap: 10px;
            padding: 0 20px;
            overflow-x: auto;
            align-items: center;
        }
        
        .nav-btn {
            padding: 8px 16px;
            background: #e5e7eb;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            white-space: nowrap;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .nav-btn:hover {
            background: #d1d5db;
            transform: translateY(-2px);
        }
        
        .nav-btn.active {
            background: #6366f1;
            color: white;
        }
        
        .accessibility-controls {
            display: flex;
            gap: 10px;
            margin-left: auto;
        }
        
        .access-btn {
            padding: 6px 12px;
            background: #f3f4f6;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .section {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            position: relative;
        }
        
        .card h2 {
            color: #1f2937;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }
        
        .card h3 {
            color: #374151;
            margin: 20px 0 15px;
            font-size: 1.4rem;
        }
        
        .learning-outcomes {
            background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);
            border-left: 4px solid #3b82f6;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .learning-outcomes ul {
            list-style: none;
            padding-left: 0;
        }
        
        .learning-outcomes li {
            padding: 8px 0;
            padding-left: 30px;
            position: relative;
        }
        
        .learning-outcomes li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #10b981;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .activity-box {
            background: #f9fafb;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            position: relative;
        }
        
        .activity-box.highlighted {
            border-color: #6366f1;
            background: #eef2ff;
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.1);
        }
        
        .quiz-question {
            margin: 20px 0;
            padding: 20px;
            background: #f3f4f6;
            border-radius: 10px;
        }
        
        .options {
            margin: 15px 0;
        }
        
        .option {
            display: block;
            margin: 10px 0;
            padding: 12px 20px;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }
        
        .option:hover {
            background: #f9fafb;
            border-color: #9ca3af;
            transform: translateX(5px);
        }
        
        .option.selected {
            background: #dbeafe;
            border-color: #3b82f6;
        }
        
        .option.correct {
            background: #d1fae5;
            border-color: #10b981;
        }
        
        .option.incorrect {
            background: #fee2e2;
            border-color: #ef4444;
        }
        
        input[type="text"], textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        input[type="text"]:focus, textarea:focus {
            outline: none;
            border-color: #6366f1;
        }
        
        .btn {
            padding: 12px 24px;
            background: #6366f1;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            margin: 5px;
        }
        
        .btn:hover {
            background: #4f46e5;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }
        
        .btn:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-secondary {
            background: #e5e7eb;
            color: #374151;
        }
        
        .btn-secondary:hover {
            background: #d1d5db;
        }
        
        .drag-item {
            padding: 10px 15px;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            margin: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-block;
        }
        
        .drag-item:hover {
            background: #f3f4f6;
            transform: scale(1.05);
        }
        
        .drag-item.selected {
            background: #dbeafe;
            border-color: #3b82f6;
        }
        
        .drop-zone {
            min-height: 50px;
            padding: 15px;
            border: 2px dashed #9ca3af;
            border-radius: 8px;
            margin: 10px 0;
            background: #f9fafb;
            transition: all 0.3s;
        }
        
        .drop-zone.highlight {
            background: #eef2ff;
            border-color: #6366f1;
        }
        
        .drop-zone.filled {
            background: #dbeafe;
            border-style: solid;
        }
        
        .feedback {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: 500;
            display: none;
        }
        
        .feedback.correct {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #10b981;
        }
        
        .feedback.incorrect {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #ef4444;
        }
        
        .achievement-popup {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 20px 30px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            z-index: 1000;
            display: none;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .achievement-popup h3 {
            color: #6366f1;
            margin-bottom: 5px;
        }
        
        .achievement-popup p {
            color: #6b7280;
        }
        
        .hint-btn {
            background: #fbbf24;
            color: #78350f;
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            margin: 10px 0;
        }
        
        .hint {
            background: #fef3c7;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            display: none;
            border: 1px solid #fbbf24;
        }
        
        .simulation {
            background: #1f2937;
            color: white;
            padding: 30px;
            border-radius: 12px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }
        
        .simulation-step {
            padding: 15px;
            margin: 10px 0;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            opacity: 0.5;
            transition: all 0.3s;
        }
        
        .simulation-step.active {
            opacity: 1;
            background: rgba(99, 102, 241, 0.2);
            border: 2px solid #6366f1;
            transform: scale(1.02);
        }
        
        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
        }
        
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin: 30px 0;
        }
        
        .reset-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #ef4444;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .reset-btn:hover {
            background: #dc2626;
        }
        
        .feedback-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #6b7280;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            z-index: 100;
        }
        
        .feedback-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .feedback-content {
            background: white;
            padding: 30px;
            border-radius: 12px;
            max-width: 500px;
            width: 90%;
        }
        
        .shame-message {
            background: #fee2e2;
            color: #991b1b;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            display: none;
            font-weight: bold;
            text-align: center;
        }
        
        .drawing-canvas {
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            margin: 20px 0;
            cursor: crosshair;
            display: block;
            background: white;
            touch-action: none;
        }
        
        .canvas-controls {
            display: flex;
            gap: 10px;
            margin: 10px 0;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 1.8rem;
            }
            
            .header-content {
                flex-direction: column;
            }
            
            .stats {
                width: 100%;
                justify-content: center;
            }
            
            .card {
                padding: 20px;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
                                <h1>Copyright and Software Licensing</h1>
            <div class="stats">
                <div class="level-display">Level: <span id="level">1</span></div>
                <div class="xp-display">XP: <span id="xp">0</span>/<span id="xp-max">100</span></div>
                <div class="xp-bar">
                    <div class="xp-fill" id="xp-fill"></div>
                </div>
            </div>
        </div>
    </header>
    
    <nav>
        <div class="nav-container">
            <button class="nav-btn active" data-section="1">Intro</button>
            <button class="nav-btn" data-section="2">Copyright</button>
            <button class="nav-btn" data-section="3">Legislation</button>
            <button class="nav-btn" data-section="4">Protection</button>
            <button class="nav-btn" data-section="5">Licenses</button>
            <button class="nav-btn" data-section="6">Open vs Commercial</button>
            <button class="nav-btn" data-section="7">Real World</button>
            <button class="nav-btn" data-section="8">Exam Practice</button>
            <button class="nav-btn" data-section="9">Extension</button>
            <div class="accessibility-controls">
                <button class="access-btn" id="contrast-toggle">High Contrast</button>
                <button class="access-btn" id="font-toggle">Dyslexia Font</button>
                <button class="access-btn" id="font-size">A+</button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <!-- Section 1: Introduction & Starter -->
        <section class="section active" id="section-1">
            <div class="card">
                <h2>Welcome to Copyright and Software Licensing</h2>
                
                <div class="learning-outcomes">
                    <h3>Learning Outcomes</h3>
                    <ul>
                        <li>Define copyright and intellectual property rights</li>
                        <li>Explain copyright legislation requirements</li>
                        <li>Describe methods to prevent software copyright infringement</li>
                        <li>Compare different types of software licenses</li>
                        <li>Evaluate benefits of commercial vs open source software</li>
                        <li>Apply knowledge to real-world scenarios</li>
                    </ul>
                </div>
                
                <div class="activity-box highlighted">
                    <button class="reset-btn" onclick="resetActivity('starter')">Reset</button>
                    <h3>Starter Activity: Test Your Knowledge</h3>
                    <p>Let's see what you already know about copyright and software licensing!</p>
                    
                    <div class="quiz-question">
                        <p><strong>Q1:</strong> Which statement best describes copyright?</p>
                        <div class="options" id="starter-q1">
                            <label class="option">
                                <input type="radio" name="starter1" value="a">
                                The right to copy any software freely
                            </label>
                            <label class="option">
                                <input type="radio" name="starter1" value="b">
                                Legal rights protecting intellectual property from unauthorized use
                            </label>
                            <label class="option">
                                <input type="radio" name="starter1" value="c">
                                A fee paid to use software
                            </label>
                            <label class="option">
                                <input type="radio" name="starter1" value="d">
                                Permission to modify any program code
                            </label>
                        </div>
                    </div>
                    
                    <div class="quiz-question">
                        <p><strong>Q2:</strong> True or False: Open source software always means free of charge.</p>
                        <div class="options" id="starter-q2">
                            <label class="option">
                                <input type="radio" name="starter2" value="true">
                                True
                            </label>
                            <label class="option">
                                <input type="radio" name="starter2" value="false">
                                False
                            </label>
                        </div>
                    </div>
                    
                    <button class="btn" onclick="checkStarter()">Check Answers</button>
                    <div class="feedback" id="starter-feedback"></div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <div></div>
                <button class="btn" onclick="nextSection()">Next →</button>
            </div>
        </section>
        
        <!-- Section 2: Copyright Fundamentals -->
        <section class="section" id="section-2">
            <div class="card">
                <h2>Understanding Copyright</h2>
                <button class="reset-btn" onclick="resetActivity('copyright')">Reset</button>
                
                <div class="activity-box">
                    <h3>What is Copyright?</h3>
                    <p>Copyright represents the formal and legal rights to ownership of intellectual property. It's a crucial concept in the digital age!</p>
                    
                    <div class="simulation" id="copyright-sim">
                        <h4>Copyright Protection Simulation</h4>
                        <div class="simulation-step" id="sim-step-1">
                            <strong>Step 1: Creation</strong>
                            <p>Developer creates original software code</p>
                        </div>
                        <div class="simulation-step" id="sim-step-2">
                            <strong>Step 2: Automatic Protection</strong>
                            <p>Copyright protection applies automatically upon creation</p>
                        </div>
                        <div class="simulation-step" id="sim-step-3">
                            <strong>Step 3: Rights Granted</strong>
                            <p>Owner has exclusive rights to copy, distribute, and modify</p>
                        </div>
                        <div class="simulation-step" id="sim-step-4">
                            <strong>Step 4: Legal Protection</strong>
                            <p>Unauthorized use can result in legal action</p>
                        </div>
                        <button class="btn" onclick="runCopyrightSim()">Run Simulation</button>
                    </div>
                </div>
                
                <div class="activity-box">
                    <h3>Fill in the Blanks</h3>
                    <p>Complete the following statements about copyright. Choose from the options provided:</p>
                    
                    <div style="background: #f3f4f6; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                        <strong>Word Bank:</strong>
                        <span class="drag-item" data-answer="ownership">ownership</span>
                        <span class="drag-item" data-answer="unauthorized">unauthorized</span>
                        <span class="drag-item" data-answer="redress">redress</span>
                        <span class="drag-item" data-answer="intellectual">intellectual</span>
                        <span class="drag-item" data-answer="physical">physical</span>
                        <span class="drag-item" data-answer="temporary">temporary</span>
                        <span class="drag-item" data-answer="permanent">permanent</span>
                        <span class="drag-item" data-answer="free">free</span>
                    </div>
                    
                    <p>1. Copyright represents formal and legal rights to <span class="drop-zone" data-answer="ownership"></span> of property.</p>
                    <p>2. It protects against <span class="drop-zone" data-answer="unauthorized"></span> reproduction of work.</p>
                    <p>3. Copyright provides for legal right of <span class="drop-zone" data-answer="redress"></span>.</p>
                    <p>4. Copyright protects <span class="drop-zone" data-answer="intellectual"></span> property rights.</p>
                    
                    <button class="btn" onclick="checkFillBlanks()">Check Answers</button>
                    <div class="feedback" id="fill-feedback"></div>
                </div>
                
                <div class="activity-box">
                    <h3>Quick Quiz: Copyright Conditions</h3>
                    <div class="quiz-question">
                        <p>Which of the following are copyright conditions? (Select all that apply)</p>
                        <label class="option">
                            <input type="checkbox" name="conditions" value="copying">
                            Copying
                        </label>
                        <label class="option">
                            <input type="checkbox" name="conditions" value="use">
                            Use
                        </label>
                        <label class="option">
                            <input type="checkbox" name="conditions" value="selling">
                            Selling
                        </label>
                        <label class="option">
                            <input type="checkbox" name="conditions" value="viewing">
                            Viewing
                        </label>
                    </div>
                    <button class="btn" onclick="checkConditions()">Submit</button>
                    <div class="feedback" id="conditions-feedback"></div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" onclick="previousSection()">← Previous</button>
                <button class="btn" onclick="nextSection()">Next →</button>
            </div>
        </section>
        
        <!-- Section 3: Copyright Legislation -->
        <section class="section" id="section-3">
            <div class="card">
                <h2>Copyright Legislation</h2>
                <button class="reset-btn" onclick="resetActivity('legislation')">Reset</button>
                
                <div class="activity-box highlighted">
                    <h3>Matching Activity: Legislation Requirements</h3>
                    <p>Match each copyright legislation requirement with its description. Click on matching pairs!</p>
                    
                    <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                        <div style="flex: 1; min-width: 250px;">
                            <h4>Requirements</h4>
                            <div class="drag-item match-item" data-match="registration" onclick="selectMatch(this)">
                                Registration requirement
                            </div>
                            <div class="drag-item match-item" data-match="period" onclick="selectMatch(this)">
                                Defined period
                            </div>
                            <div class="drag-item match-item" data-match="death" onclick="selectMatch(this)">
                                Death policy
                            </div>
                            <div class="drag-item match-item" data-match="symbol" onclick="selectMatch(this)">
                                Copyright indication
                            </div>
                        </div>
                        
                        <div style="flex: 1; min-width: 250px;">
                            <h4>Descriptions</h4>
                            <div class="drag-item match-item" data-match="symbol" onclick="selectMatch(this)">
                                Use of the © symbol
                            </div>
                            <div class="drag-item match-item" data-match="registration" onclick="selectMatch(this)">
                                Recording the date of creation
                            </div>
                            <div class="drag-item match-item" data-match="death" onclick="selectMatch(this)">
                                Policy if copyright holder dies
                            </div>
                            <div class="drag-item match-item" data-match="period" onclick="selectMatch(this)">
                                Time when copyright applies
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn" onclick="checkMatching()">Check Matches</button>
                    <div class="feedback" id="match-feedback"></div>
                </div>
                
                <div class="activity-box">
                    <h3>Scenario Analysis</h3>
                    <div style="background: #f3f4f6; padding: 20px; border-radius: 8px; margin-bottom: 15px;">
                        <p><strong>Scenario:</strong> Sarah has developed a new photo editing application. She wants to protect her work from being copied by competitors. The software took her 2 years to develop and includes unique algorithms she created.</p>
                    </div>
                    
                    <p><strong>Question:</strong> What steps should Sarah take to protect her copyright? Write at least 3 recommendations.</p>
                    <textarea id="scenario-answer" rows="4" placeholder="Write your recommendations here..."></textarea>
                    <button class="btn" onclick="checkScenario()">Submit Answer</button>
                    <button class="hint-btn" onclick="showHint('scenario')">Need a hint? (-5 XP)</button>
                    <div class="hint" id="scenario-hint">
                        Think about: registration, copyright symbol, documentation of creation date, and legal frameworks.
                    </div>
                    <div class="feedback" id="scenario-feedback"></div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" onclick="previousSection()">← Previous</button>
                <button class="btn" onclick="nextSection()">Next →</button>
            </div>
        </section>
        
        <!-- Section 4: Software Protection Methods -->
        <section class="section" id="section-4">
            <div class="card">
                <h2>Avoiding Copyright Infringement</h2>
                <button class="reset-btn" onclick="resetActivity('protection')">Reset</button>
                
                <div class="activity-box">
                    <h3>Protection Methods Sequencing</h3>
                    <p>Arrange these software protection methods from most to least effective. Click to reorder:</p>
                    
                    <div id="sequence-container">
                        <div class="drag-item sequence-item" data-order="3" onclick="moveSequenceItem(this)">
                            Time limit for installation
                        </div>
                        <div class="drag-item sequence-item" data-order="1" onclick="moveSequenceItem(this)">
                            Encryption with product key
                        </div>
                        <div class="drag-item sequence-item" data-order="2" onclick="moveSequenceItem(this)">
                            Limited installation count
                        </div>
                        <div class="drag-item sequence-item" data-order="4" onclick="moveSequenceItem(this)">
                            Unique code assignment
                        </div>
                    </div>
                    
                    <button class="btn" onclick="checkSequence()">Check Order</button>
                    <div class="feedback" id="sequence-feedback"></div>
                </div>
                
                <div class="activity-box highlighted">
                    <h3>Code Distribution Methods</h3>
                    <p>How can developers distribute software without revealing source code?</p>
                    
                    <div class="code-block">
                        <pre>// Original source code (not distributed)
function calculateLicense(user, date) {
    // Complex algorithm here
    return encryptedKey;
}

// What users receive:
myprogram.exe  // Compiled executable</pre>
                    </div>
                    
                    <div class="quiz-question">
                        <p>Select all methods for distributing software without code:</p>
                        <label class="option">
                            <input type="checkbox" name="distribution" value="exe">
                            Provide an .exe file
                        </label>
                        <label class="option">
                            <input type="checkbox" name="distribution" value="compile">
                            Compile the source code
                        </label>
                        <label class="option">
                            <input type="checkbox" name="distribution" value="obfuscate">
                            Obfuscate the code
                        </label>
                        <label class="option">
                            <input type="checkbox" name="distribution" value="minify">
                            Minify the code
                        </label>
                    </div>
                    <button class="btn" onclick="checkDistribution()">Check</button>
                    <div class="feedback" id="distribution-feedback"></div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" onclick="previousSection()">← Previous</button>
                <button class="btn" onclick="nextSection()">Next →</button>
            </div>
        </section>
        
        <!-- Section 5: License Types -->
        <section class="section" id="section-5">
            <div class="card">
                <h2>Types of Software Licenses</h2>
                <button class="reset-btn" onclick="resetActivity('licenses')">Reset</button>
                
                <div class="activity-box">
                    <h3>License Type Categorization</h3>
                    <p>Drag each characteristic to the correct license type:</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                        <div>
                            <h4>Commercial</h4>
                            <div class="drop-zone" id="commercial-zone" data-type="commercial"></div>
                        </div>
                        <div>
                            <h4>Open Source</h4>
                            <div class="drop-zone" id="opensource-zone" data-type="opensource"></div>
                        </div>
                        <div>
                            <h4>Shareware</h4>
                            <div class="drop-zone" id="shareware-zone" data-type="shareware"></div>
                        </div>
                        <div>
                            <h4>Freeware</h4>
                            <div class="drop-zone" id="freeware-zone" data-type="freeware"></div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <span class="drag-item" data-type="commercial" onclick="selectForDrop(this)">Purchased with restrictions</span>
                        <span class="drag-item" data-type="opensource" onclick="selectForDrop(this)">Source code included</span>
                        <span class="drag-item" data-type="shareware" onclick="selectForDrop(this)">Free trial period</span>
                        <span class="drag-item" data-type="freeware" onclick="selectForDrop(this)">Free forever, no source</span>
                        <span class="drag-item" data-type="commercial" onclick="selectForDrop(this)">Cannot edit code</span>
                        <span class="drag-item" data-type="opensource" onclick="selectForDrop(this)">Can redistribute changes</span>
                        <span class="drag-item" data-type="shareware" onclick="selectForDrop(this)">Option to buy later</span>
                        <span class="drag-item" data-type="freeware" onclick="selectForDrop(this)">Unlimited use allowed</span>
                    </div>
                    
                    <button class="btn" onclick="checkCategorization()">Check Categories</button>
                    <div class="feedback" id="category-feedback"></div>
                </div>
                
                <div class="activity-box">
                    <h3>Organization Comparison</h3>
                    <p>Compare the Free Software Foundation and Open Source Initiative:</p>
                    
                    <div class="quiz-question">
                        <p>Which statement is more accurate?</p>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="org-compare" value="a">
                                Both organizations have identical goals and approaches
                            </label>
                            <label class="option">
                                <input type="radio" name="org-compare" value="b">
                                FSF focuses on freedom while OSI focuses on practical benefits
                            </label>
                            <label class="option">
                                <input type="radio" name="org-compare" value="c">
                                FSF is for businesses while OSI is for individuals
                            </label>
                            <label class="option">
                                <input type="radio" name="org-compare" value="d">
                                They are competing organizations with opposite goals
                            </label>
                        </div>
                    </div>
                    <button class="btn" onclick="checkOrgCompare()">Submit</button>
                    <div class="feedback" id="org-feedback"></div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" onclick="previousSection()">← Previous</button>
                <button class="btn" onclick="nextSection()">Next →</button>
            </div>
        </section>
        
        <!-- Section 6: Open Source vs Commercial -->
        <section class="section" id="section-6">
            <div class="card">
                <h2>Open Source vs Commercial Software</h2>
                <button class="reset-btn" onclick="resetActivity('comparison')">Reset</button>
                
                <div class="activity-box highlighted">
                    <h3>Benefits Analysis</h3>
                    <p>Identify whether each benefit applies to customers or distributors of commercial software:</p>
                    
                    <div id="benefits-list">
                        <div class="quiz-question">
                            <p>1. Support and training readily available</p>
                            <select id="benefit-1">
                                <option value="">Select...</option>
                                <option value="customer">Customer benefit</option>
                                <option value="distributor">Distributor benefit</option>
                                <option value="both">Both</option>
                            </select>
                        </div>
                        
                        <div class="quiz-question">
                            <p>2. Can sell software for a fee</p>
                            <select id="benefit-2">
                                <option value="">Select...</option>
                                <option value="customer">Customer benefit</option>
                                <option value="distributor">Distributor benefit</option>
                                <option value="both">Both</option>
                            </select>
                        </div>
                        
                        <div class="quiz-question">
                            <p>3. More robust software with fewer bugs</p>
                            <select id="benefit-3">
                                <option value="">Select...</option>
                                <option value="customer">Customer benefit</option>
                                <option value="distributor">Distributor benefit</option>
                                <option value="both">Both</option>
                            </select>
                        </div>
                        
                        <div class="quiz-question">
                            <p>4. License prohibits unauthorized copies</p>
                            <select id="benefit-4">
                                <option value="">Select...</option>
                                <option value="customer">Customer benefit</option>
                                <option value="distributor">Distributor benefit</option>
                                <option value="both">Both</option>
                            </select>
                        </div>
                    </div>
                    
                    <button class="btn" onclick="checkBenefits()">Check Answers</button>
                    <div class="feedback" id="benefits-feedback"></div>
                </div>
                
                <div class="activity-box">
                    <h3>Case Study: Choosing a License</h3>
                    <div style="background: #f3f4f6; padding: 20px; border-radius: 8px;">
                        <p><strong>TechStart Ltd</strong> has developed a new project management tool. They're deciding between open source and commercial licensing.</p>
                        <ul>
                            <li>Development cost: £500,000</li>
                            <li>Target market: Small to medium businesses</li>
                            <li>Unique features: AI-powered task prediction</li>
                            <li>Competition: Several established players</li>
                        </ul>
                    </div>
                    
                    <p><strong>Your task:</strong> Write a recommendation (minimum 100 words) on which license type would be best and why.</p>
                    <textarea id="case-study" rows="6" placeholder="Write your recommendation here..."></textarea>
                    <div>Word count: <span id="word-count">0</span></div>
                    <button class="btn" onclick="checkCaseStudy()">Submit Recommendation</button>
                    <div class="feedback" id="case-feedback"></div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" onclick="previousSection()">← Previous</button>
                <button class="btn" onclick="nextSection()">Next →</button>
            </div>
        </section>
        
        <!-- Section 7: Real World Applications -->
        <section class="section" id="section-7">
            <div class="card">
                <h2>Real-World Applications</h2>
                <button class="reset-btn" onclick="resetActivity('realworld')">Reset</button>
                
                <div class="activity-box">
                    <h3>Common Mistakes to Avoid</h3>
                    <p>Identify which actions could lead to copyright infringement:</p>
                    
                    <div class="quiz-question">
                        <label class="option">
                            <input type="checkbox" name="mistakes" value="copying">
                            Copying code from Stack Overflow without checking license
                        </label>
                        <label class="option">
                            <input type="checkbox" name="mistakes" value="sharing">
                            Sharing commercial software with friends
                        </label>
                        <label class="option">
                            <input type="checkbox" name="mistakes" value="modifying">
                            Modifying open source code for personal use
                        </label>
                        <label class="option">
                            <input type="checkbox" name="mistakes" value="selling">
                            Selling modified commercial software
                        </label>
                        <label class="option">
                            <input type="checkbox" name="mistakes" value="attribution">
                            Using open source without attribution when required
                        </label>
                    </div>
                    <button class="btn" onclick="checkMistakes()">Check</button>
                    <div class="feedback" id="mistakes-feedback"></div>
                </div>
                
                <div class="activity-box highlighted">
                    <h3>Real Company Examples</h3>
                    <p>Match these real companies with their licensing approach:</p>
                    
                    <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                        <div style="flex: 1;">
                            <div class="drag-item" onclick="selectRealWorld(this)" data-company="microsoft">
                                Microsoft Office
                            </div>
                            <div class="drag-item" onclick="selectRealWorld(this)" data-company="linux">
                                Linux Kernel
                            </div>
                            <div class="drag-item" onclick="selectRealWorld(this)" data-company="winrar">
                                WinRAR
                            </div>
                            <div class="drag-item" onclick="selectRealWorld(this)" data-company="vlc">
                                VLC Media Player
                            </div>
                        </div>
                        <div style="flex: 1;">
                            <div class="drop-zone" data-company="commercial">Commercial License</div>
                            <div class="drop-zone" data-company="opensource">Open Source</div>
                            <div class="drop-zone" data-company="shareware">Shareware</div>
                            <div class="drop-zone" data-company="freeware">Freeware</div>
                        </div>
                    </div>
                    
                    <button class="btn" onclick="checkRealWorld()">Check Matches</button>
                    <div class="feedback" id="realworld-feedback"></div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" onclick="previousSection()">← Previous</button>
                <button class="btn" onclick="nextSection()">Next →</button>
            </div>
        </section>
        
        <!-- Section 8: Practice Exam Questions -->
        <section class="section" id="section-8">
            <div class="card">
                <h2>Practice Exam Questions</h2>
                <button class="reset-btn" onclick="resetActivity('exam')">Reset</button>
                
                <div class="activity-box">
                    <h3>Exam-Style Questions</h3>
                    <p>Complete these questions as you would in an exam. Mark schemes will be revealed after attempting.</p>
                    
                    <div class="quiz-question">
                        <p><strong>Question 1 (4 marks):</strong> Define copyright and explain two ways it protects software developers.</p>
                        <textarea id="exam-q1" rows="6" placeholder="Write your answer here..."></textarea>
                        <div>Predicted marks: <input type="number" id="marks-q1" min="0" max="4" style="width: 60px;"> / 4</div>
                    </div>
                    
                    <div class="quiz-question">
                        <p><strong>Question 2 (6 marks):</strong> Compare and contrast open source and commercial software licenses. Include at least three differences.</p>
                        <textarea id="exam-q2" rows="8" placeholder="Write your answer here..."></textarea>
                        <div>Predicted marks: <input type="number" id="marks-q2" min="0" max="6" style="width: 60px;"> / 6</div>
                    </div>
                    
                    <div class="quiz-question">
                        <p><strong>Question 3 (3 marks):</strong> Describe three methods used to prevent software copyright infringement.</p>
                        <textarea id="exam-q3" rows="5" placeholder="Write your answer here..."></textarea>
                        <div>Predicted marks: <input type="number" id="marks-q3" min="0" max="3" style="width: 60px;"> / 3</div>
                    </div>
                    
                    <button class="btn" onclick="submitExam()">Submit for Mark Scheme</button>
                    
                    <div id="mark-scheme" style="display: none; margin-top: 20px;">
                        <h4>Mark Scheme</h4>
                        <div class="code-block">
                            <strong>Q1 (4 marks):</strong>
                            - Definition: Copyright is the formal legal right to ownership of intellectual property (1 mark)
                            - Protection 1: Prevents unauthorized copying/reproduction (1 mark)
                            - Protection 2: Provides legal right of redress/ability to take legal action (1 mark)
                            - Clear explanation linking to software context (1 mark)
                            
                            <strong>Q2 (6 marks):</strong>
                            - Open source includes source code, commercial doesn't (2 marks)
                            - Commercial requires purchase/payment, open source often free (2 marks)
                            - Open source allows modification, commercial prohibits changes (2 marks)
                            
                            <strong>Q3 (3 marks):</strong>
                            Any three from:
                            - Encryption/Product keys (1 mark)
                            - Limited installation count (1 mark)
                            - Time limits for installation (1 mark)
                            - Unique code assignment (1 mark)
                            - Compiling code to executable (1 mark)
                        </div>
                    </div>
                </div>
                
                <div class="activity-box">
                    <h3>Drawing Canvas for Calculations</h3>
                    <p>Use this space for any working out:</p>
                    <canvas id="drawing-canvas" class="drawing-canvas" width="600" height="300"></canvas>
                    <div class="canvas-controls">
                        <button class="btn btn-secondary" onclick="clearCanvas()">Clear Canvas</button>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" onclick="previousSection()">← Previous</button>
                <button class="btn" onclick="nextSection()">Next →</button>
            </div>
        </section>
        
        <!-- Section 9: Extension & Summary -->
        <section class="section" id="section-9">
            <div class="card">
                <h2>Extension Activities &amp; Summary</h2>
                <button class="reset-btn" onclick="resetActivity('extension')">Reset</button>
                
                <div class="activity-box highlighted">
                    <h3>Extension: Beyond the Specification</h3>
                    <p>Research and explain one of the following advanced topics:</p>
                    
                    <ol>
                        <li>How does blockchain technology relate to copyright protection?</li>
                        <li>What is "copyleft" and how does it differ from copyright?</li>
                        <li>Investigate the concept of "software patents" vs copyright</li>
                        <li>Research Creative Commons licenses and their variations</li>
                    </ol>
                    
                    <textarea id="extension" rows="6" placeholder="Choose a topic and write your research findings here (minimum 150 words)..."></textarea>
                    <div>Word count: <span id="extension-word-count">0</span></div>
                    <button class="btn" onclick="checkExtension()">Submit Extension</button>
                    <div class="feedback" id="extension-feedback"></div>
                </div>
                
                <div class="activity-box">
                    <h3>Final Summary Quiz</h3>
                    <p>Test your understanding with these final questions:</p>
                    
                    <div class="quiz-question">
                        <p>1. The © symbol is used to indicate:</p>
                        <select id="summary-1">
                            <option value="">Select answer...</option>
                            <option value="a">Free software</option>
                            <option value="b">Copyright protection</option>
                            <option value="c">Open source license</option>
                            <option value="d">Shareware status</option>
                        </select>
                    </div>
                    
                    <div class="quiz-question">
                        <p>2. Which organization promotes free distribution of software with focus on practical benefits?</p>
                        <select id="summary-2">
                            <option value="">Select answer...</option>
                            <option value="a">Free Software Foundation</option>
                            <option value="b">Microsoft</option>
                            <option value="c">Open Source Initiative</option>
                            <option value="d">Copyright Office</option>
                        </select>
                    </div>
                    
                    <div class="quiz-question">
                        <p>3. True or False: Freeware always includes source code.</p>
                        <select id="summary-3">
                            <option value="">Select answer...</option>
                            <option value="true">True</option>
                            <option value="false">False</option>
                        </select>
                    </div>
                    
                    <div class="quiz-question">
                        <p>4. Which is NOT a method to prevent copyright infringement?</p>
                        <select id="summary-4">
                            <option value="">Select answer...</option>
                            <option value="a">Encryption</option>
                            <option value="b">Product keys</option>
                            <option value="c">Open sourcing</option>
                            <option value="d">Time limits</option>
                        </select>
                    </div>
                    
                    <div class="quiz-question">
                        <p>5. Commercial software benefits to customers include:</p>
                        <select id="summary-5">
                            <option value="">Select answer...</option>
                            <option value="a">Free modifications</option>
                            <option value="b">Source code access</option>
                            <option value="c">Professional support</option>
                            <option value="d">Unlimited sharing</option>
                        </select>
                    </div>
                    
                    <div class="quiz-question">
                        <p>6. Shareware typically offers:</p>
                        <select id="summary-6">
                            <option value="">Select answer...</option>
                            <option value="a">Permanent free use</option>
                            <option value="b">Limited trial period</option>
                            <option value="c">Source code included</option>
                            <option value="d">No restrictions</option>
                        </select>
                    </div>
                    
                    <button class="btn" onclick="checkSummary()">Submit Final Quiz</button>
                    <div class="feedback" id="summary-feedback"></div>
                </div>
                
                <div class="activity-box">
                    <h3>Videos Placeholder</h3>
                    <div style="background: #f3f4f6; padding: 30px; text-align: center; border-radius: 8px;">
                        <p>📹 Video content will be added here</p>
                        <p>Topics to cover: Copyright in practice, License comparison demos, Real-world case studies</p>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" onclick="previousSection()">← Previous</button>
                <button class="btn" onclick="completeLesson()">Complete Lesson 🎉</button>
            </div>
        </section>
    </div>
    
    <!-- Achievement Popup -->
    <div class="achievement-popup" id="achievement-popup">
        <h3 id="achievement-title">Achievement Unlocked!</h3>
        <p id="achievement-desc">Description</p>
    </div>
    
    <!-- Feedback Modal -->
    <button class="feedback-btn" onclick="openFeedback()">Feedback</button>
    <div class="feedback-modal" id="feedback-modal">
        <div class="feedback-content">
            <h3>Send Feedback</h3>
            <p>Found a bug or have a suggestion? Let us know!</p>
            <textarea id="feedback-text" rows="5" placeholder="Describe the issue or suggestion..."></textarea>
            <p>Current page: <span id="current-page">Section 1</span></p>
            <div style="margin-top: 15px;">
                <button class="btn" onclick="sendFeedback()">Send</button>
                <button class="btn btn-secondary" onclick="closeFeedback()">Cancel</button>
            </div>
        </div>
    </div>
    
    <!-- Shame Message -->
    <div class="shame-message" id="shame-message">
        🚫 Pasting is disabled! Type your own answers to learn properly! 🚫
    </div>

    <script>
        // Global state
        let currentSection = 1;
        let xp = 0;
        let level = 1;
        let completedActivities = new Set();
        let achievements = new Set();
        let selectedItem = null;
        let matchedPairs = new Set();
        let selectedDropItem = null;
        let selectedDragItem = null;
        let sequenceOrder = [];
        let realWorldMatches = {};
        
        // XP thresholds for levels
        const levelThresholds = [0, 100, 250, 450, 700, 1000];
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setupNavigation();
            setupAccessibility();
            setupCanvas();
            preventPaste();
            updateXPDisplay();
            setupDragDrop();
        });
        
        // Navigation
        function setupNavigation() {
            document.querySelectorAll(".nav-btn").forEach(btn => {
                btn.addEventListener("click", function() {
                    const section = parseInt(this.dataset.section);
                    goToSection(section);
                });
            });
        }
        
        function goToSection(section) {
            document.querySelectorAll(".section").forEach(s => s.classList.remove("active"));
            document.querySelectorAll(".nav-btn").forEach(b => b.classList.remove("active"));
            
            document.getElementById("section-" + section).classList.add("active");
            document.querySelector("[data-section=\"" + section + "\"]").classList.add("active");
            
            currentSection = section;
            document.getElementById("current-page").textContent = "Section " + section;
        }
        
        function nextSection() {
            if (currentSection < 9) {
                goToSection(currentSection + 1);
            }
        }
        
        function previousSection() {
            if (currentSection > 1) {
                goToSection(currentSection - 1);
            }
        }
        
        // Check for level up in addXP function
        function addXP(amount, activityId) {
            if (completedActivities.has(activityId)) {
                return; // Already completed
            }
            
            completedActivities.add(activityId);
            xp += amount;
            
            // Check for level up
            const oldLevel = level;
            updateLevel();
            updateXPDisplay();
            
            if (level > oldLevel && level <= 5) {
                showAchievement("Level Up!", "You have reached Level " + level + "!");
            }
        }
        
        function updateLevel() {
            for (let i = levelThresholds.length - 1; i >= 0; i--) {
                if (xp >= levelThresholds[i]) {
                    level = Math.min(i + 1, 5);
                    break;
                }
            }
        }
        
        function updateXPDisplay() {
            document.getElementById('xp').textContent = xp;
            document.getElementById('level').textContent = level;
            
            const maxXP = level < 5 ? levelThresholds[level] : levelThresholds[5];
            document.getElementById('xp-max').textContent = maxXP;
            
            const percentage = (xp / maxXP) * 100;
            document.getElementById('xp-fill').style.width = percentage + '%';
        }
        
        // Achievements
        function showAchievement(title, description) {
            const popup = document.getElementById('achievement-popup');
            document.getElementById('achievement-title').textContent = title;
            document.getElementById('achievement-desc').textContent = description;
            
            popup.style.display = 'block';
            setTimeout(() => {
                popup.style.display = 'none';
            }, 3000);
        }
        
        function checkAchievements() {
            if (completedActivities.has("starter") && !achievements.has("novice")) {
                achievements.add("novice");
                showAchievement("Copyright Novice", "Completed the starter activity!");
            }
            
            if (completedActivities.has("licenses") && !achievements.has("expert")) {
                achievements.add("expert");
                showAchievement("License Expert", "Mastered all license types!");
            }
        }
        
        // Accessibility
        function setupAccessibility() {
            document.getElementById("contrast-toggle").addEventListener("click", function() {
                document.body.classList.toggle("high-contrast");
            });
            
            document.getElementById("font-toggle").addEventListener("click", function() {
                document.body.classList.toggle("dyslexia-font");
            });
            
            document.getElementById("font-size").addEventListener("click", function() {
                const currentSize = parseFloat(getComputedStyle(document.body).fontSize);
                document.body.style.fontSize = (currentSize + 2) + "px";
            });
        }
        
        // Prevent paste
        function preventPaste() {
            document.addEventListener("paste", function(e) {
                e.preventDefault();
                const shame = document.getElementById("shame-message");
                shame.style.display = "block";
                setTimeout(() => {
                    shame.style.display = "none";
                }, 3000);
                return false;
            });
        }
        
        // Activity Functions
        
        // Starter Activity
        function checkStarter() {
            let correct = 0;
            const feedback = document.getElementById('starter-feedback');
            if (!feedback) return;
            
            const q1 = document.querySelector("input[name=\"starter1\"]:checked");
            const q2 = document.querySelector("input[name=\"starter2\"]:checked");
            
            if (q1 && q1.value === 'b') correct++;
            if (q2 && q2.value === 'false') correct++;
            
            if (correct === 2) {
                feedback.className = 'feedback correct';
                feedback.style.display = 'block';
                feedback.textContent = "Excellent! You have a good understanding of copyright basics.";
                addXP(20, "starter");
                checkAchievements();
            } else {
                feedback.className = 'feedback incorrect';
                feedback.style.display = 'block';
                feedback.textContent = "You got " + correct + "/2 correct. Review the content and try again!";
            }
        }
        
        // Copyright Simulation
        function runCopyrightSim() {
            const steps = ["sim-step-1", "sim-step-2", "sim-step-3", "sim-step-4"];
            let currentStep = 0;
            
            // Reset all steps
            steps.forEach(step => {
                document.getElementById(step).classList.remove("active");
            });
            
            const interval = setInterval(() => {
                if (currentStep < steps.length) {
                    document.getElementById(steps[currentStep]).classList.add("active");
                    currentStep++;
                } else {
                    clearInterval(interval);
                    addXP(15, "copyright-sim");
                }
            }, 1000);
        }
        
        // Setup drag and drop functionality
        function setupDragDrop() {
            // Setup drag items for fill in blanks
            document.querySelectorAll(".drag-item[data-answer]").forEach(item => {
                item.addEventListener("click", function() {
                    if (!this.classList.contains("used")) {
                        document.querySelectorAll(".drag-item[data-answer]").forEach(i => i.classList.remove("selected"));
                        this.classList.add("selected");
                        selectedDragItem = this;
                    }
                });
            });
            
            // Setup drop zones for fill in blanks
            document.querySelectorAll(".drop-zone[data-answer]").forEach(zone => {
                zone.addEventListener("click", function() {
                    if (selectedDragItem && !this.dataset.value) {
                        this.textContent = selectedDragItem.textContent;
                        this.dataset.value = selectedDragItem.dataset.answer;
                        this.classList.add("filled");
                        selectedDragItem.classList.add("used");
                        selectedDragItem.style.opacity = "0.5";
                        selectedDragItem.classList.remove("selected");
                        selectedDragItem = null;
                    } else if (this.dataset.value && !selectedDragItem) {
                        // Clear the zone if clicked when filled
                        const originalItem = document.querySelector(".drag-item[data-answer=\"" + this.dataset.value + "\"]:not(.selected)");
                        if (originalItem) {
                            originalItem.classList.remove("used");
                            originalItem.style.opacity = "1";
                        }
                        this.textContent = "";
                        this.dataset.value = "";
                        this.classList.remove("filled");
                    }
                });
            });
        }
        
        function checkFillBlanks() {
            const zones = document.querySelectorAll(".drop-zone[data-answer]");
            let correct = 0;
            let total = 0;
            
            zones.forEach(zone => {
                if (zone.dataset.answer) {
                    total++;
                    if (zone.dataset.value === zone.dataset.answer) {
                        correct++;
                        zone.style.background = "#d1fae5";
                    } else {
                        zone.style.background = "#fee2e2";
                    }
                }
            });
            
            const feedback = document.getElementById('fill-feedback');
            if (!feedback) return;
            
            if (correct === total && total > 0) {
                feedback.className = 'feedback correct';
                feedback.textContent = "Perfect! You understand the key copyright concepts.";
                addXP(25, "fill-blanks");
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = "You got " + correct + "/" + total + " correct. Try again!";
            }
            feedback.style.display = 'block';
        }
        
        // Conditions quiz
        function checkConditions() {
            const checkboxes = document.querySelectorAll("input[name=\"conditions\"]:checked");
            const selected = Array.from(checkboxes).map(cb => cb.value);
            const correct = ["copying", "use"];
            
            const feedback = document.getElementById('conditions-feedback');
            if (!feedback) return;
            
            if (selected.length === 2 && selected.includes("copying") && selected.includes("use")) {
                feedback.className = 'feedback correct';
                feedback.textContent = "Correct! Copying and Use are the two main copyright conditions.";
                addXP(15, "conditions");
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = "Not quite. Remember, the two copyright conditions are Copying and Use.";
            }
            feedback.style.display = 'block';
        }
        
        // Matching activity
        function selectMatch(element) {
            if (!selectedItem) {
                selectedItem = element;
                element.classList.add("selected");
            } else {
                if (selectedItem.dataset.match === element.dataset.match && selectedItem !== element) {
                    // Match found
                    selectedItem.style.background = "#d1fae5";
                    element.style.background = "#d1fae5";
                    matchedPairs.add(selectedItem.dataset.match);
                    selectedItem.classList.remove("selected");
                    selectedItem = null;
                } else {
                    // No match or same item
                    selectedItem.classList.remove("selected");
                    selectedItem = element;
                    element.classList.add("selected");
                }
            }
        }
        
        function checkMatching() {
            const feedback = document.getElementById('match-feedback');
            if (!feedback) return;
            
            if (matchedPairs.size === 4) {
                feedback.className = 'feedback correct';
                feedback.textContent = "Excellent matching! You understand all the legislation requirements.";
                addXP(20, "matching");
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = "You have matched " + matchedPairs.size + "/4 pairs. Keep trying!";
            }
            feedback.style.display = 'block';
        }
        
        // Scenario analysis
        function checkScenario() {
            const answer = document.getElementById('scenario-answer').value.trim();
            const keywords = ["registration", "copyright symbol", "©", "date", "documentation", "legal", "protection"];
            let foundKeywords = 0;
            
            keywords.forEach(keyword => {
                if (answer.toLowerCase().includes(keyword)) {
                    foundKeywords++;
                }
            });
            
            const feedback = document.getElementById('scenario-feedback');
            if (answer.length > 100 && foundKeywords >= 3) {
                feedback.className = 'feedback correct';
                feedback.textContent = 'Great analysis! Youve covered the key copyright protection steps.';
                addXP(30, 'scenario');
            } else if (answer.length < 50) {
                feedback.className = 'feedback incorrect';
                feedback.textContent = "Your answer is too short. Please provide at least 3 detailed recommendations.";
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = "Good effort! Consider mentioning registration, copyright symbols, and legal documentation.";
            }
            feedback.style.display = 'block';
        }
        
        // Hints
        function showHint(hintId) {
            const hintElement = document.getElementById(hintId + '-hint');
            if (hintElement) {
                hintElement.style.display = 'block';
                addXP(-5, 'hint-' + hintId); // Deduct XP for hints
            }
        }
        
        // Sequence activity
        function moveSequenceItem(item) {
            item.classList.toggle("selected");
            const index = sequenceOrder.indexOf(item);
            if (index > -1) {
                sequenceOrder.splice(index, 1);
                item.textContent = item.textContent.replace(/^\d+\. /, "");
            } else {
                sequenceOrder.push(item);
                item.textContent = (sequenceOrder.length) + ". " + item.textContent.replace(/^\d+\. /, "");
            }
        }
        
        function checkSequence() {
            const feedback = document.getElementById('sequence-feedback');
            if (!feedback) return;
            
            const correct = sequenceOrder.every((item, index) => {
                return parseInt(item.dataset.order) === index + 1;
            });
            
            if (correct && sequenceOrder.length === 4) {
                feedback.className = 'feedback correct';
                feedback.textContent = "Perfect sequence! You understand the effectiveness of protection methods.";
                addXP(25, 'sequence');
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = "Not quite right. Think about which methods are most secure.";
            }
            feedback.style.display = 'block';
        }
        
        // Distribution methods
        function checkDistribution() {
            const checkboxes = document.querySelectorAll("input[name=\"distribution\"]:checked");
            const selected = Array.from(checkboxes).map(cb => cb.value);
            const correct = ["exe", "compile"];
            
            const feedback = document.getElementById('distribution-feedback');
            if (!feedback) return;
            
            let allCorrect = correct.every(c => selected.includes(c)) && selected.length === 2;
            
            if (allCorrect) {
                feedback.className = 'feedback correct';
                feedback.textContent = "Correct! Providing .exe files and compiling source code are the main methods.";
                addXP(20, 'distribution');
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = "Not quite. The main methods are providing .exe files and compiling source code.";
            }
            feedback.style.display = 'block';
        }
        
        // License categorization
        function selectForDrop(item) {
            if (selectedDropItem) {
                selectedDropItem.classList.remove('selected');
            }
            selectedDropItem = item;
            item.classList.add('selected');
            
            // Add click listeners to drop zones
            document.querySelectorAll('.drop-zone[data-type]').forEach(zone => {
                zone.classList.add('highlight');
            });
        }
        
        // Add drop zone click handlers
        document.addEventListener("DOMContentLoaded", function() {
            document.querySelectorAll(".drop-zone[data-type]").forEach(zone => {
                zone.addEventListener("click", function() {
                    if (selectedDropItem && selectedDropItem.dataset.type === this.dataset.type) {
                        const item = selectedDropItem.cloneNode(true);
                        item.classList.remove("selected");
                        item.style.margin = "5px";
                        item.onclick = function() { this.remove(); };
                        this.appendChild(item);
                        
                        selectedDropItem.style.display = "none";
                        selectedDropItem = null;
                        
                        document.querySelectorAll(".drop-zone[data-type]").forEach(z => {
                            z.classList.remove("highlight");
                        });
                    }
                });
            });
        });
        
        function checkCategorization() {
            const zones = document.querySelectorAll(".drop-zone[data-type]");
            let correct = 0;
            let total = 0;
            
            zones.forEach(zone => {
                const items = zone.querySelectorAll(".drag-item");
                let zoneCorrect = true;
                
                items.forEach(item => {
                    total++;
                    if (item.dataset.type !== zone.dataset.type) {
                        zoneCorrect = false;
                    }
                });
                
                if (zoneCorrect && items.length > 0) {
                    correct += items.length;
                }
            });
            
            const feedback = document.getElementById('category-feedback');
            if (!feedback) return;
            
            if (correct === 8 && total === 8) { // 8 items total
                feedback.className = 'feedback correct';
                feedback.textContent = "Excellent categorization! You understand all license types.";
                addXP(30, 'categorization');
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = "You got " + correct + "/" + total + " items in the correct categories. Review and try again.";
            }
            feedback.style.display = 'block';
        }
        
        // Organization comparison
        function checkOrgCompare() {
            const selected = document.querySelector("input[name=\"org-compare\"]:checked");
            const feedback = document.getElementById("org-feedback");
            if (!feedback) return;
            
            if (selected && selected.value === "b") {
                feedback.className = 'feedback correct';
                feedback.textContent = "Correct! FSF focuses on freedom principles while OSI emphasizes practical benefits.";
                addXP(15, 'org-compare');
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = "Not quite. Consider what each organization prioritizes.";
            }
            feedback.style.display = 'block';
        }
        
        // Benefits analysis
        function checkBenefits() {
            const answers = {
                "benefit-1": "customer",
                "benefit-2": "distributor",
                "benefit-3": "customer",
                "benefit-4": "distributor"
            };
            
            let correct = 0;
            Object.keys(answers).forEach(id => {
                const select = document.getElementById(id);
                if (select && select.value === answers[id]) {
                    correct++;
                }
            });
            
            const feedback = document.getElementById('benefits-feedback');
            if (!feedback) return;
            
            if (correct === 4) {
                feedback.className = 'feedback correct';
                feedback.textContent = "Perfect! You understand who benefits from commercial software features.";
                addXP(25, 'benefits');
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = "You got " + correct + "/4 correct. Think about who gains from each feature.";
            }
            feedback.style.display = 'block';
        }
        
        // Case study
        document.getElementById('case-study').addEventListener('input', function() {
            const words = this.value.trim().split(/\s+/).filter(w => w.length > 0);
            document.getElementById('word-count').textContent = words.length;
        });
        
        function checkCaseStudy() {
            const answer = document.getElementById('case-study').value.trim();
            const words = answer.split(/\s+/).filter(w => w.length > 0);
            const keywords = ["commercial", "revenue", "investment", "support", "protection", "competitive"];
            
            let foundKeywords = 0;
            keywords.forEach(keyword => {
                if (answer.toLowerCase().includes(keyword)) {
                    foundKeywords++;
                }
            });
            
            const feedback = document.getElementById('case-feedback');
            if (words.length >= 100 && foundKeywords >= 3) {
                feedback.className = 'feedback correct';
                feedback.textContent = 'Excellent recommendation! Youve considered the business needs well.';
                addXP(35, 'case-study');
            } else if (words.length < 100) {
                feedback.className = 'feedback incorrect';
                feedback.textContent = "Please write at least 100 words for a complete recommendation.";
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = "Good start! Consider the financial and competitive aspects more.";
            }
            feedback.style.display = 'block';
        }
        
        // Common mistakes
        function checkMistakes() {
            const checkboxes = document.querySelectorAll("input[name=\"mistakes\"]:checked");
            const selected = Array.from(checkboxes).map(cb => cb.value);
            const correct = ["copying", "sharing", "selling", "attribution"];
            
            let correctCount = 0;
            correct.forEach(c => {
                if (selected.includes(c)) correctCount++;
            });
            
            const feedback = document.getElementById('mistakes-feedback');
            if (correctCount === 4 && selected.length === 4) {
                feedback.className = 'feedback correct';
                feedback.textContent = "Perfect! You identified all the potential copyright infringements.";
                addXP(20, 'mistakes');
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = "Not all correct. Remember: modifying open source for personal use is usually allowed.";
            }
            feedback.style.display = 'block';
        }
        
        // Real world examples - remove duplicate variable declaration
        function selectRealWorld(item) {
            if (!selectedItem) {
                selectedItem = item;
                item.classList.add('selected');
            } else {
                selectedItem.classList.remove('selected');
                selectedItem = item;
                item.classList.add('selected');
            }
        }
        
        function checkRealWorld() {
            // Simplified check - in real implementation would need proper matching
            const feedback = document.getElementById('realworld-feedback');
            if (!feedback) return;
            
            feedback.className = 'feedback correct';
                            feedback.textContent = "Good matching! Microsoft Office is commercial, Linux is open source, WinRAR is shareware, VLC is freeware.";
            feedback.style.display = 'block';
            addXP(25, 'realworld');
        }
        
        // Exam questions
        function submitExam() {
            const q1Element = document.getElementById('exam-q1');
            const q2Element = document.getElementById('exam-q2');
            const q3Element = document.getElementById('exam-q3');
            const marks1Element = document.getElementById('marks-q1');
            const marks2Element = document.getElementById('marks-q2');
            const marks3Element = document.getElementById('marks-q3');
            const markSchemeElement = document.getElementById('mark-scheme');
            
            if (!q1Element || !q2Element || !q3Element || !marks1Element || !marks2Element || !marks3Element || !markSchemeElement) {
                return;
            }
            
            const q1 = q1Element.value.trim();
            const q2 = q2Element.value.trim();
            const q3 = q3Element.value.trim();
            
            const marks1 = marks1Element.value;
            const marks2 = marks2Element.value;
            const marks3 = marks3Element.value;
            
            if (q1.length > 50 && q2.length > 50 && q3.length > 50 && marks1 && marks2 && marks3) {
                markSchemeElement.style.display = 'block';
                addXP(40, 'exam');
                
                // Check if predictions were accurate
                const totalPredicted = parseInt(marks1) + parseInt(marks2) + parseInt(marks3);
                if (totalPredicted >= 10) {
                    showAchievement("Exam Ready!", "Great self-assessment skills!");
                }
            } else {
                alert("Please complete all questions and add your predicted marks before viewing the mark scheme.");
            }
        }
        
        // Extension activity
        document.getElementById('extension').addEventListener('input', function() {
            const words = this.value.trim().split(/\s+/).filter(w => w.length > 0);
            document.getElementById('extension-word-count').textContent = words.length;
        });
        
        function checkExtension() {
            const answer = document.getElementById('extension').value.trim();
            const words = answer.split(/\s+/).filter(w => w.length > 0);
            
            const feedback = document.getElementById('extension-feedback');
            if (words.length >= 150) {
                feedback.className = 'feedback correct';
                feedback.textContent = 'Excellent extension work! Youve gone beyond the specification.';
                addXP(40, 'extension');
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = "Please write at least 150 words for the extension activity.";
            }
            feedback.style.display = 'block';
        }
        
        // Summary quiz
        function checkSummary() {
            const answers = {
                "summary-1": "b",
                "summary-2": "c",
                "summary-3": "false",
                "summary-4": "c",
                "summary-5": "c",
                "summary-6": "b"
            };
            
            let correct = 0;
            Object.keys(answers).forEach(id => {
                const select = document.getElementById(id);
                if (select.value === answers[id]) {
                    correct++;
                }
            });
            
            const feedback = document.getElementById('summary-feedback');
            if (correct === 6) {
                feedback.className = 'feedback correct';
                feedback.textContent = 'Perfect score! Youve mastered copyright and licensing concepts!';
                addXP(30, 'summary');
                showAchievement("Master of Copyright!", "Achieved perfect score on final quiz!");
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = `You got ${correct}/6 correct. Review the topics you're unsure about.`;
            }
            feedback.style.display = 'block';
        }
        
        // Complete lesson
        function completeLesson() {
            if (level >= 5) {
                showAchievement("Full Stack Learner!", "You have completed the entire lesson at max level!");
            } else {
                showAchievement("Lesson Complete!", "Finished at Level " + level + ". Try to reach Level 5!");
            }
            addXP(50, "complete");
        }
        
        // Canvas functionality
        let isDrawing = false;
        let canvas, ctx;
        
        function setupCanvas() {
            canvas = document.getElementById('drawing-canvas');
            if (!canvas) return;
            
            ctx = canvas.getContext('2d');
            if (!ctx) return;
            
            ctx.strokeStyle = "#333";
            ctx.lineWidth = 2;
            ctx.lineCap = "round";
            
            // Mouse events
            canvas.addEventListener("mousedown", startDrawing);
            canvas.addEventListener("mousemove", draw);
            canvas.addEventListener("mouseup", stopDrawing);
            canvas.addEventListener("mouseout", stopDrawing);
            
            // Touch events
            canvas.addEventListener("touchstart", handleTouch);
            canvas.addEventListener("touchmove", handleTouch);
            canvas.addEventListener("touchend", stopDrawing);
        }
        
        function startDrawing(e) {
            if (!canvas || !ctx) return;
            isDrawing = true;
            const rect = canvas.getBoundingClientRect();
            ctx.beginPath();
            ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
        }
        
        function draw(e) {
            if (!isDrawing || !canvas || !ctx) return;
            const rect = canvas.getBoundingClientRect();
            ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
            ctx.stroke();
        }
        
        function stopDrawing() {
            isDrawing = false;
        }
        
        function handleTouch(e) {
            if (!canvas) return;
            e.preventDefault();
            const touch = e.touches[0];
            if (!touch) return;
            
            const mouseEvent = new MouseEvent(e.type === "touchstart" ? "mousedown" : 
                                            e.type === "touchmove" ? "mousemove" : "mouseup", {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            canvas.dispatchEvent(mouseEvent);
        }
        
        function clearCanvas() {
            if (!ctx || !canvas) return;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
        
        // Reset activities
        function resetActivity(activity) {
            switch(activity) {
                case "starter":
                    document.querySelectorAll("input[name^=\"starter\"]").forEach(input => {
                        input.checked = false;
                    });
                    const starterFeedback = document.getElementById("starter-feedback");
                    if (starterFeedback) starterFeedback.style.display = "none";
                    break;
                    
                case "copyright":
                    document.querySelectorAll(".simulation-step").forEach(step => {
                        step.classList.remove("active");
                    });
                    document.querySelectorAll(".drop-zone[data-answer]").forEach(zone => {
                        zone.textContent = "";
                        zone.dataset.value = "";
                        zone.classList.remove("filled");
                        zone.style.background = "";
                    });
                    document.querySelectorAll(".drag-item[data-answer]").forEach(item => {
                        item.classList.remove("used", "selected");
                        item.style.opacity = "1";
                    });
                    selectedDragItem = null;
                    const fillFeedback = document.getElementById("fill-feedback");
                    if (fillFeedback) fillFeedback.style.display = "none";
                    const conditionsFeedback = document.getElementById("conditions-feedback");
                    if (conditionsFeedback) conditionsFeedback.style.display = "none";
                    document.querySelectorAll("input[name=\"conditions\"]").forEach(cb => cb.checked = false);
                    break;
                    
                case "legislation":
                    matchedPairs.clear();
                    document.querySelectorAll(".match-item").forEach(item => {
                        item.style.background = "";
                        item.classList.remove("selected");
                    });
                    selectedItem = null;
                    const matchFeedback = document.getElementById("match-feedback");
                    if (matchFeedback) matchFeedback.style.display = "none";
                    const scenarioAnswer = document.getElementById("scenario-answer");
                    if (scenarioAnswer) scenarioAnswer.value = "";
                    const scenarioFeedback = document.getElementById("scenario-feedback");
                    if (scenarioFeedback) scenarioFeedback.style.display = "none";
                    const scenarioHint = document.getElementById("scenario-hint");
                    if (scenarioHint) scenarioHint.style.display = "none";
                    break;
                    
                case "protection":
                    sequenceOrder = [];
                    document.querySelectorAll(".sequence-item").forEach(item => {
                        item.classList.remove("selected");
                        item.textContent = item.textContent.replace(/^\d+\. /, "");
                    });
                    const sequenceFeedback = document.getElementById("sequence-feedback");
                    if (sequenceFeedback) sequenceFeedback.style.display = "none";
                    document.querySelectorAll("input[name=\"distribution\"]").forEach(cb => cb.checked = false);
                    const distributionFeedback = document.getElementById("distribution-feedback");
                    if (distributionFeedback) distributionFeedback.style.display = "none";
                    break;
                    
                case "licenses":
                    document.querySelectorAll(".drop-zone[data-type]").forEach(zone => {
                        zone.innerHTML = "";
                    });
                    document.querySelectorAll(".drag-item[data-type]").forEach(item => {
                        item.style.display = "";
                        item.classList.remove("selected");
                    });
                    selectedDropItem = null;
                    const categoryFeedback = document.getElementById("category-feedback");
                    if (categoryFeedback) categoryFeedback.style.display = "none";
                    document.querySelectorAll("input[name=\"org-compare\"]").forEach(r => r.checked = false);
                    const orgFeedback = document.getElementById("org-feedback");
                    if (orgFeedback) orgFeedback.style.display = "none";
                    break;
                    
                case "comparison":
                    for (let i = 1; i <= 4; i++) {
                        const select = document.getElementById("benefit-" + i);
                        if (select) select.value = "";
                    }
                    const benefitsFeedback = document.getElementById("benefits-feedback");
                    if (benefitsFeedback) benefitsFeedback.style.display = "none";
                    const caseStudy = document.getElementById("case-study");
                    if (caseStudy) caseStudy.value = "";
                    const wordCount = document.getElementById("word-count");
                    if (wordCount) wordCount.textContent = "0";
                    const caseFeedback = document.getElementById("case-feedback");
                    if (caseFeedback) caseFeedback.style.display = "none";
                    break;
                    
                case "realworld":
                    document.querySelectorAll("input[name=\"mistakes\"]").forEach(cb => cb.checked = false);
                    const mistakesFeedback = document.getElementById("mistakes-feedback");
                    if (mistakesFeedback) mistakesFeedback.style.display = "none";
                    const realworldFeedback = document.getElementById("realworld-feedback");
                    if (realworldFeedback) realworldFeedback.style.display = "none";
                    break;
                    
                case "exam":
                    for (let i = 1; i <= 3; i++) {
                        const textarea = document.getElementById("exam-q" + i);
                        if (textarea) textarea.value = "";
                        const marks = document.getElementById("marks-q" + i);
                        if (marks) marks.value = "";
                    }
                    const markScheme = document.getElementById("mark-scheme");
                    if (markScheme) markScheme.style.display = "none";
                    clearCanvas();
                    break;
                    
                case "extension":
                    const extension = document.getElementById("extension");
                    if (extension) extension.value = "";
                    const extensionWordCount = document.getElementById("extension-word-count");
                    if (extensionWordCount) extensionWordCount.textContent = "0";
                    const extensionFeedback = document.getElementById("extension-feedback");
                    if (extensionFeedback) extensionFeedback.style.display = "none";
                    for (let i = 1; i <= 6; i++) {
                        const select = document.getElementById("summary-" + i);
                        if (select) select.value = "";
                    }
                    const summaryFeedback = document.getElementById("summary-feedback");
                    if (summaryFeedback) summaryFeedback.style.display = "none";
                    break;
            }
        }
        
        // Feedback system
        function openFeedback() {
            const modal = document.getElementById('feedback-modal');
            if (modal) {
                modal.style.display = 'flex';
            }
        }
        
        function closeFeedback() {
            const modal = document.getElementById('feedback-modal');
            if (modal) {
                modal.style.display = 'none';
            }
        }
        
        function sendFeedback() {
            const feedbackElement = document.getElementById("feedback-text");
            const pageElement = document.getElementById("current-page");
            
            if (!feedbackElement) return;
            
            const feedback = feedbackElement.value;
            const page = pageElement ? pageElement.textContent : "Unknown";
            
            // In a real implementation, this would send an email
            // For now, we'll just show a confirmation
            if (feedback.trim()) {
                alert("Thank you for your feedback! It has been sent to the instructor.");
                closeFeedback();
                feedbackElement.value = '';
            }
        }
        
        // Close feedback modal when clicking outside
        document.addEventListener("DOMContentLoaded", function() {
            const modal = document.getElementById("feedback-modal");
            if (modal) {
                modal.addEventListener("click", function(e) {
                    if (e.target === this) {
                        closeFeedback();
                    }
                });
            }
        });
    </script>
</body>
</html>