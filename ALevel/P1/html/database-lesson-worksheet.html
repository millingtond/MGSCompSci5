<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Database Fundamentals - Interactive Worksheet</title>
    <style>
        :root {
            --primary: #2563eb;
            --secondary: #7c3aed;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --dark: #1f2937;
            --light: #f3f4f6;
            --text-dark: #111827;
            --text-light: #6b7280;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background: var(--light);
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header and Navigation */
        .header {
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 15px 0;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .progress-bar {
            flex: 1;
            height: 8px;
            background: var(--light);
            border-radius: 4px;
            margin: 0 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            width: 0%;
            transition: width 0.3s ease;
        }

        .xp-display {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        }

        .level-badge {
            background: var(--primary);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 14px;
        }

        /* Section Navigation */
        .section-nav {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 20px 0;
            justify-content: center;
        }

        .section-btn {
            background: white;
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .section-btn.active, .section-btn:hover {
            background: var(--primary);
            color: white;
        }

        .section-btn.completed {
            border-color: var(--success);
            color: var(--success);
        }

        /* Content Sections */
        .section {
            display: none;
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .section.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1, h2, h3 {
            color: var(--text-dark);
            margin-bottom: 15px;
        }

        h1 { font-size: 2em; }
        h2 { font-size: 1.5em; color: var(--primary); }
        h3 { font-size: 1.2em; }

        /* Interactive Elements */
        .task-container {
            background: var(--light);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .multiple-choice {
            display: grid;
            gap: 10px;
            margin: 15px 0;
        }

        .choice-btn {
            background: white;
            border: 2px solid var(--light);
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            text-align: left;
            transition: all 0.3s ease;
        }

        .choice-btn:hover {
            border-color: var(--primary);
            background: #f0f9ff;
        }

        .choice-btn.selected {
            border-color: var(--primary);
            background: #dbeafe;
        }

        .choice-btn.correct {
            border-color: var(--success);
            background: #d1fae5;
        }

        .choice-btn.incorrect {
            border-color: var(--danger);
            background: #fee2e2;
        }

        /* Drag and Drop / Click to Match */
        .matching-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .match-item {
            background: white;
            border: 2px solid var(--light);
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .match-item:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .match-item.selected {
            border-color: var(--secondary);
            background: #f3e8ff;
        }

        .match-item.matched {
            border-color: var(--success);
            background: #d1fae5;
            cursor: default;
        }

        /* Input Fields */
        .input-field {
            width: 100%;
            padding: 10px;
            border: 2px solid var(--light);
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* Buttons */
        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            background: #1d4ed8;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--secondary);
        }

        .btn-secondary:hover {
            background: #6d28d9;
        }

        .btn-success {
            background: var(--success);
        }

        .btn-danger {
            background: var(--danger);
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        /* Feedback Message */
        .feedback {
            padding: 12px 20px;
            border-radius: 8px;
            margin: 15px 0;
            display: none;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .feedback.success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #10b981;
        }

        .feedback.error {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #ef4444;
        }

        /* Achievement Popup */
        .achievement-popup {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            display: none;
            z-index: 1000;
            animation: achievementPop 0.5s ease;
        }

        @keyframes achievementPop {
            0% { transform: scale(0) rotate(180deg); opacity: 0; }
            50% { transform: scale(1.1) rotate(10deg); }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        .achievement-icon {
            font-size: 48px;
            text-align: center;
            margin-bottom: 10px;
        }

        /* Drawing Canvas */
        .canvas-container {
            border: 2px solid var(--light);
            border-radius: 8px;
            margin: 20px 0;
            position: relative;
        }

        #drawingCanvas {
            display: block;
            cursor: crosshair;
            touch-action: none;
        }

        /* Accessibility */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0,0,0,0);
            white-space: nowrap;
            border: 0;
        }

        /* High Contrast Mode */
        body.high-contrast {
            background: black;
            color: white;
        }

        body.high-contrast .section,
        body.high-contrast .header {
            background: #111;
            color: white;
        }

        /* Feedback Button */
        .feedback-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--secondary);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            font-size: 24px;
            transition: all 0.3s ease;
            z-index: 99;
        }

        .feedback-btn:hover {
            transform: scale(1.1);
        }

        /* Feedback Modal */
        .feedback-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .feedback-modal-content {
            background: white;
            border-radius: 12px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .section {
                padding: 20px;
            }

            .matching-container {
                grid-template-columns: 1fr;
            }

            .nav-buttons {
                flex-direction: column;
                gap: 10px;
            }

            .section-nav {
                display: none;
            }

            h1 { font-size: 1.5em; }
            h2 { font-size: 1.2em; }
        }

        /* Simulation Styles */
        .simulation-container {
            background: #f0f9ff;
            border: 2px solid var(--primary);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .database-table {
            border-collapse: collapse;
            width: 100%;
            margin: 15px 0;
        }

        .database-table th,
        .database-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        .database-table th {
            background: var(--primary);
            color: white;
        }

        .database-table tr:nth-child(even) {
            background: #f9fafb;
        }

        /* Fill in the Blanks */
        .fill-blanks-container {
            background: var(--light);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .blank-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }

        .blank-option {
            background: white;
            border: 2px solid var(--light);
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .blank-option:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .blank-option.used {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .blank-input {
            display: inline-block;
            min-width: 150px;
            border-bottom: 2px solid var(--primary);
            padding: 5px;
            margin: 0 5px;
            position: relative;
        }

        /* Prevent Paste Message */
        .paste-shame {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #ef4444;
            color: white;
            padding: 20px 40px;
            border-radius: 12px;
            font-size: 24px;
            font-weight: bold;
            display: none;
            z-index: 9999;
            animation: shakeShame 0.5s ease;
        }

        @keyframes shakeShame {
            0%, 100% { transform: translate(-50%, -50%) rotate(0); }
            25% { transform: translate(-50%, -50%) rotate(-5deg); }
            75% { transform: translate(-50%, -50%) rotate(5deg); }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="nav-container">
            <h1>Database Fundamentals</h1>
            <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            <div class="xp-display">
                <span id="xpAmount">0 XP</span>
                <span class="level-badge" id="levelBadge">Level 0</span>
            </div>
        </div>
    </header>

    <!-- Section Navigation -->
    <div class="container">
        <nav class="section-nav" role="navigation" aria-label="Section navigation">
            <button class="section-btn active" onclick="showSection(0)">Starter</button>
            <button class="section-btn" onclick="showSection(1)">Basics</button>
            <button class="section-btn" onclick="showSection(2)">Integrity</button>
            <button class="section-btn" onclick="showSection(3)">Structure</button>
            <button class="section-btn" onclick="showSection(4)">Keys</button>
            <button class="section-btn" onclick="showSection(5)">Relationships</button>
            <button class="section-btn" onclick="showSection(6)">Comparison</button>
            <button class="section-btn" onclick="showSection(7)">Summary</button>
            <button class="section-btn" onclick="showSection(8)">Exam Practice</button>
            <button class="section-btn" onclick="showSection(9)">Extension</button>
        </nav>

        <!-- Section 0: Starter Activity -->
        <section class="section active" id="section0">
            <h2>üöÄ Starter Activity: Database Concept Mapper</h2>
            
            <div class="task-container">
                <h3>Match the Database Terms to Their Definitions</h3>
                <p>Click on a term, then click on its matching definition. You can reset and try again!</p>
                
                <div class="matching-container" id="starterMatching">
                    <div>
                        <div class="match-item" data-pair="1" data-type="term">DBMS</div>
                        <div class="match-item" data-pair="2" data-type="term">Primary Key</div>
                        <div class="match-item" data-pair="3" data-type="term">Foreign Key</div>
                        <div class="match-item" data-pair="4" data-type="term">Record</div>
                    </div>
                    <div>
                        <div class="match-item" data-pair="4" data-type="def">A row of data in a table</div>
                        <div class="match-item" data-pair="1" data-type="def">Software that controls access to data</div>
                        <div class="match-item" data-pair="3" data-type="def">Links to primary key in another table</div>
                        <div class="match-item" data-pair="2" data-type="def">Unique identifier for each record</div>
                    </div>
                </div>
                
                <button class="btn" onclick="resetMatching('starterMatching')">Reset Activity</button>
                <div class="feedback" id="starterFeedback"></div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" disabled>Previous</button>
                <button class="btn" onclick="showSection(1)">Next: Database Basics</button>
            </div>
        </section>

        <!-- Section 1: Database Basics -->
        <section class="section" id="section1">
            <h2>üìä Database Basics: DBMS, DBA, and Data Dictionary</h2>
            
            <div class="task-container">
                <h3>Understanding DBMS</h3>
                <p>A Database Management System (DBMS) is software that controls access to data in a database. Let's explore its key components.</p>
                
                <div class="simulation-container">
                    <h4>Interactive DBMS Simulation</h4>
                    <p>Click on each component to see how a DBMS works:</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 20px 0;">
                        <button class="btn btn-secondary" onclick="showDBMSComponent('users')">Users</button>
                        <button class="btn btn-secondary" onclick="showDBMSComponent('dbms')">DBMS Layer</button>
                        <button class="btn btn-secondary" onclick="showDBMSComponent('database')">Database</button>
                    </div>
                    
                    <div id="dbmsExplanation" style="padding: 15px; background: white; border-radius: 8px; margin-top: 15px; min-height: 100px;">
                        <p>Click on a component above to learn more!</p>
                    </div>
                </div>
            </div>

            <div class="task-container">
                <h3>Task 1: DBMS Components</h3>
                <p>Which of the following is NOT a typical function of a DBMS?</p>
                
                <div class="multiple-choice" id="dbmsQuestion">
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'dbmsQuestion')">Managing user access rights</button>
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'dbmsQuestion')">Ensuring data integrity</button>
                    <button class="choice-btn" onclick="checkAnswer(this, true, 'dbmsQuestion')">Creating spreadsheet formulas</button>
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'dbmsQuestion')">Handling concurrent access</button>
                </div>
                
                <div class="feedback" id="dbmsQuestionFeedback"></div>
            </div>

            <div class="task-container">
                <h3>Task 2: DBA Responsibilities</h3>
                <p>A Database Administrator (DBA) uses the DBMS to customize the database. Fill in the blanks about DBA responsibilities:</p>
                
                <div class="fill-blanks-container">
                    <p>The DBA is responsible for <span class="blank-input" data-answer="security"></span> 
                    by setting up usernames and passwords. They also manage <span class="blank-input" data-answer="backups"></span> 
                    to prevent data loss, and control <span class="blank-input" data-answer="access"></span> rights for different users.</p>
                    
                    <div class="blank-options">
                        <span class="blank-option" onclick="fillBlank(this, 'security')">security</span>
                        <span class="blank-option" onclick="fillBlank(this, 'entertainment')">entertainment</span>
                        <span class="blank-option" onclick="fillBlank(this, 'backups')">backups</span>
                        <span class="blank-option" onclick="fillBlank(this, 'deletions')">deletions</span>
                        <span class="blank-option" onclick="fillBlank(this, 'access')">access</span>
                        <span class="blank-option" onclick="fillBlank(this, 'removal')">removal</span>
                        <span class="blank-option" onclick="fillBlank(this, 'games')">games</span>
                        <span class="blank-option" onclick="fillBlank(this, 'viruses')">viruses</span>
                    </div>
                    
                    <button class="btn" onclick="checkFillBlanks()">Check Answers</button>
                    <div class="feedback" id="fillBlanksFeedback"></div>
                </div>
            </div>

            <div class="task-container">
                <h3>Task 3: Data Dictionary</h3>
                <p>Complete this table showing what information is stored in a data dictionary:</p>
                
                <table class="database-table">
                    <thead>
                        <tr>
                            <th>Data Dictionary Component</th>
                            <th>Description</th>
                            <th>Your Answer</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Table Name</td>
                            <td>The name of each table in the database</td>
                            <td><input type="text" class="input-field" placeholder="Enter yes if included"></td>
                        </tr>
                        <tr>
                            <td>User Passwords</td>
                            <td>Login credentials for users</td>
                            <td><input type="text" class="input-field" placeholder="Enter yes or no"></td>
                        </tr>
                        <tr>
                            <td>Field Names</td>
                            <td>Names of columns in tables</td>
                            <td><input type="text" class="input-field" placeholder="Enter yes if included"></td>
                        </tr>
                        <tr>
                            <td>Data Types</td>
                            <td>Type of data stored in each field</td>
                            <td><input type="text" class="input-field" placeholder="Enter yes if included"></td>
                        </tr>
                    </tbody>
                </table>
                
                <button class="btn" onclick="checkDataDictionary()">Check Table</button>
                <div class="feedback" id="dataDictFeedback"></div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="showSection(0)">Previous</button>
                <button class="btn" onclick="showSection(2)">Next: Data Integrity & Security</button>
            </div>
        </section>

        <!-- Section 2: Data Integrity & Security -->
        <section class="section" id="section2">
            <h2>üîí Data Integrity & Security</h2>
            
            <div class="task-container">
                <h3>Understanding Data Integrity</h3>
                <p>Data integrity refers to the accuracy and consistency of data throughout its lifecycle. Let's explore how databases maintain integrity.</p>
                
                <div class="simulation-container">
                    <h4>Data Integrity Simulation</h4>
                    <p>Watch how referential integrity works when updating related records:</p>
                    
                    <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
                        <div>
                            <h5>Customers Table</h5>
                            <table class="database-table" id="customersTable">
                                <tr><th>CustomerID</th><th>Name</th></tr>
                                <tr><td>C001</td><td>John Smith</td></tr>
                                <tr><td>C002</td><td>Jane Doe</td></tr>
                            </table>
                        </div>
                        <div>
                            <h5>Orders Table</h5>
                            <table class="database-table" id="ordersTable">
                                <tr><th>OrderID</th><th>CustomerID</th><th>Product</th></tr>
                                <tr><td>O001</td><td>C001</td><td>Laptop</td></tr>
                                <tr><td>O002</td><td>C001</td><td>Mouse</td></tr>
                                <tr><td>O003</td><td>C002</td><td>Keyboard</td></tr>
                            </table>
                        </div>
                    </div>
                    
                    <button class="btn btn-danger" onclick="simulateDeleteCustomer()">Try to Delete Customer C001</button>
                    <button class="btn" onclick="resetIntegritySimulation()">Reset Simulation</button>
                    
                    <div id="integrityMessage" style="margin-top: 15px; padding: 15px; background: white; border-radius: 8px; display: none;"></div>
                </div>
            </div>

            <div class="task-container">
                <h3>Task 1: Security Measures Categorization</h3>
                <p>Categorize these security measures as either Preventive or Detective:</p>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <h4>Preventive Measures</h4>
                        <div id="preventive" style="min-height: 150px; background: #e0f2fe; border: 2px dashed var(--primary); border-radius: 8px; padding: 10px;"></div>
                    </div>
                    <div>
                        <h4>Detective Measures</h4>
                        <div id="detective" style="min-height: 150px; background: #fef3c7; border: 2px dashed var(--warning); border-radius: 8px; padding: 10px;"></div>
                    </div>
                </div>
                
                <div class="blank-options" style="margin-top: 20px;">
                    <span class="blank-option" onclick="categorizeSecurityMeasure(this, 'Passwords', 'preventive')">Passwords</span>
                    <span class="blank-option" onclick="categorizeSecurityMeasure(this, 'Audit Logs', 'detective')">Audit Logs</span>
                    <span class="blank-option" onclick="categorizeSecurityMeasure(this, 'Encryption', 'preventive')">Encryption</span>
                    <span class="blank-option" onclick="categorizeSecurityMeasure(this, 'Usage Monitoring', 'detective')">Usage Monitoring</span>
                    <span class="blank-option" onclick="categorizeSecurityMeasure(this, 'Access Rights', 'preventive')">Access Rights</span>
                    <span class="blank-option" onclick="categorizeSecurityMeasure(this, 'Activity Logs', 'detective')">Activity Logs</span>
                </div>
                
                <button class="btn" onclick="checkSecurityCategorization()">Check Categorization</button>
                <button class="btn btn-secondary" onclick="resetSecurityCategorization()">Reset</button>
                <div class="feedback" id="securityCategorizationFeedback"></div>
            </div>

            <div class="task-container">
                <h3>Task 2: Short Answer - Security Implementation</h3>
                <p>Explain how encryption helps protect database security (minimum 50 words):</p>
                
                <textarea class="input-field" id="encryptionAnswer" rows="4" 
                    placeholder="Start your answer here..."></textarea>
                
                <button class="btn" onclick="checkEncryptionAnswer()">Submit Answer</button>
                <div class="feedback" id="encryptionFeedback"></div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="showSection(1)">Previous</button>
                <button class="btn" onclick="showSection(3)">Next: Database Structure</button>
            </div>
        </section>

        <!-- Section 3: Database Structure -->
        <section class="section" id="section3">
            <h2>üèóÔ∏è Database Structure: Tables, Records, and Fields</h2>
            
            <div class="task-container">
                <h3>Understanding Database Components</h3>
                <p>Let's explore the hierarchical structure of a database through an interactive example.</p>
                
                <div class="simulation-container">
                    <h4>Build Your Own Database Table</h4>
                    <p>Click on elements to understand their role:</p>
                    
                    <table class="database-table" id="interactiveTable">
                        <thead>
                            <tr>
                                <th onclick="explainComponent('field')" style="cursor: pointer;">StudentID</th>
                                <th onclick="explainComponent('field')" style="cursor: pointer;">FirstName</th>
                                <th onclick="explainComponent('field')" style="cursor: pointer;">LastName</th>
                                <th onclick="explainComponent('field')" style="cursor: pointer;">Grade</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr onclick="explainComponent('record')" style="cursor: pointer;">
                                <td>S001</td>
                                <td>Alice</td>
                                <td>Johnson</td>
                                <td>A</td>
                            </tr>
                            <tr onclick="explainComponent('record')" style="cursor: pointer;">
                                <td>S002</td>
                                <td>Bob</td>
                                <td>Smith</td>
                                <td>B</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div id="componentExplanation" style="margin-top: 15px; padding: 15px; background: white; border-radius: 8px;">
                        <p>Click on the column headers to learn about <strong>fields</strong>, or click on a row to learn about <strong>records</strong>!</p>
                    </div>
                </div>
            </div>

            <div class="task-container">
                <h3>Task 1: True or False</h3>
                <p>Determine if these statements about database structure are true or false:</p>
                
                <div style="display: grid; gap: 15px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; background: white; padding: 15px; border-radius: 8px;">
                        <span>A field represents a single characteristic of data</span>
                        <div>
                            <button class="btn btn-success" onclick="checkTrueFalse(this, true, 'tf1')">True</button>
                            <button class="btn btn-danger" onclick="checkTrueFalse(this, false, 'tf1')">False</button>
                        </div>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; background: white; padding: 15px; border-radius: 8px;">
                        <span>Records are stored as columns in a database table</span>
                        <div>
                            <button class="btn btn-success" onclick="checkTrueFalse(this, false, 'tf2')">True</button>
                            <button class="btn btn-danger" onclick="checkTrueFalse(this, true, 'tf2')">False</button>
                        </div>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; background: white; padding: 15px; border-radius: 8px;">
                        <span>An entity is a category of object about which data needs to be recorded</span>
                        <div>
                            <button class="btn btn-success" onclick="checkTrueFalse(this, true, 'tf3')">True</button>
                            <button class="btn btn-danger" onclick="checkTrueFalse(this, false, 'tf3')">False</button>
                        </div>
                    </div>
                </div>
                
                <div class="feedback" id="trueFalseFeedback"></div>
            </div>

            <div class="task-container">
                <h3>Task 2: Query Building</h3>
                <p>Build a simple query to find all students with grade 'A':</p>
                
                <div class="fill-blanks-container">
                    <p>SELECT * FROM Students WHERE <span class="blank-input" data-answer="Grade"></span> = '<span class="blank-input" data-answer="A"></span>'</p>
                    
                    <div class="blank-options">
                        <span class="blank-option" onclick="fillBlank(this, 'Grade')">Grade</span>
                        <span class="blank-option" onclick="fillBlank(this, 'Name')">Name</span>
                        <span class="blank-option" onclick="fillBlank(this, 'A')">A</span>
                        <span class="blank-option" onclick="fillBlank(this, 'B')">B</span>
                        <span class="blank-option" onclick="fillBlank(this, 'Student')">Student</span>
                        <span class="blank-option" onclick="fillBlank(this, 'Score')">Score</span>
                    </div>
                    
                    <button class="btn" onclick="checkQueryBuilder()">Check Query</button>
                    <div class="feedback" id="queryBuilderFeedback"></div>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="showSection(2)">Previous</button>
                <button class="btn" onclick="showSection(4)">Next: Keys and Indexing</button>
            </div>
        </section>

        <!-- Section 4: Keys and Indexing -->
        <section class="section" id="section4">
            <h2>üîë Keys and Indexing</h2>
            
            <div class="task-container">
                <h3>Understanding Different Types of Keys</h3>
                <p>Databases use various types of keys to organize and link data efficiently.</p>
                
                <div class="simulation-container">
                    <h4>Key Types Demonstration</h4>
                    
                    <table class="database-table">
                        <thead>
                            <tr>
                                <th style="background: #059669;">Primary Key</th>
                                <th>Candidate Key</th>
                                <th>Candidate Key</th>
                                <th style="background: #7c3aed;">Foreign Key</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="background: #d1fae5;">EMP001</td>
                                <td>john@email.com</td>
                                <td>NI123456C</td>
                                <td style="background: #ede9fe;">DEPT01</td>
                            </tr>
                            <tr>
                                <td style="background: #d1fae5;">EMP002</td>
                                <td>jane@email.com</td>
                                <td>NI789012D</td>
                                <td style="background: #ede9fe;">DEPT02</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div style="margin-top: 15px;">
                        <p><strong>Key Concepts:</strong></p>
                        <ul style="list-style: none; padding: 0;">
                            <li>üü¢ Primary Key: Uniquely identifies each record</li>
                            <li>üîµ Candidate Key: Could be a primary key</li>
                            <li>üü£ Foreign Key: Links to primary key in another table</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="task-container">
                <h3>Task 1: Identify the Keys</h3>
                <p>Given this employee table, identify which type of key each field could be:</p>
                
                <div class="matching-container" id="keyMatching">
                    <div>
                        <div class="match-item" data-pair="1" data-type="field">EmployeeID</div>
                        <div class="match-item" data-pair="2" data-type="field">Email Address</div>
                        <div class="match-item" data-pair="3" data-type="field">DepartmentID</div>
                        <div class="match-item" data-pair="4" data-type="field">First + Last Name</div>
                    </div>
                    <div>
                        <div class="match-item" data-pair="4" data-type="keytype">Composite Key</div>
                        <div class="match-item" data-pair="1" data-type="keytype">Primary Key</div>
                        <div class="match-item" data-pair="3" data-type="keytype">Foreign Key</div>
                        <div class="match-item" data-pair="2" data-type="keytype">Candidate Key</div>
                    </div>
                </div>
                
                <button class="btn" onclick="resetMatching('keyMatching')">Reset Activity</button>
                <div class="feedback" id="keyMatchingFeedback"></div>
            </div>

            <div class="task-container">
                <h3>Task 2: Indexing Benefits</h3>
                <p>Why does indexing make database searches faster? (Select all that apply)</p>
                
                <div style="display: grid; gap: 10px;">
                    <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                        <input type="checkbox" value="sorted" style="width: 20px; height: 20px;">
                        <span>Index tables are sorted for faster searching</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                        <input type="checkbox" value="pointers" style="width: 20px; height: 20px;">
                        <span>Uses pointers to locate records quickly</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                        <input type="checkbox" value="copies" style="width: 20px; height: 20px;">
                        <span>Creates duplicate copies of all data</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                        <input type="checkbox" value="smaller" style="width: 20px; height: 20px;">
                        <span>Index tables are smaller than full tables</span>
                    </label>
                </div>
                
                <button class="btn" onclick="checkIndexingBenefits()">Check Answers</button>
                <div class="feedback" id="indexingFeedback"></div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="showSection(3)">Previous</button>
                <button class="btn" onclick="showSection(5)">Next: Relationships</button>
            </div>
        </section>

        <!-- Section 5: Relationships and E-R Diagrams -->
        <section class="section" id="section5">
            <h2>üîó Relationships and E-R Diagrams</h2>
            
            <div class="task-container">
                <h3>Understanding Database Relationships</h3>
                <p>Databases use relationships to connect data between tables efficiently.</p>
                
                <div class="simulation-container">
                    <h4>Interactive Relationship Builder</h4>
                    <p>Click on different relationship types to see examples:</p>
                    
                    <div style="display: flex; gap: 10px; justify-content: center; margin: 20px 0;">
                        <button class="btn btn-secondary" onclick="showRelationship('oneToOne')">One-to-One</button>
                        <button class="btn btn-secondary" onclick="showRelationship('oneToMany')">One-to-Many</button>
                        <button class="btn btn-secondary" onclick="showRelationship('manyToMany')">Many-to-Many</button>
                    </div>
                    
                    <div id="relationshipDiagram" style="padding: 20px; background: white; border-radius: 8px; text-align: center; min-height: 200px;">
                        <p>Select a relationship type above to see an example!</p>
                    </div>
                </div>
            </div>

            <div class="task-container">
                <h3>Task 1: Identify Relationship Types</h3>
                <p>What type of relationship exists between these entities?</p>
                
                <div style="display: grid; gap: 15px;">
                    <div style="background: white; padding: 15px; border-radius: 8px;">
                        <p><strong>Customer ‚Üî Customer_Account</strong></p>
                        <div class="multiple-choice">
                            <button class="choice-btn" onclick="checkAnswer(this, true, 'rel1')">One-to-One</button>
                            <button class="choice-btn" onclick="checkAnswer(this, false, 'rel1')">One-to-Many</button>
                            <button class="choice-btn" onclick="checkAnswer(this, false, 'rel1')">Many-to-Many</button>
                        </div>
                    </div>
                    
                    <div style="background: white; padding: 15px; border-radius: 8px;">
                        <p><strong>Teacher ‚Üî Classes</strong></p>
                        <div class="multiple-choice">
                            <button class="choice-btn" onclick="checkAnswer(this, false, 'rel2')">One-to-One</button>
                            <button class="choice-btn" onclick="checkAnswer(this, true, 'rel2')">One-to-Many</button>
                            <button class="choice-btn" onclick="checkAnswer(this, false, 'rel2')">Many-to-Many</button>
                        </div>
                    </div>
                    
                    <div style="background: white; padding: 15px; border-radius: 8px;">
                        <p><strong>Students ‚Üî Courses</strong></p>
                        <div class="multiple-choice">
                            <button class="choice-btn" onclick="checkAnswer(this, false, 'rel3')">One-to-One</button>
                            <button class="choice-btn" onclick="checkAnswer(this, false, 'rel3')">One-to-Many</button>
                            <button class="choice-btn" onclick="checkAnswer(this, true, 'rel3')">Many-to-Many</button>
                        </div>
                    </div>
                </div>
                
                <div class="feedback" id="relationshipsFeedback"></div>
            </div>

            <div class="task-container">
                <h3>Task 2: Problems Without Relationships</h3>
                <p>What problems can occur if relationships don't exist in a database? Write at least 3 problems:</p>
                
                <textarea class="input-field" id="relationshipProblems" rows="5" 
                    placeholder="List at least 3 problems..."></textarea>
                
                <button class="btn" onclick="checkRelationshipProblems()">Check Answer</button>
                <div class="feedback" id="relationshipProblemsFeedback"></div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="showSection(4)">Previous</button>
                <button class="btn" onclick="showSection(6)">Next: Database Comparison</button>
            </div>
        </section>

        <!-- Section 6: Relational vs Flat File -->
        <section class="section" id="section6">
            <h2>‚öñÔ∏è Relational vs Flat File Databases</h2>
            
            <div class="task-container">
                <h3>Comparing Database Types</h3>
                <p>Let's explore the differences between flat file and relational databases.</p>
                
                <div class="simulation-container">
                    <h4>Database Comparison Simulation</h4>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div>
                            <h5>Flat File Database</h5>
                            <table class="database-table">
                                <tr>
                                    <th>OrderID</th>
                                    <th>CustomerName</th>
                                    <th>CustomerEmail</th>
                                    <th>Product</th>
                                </tr>
                                <tr>
                                    <td>001</td>
                                    <td style="background: #fee2e2;">John Smith</td>
                                    <td style="background: #fee2e2;">john@email.com</td>
                                    <td>Laptop</td>
                                </tr>
                                <tr>
                                    <td>002</td>
                                    <td style="background: #fee2e2;">John Smith</td>
                                    <td style="background: #fee2e2;">john@email.com</td>
                                    <td>Mouse</td>
                                </tr>
                            </table>
                            <p style="color: var(--danger); margin-top: 10px;">‚ùå Data redundancy visible</p>
                        </div>
                        
                        <div>
                            <h5>Relational Database</h5>
                            <div style="margin-bottom: 10px;">
                                <strong>Customers Table</strong>
                                <table class="database-table">
                                    <tr><th>CustomerID</th><th>Name</th><th>Email</th></tr>
                                    <tr><td>C001</td><td>John Smith</td><td>john@email.com</td></tr>
                                </table>
                            </div>
                            <div>
                                <strong>Orders Table</strong>
                                <table class="database-table">
                                    <tr><th>OrderID</th><th>CustomerID</th><th>Product</th></tr>
                                    <tr><td>001</td><td>C001</td><td>Laptop</td></tr>
                                    <tr><td>002</td><td>C001</td><td>Mouse</td></tr>
                                </table>
                            </div>
                            <p style="color: var(--success); margin-top: 10px;">‚úì No data redundancy</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="task-container">
                <h3>Task 1: Benefits Categorization</h3>
                <p>Drag each benefit to the correct database type:</p>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <h4>Flat File Benefits</h4>
                        <div id="flatFileBenefits" style="min-height: 150px; background: #fee2e2; border: 2px dashed var(--danger); border-radius: 8px; padding: 10px;"></div>
                    </div>
                    <div>
                        <h4>Relational Benefits</h4>
                        <div id="relationalBenefits" style="min-height: 150px; background: #d1fae5; border: 2px dashed var(--success); border-radius: 8px; padding: 10px;"></div>
                    </div>
                </div>
                
                <div class="blank-options" style="margin-top: 20px;">
                    <span class="blank-option" onclick="categorizeBenefit(this, 'Simple structure', 'flat')">Simple structure</span>
                    <span class="blank-option" onclick="categorizeBenefit(this, 'No redundancy', 'relational')">No redundancy</span>
                    <span class="blank-option" onclick="categorizeBenefit(this, 'Easy to set up', 'flat')">Easy to set up</span>
                    <span class="blank-option" onclick="categorizeBenefit(this, 'Data integrity', 'relational')">Data integrity</span>
                    <span class="blank-option" onclick="categorizeBenefit(this, 'Complex queries', 'relational')">Complex queries</span>
                    <span class="blank-option" onclick="categorizeBenefit(this, 'No relationships needed', 'flat')">No relationships needed</span>
                </div>
                
                <button class="btn" onclick="checkBenefitsCategorization()">Check Categorization</button>
                <button class="btn btn-secondary" onclick="resetBenefitsCategorization()">Reset</button>
                <div class="feedback" id="benefitsFeedback"></div>
            </div>

            <div class="task-container">
                <h3>Task 2: Scenario Analysis</h3>
                <p>A school wants to store student records, course enrollments, and teacher assignments. Which database type would be better and why?</p>
                
                <textarea class="input-field" id="scenarioAnswer" rows="4" 
                    placeholder="Explain your choice with at least 3 reasons..."></textarea>
                
                <button class="btn" onclick="checkScenarioAnswer()">Submit Answer</button>
                <div class="feedback" id="scenarioFeedback"></div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="showSection(5)">Previous</button>
                <button class="btn" onclick="showSection(7)">Next: Summary Quiz</button>
            </div>
        </section>

        <!-- Section 7: Summary Quiz -->
        <section class="section" id="section7">
            <h2>üìù Summary Quiz</h2>
            <p>Test your understanding of database fundamentals with these questions.</p>
            
            <div class="task-container">
                <h3>Question 1: DBMS Purpose</h3>
                <p>What is the primary purpose of a DBMS?</p>
                <div class="multiple-choice" id="summary1">
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'summary1')">To create spreadsheets</button>
                    <button class="choice-btn" onclick="checkAnswer(this, true, 'summary1')">To control access to data in a database</button>
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'summary1')">To design websites</button>
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'summary1')">To write programming code</button>
                </div>
            </div>

            <div class="task-container">
                <h3>Question 2: Data Dictionary Contents</h3>
                <p>Which of the following is NOT typically stored in a data dictionary?</p>
                <div class="multiple-choice" id="summary2">
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'summary2')">Field names and data types</button>
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'summary2')">Primary and foreign key information</button>
                    <button class="choice-btn" onclick="checkAnswer(this, true, 'summary2')">Actual data records from tables</button>
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'summary2')">Table relationships</button>
                </div>
            </div>

            <div class="task-container">
                <h3>Question 3: Key Identification</h3>
                <p>In a student database, the StudentID is the primary key. The student's email could be a:</p>
                <div class="multiple-choice" id="summary3">
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'summary3')">Foreign key</button>
                    <button class="choice-btn" onclick="checkAnswer(this, true, 'summary3')">Candidate key</button>
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'summary3')">Composite key</button>
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'summary3')">Index key</button>
                </div>
            </div>

            <div class="task-container">
                <h3>Question 4: Relationships</h3>
                <p>Which relationship type cannot be directly implemented in a normalized relational database?</p>
                <div class="multiple-choice" id="summary4">
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'summary4')">One-to-One</button>
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'summary4')">One-to-Many</button>
                    <button class="choice-btn" onclick="checkAnswer(this, true, 'summary4')">Many-to-Many</button>
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'summary4')">All can be implemented</button>
                </div>
            </div>

            <div class="task-container">
                <h3>Question 5: Security Measures</h3>
                <p>Which security measure helps track who accessed what data and when?</p>
                <div class="multiple-choice" id="summary5">
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'summary5')">Encryption</button>
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'summary5')">Access rights</button>
                    <button class="choice-btn" onclick="checkAnswer(this, true, 'summary5')">Audit logs</button>
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'summary5')">Backups</button>
                </div>
            </div>

            <div class="task-container">
                <h3>Question 6: Data Integrity</h3>
                <p>What ensures that deleting a customer doesn't leave orphaned orders?</p>
                <div class="multiple-choice" id="summary6">
                    <button class="choice-btn" onclick="checkAnswer(this, true, 'summary6')">Referential integrity</button>
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'summary6')">Data redundancy</button>
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'summary6')">Primary keys</button>
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'summary6')">Indexing</button>
                </div>
            </div>

            <div class="task-container">
                <h3>Question 7: Database Benefits</h3>
                <p>Which is a key benefit of relational databases over flat files?</p>
                <div class="multiple-choice" id="summary7">
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'summary7')">Simpler to understand</button>
                    <button class="choice-btn" onclick="checkAnswer(this, true, 'summary7')">Reduced data redundancy</button>
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'summary7')">Faster to set up</button>
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'summary7')">Less storage required</button>
                </div>
            </div>

            <div class="task-container">
                <h3>Question 8: Indexing Purpose</h3>
                <p>Why does indexing improve search performance?</p>
                <div class="multiple-choice" id="summary8">
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'summary8')">It compresses the data</button>
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'summary8')">It duplicates all records</button>
                    <button class="choice-btn" onclick="checkAnswer(this, true, 'summary8')">It creates sorted pointers to data</button>
                    <button class="choice-btn" onclick="checkAnswer(this, false, 'summary8')">It removes unnecessary fields</button>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="showSection(6)">Previous</button>
                <button class="btn" onclick="showSection(8)">Next: Exam Practice</button>
            </div>
        </section>

        <!-- Section 8: Practice Exam Questions -->
        <section class="section" id="section8">
            <h2>üìö Practice Exam Questions</h2>
            <p>These questions are similar to what you might see in your A-level exam.</p>
            
            <div class="task-container">
                <h3>Question 1 (6 marks)</h3>
                <p>Explain the role of a Database Administrator (DBA) in maintaining database security. Include at least three specific responsibilities.</p>
                
                <textarea class="input-field" id="examQ1" rows="6" placeholder="Write your answer here..."></textarea>
                
                <div style="margin-top: 10px;">
                    <label>Predicted marks (out of 6): 
                        <input type="number" min="0" max="6" id="examQ1Marks" style="width: 60px; margin-left: 10px;">
                    </label>
                </div>
                
                <button class="btn" onclick="showMarkScheme('examQ1')">Show Mark Scheme</button>
                
                <div id="examQ1MarkScheme" style="display: none; margin-top: 15px; padding: 15px; background: #f0f9ff; border-radius: 8px;">
                    <h4>Mark Scheme:</h4>
                    <ul>
                        <li>1 mark - Issuing usernames and passwords</li>
                        <li>1 mark - Setting access rights/privileges for different users</li>
                        <li>1 mark - Creating regular backups</li>
                        <li>1 mark - Implementing encryption</li>
                        <li>1 mark - Monitoring usage/creating audit logs</li>
                        <li>1 mark - Managing different views of data</li>
                        <li>Max 6 marks for any valid points well explained</li>
                    </ul>
                </div>
            </div>

            <div class="task-container">
                <h3>Question 2 (8 marks)</h3>
                <p>A library is currently using a flat file database to store all book loans. Each record contains: LoanID, BookTitle, BookISBN, MemberName, MemberID, LoanDate, ReturnDate.</p>
                <p>Discuss the problems with this approach and explain how a relational database would solve these issues.</p>
                
                <textarea class="input-field" id="examQ2" rows="8" placeholder="Write your answer here..."></textarea>
                
                <div style="margin-top: 10px;">
                    <label>Predicted marks (out of 8): 
                        <input type="number" min="0" max="8" id="examQ2Marks" style="width: 60px; margin-left: 10px;">
                    </label>
                </div>
                
                <button class="btn" onclick="showMarkScheme('examQ2')">Show Mark Scheme</button>
                
                <div id="examQ2MarkScheme" style="display: none; margin-top: 15px; padding: 15px; background: #f0f9ff; border-radius: 8px;">
                    <h4>Mark Scheme:</h4>
                    <p><strong>Problems (4 marks):</strong></p>
                    <ul>
                        <li>Data redundancy - book/member details repeated</li>
                        <li>Update anomalies - changing member details requires multiple updates</li>
                        <li>Insertion anomalies - can't add books without loans</li>
                        <li>Deletion anomalies - returning last book deletes book info</li>
                    </ul>
                    <p><strong>Solutions (4 marks):</strong></p>
                    <ul>
                        <li>Separate tables for Books, Members, and Loans</li>
                        <li>Use of primary/foreign keys to link tables</li>
                        <li>Eliminates redundancy</li>
                        <li>Maintains referential integrity</li>
                    </ul>
                </div>
            </div>

            <div class="task-container">
                <h3>Drawing Canvas for Calculations</h3>
                <p>Use this canvas for any rough work or diagrams:</p>
                
                <div class="canvas-container">
                    <canvas id="drawingCanvas" width="600" height="300"></canvas>
                </div>
                <button class="btn btn-secondary" onclick="clearCanvas()">Clear Canvas</button>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="showSection(7)">Previous</button>
                <button class="btn" onclick="showSection(9)">Next: Extension Activities</button>
            </div>
        </section>

        <!-- Section 9: Extension Activities -->
        <section class="section" id="section9">
            <h2>üöÄ Extension Activities</h2>
            <p>Challenge yourself with these advanced topics beyond the specification!</p>
            
            <div class="task-container">
                <h3>NoSQL Databases</h3>
                <p>Research and explain how NoSQL databases differ from traditional relational databases. When might you choose one over the other?</p>
                
                <textarea class="input-field" id="extension1" rows="5" placeholder="Your research findings..."></textarea>
                
                <button class="btn" onclick="checkExtension('extension1')">Submit</button>
                <div class="feedback" id="extension1Feedback"></div>
            </div>

            <div class="task-container">
                <h3>Database Normalization</h3>
                <p>Investigate the three normal forms (1NF, 2NF, 3NF) and explain how they reduce redundancy.</p>
                
                <textarea class="input-field" id="extension2" rows="5" placeholder="Explain normalization..."></textarea>
                
                <button class="btn" onclick="checkExtension('extension2')">Submit</button>
                <div class="feedback" id="extension2Feedback"></div>
            </div>

            <div class="task-container">
                <h3>Real-World Context: Big Data</h3>
                <p>How do companies like Google and Facebook handle billions of database records? Research distributed databases and sharding.</p>
                
                <textarea class="input-field" id="extension3" rows="5" placeholder="Your findings on big data..."></textarea>
                
                <button class="btn" onclick="checkExtension('extension3')">Submit</button>
                <div class="feedback" id="extension3Feedback"></div>
            </div>

            <div class="task-container">
                <h3>Common Mistakes to Avoid</h3>
                <ul>
                    <li>‚ùå Confusing rows and columns (records are rows, fields are columns)</li>
                    <li>‚ùå Using spaces in field names (use underscores or camelCase)</li>
                    <li>‚ùå Not defining primary keys for tables</li>
                    <li>‚ùå Creating many-to-many relationships directly</li>
                    <li>‚ùå Storing calculated values instead of calculating on demand</li>
                    <li>‚ùå Using meaningful data as primary keys (use arbitrary IDs)</li>
                </ul>
            </div>

            <div class="task-container">
                <h3>üìπ Video Resources</h3>
                <p>Recommended videos to reinforce your learning:</p>
                <ul>
                    <li>Introduction to Database Design</li>
                    <li>Understanding Entity Relationship Diagrams</li>
                    <li>SQL Basics for Beginners</li>
                    <li>Database Security Best Practices</li>
                </ul>
                <p style="color: var(--text-light); font-style: italic;">Videos will be added by your teacher</p>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="showSection(8)">Previous</button>
                <button class="btn btn-success" onclick="completeWorksheet()">Complete Worksheet</button>
            </div>
        </section>
    </div>

    <!-- Achievement Popup -->
    <div class="achievement-popup" id="achievementPopup">
        <div class="achievement-icon">üèÜ</div>
        <h3 id="achievementTitle">Achievement Unlocked!</h3>
        <p id="achievementDesc">Description</p>
    </div>

    <!-- Paste Shame Message -->
    <div class="paste-shame" id="pasteShame">
        üö´ No Pasting Allowed! üö´
    </div>

    <!-- Feedback Button -->
    <button class="feedback-btn" onclick="openFeedbackModal()" aria-label="Send feedback">
        üí¨
    </button>

    <!-- Feedback Modal -->
    <div class="feedback-modal" id="feedbackModal">
        <div class="feedback-modal-content">
            <h3>Send Feedback</h3>
            <p>Found a bug or have a suggestion? Let us know!</p>
            
            <label>Your message:</label>
            <textarea class="input-field" id="feedbackMessage" rows="4" placeholder="Describe the issue or suggestion..."></textarea>
            
            <div style="margin-top: 15px;">
                <button class="btn" onclick="sendFeedback()">Send Feedback</button>
                <button class="btn btn-secondary" onclick="closeFeedbackModal()">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentSection = 0;
        let xp = 0;
        let level = 0;
        let completedActions = new Set();
        let selectedItems = [];

        // Prevent paste
        document.addEventListener('paste', function(e) {
            e.preventDefault();
            showPasteShame();
            return false;
        });

        // Prevent context menu
        document.addEventListener('contextmenu', function(e) {
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                e.preventDefault();
                return false;
            }
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateProgress();
            initializeCanvas();
        });

        // XP and Achievement System
        function addXP(amount, action) {
            const actionKey = `${currentSection}-${action}`;
            if (completedActions.has(actionKey)) return;
            
            completedActions.add(actionKey);
            xp += amount;
            document.getElementById('xpAmount').textContent = xp + ' XP';
            
            // Check for level up
            const newLevel = Math.floor(xp / 100);
            if (newLevel > level && newLevel <= 5) {
                level = newLevel;
                document.getElementById('levelBadge').textContent = 'Level ' + level;
                showAchievement('Level Up!', `You reached Level ${level}!`);
            }
            
            updateProgress();
        }

        function showAchievement(title, desc) {
            const popup = document.getElementById('achievementPopup');
            document.getElementById('achievementTitle').textContent = title;
            document.getElementById('achievementDesc').textContent = desc;
            popup.style.display = 'block';
            
            setTimeout(() => {
                popup.style.display = 'none';
            }, 3000);
        }

        // Section Navigation
        function showSection(index) {
            const sections = document.querySelectorAll('.section');
            const buttons = document.querySelectorAll('.section-btn');
            
            sections.forEach(s => s.classList.remove('active'));
            buttons.forEach(b => b.classList.remove('active'));
            
            sections[index].classList.add('active');
            buttons[index].classList.add('active');
            
            currentSection = index;
            
            // Mark previous sections as completed
            for (let i = 0; i < index; i++) {
                buttons[i].classList.add('completed');
            }
            
            updateProgress();
            window.scrollTo(0, 0);
        }

        function updateProgress() {
            const progress = (currentSection / 9) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        // Matching Activities
        function resetMatching(containerId) {
            const container = document.getElementById(containerId);
            const items = container.querySelectorAll('.match-item');
            items.forEach(item => {
                item.classList.remove('selected', 'matched');
            });
            selectedItems = [];
        }

        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('match-item') && !e.target.classList.contains('matched')) {
                handleMatchClick(e.target);
            }
        });

        function handleMatchClick(item) {
            if (item.classList.contains('selected')) {
                item.classList.remove('selected');
                selectedItems = selectedItems.filter(i => i !== item);
                return;
            }
            
            item.classList.add('selected');
            selectedItems.push(item);
            
            if (selectedItems.length === 2) {
                checkMatch();
            }
        }

        function checkMatch() {
            const [item1, item2] = selectedItems;
            const pair1 = item1.getAttribute('data-pair');
            const pair2 = item2.getAttribute('data-pair');
            const type1 = item1.getAttribute('data-type');
            const type2 = item2.getAttribute('data-type');
            
            if (pair1 === pair2 && type1 !== type2) {
                item1.classList.add('matched');
                item2.classList.add('matched');
                item1.classList.remove('selected');
                item2.classList.remove('selected');
                addXP(10, 'match-' + pair1);
                
                // Check if all matched
                const container = item1.closest('.matching-container');
                const unmatched = container.querySelectorAll('.match-item:not(.matched)');
                if (unmatched.length === 0) {
                    const feedbackId = container.id + 'Feedback';
                    showFeedback(feedbackId, 'Excellent! All items matched correctly!', 'success');
                    addXP(20, 'complete-matching-' + container.id);
                }
            } else {
                item1.classList.remove('selected');
                item2.classList.remove('selected');
            }
            
            selectedItems = [];
        }

        // Multiple Choice
        function checkAnswer(btn, isCorrect, questionId) {
            const buttons = btn.parentElement.querySelectorAll('.choice-btn');
            buttons.forEach(b => {
                b.disabled = true;
                b.classList.remove('selected');
            });
            
            if (isCorrect) {
                btn.classList.add('correct');
                showFeedback(questionId + 'Feedback', 'Correct! Well done!', 'success');
                addXP(15, questionId);
            } else {
                btn.classList.add('incorrect');
                showFeedback(questionId + 'Feedback', 'Not quite. Think about the key characteristics.', 'error');
            }
        }

        // Fill in the Blanks
        let currentBlankInput = null;

        function fillBlank(option, value) {
            if (!currentBlankInput || option.classList.contains('used')) return;
            
            currentBlankInput.textContent = value;
            currentBlankInput.setAttribute('data-filled', value);
            option.classList.add('used');
            currentBlankInput = null;
        }

        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('blank-input')) {
                currentBlankInput = e.target;
                
                // Remove previous value if any
                const prevValue = e.target.getAttribute('data-filled');
                if (prevValue) {
                    const options = document.querySelectorAll('.blank-option');
                    options.forEach(opt => {
                        if (opt.textContent === prevValue) {
                            opt.classList.remove('used');
                        }
                    });
                    e.target.textContent = '';
                    e.target.removeAttribute('data-filled');
                }
            }
        });

        function checkFillBlanks() {
            const blanks = document.querySelectorAll('.blank-input');
            let correct = 0;
            
            blanks.forEach(blank => {
                const answer = blank.getAttribute('data-answer');
                const filled = blank.getAttribute('data-filled');
                
                if (answer && filled) {
                    if (answer.toLowerCase() === filled.toLowerCase()) {
                        blank.style.borderColor = 'var(--success)';
                        correct++;
                    } else {
                        blank.style.borderColor = 'var(--danger)';
                    }
                }
            });
            
            if (correct === blanks.length) {
                showFeedback('fillBlanksFeedback', 'Perfect! All answers are correct!', 'success');
                addXP(25, 'fillblanks-complete');
            } else {
                showFeedback('fillBlanksFeedback', `${correct} out of ${blanks.length} correct. Keep trying!`, 'error');
            }
        }

        // True/False
        function checkTrueFalse(btn, isCorrect, questionId) {
            const container = btn.parentElement;
            const buttons = container.querySelectorAll('.btn');
            buttons.forEach(b => b.disabled = true);
            
            if (isCorrect) {
                btn.style.background = 'var(--success)';
                addXP(10, 'tf-' + questionId);
            } else {
                btn.style.background = 'var(--danger)';
            }
            
            // Check if all true/false answered
            const allTF = document.querySelectorAll('[id^="tf"]');
            const answered = Array.from(allTF).filter(el => {
                const btns = el.querySelectorAll('.btn');
                return Array.from(btns).some(b => b.disabled);
            });
            
            if (answered.length === 3) {
                showFeedback('trueFalseFeedback', 'All questions answered!', 'success');
            }
        }

        // Simulations
        function showDBMSComponent(component) {
            const explanations = {
                users: 'Users interact with the database through applications. They don\'t directly access the database files.',
                dbms: 'The DBMS layer handles all requests, enforces security, manages concurrent access, and ensures data integrity.',
                database: 'The actual data is stored in structured files on disk, organized into tables with relationships.'
            };
            
            document.getElementById('dbmsExplanation').innerHTML = `
                <h4>${component.charAt(0).toUpperCase() + component.slice(1)}</h4>
                <p>${explanations[component]}</p>
            `;
            
            addXP(5, 'dbms-component-' + component);
        }

        function simulateDeleteCustomer() {
            const message = document.getElementById('integrityMessage');
            message.style.display = 'block';
            message.style.background = '#fee2e2';
            message.innerHTML = `
                <h4>‚ö†Ô∏è Referential Integrity Violation!</h4>
                <p>Cannot delete Customer C001 because they have existing orders.</p>
                <p>Options:</p>
                <ul>
                    <li>Delete all related orders first (CASCADE DELETE)</li>
                    <li>Set CustomerID in orders to NULL (SET NULL)</li>
                    <li>Prevent the deletion (RESTRICT) - Current behavior</li>
                </ul>
            `;
            addXP(15, 'integrity-simulation');
        }

        function resetIntegritySimulation() {
            document.getElementById('integrityMessage').style.display = 'none';
        }

        // Component Explanation
        function explainComponent(type) {
            const explanations = {
                field: 'A <strong>field</strong> (column) represents a single piece of information about an entity. Each field has a specific data type.',
                record: 'A <strong>record</strong> (row/tuple) contains all the information about one instance of an entity.'
            };
            
            document.getElementById('componentExplanation').innerHTML = explanations[type];
            addXP(5, 'explain-' + type);
        }

        // Relationships
        function showRelationship(type) {
            const diagrams = {
                oneToOne: `
                    <h4>One-to-One Relationship</h4>
                    <p>Each record in Table A relates to exactly one record in Table B.</p>
                    <div style="display: flex; align-items: center; justify-content: center; gap: 20px;">
                        <div style="border: 2px solid var(--primary); padding: 10px; border-radius: 8px;">Person</div>
                        <div>1 ‚Äî‚Äî‚Äî‚Äî 1</div>
                        <div style="border: 2px solid var(--primary); padding: 10px; border-radius: 8px;">Passport</div>
                    </div>
                    <p style="margin-top: 15px;">Example: Each person has exactly one passport.</p>
                `,
                oneToMany: `
                    <h4>One-to-Many Relationship</h4>
                    <p>Each record in Table A can relate to multiple records in Table B.</p>
                    <div style="display: flex; align-items: center; justify-content: center; gap: 20px;">
                        <div style="border: 2px solid var(--primary); padding: 10px; border-radius: 8px;">Customer</div>
                        <div>1 ‚Äî‚Äî‚Äî‚Äî M</div>
                        <div style="border: 2px solid var(--primary); padding: 10px; border-radius: 8px;">Orders</div>
                    </div>
                    <p style="margin-top: 15px;">Example: One customer can have many orders.</p>
                `,
                manyToMany: `
                    <h4>Many-to-Many Relationship</h4>
                    <p>Records in Table A can relate to multiple records in Table B and vice versa.</p>
                    <div style="display: flex; align-items: center; justify-content: center; gap: 20px;">
                        <div style="border: 2px solid var(--primary); padding: 10px; border-radius: 8px;">Students</div>
                        <div>M ‚Äî‚Äî‚Äî‚Äî M</div>
                        <div style="border: 2px solid var(--primary); padding: 10px; border-radius: 8px;">Courses</div>
                    </div>
                    <p style="margin-top: 15px;">Example: Students can take many courses, courses have many students.</p>
                    <p style="color: var(--warning);">‚ö†Ô∏è Requires a junction table in implementation!</p>
                `
            };
            
            document.getElementById('relationshipDiagram').innerHTML = diagrams[type];
            addXP(10, 'relationship-' + type);
        }

        // Categorization
        function categorizeSecurityMeasure(option, text, category) {
            if (option.classList.contains('used')) return;
            
            option.classList.add('used');
            const container = document.getElementById(category);
            const item = document.createElement('div');
            item.textContent = text;
            item.style.padding = '5px 10px';
            item.style.background = 'white';
            item.style.borderRadius = '4px';
            item.style.margin = '5px';
            item.setAttribute('data-category', category);
            item.setAttribute('data-text', text);
            container.appendChild(item);
        }

        function checkSecurityCategorization() {
            const preventive = document.getElementById('preventive').children;
            const detective = document.getElementById('detective').children;
            
            const correctPreventive = ['Passwords', 'Encryption', 'Access Rights'];
            const correctDetective = ['Audit Logs', 'Usage Monitoring', 'Activity Logs'];
            
            let correctCount = 0;
            
            Array.from(preventive).forEach(item => {
                if (correctPreventive.includes(item.getAttribute('data-text'))) {
                    correctCount++;
                }
            });
            
            Array.from(detective).forEach(item => {
                if (correctDetective.includes(item.getAttribute('data-text'))) {
                    correctCount++;
                }
            });
            
            if (correctCount === 6) {
                showFeedback('securityCategorizationFeedback', 'Perfect categorization!', 'success');
                addXP(30, 'security-categorization');
            } else {
                showFeedback('securityCategorizationFeedback', `${correctCount} out of 6 correct. Try again!`, 'error');
            }
        }

        function resetSecurityCategorization() {
            document.getElementById('preventive').innerHTML = '';
            document.getElementById('detective').innerHTML = '';
            document.querySelectorAll('.blank-option').forEach(opt => {
                opt.classList.remove('used');
            });
        }

        // Benefits Categorization
        function categorizeBenefit(option, text, type) {
            if (option.classList.contains('used')) return;
            
            option.classList.add('used');
            const container = document.getElementById(type === 'flat' ? 'flatFileBenefits' : 'relationalBenefits');
            const item = document.createElement('div');
            item.textContent = text;
            item.style.padding = '5px 10px';
            item.style.background = 'white';
            item.style.borderRadius = '4px';
            item.style.margin = '5px';
            item.setAttribute('data-type', type);
            item.setAttribute('data-text', text);
            container.appendChild(item);
        }

        function checkBenefitsCategorization() {
            const flat = document.getElementById('flatFileBenefits').children;
            const relational = document.getElementById('relationalBenefits').children;
            
            const correctFlat = ['Simple structure', 'Easy to set up', 'No relationships needed'];
            const correctRelational = ['No redundancy', 'Data integrity', 'Complex queries'];
            
            let correctCount = 0;
            
            Array.from(flat).forEach(item => {
                if (correctFlat.includes(item.getAttribute('data-text'))) {
                    correctCount++;
                }
            });
            
            Array.from(relational).forEach(item => {
                if (correctRelational.includes(item.getAttribute('data-text'))) {
                    correctCount++;
                }
            });
            
            if (correctCount === 6) {
                showFeedback('benefitsFeedback', 'Excellent! All benefits correctly categorized!', 'success');
                addXP(30, 'benefits-categorization');
            } else {
                showFeedback('benefitsFeedback', `${correctCount} out of 6 correct. Review the characteristics!`, 'error');
            }
        }

        function resetBenefitsCategorization() {
            document.getElementById('flatFileBenefits').innerHTML = '';
            document.getElementById('relationalBenefits').innerHTML = '';
            document.querySelectorAll('.blank-option').forEach(opt => {
                opt.classList.remove('used');
            });
        }

        // Check Various Answers
        function checkDataDictionary() {
            const inputs = document.querySelectorAll('#section1 .database-table input');
            const answers = ['yes', 'no', 'yes', 'yes'];
            let correct = 0;
            
            inputs.forEach((input, index) => {
                if (input.value.toLowerCase().trim() === answers[index]) {
                    input.style.borderColor = 'var(--success)';
                    correct++;
                } else {
                    input.style.borderColor = 'var(--danger)';
                }
            });
            
            if (correct === 4) {
                showFeedback('dataDictFeedback', 'Perfect! You understand what\'s in a data dictionary.', 'success');
                addXP(20, 'data-dictionary');
            } else {
                showFeedback('dataDictFeedback', `${correct}/4 correct. Remember: passwords are NOT stored in the data dictionary!`, 'error');
            }
        }

        function checkEncryptionAnswer() {
            const answer = document.getElementById('encryptionAnswer').value;
            const keywords = ['unauthorized', 'access', 'unreadable', 'decrypt', 'key', 'protection', 'secure'];
            const wordCount = answer.trim().split(/\s+/).length;
            
            if (wordCount < 50) {
                showFeedback('encryptionFeedback', 'Please write at least 50 words.', 'error');
                return;
            }
            
            let keywordCount = 0;
            keywords.forEach(keyword => {
                if (answer.toLowerCase().includes(keyword)) {
                    keywordCount++;
                }
            });
            
            const xpEarned = Math.min(keywordCount * 10, 40);
            addXP(xpEarned, 'encryption-answer');
            
            showFeedback('encryptionFeedback', 
                `Good answer! You mentioned ${keywordCount} key concepts. Earned ${xpEarned} XP!`, 
                'success');
        }

        function checkQueryBuilder() {
            const blanks = document.querySelectorAll('#section3 .blank-input');
            const answers = ['Grade', 'A'];
            let correct = true;
            
            blanks.forEach((blank, index) => {
                const filled = blank.getAttribute('data-filled');
                if (filled !== answers[index]) {
                    correct = false;
                }
            });
            
            if (correct) {
                showFeedback('queryBuilderFeedback', 'Perfect query! This would find all students with grade A.', 'success');
                addXP(20, 'query-builder');
            } else {
                showFeedback('queryBuilderFeedback', 'Not quite right. Think about which field contains the grade.', 'error');
            }
        }

        function checkIndexingBenefits() {
            const checkboxes = document.querySelectorAll('#section4 input[type="checkbox"]');
            const correct = ['sorted', 'pointers', 'smaller'];
            let selectedCorrect = 0;
            let incorrectSelected = false;
            
            checkboxes.forEach(cb => {
                if (cb.checked) {
                    if (correct.includes(cb.value)) {
                        selectedCorrect++;
                    } else {
                        incorrectSelected = true;
                    }
                }
            });
            
            if (selectedCorrect === 3 && !incorrectSelected) {
                showFeedback('indexingFeedback', 'Excellent! You understand how indexing works.', 'success');
                addXP(25, 'indexing-benefits');
            } else {
                showFeedback('indexingFeedback', 
                    'Not quite. Indexes don\'t duplicate data, they create sorted pointers.', 'error');
            }
        }

        function checkRelationshipProblems() {
            const answer = document.getElementById('relationshipProblems').value;
            const problems = ['integrity', 'inconsistent', 'orphaned', 'update', 'redundancy'];
            const lines = answer.trim().split('\n').filter(line => line.trim().length > 0);
            
            if (lines.length < 3) {
                showFeedback('relationshipProblemsFeedback', 
                    'Please list at least 3 problems.', 'error');
                return;
            }
            
            let keywordCount = 0;
            problems.forEach(problem => {
                if (answer.toLowerCase().includes(problem)) {
                    keywordCount++;
                }
            });
            
            const xpEarned = Math.min(lines.length * 10 + keywordCount * 5, 50);
            addXP(xpEarned, 'relationship-problems');
            
            showFeedback('relationshipProblemsFeedback', 
                `Good analysis! You listed ${lines.length} problems. Earned ${xpEarned} XP!`, 'success');
        }

        function checkScenarioAnswer() {
            const answer = document.getElementById('scenarioAnswer').value;
            const keywords = ['relational', 'relationships', 'redundancy', 'integrity', 'students', 'courses', 'teachers'];
            const wordCount = answer.trim().split(/\s+/).length;
            
            if (wordCount < 30) {
                showFeedback('scenarioFeedback', 'Please provide more detail in your answer.', 'error');
                return;
            }
            
            let score = 0;
            keywords.forEach(keyword => {
                if (answer.toLowerCase().includes(keyword)) {
                    score++;
                }
            });
            
            if (answer.toLowerCase().includes('relational')) {
                showFeedback('scenarioFeedback', 
                    `Good choice! Relational databases are perfect for this scenario. Score: ${score}/7`, 
                    'success');
                addXP(score * 5, 'scenario-analysis');
            } else {
                showFeedback('scenarioFeedback', 
                    'Consider why a relational database would be better for managing relationships.', 
                    'error');
            }
        }

        // Exam Questions
        function showMarkScheme(questionId) {
            const answer = document.getElementById(questionId).value;
            const marks = document.getElementById(questionId + 'Marks').value;
            
            if (answer.trim().length < 100) {
                showFeedback(questionId + 'Feedback', 
                    'Please write a more detailed answer before viewing the mark scheme.', 'error');
                return;
            }
            
            if (!marks || marks < 0) {
                showFeedback(questionId + 'Feedback', 
                    'Please enter your predicted marks first.', 'error');
                return;
            }
            
            document.getElementById(questionId + 'MarkScheme').style.display = 'block';
            addXP(30, 'exam-' + questionId);
        }

        // Extension Activities
        function checkExtension(id) {
            const answer = document.getElementById(id).value;
            const wordCount = answer.trim().split(/\s+/).length;
            
            if (wordCount < 50) {
                showFeedback(id + 'Feedback', 
                    'Extension activities require detailed research. Please write more!', 'error');
                return;
            }
            
            showFeedback(id + 'Feedback', 
                'Excellent research! You\'re going beyond the specification. +50 XP!', 'success');
            addXP(50, 'extension-' + id);
        }

        // Drawing Canvas
        let canvas, ctx, drawing = false;

        function initializeCanvas() {
            canvas = document.getElementById('drawingCanvas');
            if (!canvas) return;
            
            ctx = canvas.getContext('2d');
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            ctx.strokeStyle = '#000';
            
            // Mouse events
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            // Touch events
            canvas.addEventListener('touchstart', handleTouch);
            canvas.addEventListener('touchmove', handleTouch);
            canvas.addEventListener('touchend', stopDrawing);
        }

        function startDrawing(e) {
            drawing = true;
            const rect = canvas.getBoundingClientRect();
            ctx.beginPath();
            ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
        }

        function draw(e) {
            if (!drawing) return;
            const rect = canvas.getBoundingClientRect();
            ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
            ctx.stroke();
        }

        function handleTouch(e) {
            e.preventDefault();
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent(e.type === 'touchstart' ? 'mousedown' : 
                                            e.type === 'touchmove' ? 'mousemove' : 'mouseup', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            canvas.dispatchEvent(mouseEvent);
        }

        function stopDrawing() {
            drawing = false;
        }

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        // Utility Functions
        function showFeedback(id, message, type) {
            const feedback = document.getElementById(id);
            if (!feedback) return;
            
            feedback.textContent = message;
            feedback.className = 'feedback ' + type;
            feedback.style.display = 'block';
        }

        function showPasteShame() {
            const shame = document.getElementById('pasteShame');
            shame.style.display = 'block';
            setTimeout(() => {
                shame.style.display = 'none';
            }, 2000);
        }

        function completeWorksheet() {
            showAchievement('Worksheet Complete!', `Final Score: ${xp} XP - Level ${level}`);
            addXP(100, 'worksheet-complete');
        }

        // Feedback Modal
        function openFeedbackModal() {
            document.getElementById('feedbackModal').style.display = 'flex';
        }

        function closeFeedbackModal() {
            document.getElementById('feedbackModal').style.display = 'none';
            document.getElementById('feedbackMessage').value = '';
        }

        function sendFeedback() {
            const message = document.getElementById('feedbackMessage').value;
            const section = document.querySelector('.section.active h2').textContent;
            
            if (!message.trim()) {
                alert('Please enter a message');
                return;
            }
            
            // In a real implementation, this would send an email
            // For now, we'll just show a confirmation
            const subject = `Database Worksheet Feedback - ${section}`;
            const body = `Section: ${section}\n\nFeedback: ${message}\n\nPage: Section ${currentSection + 1}`;
            
            // Create mailto link
            const mailto = `mailto:millingtond@mgs.org?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            window.location.href = mailto;
            
            closeFeedbackModal();
            showAchievement('Feedback Sent!', 'Thank you for your feedback!');
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('feedbackModal');
            if (event.target === modal) {
                closeFeedbackModal();
            }
        }

        // Mobile swipe navigation
        let touchStartX = 0;
        let touchEndX = 0;

        document.addEventListener('touchstart', function(e) {
            touchStartX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', function(e) {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            if (touchEndX < touchStartX - 50) {
                // Swipe left - next section
                if (currentSection < 9) {
                    showSection(currentSection + 1);
                }
            }
            if (touchEndX > touchStartX + 50) {
                // Swipe right - previous section
                if (currentSection > 0) {
                    showSection(currentSection - 1);
                }
            }
        }

        // Accessibility - High Contrast Mode
        function toggleHighContrast() {
            document.body.classList.toggle('high-contrast');
        }

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowRight' && currentSection < 9) {
                showSection(currentSection + 1);
            } else if (e.key === 'ArrowLeft' && currentSection > 0) {
                showSection(currentSection - 1);
            }
        });
    </script>
</body>
</html>