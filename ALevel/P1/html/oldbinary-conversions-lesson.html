<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Binary Conversions - Interactive Lesson</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        h2 {
            color: #34495e;
            margin: 20px 0;
            font-size: 1.8em;
        }

        h3 {
            color: #7f8c8d;
            margin: 15px 0;
            font-size: 1.4em;
        }

        .navbar {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 30px;
            padding: 20px;
            background-color: #ecf0f1;
            border-radius: 8px;
            position: sticky;
            top: 20px;
            z-index: 100;
        }

        .nav-btn {
            padding: 10px 20px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .nav-btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }

        .nav-btn.active {
            background-color: #e74c3c;
        }

        .section {
            display: none;
            animation: fadeIn 0.5s;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .xp-bar {
            position: fixed;
            top: 10px;
            right: 10px;
            background-color: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 1000;
        }

        .xp-progress {
            width: 200px;
            height: 20px;
            background-color: #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 5px;
        }

        .xp-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            width: 0%;
            transition: width 0.5s;
        }

        .achievement-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(135deg, #f39c12, #e74c3c);
            color: white;
            padding: 20px 40px;
            border-radius: 15px;
            font-size: 1.2em;
            font-weight: bold;
            z-index: 2000;
            animation: achievementPop 3s forwards;
        }

        @keyframes achievementPop {
            0% { transform: translate(-50%, -50%) scale(0) rotate(0deg); }
            50% { transform: translate(-50%, -50%) scale(1.2) rotate(5deg); }
            70% { transform: translate(-50%, -50%) scale(1) rotate(-3deg); }
            100% { transform: translate(-50%, -50%) scale(0) rotate(0deg); opacity: 0; }
        }

        .task-box {
            background-color: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        input[type="text"], input[type="number"], select {
            padding: 8px 12px;
            border: 2px solid #bdc3c7;
            border-radius: 5px;
            font-size: 16px;
            margin: 5px;
            background-color: white;
        }

        input[type="text"]:focus, input[type="number"]:focus {
            outline: none;
            border-color: #3498db;
        }

        button {
            padding: 10px 20px;
            background-color: #2ecc71;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: all 0.3s;
        }

        button:hover {
            background-color: #27ae60;
            transform: translateY(-2px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        button.reset {
            background-color: #e74c3c;
        }

        button.reset:hover {
            background-color: #c0392b;
        }

        .feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }

        .feedback.correct {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .feedback.incorrect {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .draggable {
            display: inline-block;
            padding: 8px 15px;
            margin: 5px;
            background-color: #3498db;
            color: white;
            border-radius: 5px;
            cursor: move;
            user-select: none;
            transition: all 0.3s;
        }

        .draggable:hover {
            transform: scale(1.1);
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .drop-zone {
            min-height: 40px;
            min-width: 100px;
            border: 2px dashed #bdc3c7;
            border-radius: 5px;
            margin: 10px;
            padding: 10px;
            display: inline-block;
            background-color: #ecf0f1;
            transition: all 0.3s;
        }

        .drop-zone.hover {
            background-color: #3498db;
            border-color: #2980b9;
            transform: scale(1.05);
        }

        .drop-zone.filled {
            background-color: #2ecc71;
            border-color: #27ae60;
        }

        .binary-digit {
            display: inline-block;
            width: 40px;
            height: 40px;
            line-height: 40px;
            text-align: center;
            margin: 0 5px;
            background-color: #ecf0f1;
            border: 2px solid #bdc3c7;
            border-radius: 5px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .binary-digit:hover {
            background-color: #3498db;
            color: white;
            transform: scale(1.1);
        }

        .binary-digit.active {
            background-color: #2ecc71;
            color: white;
        }

        canvas {
            border: 2px solid #bdc3c7;
            border-radius: 5px;
            margin: 10px 0;
            background-color: white;
            cursor: crosshair;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .shame-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #e74c3c;
            color: white;
            padding: 20px;
            border-radius: 10px;
            font-size: 1.2em;
            z-index: 3000;
            display: none;
        }

        .feedback-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #95a5a6;
            color: white;
            border: none;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transition: all 0.3s;
            z-index: 999;
        }

        .feedback-button:hover {
            background-color: #7f8c8d;
            transform: scale(1.1);
        }

        .feedback-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 3000;
        }

        .feedback-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
        }

        .hint-box {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            display: none;
        }

        .show-hint {
            background-color: #f39c12;
            color: white;
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }

        .learning-outcome {
            background-color: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .navbar {
                position: relative;
                top: 0;
            }
            
            .xp-bar {
                position: relative;
                top: 0;
                right: 0;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Binary Conversions</h1>
        
        <div class="xp-bar">
            <div>Level: <span id="level">1</span> | XP: <span id="xp">0</span>/100</div>
            <div class="xp-progress">
                <div class="xp-fill" id="xpFill"></div>
            </div>
        </div>

        <nav class="navbar">
            <button class="nav-btn active" onclick="showSection(0)">Starter</button>
            <button class="nav-btn" onclick="showSection(1)">Binary→Denary</button>
            <button class="nav-btn" onclick="showSection(2)">Denary→Binary</button>
            <button class="nav-btn" onclick="showSection(3)">Denary→Hex</button>
            <button class="nav-btn" onclick="showSection(4)">Binary→Hex</button>
            <button class="nav-btn" onclick="showSection(5)">Hex→Denary</button>
            <button class="nav-btn" onclick="showSection(6)">Hex→Binary</button>
            <button class="nav-btn" onclick="showSection(7)">Hex Uses</button>
            <button class="nav-btn" onclick="showSection(8)">Exam Practice</button>
            <button class="nav-btn" onclick="showSection(9)">Summary Quiz</button>
            <button class="nav-btn" onclick="showSection(10)">Extension</button>
        </nav>

        <!-- Starter Activity -->
        <div class="section active" id="section0">
            <h2>Starter Activity: Binary Clock Challenge</h2>
            <div class="learning-outcome">
                <strong>Learning Outcome:</strong> Assess your current understanding of binary number representation
            </div>
            
            <div class="task-box">
                <h3>Can you read the binary clock?</h3>
                <p>Click on the binary digits to set the current time. Each column represents a digit of the time in 24-hour format.</p>
                
                <div style="text-align: center; margin: 20px 0;">
                    <div style="margin-bottom: 10px;">
                        <span style="display: inline-block; width: 80px;">Hours</span>
                        <span style="display: inline-block; width: 80px;">Minutes</span>
                    </div>
                    <div id="binaryClock">
                        <!-- Binary clock will be generated here -->
                    </div>
                    <div style="margin-top: 20px;">
                        <p>Current Time: <span id="clockTime">00:00</span></p>
                        <button onclick="checkClock()">Check Time</button>
                        <button class="reset" onclick="resetClock()">Reset</button>
                    </div>
                </div>
                
                <div id="clockFeedback"></div>
            </div>
            
            <div class="navigation-buttons">
                <button disabled>Previous</button>
                <button onclick="showSection(1)">Next</button>
            </div>
        </div>

        <!-- Binary to Denary -->
        <div class="section" id="section1">
            <h2>Binary to Denary Conversion</h2>
            <div class="learning-outcome">
                <strong>Learning Outcome:</strong> Convert binary numbers to denary by adding column values where 1 appears
            </div>
            
            <div class="task-box">
                <h3>Interactive Binary Visualization</h3>
                <p>Click on each bit to see how it contributes to the denary value. Each 1 adds its column value to the total.</p>
                
                <div style="text-align: center; margin: 20px 0;">
                    <div id="binaryColumns"></div>
                    <div style="margin-top: 20px;">
                        <p style="font-size: 1.2em;">Binary: <span id="binaryDisplay">00000000</span></p>
                        <p style="font-size: 1.2em;">Denary: <span id="denaryDisplay">0</span></p>
                    </div>
                </div>
                
                <button class="show-hint" onclick="showHint('hint1')">Show Hint</button>
                <div id="hint1" class="hint-box">
                    Remember: Start from the right with 1, then double each column going left (1, 2, 4, 8, 16, 32, 64, 128)
                </div>
            </div>
            
            <div class="task-box">
                <h3>Practice: Convert Binary to Denary</h3>
                <p>Convert the following binary numbers to denary:</p>
                
                <div style="margin: 20px 0;">
                    <p>1. 10110101 = <input type="number" id="b2d1" min="0" max="255"> 
                    <button onclick="checkB2D(1, 181)">Check</button></p>
                    <div id="b2d1Feedback"></div>
                    
                    <p>2. 01001110 = <input type="number" id="b2d2" min="0" max="255"> 
                    <button onclick="checkB2D(2, 78)">Check</button></p>
                    <div id="b2d2Feedback"></div>
                    
                    <p>3. 11111111 = <input type="number" id="b2d3" min="0" max="255"> 
                    <button onclick="checkB2D(3, 255)">Check</button></p>
                    <div id="b2d3Feedback"></div>
                </div>
                
                <button class="reset" onclick="resetB2D()">Reset All</button>
            </div>
            
            <div class="task-box">
                <h3>Drag and Drop Challenge</h3>
                <p>Match the binary numbers to their denary equivalents:</p>
                
                <div style="display: flex; justify-content: space-around; flex-wrap: wrap; margin: 20px 0;">
                    <div>
                        <h4>Binary Numbers</h4>
                        <div id="binaryDrag"></div>
                    </div>
                    <div>
                        <h4>Denary Values</h4>
                        <div id="denaryDrop"></div>
                    </div>
                </div>
                
                <button onclick="checkDragDrop()">Check Matches</button>
                <button class="reset" onclick="resetDragDrop()">Reset</button>
                <div id="dragDropFeedback"></div>
            </div>
            
            <div class="navigation-buttons">
                <button onclick="showSection(0)">Previous</button>
                <button onclick="showSection(2)">Next</button>
            </div>
        </div>

        <!-- Denary to Binary -->
        <div class="section" id="section2">
            <h2>Denary to Binary Conversion</h2>
            <div class="learning-outcome">
                <strong>Learning Outcome:</strong> Convert denary numbers to binary using the division method
            </div>
            
            <div class="task-box">
                <h3>Step-by-Step Algorithm Simulation</h3>
                <p>Watch how we convert denary to binary by repeatedly dividing and checking if each column value fits:</p>
                
                <div style="text-align: center; margin: 20px;">
                    <input type="number" id="denaryInput" min="0" max="255" value="75">
                    <button onclick="simulateD2B()">Simulate Conversion</button>
                    
                    <div id="d2bSimulation" style="margin: 20px 0; min-height: 200px;"></div>
                </div>
            </div>
            
            <div class="task-box">
                <h3>Practice with Drawing Canvas</h3>
                <p>Use the canvas to work out your conversions. Convert these denary numbers to binary:</p>
                
                <canvas id="drawingCanvas" width="600" height="200"></canvas>
                <button onclick="clearCanvas()">Clear Canvas</button>
                
                <div style="margin: 20px 0;">
                    <p>1. Convert 156 to binary: <input type="text" id="d2b1" maxlength="8" pattern="[01]+" oninput="this.value = this.value.replace(/[^01]/g, '')"> 
                    <button onclick="checkD2B(1, '10011100')">Check</button></p>
                    <div id="d2b1Feedback"></div>
                    
                    <p>2. Convert 89 to binary: <input type="text" id="d2b2" maxlength="8" pattern="[01]+" oninput="this.value = this.value.replace(/[^01]/g, '')"> 
                    <button onclick="checkD2B(2, '01011001')">Check</button></p>
                    <div id="d2b2Feedback"></div>
                    
                    <p>3. Convert 200 to binary: <input type="text" id="d2b3" maxlength="8" pattern="[01]+" oninput="this.value = this.value.replace(/[^01]/g, '')"> 
                    <button onclick="checkD2B(3, '11001000')">Check</button></p>
                    <div id="d2b3Feedback"></div>
                </div>
                
                <button class="reset" onclick="resetD2B()">Reset All</button>
            </div>
            
            <div class="task-box">
                <h3>Common Mistakes</h3>
                <ul>
                    <li>Forgetting to pad with leading zeros (e.g., writing 1010 instead of 00001010)</li>
                    <li>Reading the binary number in the wrong direction</li>
                    <li>Confusing the column values (remember they double each time)</li>
                </ul>
            </div>
            
            <div class="navigation-buttons">
                <button onclick="showSection(1)">Previous</button>
                <button onclick="showSection(3)">Next</button>
            </div>
        </div>

        <!-- Denary to Hexadecimal -->
        <div class="section" id="section3">
            <h2>Denary to Hexadecimal Conversion</h2>
            <div class="learning-outcome">
                <strong>Learning Outcome:</strong> Convert denary numbers to hexadecimal by dividing by 16
            </div>
            
            <div class="task-box">
                <h3>Understanding Hexadecimal</h3>
                <p>Hexadecimal uses 16 symbols: 0-9 and A-F (where A=10, B=11, C=12, D=13, E=14, F=15)</p>
                
                <div style="text-align: center; margin: 20px;">
                    <h4>Hex Reference Table</h4>
                    <table style="margin: 0 auto; border-collapse: collapse;">
                        <tr>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">Denary</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">0</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">1</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">2</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">3</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">4</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">5</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">6</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">7</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">Hex</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">0</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">1</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">2</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">3</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">4</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">5</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">6</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">7</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">Denary</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">8</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">9</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">10</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">11</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">12</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">13</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">14</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">15</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">Hex</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">8</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">9</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">A</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">B</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">C</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">D</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">E</td>
                            <td style="border: 1px solid #bdc3c7; padding: 10px;">F</td>
                        </tr>
                    </table>
                </div>
            </div>
            
            <div class="task-box">
                <h3>Real-World Context</h3>
                <p>Hexadecimal is widely used in computing because it's more compact and readable than binary:</p>
                <ul>
                    <li><strong>Web Colors:</strong> Each color uses 3 hex values for Red, Green, and Blue</li>
                    <li><strong>Memory Addresses:</strong> RAM locations shown as 0x1A2B3C4D</li>
                    <li><strong>Machine Code:</strong> Assembly instructions like 5F 3A 09 F1</li>
                    <li><strong>Network MACs:</strong> Device addresses like 01-23-45-67-89-AB</li>
                </ul>
                
                <div style="text-align: center; margin: 20px;">
                    <div style="display: inline-block; margin: 10px;">
                        <div style="width: 100px; height: 100px; background-color: #FF0000; border: 2px solid #333;"></div>
                        <p>Red: #FF0000</p>
                        <p>(255, 0, 0)</p>
                    </div>
                    <div style="display: inline-block; margin: 10px;">
                        <div style="width: 100px; height: 100px; background-color: #00FF00; border: 2px solid #333;"></div>
                        <p>Green: #00FF00</p>
                        <p>(0, 255, 0)</p>
                    </div>
                    <div style="display: inline-block; margin: 10px;">
                        <div style="width: 100px; height: 100px; background-color: #0000FF; border: 2px solid #333;"></div>
                        <p>Blue: #0000FF</p>
                        <p>(0, 0, 255)</p>
                    </div>
                </div>
            </div>
            
            <div class="task-box">
                <h3>Fill in the Blanks</h3>
                <p>Complete these denary to hexadecimal conversions. Choose from the options provided:</p>
                
                <div style="margin: 20px 0;">
                    <p>Available options: 
                    <span class="draggable" draggable="true" ondragstart="drag(event)" data-value="1A">1A</span>
                    <span class="draggable" draggable="true" ondragstart="drag(event)" data-value="FF">FF</span>
                    <span class="draggable" draggable="true" ondragstart="drag(event)" data-value="4C">4C</span>
                    <span class="draggable" draggable="true" ondragstart="drag(event)" data-value="2B">2B</span>
                    <span class="draggable" draggable="true" ondragstart="drag(event)" data-value="9E">9E</span>
                    <span class="draggable" draggable="true" ondragstart="drag(event)" data-value="3F">3F</span>
                    <span class="draggable" draggable="true" ondragstart="drag(event)" data-value="A0">A0</span>
                    <span class="draggable" draggable="true" ondragstart="drag(event)" data-value="15">15</span>
                    </p>
                    
                    <p>1. 26 in hexadecimal is: <span class="drop-zone" ondrop="drop(event)" ondragover="allowDrop(event)" data-answer="1A"></span></p>
                    <p>2. 76 in hexadecimal is: <span class="drop-zone" ondrop="drop(event)" ondragover="allowDrop(event)" data-answer="4C"></span></p>
                    <p>3. 255 in hexadecimal is: <span class="drop-zone" ondrop="drop(event)" ondragover="allowDrop(event)" data-answer="FF"></span></p>
                    <p>4. 160 in hexadecimal is: <span class="drop-zone" ondrop="drop(event)" ondragover="allowDrop(event)" data-answer="A0"></span></p>
                </div>
                
                <button onclick="checkHexFill()">Check Answers</button>
                <button class="reset" onclick="resetHexFill()">Reset</button>
                <div id="hexFillFeedback"></div>
            </div>
            
            <div class="navigation-buttons">
                <button onclick="showSection(2)">Previous</button>
                <button onclick="showSection(4)">Next</button>
            </div>
        </div>

        <!-- Binary to Hexadecimal -->
        <div class="section" id="section4">
            <h2>Binary to Hexadecimal Conversion</h2>
            <div class="learning-outcome">
                <strong>Learning Outcome:</strong> Convert binary to hexadecimal by grouping into nibbles (4 bits)
            </div>
            
            <div class="task-box">
                <h3>Nibble Grouping Simulation</h3>
                <p>Binary to hex is easy! Just split the 8-bit binary into two 4-bit nibbles and convert each separately.</p>
                
                <div style="text-align: center; margin: 20px;">
                    <div id="nibbleDemo">
                        <p>Binary: <span style="font-family: monospace; font-size: 1.2em;">11001101</span></p>
                        <p>Split into nibbles: <span style="font-family: monospace; font-size: 1.2em;">1100 | 1101</span></p>
                        <p>Convert each nibble: <span style="font-family: monospace; font-size: 1.2em;">C | D</span></p>
                        <p>Result: <span style="font-family: monospace; font-size: 1.2em; color: #2ecc71; font-weight: bold;">CD</span></p>
                    </div>
                    
                    <button onclick="animateNibble()">Show Another Example</button>
                </div>
            </div>
            
            <div class="task-box">
                <h3>Matching Exercise</h3>
                <p>Match each binary nibble to its hexadecimal equivalent:</p>
                
                <div style="display: flex; justify-content: space-around; margin: 20px 0;">
                    <div>
                        <h4>Binary Nibbles</h4>
                        <div id="binaryNibbles"></div>
                    </div>
                    <div>
                        <h4>Hex Values</h4>
                        <div id="hexValues"></div>
                    </div>
                </div>
                
                <button onclick="checkNibbleMatch()">Check Matches</button>
                <button class="reset" onclick="resetNibbleMatch()">Reset</button>
                <div id="nibbleMatchFeedback"></div>
            </div>
            
            <div class="task-box">
                <h3>Practice Problems</h3>
                <p>Convert these binary numbers to hexadecimal:</p>
                
                <div style="margin: 20px 0;">
                    <p>1. 10101111 = <input type="text" id="b2h1" maxlength="2" oninput="this.value = this.value.toUpperCase().replace(/[^0-9A-F]/g, '')"> 
                    <button onclick="checkB2H(1, 'AF')">Check</button></p>
                    <div id="b2h1Feedback"></div>
                    
                    <p>2. 01100100 = <input type="text" id="b2h2" maxlength="2" oninput="this.value = this.value.toUpperCase().replace(/[^0-9A-F]/g, '')"> 
                    <button onclick="checkB2H(2, '64')">Check</button></p>
                    <div id="b2h2Feedback"></div>
                    
                    <p>3. 11111110 = <input type="text" id="b2h3" maxlength="2" oninput="this.value = this.value.toUpperCase().replace(/[^0-9A-F]/g, '')"> 
                    <button onclick="checkB2H(3, 'FE')">Check</button></p>
                    <div id="b2h3Feedback"></div>
                </div>
                
                <button class="reset" onclick="resetB2H()">Reset All</button>
            </div>
            
            <div class="navigation-buttons">
                <button onclick="showSection(3)">Previous</button>
                <button onclick="showSection(5)">Next</button>
            </div>
        </div>

        <!-- Hexadecimal to Denary -->
        <div class="section" id="section5">
            <h2>Hexadecimal to Denary Conversion</h2>
            <div class="learning-outcome">
                <strong>Learning Outcome:</strong> Convert hexadecimal to denary by multiplying the left digit by 16 and adding the right digit
            </div>
            
            <div class="task-box">
                <h3>Calculator Simulation</h3>
                <p>To convert hex to denary: (Left digit × 16) + Right digit</p>
                
                <div style="text-align: center; margin: 20px;">
                    <input type="text" id="hexCalcInput" maxlength="2" placeholder="Enter hex" style="text-transform: uppercase;" oninput="this.value = this.value.toUpperCase().replace(/[^0-9A-F]/g, '')">
                    <button onclick="calculateH2D()">Calculate</button>
                    
                    <div id="hexCalcResult" style="margin: 20px; font-size: 1.2em;"></div>
                </div>
            </div>
            
            <div class="task-box">
                <h3>Problem Solving Tasks</h3>
                <p>Convert these hexadecimal values to denary. Show your working!</p>
                
                <div style="margin: 20px 0;">
                    <p>1. 3A = <input type="number" id="h2d1" min="0" max="255"> 
                    <button onclick="checkH2D(1, 58)">Check</button></p>
                    <div id="h2d1Feedback"></div>
                    
                    <p>2. B7 = <input type="number" id="h2d2" min="0" max="255"> 
                    <button onclick="checkH2D(2, 183)">Check</button></p>
                    <div id="h2d2Feedback"></div>
                    
                    <p>3. F0 = <input type="number" id="h2d3" min="0" max="255"> 
                    <button onclick="checkH2D(3, 240)">Check</button></p>
                    <div id="h2d3Feedback"></div>
                </div>
                
                <button class="show-hint" onclick="showHint('hint5')">Show Hint</button>
                <div id="hint5" class="hint-box">
                    Example: 5C = (5 × 16) + 12 = 80 + 12 = 92 (Remember C = 12)
                </div>
                
                <button class="reset" onclick="resetH2D()">Reset All</button>
            </div>
            
            <div class="navigation-buttons">
                <button onclick="showSection(4)">Previous</button>
                <button onclick="showSection(6)">Next</button>
            </div>
        </div>

        <!-- Hexadecimal to Binary -->
        <div class="section" id="section6">
            <h2>Hexadecimal to Binary Conversion</h2>
            <div class="learning-outcome">
                <strong>Learning Outcome:</strong> Convert hexadecimal to binary by converting each hex digit to a 4-bit binary nibble
            </div>
            
            <div class="task-box">
                <h3>Conversion Table Reference</h3>
                <p>Each hex digit converts to exactly 4 binary digits:</p>
                
                <div style="overflow-x: auto;">
                    <table style="margin: 20px auto; border-collapse: collapse;">
                        <tr>
                            <td style="border: 1px solid #bdc3c7; padding: 8px; font-weight: bold;">Hex</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">0</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">1</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">2</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">3</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">4</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">5</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">6</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">7</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #bdc3c7; padding: 8px; font-weight: bold;">Binary</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">0000</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">0001</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">0010</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">0011</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">0100</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">0101</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">0110</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">0111</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #bdc3c7; padding: 8px; font-weight: bold;">Hex</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">8</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">9</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">A</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">B</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">C</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">D</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">E</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">F</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #bdc3c7; padding: 8px; font-weight: bold;">Binary</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">1000</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">1001</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">1010</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">1011</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">1100</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">1101</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">1110</td>
                            <td style="border: 1px solid #bdc3c7; padding: 8px;">1111</td>
                        </tr>
                    </table>
                </div>
            </div>
            
            <div class="task-box">
                <h3>Practice Conversions</h3>
                <p>Convert these hexadecimal values to binary:</p>
                
                <div style="margin: 20px 0;">
                    <p>1. 7B = <input type="text" id="h2b1" maxlength="8" pattern="[01]+" oninput="this.value = this.value.replace(/[^01]/g, '')"> 
                    <button onclick="checkH2B(1, '01111011')">Check</button></p>
                    <div id="h2b1Feedback"></div>
                    
                    <p>2. A5 = <input type="text" id="h2b2" maxlength="8" pattern="[01]+" oninput="this.value = this.value.replace(/[^01]/g, '')"> 
                    <button onclick="checkH2B(2, '10100101')">Check</button></p>
                    <div id="h2b2Feedback"></div>
                    
                    <p>3. E9 = <input type="text" id="h2b3" maxlength="8" pattern="[01]+" oninput="this.value = this.value.replace(/[^01]/g, '')"> 
                    <button onclick="checkH2B(3, '11101001')">Check</button></p>
                    <div id="h2b3Feedback"></div>
                </div>
                
                <button class="reset" onclick="resetH2B()">Reset All</button>
            </div>
            
            <div class="navigation-buttons">
                <button onclick="showSection(5)">Previous</button>
                <button onclick="showSection(7)">Next</button>
            </div>
        </div>

        <!-- Hexadecimal Uses -->
        <div class="section" id="section7">
            <h2>Hexadecimal in the Real World</h2>
            <div class="learning-outcome">
                <strong>Learning Outcome:</strong> Understand why hexadecimal is widely used in computing and identify real-world applications
            </div>
            
            <div class="task-box">
                <h3>Why Do Programmers Use Hexadecimal?</h3>
                <p>Hexadecimal is preferred over binary in many computing contexts because:</p>
                <ul>
                    <li><strong>More compact:</strong> 16-bit number = 4 hex digits vs 16 binary digits</li>
                    <li><strong>Easier to read and remember:</strong> #FF00FF vs 11111111000000001111111</li>
                    <li><strong>Easy conversion:</strong> Each hex digit = exactly 4 binary bits</li>
                    <li><strong>Fewer errors:</strong> Less chance of mistakes with fewer characters</li>
                    <li><strong>Used in low-level programming:</strong> Assembly language, machine code, memory addresses</li>
                </ul>
                
                <div style="text-align: center; margin: 20px;">
                    <p><strong>Quick Reference:</strong> 1 hex digit = 4 binary bits = 1 nibble</p>
                </div>
            </div>
            
            <div class="task-box">
                <h3>Common Uses of Hexadecimal</h3>
                
                <h4>1. HTML/CSS Color Codes</h4>
                <div style="display: flex; justify-content: space-around; flex-wrap: wrap; margin: 20px 0;">
                    <div style="text-align: center; margin: 10px;">
                        <div style="width: 100px; height: 100px; background-color: #0000FF; border: 2px solid #333;"></div>
                        <p>Blue: #0000FF</p>
                        <p>RGB(0, 0, 255)</p>
                    </div>
                    <div style="text-align: center; margin: 10px;">
                        <div style="width: 100px; height: 100px; background-color: #FF00FF; border: 2px solid #333;"></div>
                        <p>Magenta: #FF00FF</p>
                        <p>RGB(255, 0, 255)</p>
                    </div>
                    <div style="text-align: center; margin: 10px;">
                        <div style="width: 100px; height: 100px; background-color: #00FFFF; border: 2px solid #333;"></div>
                        <p>Cyan: #00FFFF</p>
                        <p>RGB(0, 255, 255)</p>
                    </div>
                </div>
                
                <h4>2. Memory Dumps & Machine Code</h4>
                <div style="background-color: #2c3e50; color: #0f0; padding: 15px; border-radius: 5px; font-family: monospace; margin: 10px 0;">
                    Address  | Memory Contents<br>
                    0x1000   | 5F 3A 09 F1 8B C3 48 65<br>
                    0x1008   | 6C 6C 6F 20 57 6F 72 6C<br>
                    0x1010   | 64 21 00 00 A9 BC D4 E7
                </div>
                <p><em>Memory dump: Output of memory contents, usually represented in hexadecimal for readability</em></p>
                
                <h4>3. MAC Addresses</h4>
                <p>Network cards have unique MAC addresses in hex format:</p>
                <div style="text-align: center; font-family: monospace; font-size: 1.2em; margin: 10px;">
                    01-23-45-67-89-AB
                </div>
                
                <h4>4. ASCII/Unicode Values</h4>
                <p>Characters are often represented in hex. For example:</p>
                <div style="margin: 10px 0;">
                    <code>%41</code> = 'A' (ASCII 65)<br>
                    <code>%20</code> = Space (ASCII 32)<br>
                    <code>%0A</code> = Line Feed (ASCII 10)
                </div>
                
                <h4>5. Error Codes</h4>
                <p>Many systems use hex for error codes:</p>
                <ul>
                    <li>HTTP: Error #404 (Page Not Found)</li>
                    <li>Windows: 0x80070005 (Access Denied)</li>
                    <li>Blue Screen: STOP 0x0000007B</li>
                </ul>
                
                <h4>6. IPv6 Addresses</h4>
                <p>The new internet protocol uses hexadecimal:</p>
                <div style="text-align: center; font-family: monospace; font-size: 1.1em; margin: 10px;">
                    2001:0db8:85a3:0000:0000:8a2e:0370:7334
                </div>
            </div>
            
            <div class="task-box">
                <h3>Interactive: Color Mixer</h3>
                <p>Create colors by adjusting hex values. Each pair controls Red, Green, or Blue:</p>
                
                <div style="text-align: center; margin: 20px;">
                    <div style="margin: 20px;">
                        <label>Red: <input type="text" id="redHex" maxlength="2" value="00" style="width: 40px; text-transform: uppercase;" oninput="updateColor()"></label>
                        <label>Green: <input type="text" id="greenHex" maxlength="2" value="00" style="width: 40px; text-transform: uppercase;" oninput="updateColor()"></label>
                        <label>Blue: <input type="text" id="blueHex" maxlength="2" value="00" style="width: 40px; text-transform: uppercase;" oninput="updateColor()"></label>
                    </div>
                    <div id="colorDisplay" style="width: 200px; height: 200px; border: 2px solid #333; margin: 20px auto; background-color: #000000;"></div>
                    <p>Hex Color: <span id="hexColorCode">#000000</span></p>
                    <p>RGB: <span id="rgbColorCode">RGB(0, 0, 0)</span></p>
                </div>
                
                <button onclick="randomColor()">Random Color</button>
                <button onclick="resetColor()">Reset</button>
            </div>
            
            <div class="task-box">
                <h3>Practice: Identify Hex Uses</h3>
                <p>Match each hexadecimal value to its likely use:</p>
                
                <div style="margin: 20px 0;">
                    <p>Available uses: 
                    <span class="draggable" draggable="true" ondragstart="drag(event)" data-value="color">HTML Color</span>
                    <span class="draggable" draggable="true" ondragstart="drag(event)" data-value="mac">MAC Address</span>
                    <span class="draggable" draggable="true" ondragstart="drag(event)" data-value="ascii">ASCII Code</span>
                    <span class="draggable" draggable="true" ondragstart="drag(event)" data-value="error">Error Code</span>
                    <span class="draggable" draggable="true" ondragstart="drag(event)" data-value="memory">Memory Address</span>
                    <span class="draggable" draggable="true" ondragstart="drag(event)" data-value="ipv6">IPv6 Part</span>
                    </p>
                    
                    <p>1. #FF5733: <span class="drop-zone" ondrop="drop(event)" ondragover="allowDrop(event)" data-answer="color"></span></p>
                    <p>2. %48%65%6C%6C%6F: <span class="drop-zone" ondrop="drop(event)" ondragover="allowDrop(event)" data-answer="ascii"></span></p>
                    <p>3. 00-1B-63-84-45-E6: <span class="drop-zone" ondrop="drop(event)" ondragover="allowDrop(event)" data-answer="mac"></span></p>
                    <p>4. 0x00000040: <span class="drop-zone" ondrop="drop(event)" ondragover="allowDrop(event)" data-answer="memory"></span></p>
                    <p>5. 404: <span class="drop-zone" ondrop="drop(event)" ondragover="allowDrop(event)" data-answer="error"></span></p>
                    <p>6. 2001:0db8: <span class="drop-zone" ondrop="drop(event)" ondragover="allowDrop(event)" data-answer="ipv6"></span></p>
                </div>
                
                <button onclick="checkHexUses()">Check Answers</button>
                <button class="reset" onclick="resetHexUses()">Reset</button>
                <div id="hexUsesFeedback"></div>
            </div>
            
            <div class="task-box">
                <h3>ASCII Decoder Challenge</h3>
                <p>Decode this hex-encoded message (each pair is one ASCII character):</p>
                
                <div style="text-align: center; margin: 20px;">
                    <p style="font-family: monospace; font-size: 1.2em;">48 65 78 20 69 73 20 63 6F 6F 6C 21</p>
                    <input type="text" id="asciiDecoded" style="width: 300px;" placeholder="Type the decoded message">
                    <button onclick="checkASCII()">Check</button>
                    <div id="asciiFeedback"></div>
                </div>
                
                <button class="show-hint" onclick="showHint('asciiHint')">Show Hint</button>
                <div id="asciiHint" class="hint-box">
                    Hint: 48 = H, 65 = e... Convert each hex pair to decimal, then look up the ASCII character.
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button onclick="showSection(6)">Previous</button>
                <button onclick="showSection(8)">Next</button>
            </div>
        </div>

        <!-- Practice Exam Questions -->
        <div class="section" id="section8">
            <h2>Practice Exam Questions</h2>
            <div class="learning-outcome">
                <strong>Learning Outcome:</strong> Apply your knowledge to exam-style questions
            </div>
            
            <div class="task-box">
                <h3>Question 1 (4 marks)</h3>
                <p>A computer stores color values in hexadecimal format. The color code #3A5F9D represents a shade of blue.</p>
                <p>a) Convert the Red component (3A) to denary. [2 marks]</p>
                <textarea id="exam1a" rows="3" cols="50" placeholder="Show your working..."></textarea>
                <p>Predicted marks: <input type="number" id="exam1aMark" min="0" max="2" step="1"></p>
                <button onclick="showMarkScheme('exam1a', 2)">View Mark Scheme</button>
                <div id="exam1aMS" style="display: none;" class="hint-box">
                    <strong>Mark Scheme:</strong><br>
                    • 3 × 16 = 48 [1 mark]<br>
                    • 48 + 10 = 58 [1 mark]<br>
                    (Accept: Correct answer of 58 with or without working)
                </div>
                
                <p>b) Convert the Blue component (9D) to binary. [2 marks]</p>
                <textarea id="exam1b" rows="3" cols="50" placeholder="Show your working..."></textarea>
                <p>Predicted marks: <input type="number" id="exam1bMark" min="0" max="2" step="1"></p>
                <button onclick="showMarkScheme('exam1b', 2)">View Mark Scheme</button>
                <div id="exam1bMS" style="display: none;" class="hint-box">
                    <strong>Mark Scheme:</strong><br>
                    • 9 = 1001 [1 mark]<br>
                    • D = 1101, so 9D = 10011101 [1 mark]<br>
                    (Accept: Correct answer with clear working)
                </div>
            </div>
            
            <div class="task-box">
                <h3>Question 2 (6 marks)</h3>
                <p>A network administrator needs to configure IP addresses. The subnet mask 11111111.11111111.11111111.00000000 needs to be converted.</p>
                <p>a) Convert the first octet (11111111) to denary. [2 marks]</p>
                <textarea id="exam2a" rows="3" cols="50" placeholder="Your answer..."></textarea>
                <p>Predicted marks: <input type="number" id="exam2aMark" min="0" max="2" step="1"></p>
                <button onclick="showMarkScheme('exam2a', 2)">View Mark Scheme</button>
                <div id="exam2aMS" style="display: none;" class="hint-box">
                    <strong>Mark Scheme:</strong><br>
                    • Showing addition: 128+64+32+16+8+4+2+1 [1 mark]<br>
                    • = 255 [1 mark]
                </div>
                
                <p>b) Express the complete subnet mask in dotted decimal notation. [2 marks]</p>
                <textarea id="exam2b" rows="3" cols="50" placeholder="Your answer..."></textarea>
                <p>Predicted marks: <input type="number" id="exam2bMark" min="0" max="2" step="1"></p>
                <button onclick="showMarkScheme('exam2b', 2)">View Mark Scheme</button>
                <div id="exam2bMS" style="display: none;" class="hint-box">
                    <strong>Mark Scheme:</strong><br>
                    • Converting last octet: 00000000 = 0 [1 mark]<br>
                    • Complete answer: 255.255.255.0 [1 mark]
                </div>
                
                <p>c) What is this subnet mask in hexadecimal? [2 marks]</p>
                <textarea id="exam2c" rows="3" cols="50" placeholder="Your answer..."></textarea>
                <p>Predicted marks: <input type="number" id="exam2cMark" min="0" max="2" step="1"></p>
                <button onclick="showMarkScheme('exam2c', 2)">View Mark Scheme</button>
                <div id="exam2cMS" style="display: none;" class="hint-box">
                    <strong>Mark Scheme:</strong><br>
                    • Converting 255 to FF [1 mark]<br>
                    • Complete answer: FF.FF.FF.00 or FFFFFF00 [1 mark]
                </div>
            </div>
            
            <div class="task-box">
                <h3>Question 3 (3 marks)</h3>
                <p>A programmer is debugging code and sees this memory dump:</p>
                <pre style="background-color: #2c3e50; color: #0f0; padding: 10px; font-family: monospace;">
0x1000: 48 65 6C 6C 6F</pre>
                <p>a) What advantage does hexadecimal have over binary for displaying memory dumps? [1 mark]</p>
                <textarea id="exam3a" rows="2" cols="50" placeholder="Your answer..."></textarea>
                <p>Predicted marks: <input type="number" id="exam3aMark" min="0" max="1" step="1"></p>
                <button onclick="showMarkScheme('exam3a', 1)">View Mark Scheme</button>
                <div id="exam3aMS" style="display: none;" class="hint-box">
                    <strong>Mark Scheme:</strong><br>
                    • More compact/readable/fewer symbols needed [1 mark]<br>
                    (Accept: Easier to spot errors, easier to remember)
                </div>
                
                <p>b) Convert the first byte (48) to binary. [2 marks]</p>
                <textarea id="exam3b" rows="2" cols="50" placeholder="Show your working..."></textarea>
                <p>Predicted marks: <input type="number" id="exam3bMark" min="0" max="2" step="1"></p>
                <button onclick="showMarkScheme('exam3b', 2)">View Mark Scheme</button>
                <div id="exam3bMS" style="display: none;" class="hint-box">
                    <strong>Mark Scheme:</strong><br>
                    • Converting 4 = 0100 [1 mark]<br>
                    • Converting 8 = 1000, so 48 = 01001000 [1 mark]
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button onclick="showSection(7)">Previous</button>
                <button onclick="showSection(9)">Next</button>
            </div>
        </div>

        <!-- Summary Quiz -->
        <div class="section" id="section9">
            <h2>Summary Quiz</h2>
            <div class="learning-outcome">
                <strong>Learning Outcome:</strong> Check your understanding of all conversion techniques
            </div>
            
            <div class="task-box">
                <h3>Quick Fire Questions (10 Questions)</h3>
                
                <div style="margin: 20px 0;">
                    <p>1. What is 10101010 in denary?</p>
                    <input type="radio" name="q1" value="160"> 160
                    <input type="radio" name="q1" value="170"> 170
                    <input type="radio" name="q1" value="180"> 180
                    <input type="radio" name="q1" value="190"> 190
                    
                    <p>2. What is 255 in hexadecimal?</p>
                    <input type="radio" name="q2" value="FE"> FE
                    <input type="radio" name="q2" value="FF"> FF
                    <input type="radio" name="q2" value="EF"> EF
                    <input type="radio" name="q2" value="EE"> EE
                    
                    <p>3. What is C4 in binary?</p>
                    <input type="radio" name="q3" value="11000100"> 11000100
                    <input type="radio" name="q3" value="11000010"> 11000010
                    <input type="radio" name="q3" value="10000100"> 10000100
                    <input type="radio" name="q3" value="11100100"> 11100100
                    
                    <p>4. Which conversion method involves dividing by 16?</p>
                    <input type="radio" name="q4" value="b2d"> Binary to Denary
                    <input type="radio" name="q4" value="d2h"> Denary to Hexadecimal
                    <input type="radio" name="q4" value="h2b"> Hexadecimal to Binary
                    <input type="radio" name="q4" value="b2h"> Binary to Hexadecimal
                    
                    <p>5. What is 64 in binary?</p>
                    <input type="radio" name="q5" value="01000000"> 01000000
                    <input type="radio" name="q5" value="10000000"> 10000000
                    <input type="radio" name="q5" value="00100000"> 00100000
                    <input type="radio" name="q5" value="00010000"> 00010000
                    
                    <p>6. How many bits are in a nibble?</p>
                    <input type="radio" name="q6" value="2"> 2
                    <input type="radio" name="q6" value="4"> 4
                    <input type="radio" name="q6" value="8"> 8
                    <input type="radio" name="q6" value="16"> 16
                    
                    <p>7. What is A7 in denary?</p>
                    <input type="radio" name="q7" value="157"> 157
                    <input type="radio" name="q7" value="167"> 167
                    <input type="radio" name="q7" value="177"> 177
                    <input type="radio" name="q7" value="187"> 187
                    
                    <p>8. What is the maximum value that can be stored in 8 bits?</p>
                    <input type="radio" name="q8" value="127"> 127
                    <input type="radio" name="q8" value="255"> 255
                    <input type="radio" name="q8" value="256"> 256
                    <input type="radio" name="q8" value="512"> 512
                    
                    <p>9. Which of these is NOT a common use of hexadecimal?</p>
                    <input type="radio" name="q9" value="email"> Email addresses
                    <input type="radio" name="q9" value="color"> HTML color codes
                    <input type="radio" name="q9" value="mac"> MAC addresses
                    <input type="radio" name="q9" value="memory"> Memory dumps
                    
                    <p>10. Why do programmers prefer hex over binary for machine code?</p>
                    <input type="radio" name="q10" value="faster"> It runs faster
                    <input type="radio" name="q10" value="readable"> More readable with fewer symbols
                    <input type="radio" name="q10" value="accurate"> More mathematically accurate
                    <input type="radio" name="q10" value="modern"> It's more modern
                </div>
                
                <button onclick="checkSummaryQuiz()">Submit Quiz</button>
                <div id="quizResults"></div>
            </div>
            
            <div class="navigation-buttons">
                <button onclick="showSection(8)">Previous</button>
                <button onclick="showSection(10)">Next</button>
            </div>
        </div>

        <!-- Extension Activities -->
        <div class="section" id="section10">
            <h2>Extension Activities</h2>
            <div class="learning-outcome">
                <strong>Learning Outcome:</strong> Extend your knowledge beyond the basic conversions
            </div>
            
            <div class="task-box">
                <h3>Challenge: 16-bit Conversions</h3>
                <p>So far we've worked with 8-bit numbers. Can you convert these 16-bit values?</p>
                
                <div style="margin: 20px 0;">
                    <p>1. Convert 1010110111001101 to hexadecimal:</p>
                    <textarea id="ext1" rows="3" cols="50" placeholder="Show your working..."></textarea>
                    <button onclick="checkExtension(1)">Check</button>
                    <div id="ext1Feedback"></div>
                    
                    <p>2. Convert FACE to binary (16 bits):</p>
                    <textarea id="ext2" rows="3" cols="50" placeholder="Show your working..."></textarea>
                    <button onclick="checkExtension(2)">Check</button>
                    <div id="ext2Feedback"></div>
                </div>
            </div>
            
            <div class="task-box">
                <h3>Real-World Application: IPv6 Addresses</h3>
                <p>IPv6 addresses use hexadecimal notation. Research and explain why hexadecimal is preferred over binary or denary for representing these addresses.</p>
                <textarea id="ipv6Research" rows="5" cols="50" placeholder="Your research findings..."></textarea>
                <button onclick="submitResearch()">Submit Research</button>
            </div>
            
            <div class="task-box">
                <h3>Videos</h3>
                <p><em>Videos about binary conversions would be embedded here in the actual lesson.</em></p>
                <ul>
                    <li>Video 1: Binary Number Systems Explained</li>
                    <li>Video 2: Quick Conversion Techniques</li>
                    <li>Video 3: Real-world Applications</li>
                </ul>
            </div>
            
            <div class="navigation-buttons">
                <button onclick="showSection(9)">Previous</button>
                <button disabled>Next</button>
            </div>
        </div>
    </div>

    <!-- Achievement Popup -->
    <div id="achievementPopup" class="achievement-popup"></div>

    <!-- Shame Message -->
    <div id="shameMessage" class="shame-message">
        🚫 Pasting is disabled! Please type your answers. 🚫
    </div>

    <!-- Feedback Button and Modal -->
    <button class="feedback-button" onclick="openFeedback()">💬</button>
    
    <div id="feedbackModal" class="feedback-modal">
        <div class="feedback-content">
            <h3>Send Feedback</h3>
            <p>Found a bug or have a suggestion? Let us know!</p>
            <p>Current page: <span id="currentPage"></span></p>
            <textarea id="feedbackText" rows="5" cols="50" placeholder="Describe the issue or suggestion..."></textarea>
            <button onclick="sendFeedback()">Send</button>
            <button onclick="closeFeedback()">Cancel</button>
        </div>
    </div>

    <script>
        // Global variables
        let currentSection = 0;
        let xp = 0;
        let level = 1;
        let achievements = [];
        let completedTasks = new Set();
        
        // Drawing canvas setup
        let canvas, ctx;
        let isDrawing = false;
        
        // Prevent paste
        document.addEventListener('paste', function(e) {
            e.preventDefault();
            showShameMessage();
            return false;
        });
        
        document.addEventListener('DOMContentLoaded', function() {
            setupBinaryClock();
            setupBinaryColumns();
            setupDragDrop();
            setupNibbleMatching();
            setupCanvas();
            setupDropZoneHovers();
            updateXPDisplay();
            updateColor(); // Initialize color display
        });
        
        function setupDropZoneHovers() {
            const allDropZones = document.querySelectorAll('.drop-zone');
            allDropZones.forEach(function(zone) {
                zone.addEventListener('dragenter', function() {
                    this.classList.add('hover');
                });
                zone.addEventListener('dragleave', function() {
                    this.classList.remove('hover');
                });
            });
        }
        
        // XP and Achievement System
        function addXP(amount, taskId) {
            if (completedTasks.has(taskId)) return;
            
            completedTasks.add(taskId);
            xp += amount;
            
            if (xp >= 100 && level < 5) {
                xp = xp - 100;
                level++;
                showAchievement('Level Up! You reached Level ' + level);
            }
            
            updateXPDisplay();
            
            // Check for specific achievements
            if (completedTasks.size === 5 && !achievements.includes('firstFive')) {
                achievements.push('firstFive');
                showAchievement('Quick Learner! Completed 5 tasks');
                addXP(20, 'achievement-firstFive');
            }
            
            if (level === 5 && !achievements.includes('maxLevel')) {
                achievements.push('maxLevel');
                showAchievement('Master Converter! Reached maximum level');
            }
        }
        
        function updateXPDisplay() {
            document.getElementById('xp').textContent = xp;
            document.getElementById('level').textContent = level;
            document.getElementById('xpFill').style.width = xp + '%';
        }
        
        function showAchievement(message) {
            const popup = document.getElementById('achievementPopup');
            popup.textContent = '🏆 ' + message + ' 🏆';
            popup.style.animation = 'achievementPop 3s forwards';
            
            setTimeout(function() {
                popup.style.animation = '';
            }, 3000);
        }
        
        function showShameMessage() {
            const shame = document.getElementById('shameMessage');
            shame.style.display = 'block';
            setTimeout(function() {
                shame.style.display = 'none';
            }, 3000);
        }
        
        // Navigation
        function showSection(index) {
            const sections = document.querySelectorAll('.section');
            const navBtns = document.querySelectorAll('.nav-btn');
            
            sections.forEach(function(section) {
                section.classList.remove('active');
            });
            navBtns.forEach(function(btn) {
                btn.classList.remove('active');
            });
            
            sections[index].classList.add('active');
            navBtns[index].classList.add('active');
            currentSection = index;
        }
        
        // Hints
        function showHint(hintId) {
            const hint = document.getElementById(hintId);
            hint.style.display = 'block';
            addXP(-5, 'hint-' + hintId); // Lose XP for using hints
        }
        
        // Binary Clock Setup
        function setupBinaryClock() {
            const clock = document.getElementById('binaryClock');
            const time = new Date();
            const hours = time.getHours().toString().padStart(2, '0');
            const minutes = time.getMinutes().toString().padStart(2, '0');
            
            // Create binary representation for each digit
            const digits = [hours[0], hours[1], minutes[0], minutes[1]];
            
            clock.innerHTML = '';
            digits.forEach(function(digit, index) {
                const column = document.createElement('div');
                column.style.display = 'inline-block';
                column.style.margin = '0 10px';
                
                const decimal = parseInt(digit);
                const binary = decimal.toString(2).padStart(4, '0');
                
                for (let i = 0; i < 4; i++) {
                    const bit = document.createElement('div');
                    bit.className = 'binary-digit';
                    bit.textContent = '0';
                    bit.dataset.column = index;
                    bit.dataset.bit = i;
                    bit.onclick = function() {
                        this.textContent = this.textContent === '0' ? '1' : '0';
                        updateClockTime();
                    };
                    column.appendChild(bit);
                }
                
                clock.appendChild(column);
            });
            
            updateClockTime(); // Initialize the display
        }
        
        function updateClockTime() {
            const digits = [];
            for (let col = 0; col < 4; col++) {
                let value = 0;
                const bits = document.querySelectorAll('[data-column="' + col + '"]');
                bits.forEach(function(bit, index) {
                    if (bit.textContent === '1') {
                        value += Math.pow(2, 3 - index);
                    }
                });
                digits.push(value);
            }
            
            const timeStr = digits[0] + '' + digits[1] + ':' + digits[2] + '' + digits[3];
            document.getElementById('clockTime').textContent = timeStr;
        }
        
        function checkClock() {
            const display = document.getElementById('clockTime').textContent;
            const actual = new Date();
            const actualTime = actual.getHours().toString().padStart(2, '0') + ':' + 
                             actual.getMinutes().toString().padStart(2, '0');
            
            const feedback = document.getElementById('clockFeedback');
            if (display === actualTime) {
                feedback.className = 'feedback correct';
                feedback.textContent = 'Excellent! You can read binary time!';
                addXP(15, 'binaryClock');
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = 'Not quite right. The current time is ' + actualTime;
            }
        }
        
        function resetClock() {
            setupBinaryClock();
            updateClockTime();
            document.getElementById('clockFeedback').textContent = '';
        }
        
        // Binary Columns Setup
        function setupBinaryColumns() {
            const container = document.getElementById('binaryColumns');
            container.innerHTML = '';
            
            const powers = [128, 64, 32, 16, 8, 4, 2, 1];
            
            // Column headers
            const headerRow = document.createElement('div');
            powers.forEach(function(power) {
                const header = document.createElement('span');
                header.style.display = 'inline-block';
                header.style.width = '50px';
                header.style.textAlign = 'center';
                header.style.fontWeight = 'bold';
                header.textContent = power;
                headerRow.appendChild(header);
            });
            container.appendChild(headerRow);
            
            // Binary digits
            const digitRow = document.createElement('div');
            powers.forEach(function(power, index) {
                const digit = document.createElement('span');
                digit.className = 'binary-digit';
                digit.textContent = '0';
                digit.dataset.power = power;
                digit.onclick = function() {
                    this.textContent = this.textContent === '0' ? '1' : '0';
                    this.classList.toggle('active');
                    updateBinaryDisplay();
                };
                digitRow.appendChild(digit);
            });
            container.appendChild(digitRow);
        }
        
        function updateBinaryDisplay() {
            let binary = '';
            let denary = 0;
            
            const digits = document.querySelectorAll('#binaryColumns .binary-digit');
            digits.forEach(function(digit) {
                binary += digit.textContent;
                if (digit.textContent === '1') {
                    denary += parseInt(digit.dataset.power);
                }
            });
            
            document.getElementById('binaryDisplay').textContent = binary;
            document.getElementById('denaryDisplay').textContent = denary;
        }
        
        // Binary to Denary Checks
        function checkB2D(num, answer) {
            const input = document.getElementById('b2d' + num);
            const feedback = document.getElementById('b2d' + num + 'Feedback');
            
            if (parseInt(input.value) === answer) {
                feedback.className = 'feedback correct';
                feedback.textContent = 'Correct! Well done!';
                addXP(10, 'b2d' + num);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = 'Not quite. Remember to add the values where 1 appears.';
            }
        }
        
        function resetB2D() {
            for (let i = 1; i <= 3; i++) {
                document.getElementById('b2d' + i).value = '';
                document.getElementById('b2d' + i + 'Feedback').textContent = '';
            }
        }
        
        // Drag and Drop Setup
        function setupDragDrop() {
            const binaryContainer = document.getElementById('binaryDrag');
            const denaryContainer = document.getElementById('denaryDrop');
            
            const pairs = [
                {binary: '00001010', denary: '10'},
                {binary: '00011001', denary: '25'},
                {binary: '01000000', denary: '64'},
                {binary: '10000001', denary: '129'}
            ];
            
            // Shuffle denary values
            const denaryValues = pairs.map(p => p.denary).sort(() => Math.random() - 0.5);
            
            pairs.forEach(function(pair) {
                const binaryDiv = document.createElement('div');
                binaryDiv.className = 'draggable';
                binaryDiv.draggable = true;
                binaryDiv.textContent = pair.binary;
                binaryDiv.dataset.value = pair.binary;
                binaryDiv.ondragstart = drag;
                binaryContainer.appendChild(binaryDiv);
            });
            
            denaryValues.forEach(function(value) {
                const dropZone = document.createElement('div');
                dropZone.className = 'drop-zone';
                dropZone.dataset.answer = value;
                dropZone.textContent = value;
                dropZone.ondrop = drop;
                dropZone.ondragover = allowDrop;
                dropZone.ondragenter = function() { this.classList.add('hover'); };
                dropZone.ondragleave = function() { this.classList.remove('hover'); };
                denaryContainer.appendChild(dropZone);
            });
        }
        
        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.dataset.value);
        }
        
        function allowDrop(ev) {
            ev.preventDefault();
        }
        
        function drop(ev) {
            ev.preventDefault();
            ev.target.classList.remove('hover');
            
            const data = ev.dataTransfer.getData("text");
            
            if (ev.target.classList.contains('drop-zone')) {
                // Handle different types of drops
                const draggedElement = document.querySelector('[data-value="' + data + '"]');
                if (draggedElement && draggedElement.classList.contains('draggable')) {
                    ev.target.textContent = data;
                    ev.target.classList.add('filled');
                    ev.target.dataset.dropped = data;
                }
            }
        }
        
        function checkDragDrop() {
            const dropZones = document.querySelectorAll('#denaryDrop .drop-zone');
            let correct = 0;
            
            const conversions = {
                '00001010': '10',
                '00011001': '25',
                '01000000': '64',
                '10000001': '129'
            };
            
            dropZones.forEach(function(zone) {
                if (zone.dataset.dropped && conversions[zone.dataset.dropped] === zone.dataset.answer) {
                    correct++;
                }
            });
            
            const feedback = document.getElementById('dragDropFeedback');
            if (correct === 4) {
                feedback.className = 'feedback correct';
                feedback.textContent = 'Perfect! All matches are correct!';
                addXP(20, 'dragDrop');
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = 'You got ' + correct + ' out of 4 correct. Try again!';
            }
        }
        
        function resetDragDrop() {
            const dropZones = document.querySelectorAll('#denaryDrop .drop-zone');
            dropZones.forEach(function(zone) {
                zone.classList.remove('filled');
                zone.dataset.dropped = '';
            });
            document.getElementById('dragDropFeedback').textContent = '';
        }
        
        // Denary to Binary Simulation
        function simulateD2B() {
            const inputValue = document.getElementById('denaryInput').value;
            const input = parseInt(inputValue);
            const simulation = document.getElementById('d2bSimulation');
            simulation.innerHTML = '';
            
            // Validate input
            if (isNaN(input) || input < 0 || input > 255) {
                simulation.innerHTML = '<p style="color: red;">Please enter a valid number between 0 and 255</p>';
                return;
            }
            
            let value = input;
            let binary = '';
            const powers = [128, 64, 32, 16, 8, 4, 2, 1];
            
            powers.forEach(function(power) {
                const step = document.createElement('div');
                step.style.margin = '10px 0';
                
                if (value >= power) {
                    step.innerHTML = 'Does ' + power + ' go into ' + value + '? <strong>Yes!</strong> Write 1 and subtract ' + power;
                    value -= power;
                    binary += '1';
                } else {
                    step.innerHTML = 'Does ' + power + ' go into ' + value + '? <strong>No.</strong> Write 0';
                    binary += '0';
                }
                
                simulation.appendChild(step);
            });
            
            const result = document.createElement('div');
            result.style.marginTop = '20px';
            result.style.fontSize = '1.2em';
            result.innerHTML = '<strong>Result: ' + input + ' in binary is ' + binary + '</strong>';
            simulation.appendChild(result);
            
            addXP(5, 'd2bSim-' + input);
        }
        
        // Canvas Setup
        function setupCanvas() {
            canvas = document.getElementById('drawingCanvas');
            if (!canvas) return; // Guard against missing element
            
            ctx = canvas.getContext('2d');
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            // Touch events for mobile
            canvas.addEventListener('touchstart', handleTouch);
            canvas.addEventListener('touchmove', handleTouch);
            canvas.addEventListener('touchend', stopDrawing);
        }
        
        function startDrawing(e) {
            isDrawing = true;
            const rect = canvas.getBoundingClientRect();
            ctx.beginPath();
            ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
        }
        
        function draw(e) {
            if (!isDrawing) return;
            
            const rect = canvas.getBoundingClientRect();
            ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
            ctx.stroke();
        }
        
        function stopDrawing() {
            isDrawing = false;
        }
        
        function handleTouch(e) {
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent(e.type === 'touchstart' ? 'mousedown' : 
                                            e.type === 'touchmove' ? 'mousemove' : 'mouseup', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            canvas.dispatchEvent(mouseEvent);
            
            // Only prevent default for touchmove to allow scrolling on touchstart
            if (e.type === 'touchmove' && isDrawing) {
                e.preventDefault();
            }
        }
        
        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
        
        // Denary to Binary Checks
        function checkD2B(num, answer) {
            const input = document.getElementById('d2b' + num);
            const feedback = document.getElementById('d2b' + num + 'Feedback');
            
            if (input.value === answer || input.value === answer.replace(/^0+/, '')) {
                feedback.className = 'feedback correct';
                feedback.textContent = 'Correct! Well done!';
                addXP(10, 'd2b' + num);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = 'Not quite. Remember to work through each power of 2.';
            }
        }
        
        function resetD2B() {
            for (let i = 1; i <= 3; i++) {
                document.getElementById('d2b' + i).value = '';
                document.getElementById('d2b' + i + 'Feedback').textContent = '';
            }
            clearCanvas();
        }
        
        // Hex Fill Checks
        function checkHexFill() {
            const dropZones = document.querySelectorAll('#section3 .drop-zone');
            let correct = 0;
            
            dropZones.forEach(function(zone) {
                if (zone.dataset.dropped && zone.dataset.dropped === zone.dataset.answer) {
                    correct++;
                }
            });
            
            const feedback = document.getElementById('hexFillFeedback');
            if (correct === 4) {
                feedback.className = 'feedback correct';
                feedback.textContent = 'Excellent! All conversions are correct!';
                addXP(20, 'hexFill');
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = 'You got ' + correct + ' out of 4 correct. Try again!';
            }
        }
        
        function resetHexFill() {
            const dropZones = document.querySelectorAll('#section3 .drop-zone');
            dropZones.forEach(function(zone) {
                zone.textContent = '';
                zone.classList.remove('filled');
                zone.dataset.dropped = '';
            });
            document.getElementById('hexFillFeedback').textContent = '';
            
            // Re-setup the draggables
            const draggables = document.querySelectorAll('#section3 .draggable');
            draggables.forEach(function(drag) {
                drag.style.display = 'inline-block';
            });
        }
        
        // Nibble Animation
        function animateNibble() {
            const examples = [
                {binary: '10110011', nibbles: '1011 | 0011', hex: 'B | 3', result: 'B3'},
                {binary: '11101010', nibbles: '1110 | 1010', hex: 'E | A', result: 'EA'},
                {binary: '01010111', nibbles: '0101 | 0111', hex: '5 | 7', result: '57'},
                {binary: '11111100', nibbles: '1111 | 1100', hex: 'F | C', result: 'FC'}
            ];
            
            const example = examples[Math.floor(Math.random() * examples.length)];
            const demo = document.getElementById('nibbleDemo');
            
            demo.innerHTML = '<p>Binary: <span style="font-family: monospace; font-size: 1.2em;">' + example.binary + '</span></p>' +
                           '<p>Split into nibbles: <span style="font-family: monospace; font-size: 1.2em;">' + example.nibbles + '</span></p>' +
                           '<p>Convert each nibble: <span style="font-family: monospace; font-size: 1.2em;">' + example.hex + '</span></p>' +
                           '<p>Result: <span style="font-family: monospace; font-size: 1.2em; color: #2ecc71; font-weight: bold;">' + example.result + '</span></p>';
        }
        
        // Nibble Matching Setup
        function setupNibbleMatching() {
            const nibbleContainer = document.getElementById('binaryNibbles');
            const hexContainer = document.getElementById('hexValues');
            
            if (!nibbleContainer || !hexContainer) return;
            
            const pairs = [
                {nibble: '0011', hex: '3'},
                {nibble: '1010', hex: 'A'},
                {nibble: '1111', hex: 'F'},
                {nibble: '0110', hex: '6'}
            ];
            
            // Shuffle hex values
            const hexValues = pairs.map(p => p.hex).sort(() => Math.random() - 0.5);
            
            nibbleContainer.innerHTML = '';
            hexContainer.innerHTML = '';
            
            pairs.forEach(function(pair) {
                const nibbleDiv = document.createElement('div');
                nibbleDiv.className = 'draggable';
                nibbleDiv.draggable = true;
                nibbleDiv.textContent = pair.nibble;
                nibbleDiv.dataset.value = pair.nibble;
                nibbleDiv.ondragstart = drag;
                nibbleContainer.appendChild(nibbleDiv);
            });
            
            hexValues.forEach(function(value) {
                const dropZone = document.createElement('div');
                dropZone.className = 'drop-zone';
                dropZone.dataset.answer = value;
                dropZone.textContent = value;
                dropZone.ondrop = drop;
                dropZone.ondragover = allowDrop;
                dropZone.ondragenter = function() { this.classList.add('hover'); };
                dropZone.ondragleave = function() { this.classList.remove('hover'); };
                hexContainer.appendChild(dropZone);
            });
        }
        
        function checkNibbleMatch() {
            const dropZones = document.querySelectorAll('#hexValues .drop-zone');
            let correct = 0;
            
            const conversions = {
                '0011': '3',
                '1010': 'A',
                '1111': 'F',
                '0110': '6'
            };
            
            dropZones.forEach(function(zone) {
                if (zone.dataset.dropped && conversions[zone.dataset.dropped] === zone.dataset.answer) {
                    correct++;
                }
            });
            
            const feedback = document.getElementById('nibbleMatchFeedback');
            if (correct === 4) {
                feedback.className = 'feedback correct';
                feedback.textContent = 'Perfect! You understand nibble conversion!';
                addXP(20, 'nibbleMatch');
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = 'You got ' + correct + ' out of 4 correct. Try again!';
            }
        }
        
        function resetNibbleMatch() {
            const dropZones = document.querySelectorAll('#hexValues .drop-zone');
            dropZones.forEach(function(zone) {
                zone.classList.remove('filled');
                zone.dataset.dropped = '';
            });
            document.getElementById('nibbleMatchFeedback').textContent = '';
        }
        
        // Binary to Hex Checks
        function checkB2H(num, answer) {
            const input = document.getElementById('b2h' + num);
            const feedback = document.getElementById('b2h' + num + 'Feedback');
            
            if (input.value.toUpperCase() === answer) {
                feedback.className = 'feedback correct';
                feedback.textContent = 'Correct! Great nibble work!';
                addXP(10, 'b2h' + num);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = 'Not quite. Split into two 4-bit groups first.';
            }
        }
        
        function resetB2H() {
            for (let i = 1; i <= 3; i++) {
                document.getElementById('b2h' + i).value = '';
                document.getElementById('b2h' + i + 'Feedback').textContent = '';
            }
        }
        
        // Hex Calculator
        function calculateH2D() {
            const input = document.getElementById('hexCalcInput').value.toUpperCase();
            const result = document.getElementById('hexCalcResult');
            
            if (input.length === 0) {
                result.textContent = 'Please enter a hex value';
                return;
            }
            
            const hexMap = {'A': 10, 'B': 11, 'C': 12, 'D': 13, 'E': 14, 'F': 15};
            
            let left = input[0];
            let right = input[1] || '0';
            
            left = hexMap[left] || parseInt(left);
            right = hexMap[right] || parseInt(right);
            
            const denary = (left * 16) + right;
            
            result.innerHTML = '<div>Step 1: Left digit (' + input[0] + ') × 16 = ' + (left * 16) + '</div>' +
                              '<div>Step 2: Add right digit (' + (input[1] || '0') + ') = ' + right + '</div>' +
                              '<div style="font-weight: bold; color: #2ecc71;">Result: ' + denary + '</div>';
            
            addXP(5, 'hexCalc-' + input);
        }
        
        // Hex to Denary Checks
        function checkH2D(num, answer) {
            const input = document.getElementById('h2d' + num);
            const feedback = document.getElementById('h2d' + num + 'Feedback');
            
            if (parseInt(input.value) === answer) {
                feedback.className = 'feedback correct';
                feedback.textContent = 'Correct! You\'ve mastered the formula!';
                addXP(10, 'h2d' + num);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = 'Not quite. Remember: (left × 16) + right';
            }
        }
        
        function resetH2D() {
            for (let i = 1; i <= 3; i++) {
                document.getElementById('h2d' + i).value = '';
                document.getElementById('h2d' + i + 'Feedback').textContent = '';
            }
            document.getElementById('hexCalcInput').value = '';
            document.getElementById('hexCalcResult').textContent = '';
        }
        
        // Hex to Binary Checks
        function checkH2B(num, answer) {
            const input = document.getElementById('h2b' + num);
            const feedback = document.getElementById('h2b' + num + 'Feedback');
            
            if (input.value === answer || input.value === answer.replace(/^0+/, '')) {
                feedback.className = 'feedback correct';
                feedback.textContent = 'Correct! Each hex digit becomes 4 binary digits!';
                addXP(10, 'h2b' + num);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = 'Not quite. Use the conversion table to help.';
            }
        }
        
        function resetH2B() {
            for (let i = 1; i <= 3; i++) {
                document.getElementById('h2b' + i).value = '';
                document.getElementById('h2b' + i + 'Feedback').textContent = '';
            }
        }
        
        // Exam Questions
        function showMarkScheme(examId, maxMarks) {
            const textarea = document.getElementById(examId);
            const markInput = document.getElementById(examId + 'Mark');
            const markScheme = document.getElementById(examId + 'MS');
            
            // Check if answer is substantial enough (remove whitespace for counting)
            const answerLength = textarea.value.replace(/\s+/g, ' ').trim().length;
            if (answerLength < 20) {
                alert('Please provide a more detailed answer before viewing the mark scheme.');
                return;
            }
            
            // Check if predicted marks entered
            if (!markInput.value || parseInt(markInput.value) < 0 || parseInt(markInput.value) > maxMarks) {
                alert('Please enter your predicted marks (0-' + maxMarks + ') first.');
                return;
            }
            
            markScheme.style.display = 'block';
            addXP(5, examId);
        }
        
        // Summary Quiz
        function checkSummaryQuiz() {
            const answers = {
                q1: '170',
                q2: 'FF',
                q3: '11000100',
                q4: 'd2h',
                q5: '01000000',
                q6: '4',
                q7: '167',
                q8: '255',
                q9: 'email',
                q10: 'readable'
            };
            
            let score = 0;
            let results = '<h3>Quiz Results</h3>';
            
            Object.keys(answers).forEach(function(q) {
                const selected = document.querySelector('input[name="' + q + '"]:checked');
                if (selected && selected.value === answers[q]) {
                    score++;
                    results += '<p>Question ' + q.substring(1) + ': ✓ Correct</p>';
                } else {
                    results += '<p>Question ' + q.substring(1) + ': ✗ Incorrect</p>';
                }
            });
            
            results += '<p><strong>Score: ' + score + '/10</strong></p>';
            
            document.getElementById('quizResults').innerHTML = results;
            
            if (score >= 8) {
                addXP(30, 'summaryQuiz');
                showAchievement('Quiz Master! Scored ' + score + '/10');
            } else {
                addXP(10, 'summaryQuiz');
            }
        }
        
        // Extension Activities
        function checkExtension(num) {
            const feedback = document.getElementById('ext' + num + 'Feedback');
            
            if (num === 1) {
                const input = document.getElementById('ext1').value.trim().toUpperCase();
                // Accept with or without spaces
                const normalized = input.replace(/\s+/g, '');
                if (normalized === 'ADCD' || input === 'AD CD') {
                    feedback.className = 'feedback correct';
                    feedback.textContent = 'Excellent! You\'ve mastered 16-bit conversions!';
                    addXP(25, 'ext1');
                } else {
                    feedback.className = 'feedback incorrect';
                    feedback.textContent = 'Not quite. Split into 4 nibbles: 1010 1101 1100 1101 = A D C D';
                }
            } else if (num === 2) {
                const input = document.getElementById('ext2').value.trim().replace(/\s+/g, '');
                if (input === '1111101011001110') {
                    feedback.className = 'feedback correct';
                    feedback.textContent = 'Perfect! You understand larger conversions!';
                    addXP(25, 'ext2');
                } else {
                    feedback.className = 'feedback incorrect';
                    feedback.textContent = 'Not quite. F=1111, A=1010, C=1100, E=1110';
                }
            }
        }
        
        function submitResearch() {
            const research = document.getElementById('ipv6Research').value.trim();
            const keywords = ['readable', 'compact', 'shorter', 'easier', 'space', 'human', 'efficient'];
            
            let keywordCount = 0;
            keywords.forEach(function(keyword) {
                if (research.toLowerCase().includes(keyword)) {
                    keywordCount++;
                }
            });
            
            if (research.length > 50 && keywordCount >= 2) {
                addXP(20, 'ipv6Research');
                showAchievement('Researcher! Great analysis of IPv6');
            } else if (research.length > 30) {
                addXP(10, 'ipv6Research');
            }
        }
        
        // Feedback System
        function openFeedback() {
            document.getElementById('feedbackModal').style.display = 'block';
            const sectionNames = ['Starter', 'Binary→Denary', 'Denary→Binary', 'Denary→Hex', 
                                 'Binary→Hex', 'Hex→Denary', 'Hex→Binary', 'Hex Uses', 
                                 'Exam Practice', 'Summary Quiz', 'Extension'];
            document.getElementById('currentPage').textContent = sectionNames[currentSection] + ' (Section ' + (currentSection + 1) + ')';
        }
        
        function closeFeedback() {
            document.getElementById('feedbackModal').style.display = 'none';
            document.getElementById('feedbackText').value = '';
        }
        
        function sendFeedback() {
            const feedback = document.getElementById('feedbackText').value;
            const page = document.getElementById('currentPage').textContent;
            
            if (feedback.trim().length < 10) {
                alert('Please provide more detail about the issue.');
                return;
            }
            
            // In a real implementation, this would send an email
            // For now, we'll just simulate it
            const subject = 'Binary Conversions Lesson Feedback - ' + page;
            const body = 'Feedback: ' + feedback + '\n\nPage: ' + page + '\n\nCode Section: #section' + currentSection;
            
            // This would normally be: window.location.href = 'mailto:millingtond@mgs.org?subject=' + subject + '&body=' + body;
            console.log('Feedback sent:', subject, body);
            
            alert('Thank you for your feedback! It has been sent.');
            closeFeedback();
            addXP(5, 'feedback');
        }
        
        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowLeft' && currentSection > 0) {
                showSection(currentSection - 1);
            } else if (e.key === 'ArrowRight' && currentSection < 10) {
                showSection(currentSection + 1);
            }
        });
        
        // Hexadecimal Uses Functions
        function updateColor() {
            // Check if elements exist
            const redInput = document.getElementById('redHex');
            const greenInput = document.getElementById('greenHex');
            const blueInput = document.getElementById('blueHex');
            
            if (!redInput || !greenInput || !blueInput) return;
            
            const red = redInput.value.toUpperCase();
            const green = greenInput.value.toUpperCase();
            const blue = blueInput.value.toUpperCase();
            
            // Validate hex input
            const hexPattern = /^[0-9A-F]{0,2}$/;
            if (!hexPattern.test(red) || !hexPattern.test(green) || !hexPattern.test(blue)) {
                return;
            }
            
            // Update input fields to uppercase
            document.getElementById('redHex').value = red;
            document.getElementById('greenHex').value = green;
            document.getElementById('blueHex').value = blue;
            
            const hexColor = '#' + (red || '00').padStart(2, '0') + 
                                  (green || '00').padStart(2, '0') + 
                                  (blue || '00').padStart(2, '0');
            
            document.getElementById('colorDisplay').style.backgroundColor = hexColor;
            document.getElementById('hexColorCode').textContent = hexColor;
            
            // Convert to RGB
            const r = parseInt(red || '0', 16);
            const g = parseInt(green || '0', 16);
            const b = parseInt(blue || '0', 16);
            document.getElementById('rgbColorCode').textContent = 'RGB(' + r + ', ' + g + ', ' + b + ')';
            
            addXP(2, 'colorMixer-' + hexColor);
        }
        
        function randomColor() {
            const randomHex = function() {
                const hex = Math.floor(Math.random() * 256).toString(16).padStart(2, '0').toUpperCase();
                return hex;
            };
            
            const red = randomHex();
            const green = randomHex();
            const blue = randomHex();
            
            document.getElementById('redHex').value = red;
            document.getElementById('greenHex').value = green;
            document.getElementById('blueHex').value = blue;
            
            updateColor();
        }
        
        function resetColor() {
            document.getElementById('redHex').value = '00';
            document.getElementById('greenHex').value = '00';
            document.getElementById('blueHex').value = '00';
            updateColor();
        }
        
        function checkHexUses() {
            const dropZones = document.querySelectorAll('#section7 .drop-zone');
            let correct = 0;
            
            dropZones.forEach(function(zone) {
                if (zone.dataset.dropped && zone.dataset.dropped === zone.dataset.answer) {
                    correct++;
                }
            });
            
            const feedback = document.getElementById('hexUsesFeedback');
            if (correct === 6) {
                feedback.className = 'feedback correct';
                feedback.textContent = 'Perfect! You understand all the common uses of hexadecimal!';
                addXP(25, 'hexUses');
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = 'You got ' + correct + ' out of 6 correct. Think about the format of each value.';
            }
        }
        
        function resetHexUses() {
            const dropZones = document.querySelectorAll('#section7 .drop-zone');
            dropZones.forEach(function(zone) {
                zone.textContent = '';
                zone.classList.remove('filled');
                zone.dataset.dropped = '';
            });
            document.getElementById('hexUsesFeedback').textContent = '';
            
            // Reset ASCII decoder
            document.getElementById('asciiDecoded').value = '';
            document.getElementById('asciiFeedback').textContent = '';
        }
        
        function checkASCII() {
            const input = document.getElementById('asciiDecoded').value.trim().toLowerCase();
            const feedback = document.getElementById('asciiFeedback');
            
            // The hex message decodes to "Hex is cool!"
            // Accept with or without exclamation mark
            if (input === 'hex is cool!' || input === 'hex is cool') {
                feedback.className = 'feedback correct';
                feedback.textContent = 'Excellent! You decoded the ASCII message correctly!';
                addXP(20, 'asciiDecoder');
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = 'Not quite. Try converting each hex pair to decimal first. (Hint: 48=H, 65=e, 78=x...)';
            }
        }
    </script>
</body>
</html>