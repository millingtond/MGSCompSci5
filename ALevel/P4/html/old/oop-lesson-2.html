<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 2: Classes and Objects in Detail</title>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/python/python.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Styles */
        .lesson-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .lesson-header h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .lesson-meta {
            display: flex;
            gap: 2rem;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .breadcrumb {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .breadcrumb a {
            color: #667eea;
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        /* Section Styles */
        .section {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .section h2 {
            color: #667eea;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section h3 {
            color: #4a5568;
            margin: 1.5rem 0 1rem;
        }

        /* Starter Activity Styles */
        .starter-activity {
            background: #f0f4ff;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }
        
        /* Key Terminology Box */
        .key-terms {
            background: #f0f4ff;
            border-left: 4px solid #667eea;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .key-terms ul {
            list-style-position: inside;
            margin-top: 0.5rem;
        }
        
        .key-terms li {
            margin: 0.5rem 0;
        }


        /* Learning Outcomes */
        .outcomes {
            background: #e6fffa;
            border-left: 4px solid #38b2ac;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .outcomes ul {
            list-style-position: inside;
            margin-top: 0.5rem;
        }

        .outcomes li {
            margin: 0.5rem 0;
        }

        /* Core Concepts */
        .concept-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .concept-card {
            background: #f7fafc;
            padding: 1.5rem;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }

        .concept-card h4 {
            color: #667eea;
            margin-bottom: 0.5rem;
        }

        /* Button Styles */
        .button {
            background: #667eea;
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .button:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }

        .button.secondary {
            background: #718096;
        }

        .button.secondary:hover {
            background: #4a5568;
        }

        .button.success {
            background: #48bb78;
        }

        .button.success:hover {
            background: #38a169;
        }

        .button.warning {
            background: #f6ad55;
        }

        .button.warning:hover {
            background: #ed8936;
        }

        /* Progress Bar */
        .progress-bar {
            background: #e2e8f0;
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            margin: 2rem 0;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
        }

        /* Class Builder Game */
        .class-builder {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 10px;
            margin: 1.5rem 0;
        }

        .builder-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .builder-input {
            padding: 0.8rem;
            border: 2px solid #e2e8f0;
            border-radius: 4px;
            font-size: 1rem;
            width: 100%;
        }

        .builder-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .attribute-list, .method-list {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            min-height: 100px;
        }

        .attribute-item, .method-item {
            background: #667eea;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            margin: 0.5rem;
            display: inline-block;
            position: relative;
        }

        .remove-btn {
            background: #e53e3e;
            color: white;
            border: none;
            padding: 0.2rem 0.5rem;
            border-radius: 3px;
            margin-left: 0.5rem;
            cursor: pointer;
            font-size: 0.8rem;
        }

        /* Suggestion Grid Styles */
        .suggestion-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .suggestion-btn {
            background: #e0e7ff;
            color: #4c51bf;
            border: 2px solid #cbd5e0;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s ease;
            font-family: inherit;
        }

        .suggestion-btn:hover {
            background: #c7d2fe;
            border-color: #4c51bf;
            transform: translateY(-1px);
        }

        .suggestion-btn.method {
            background: #d6f5d6;
            color: #276749;
        }

        .suggestion-btn.method:hover {
            background: #b8e6b8;
            border-color: #276749;
        }

        .suggestion-btn.disabled {
            background: #e2e8f0;
            color: #a0aec0;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .suggestion-btn.disabled:hover {
            transform: none;
            background: #e2e8f0;
            border-color: #cbd5e0;
        }

        /* Code Editor Styles */
        .code-editor-container {
            background: #f7fafc;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
        }

        .CodeMirror {
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            height: auto;
            font-size: 14px;
        }

        .code-output {
            background: #1a1a1a;
            color: #f0f0f0;
            padding: 1rem;
            border-radius: 4px;
            margin-top: 1rem;
            font-family: 'Courier New', monospace;
            min-height: 100px;
            white-space: pre-wrap;
            overflow-x: auto;
        }

        .code-controls {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        /* Object Creation Visualizer */
        .object-visualizer {
            background: #f0f9ff;
            padding: 2rem;
            border-radius: 10px;
            margin: 1.5rem 0;
        }

        .object-instance {
            background: white;
            border: 2px solid #0ea5e9;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem;
            display: inline-block;
            min-width: 200px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .object-instance h5 {
            background: #0ea5e9;
            color: white;
            margin: -1rem -1rem 1rem;
            padding: 0.5rem 1rem;
            border-radius: 6px 6px 0 0;
        }

        .object-property {
            margin: 0.5rem 0;
            padding: 0.25rem 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .object-property strong {
            color: #4a5568;
        }

        /* Memory Diagram */
        .memory-diagram {
            background: #1a1a1a;
            color: #f0f0f0;
            padding: 2rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            font-family: 'Courier New', monospace;
        }

        .memory-block {
            background: #2d3748;
            border: 2px solid #4a5568;
            border-radius: 4px;
            padding: 1rem;
            margin: 1rem 0;
            position: relative;
        }

        .memory-address {
            position: absolute;
            top: -10px;
            left: 10px;
            background: #4a5568;
            padding: 0.2rem 0.5rem;
            border-radius: 3px;
            font-size: 0.8rem;
            color: #cbd5e0;
        }

        /* Interactive Challenges */
        .challenge-box {
            background: #fef5e7;
            border: 2px solid #f6ad55;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .challenge-box h4 {
            color: #d69e2e;
            margin-bottom: 1rem;
        }

        /* Real World Connection */
        .real-world {
            background: #fef5e7;
            border-left: 4px solid #f39c12;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 4px;
        }

        /* Exam Question Styles */
        .exam-question {
            background: #f7fafc;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            border: 2px solid #667eea;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .marks {
            background: #667eea;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-weight: bold;
        }

        .answer-area {
            width: 100%;
            min-height: 150px;
            padding: 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 4px;
            font-family: inherit;
            font-size: 1rem;
            resize: vertical;
        }

        .exam-controls {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .predicted-mark {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .mark-scheme {
            background: #e6fffa;
            padding: 1rem;
            border-radius: 4px;
            margin-top: 1rem;
            display: none;
        }

        .mark-scheme.visible {
            display: block;
        }

        /* Key Takeaways */
        .key-takeaways {
            background: #f0fff4;
            border-left: 4px solid #48bb78;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 4px;
        }

        .key-takeaways ul {
            list-style-type: none;
            padding-left: 0;
        }

        .key-takeaways li {
            margin: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
        }

        .key-takeaways li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #48bb78;
            font-weight: bold;
        }

        /* Video Section */
        .video-container {
            margin: 1.5rem 0;
            background: #f7fafc;
            padding: 1rem;
            border-radius: 8px;
        }

        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 8px;
        }

        .video-notes {
            margin-top: 1rem;
        }

        .video-notes textarea {
            width: 100%;
            min-height: 100px;
            padding: 0.8rem;
            border: 2px solid #e2e8f0;
            border-radius: 4px;
            font-family: inherit;
            resize: vertical;
        }

        /* Extension Activities */
        .extension {
            background: #fef5e7;
            border-left: 4px solid #f39c12;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 4px;
        }

        /* What's Next */
        .whats-next {
            background: #f0f4ff;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            text-align: center;
        }

        .next-lesson-card {
            display: inline-block;
            background: white;
            padding: 1rem 2rem;
            border-radius: 8px;
            margin-top: 1rem;
            text-decoration: none;
            color: #333;
            border: 2px solid #667eea;
            transition: all 0.3s ease;
        }

        .next-lesson-card:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        /* Loading Indicator */
        .loading {
            text-align: center;
            padding: 2rem;
            color: #667eea;
        }

        .loading::after {
            content: "...";
            animation: dots 1.5s steps(4, end) infinite;
        }

        @keyframes dots {
            0%, 20% { content: ""; }
            40% { content: "."; }
            60% { content: ".."; }
            80%, 100% { content: "..."; }
        }

        /* Best Practices Box */
        .best-practice {
            background: #e8f5e8;
            border-left: 4px solid #48bb78;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .best-practice h5 {
            color: #276749;
            margin-bottom: 0.5rem;
        }

        /* Common Mistake Box */
        .common-mistake {
            background: #fff5f5;
            border-left: 4px solid #e53e3e;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .common-mistake h5 {
            color: #742a2a;
            margin-bottom: 0.5rem;
        }

        /* Object Relationship Diagram */
        .relationship-diagram {
            background: white;
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 2rem;
            margin: 1.5rem 0;
            text-align: center;
        }

        .relationship-object {
            display: inline-block;
            background: #f0f4ff;
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem;
            min-width: 150px;
        }

        .relationship-arrow {
            display: inline-block;
            width: 50px;
            height: 2px;
            background: #667eea;
            position: relative;
            margin: 0 1rem;
        }

        .relationship-arrow::after {
            content: "▶";
            position: absolute;
            right: -10px;
            top: -8px;
            color: #667eea;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .lesson-header h1 {
                font-size: 1.8rem;
            }
            
            .concept-grid {
                grid-template-columns: 1fr;
            }
            
            .builder-controls {
                grid-template-columns: 1fr;
            }
            
            .exam-controls {
                flex-direction: column;
                align-items: stretch;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="breadcrumb">
            <a href="hub.html">Hub</a> → 
            <a href="python-oop.html">Python OOP</a> → 
            <strong>Lesson 2: Classes and Objects in Detail</strong>
        </nav>

        <header class="lesson-header">
            <h1>Lesson 2: Classes and Objects in Detail</h1>
            <div class="lesson-meta">
                <span>🐍 Language: Python</span>
                <span>⏱️ Duration: 75 minutes</span>
                <span>🎯 Level: AS/A Level</span>
            </div>
        </header>

        <div class="progress-bar">
            <div class="progress-fill" id="progressBar"></div>
        </div>

        <div id="loadingIndicator" class="loading">
            Loading Python environment
        </div>

        <div id="mainContent" style="display: none;">
            <section class="section">
                <h2>🚀 Starter Activity: Class Designer</h2>
                <div class="starter-activity">
                    <p>You're the architect of a new video game! Design a <strong>Character</strong> class by adding attributes and methods. Build your class interactively below:</p>
                    
                    <div class="class-builder">
                        <h3>🎮 Game Character Class Builder</h3>
                        
                        <div class="builder-controls">
                            <div style="grid-column: 1 / -1;">
                                <h4>🎲 Click to Add Attributes:</h4>
                                <div class="suggestion-grid" id="attributeSuggestions">
                                    <button class="suggestion-btn" onclick="addAttributeFromSuggestion('health')">health</button>
                                    <button class="suggestion-btn" onclick="addAttributeFromSuggestion('mana')">mana</button>
                                    <button class="suggestion-btn" onclick="addAttributeFromSuggestion('stamina')">stamina</button>
                                    <button class="suggestion-btn" onclick="addAttributeFromSuggestion('strength')">strength</button>
                                    <button class="suggestion-btn" onclick="addAttributeFromSuggestion('defense')">defense</button>
                                    <button class="suggestion-btn" onclick="addAttributeFromSuggestion('speed')">speed</button>
                                    <button class="suggestion-btn" onclick="addAttributeFromSuggestion('level')">level</button>
                                    <button class="suggestion-btn" onclick="addAttributeFromSuggestion('experience')">experience</button>
                                    <button class="suggestion-btn" onclick="addAttributeFromSuggestion('gold')">gold</button>
                                    <button class="suggestion-btn" onclick="addAttributeFromSuggestion('inventory')">inventory</button>
                                    <button class="suggestion-btn" onclick="addAttributeFromSuggestion('position_x')">position_x</button>
                                    <button class="suggestion-btn" onclick="addAttributeFromSuggestion('position_y')">position_y</button>
                                    <button class="suggestion-btn" onclick="addAttributeFromSuggestion('is_alive')">is_alive</button>
                                    <button class="suggestion-btn" onclick="addAttributeFromSuggestion('team')">team</button>
                                    <button class="suggestion-btn" onclick="addAttributeFromSuggestion('weapon')">weapon</button>
                                    <button class="suggestion-btn" onclick="addAttributeFromSuggestion('armor')">armor</button>
                                    <button class="suggestion-btn" onclick="addAttributeFromSuggestion('magic_power')">magic_power</button>
                                    <button class="suggestion-btn" onclick="addAttributeFromSuggestion('critical_chance')">critical_chance</button>
                                </div>
                                
                                <h4 style="margin-top: 1.5rem;">⚡ Click to Add Methods:</h4>
                                <div class="suggestion-grid" id="methodSuggestions">
                                    <button class="suggestion-btn method" onclick="addMethodFromSuggestion('attack')">attack</button>
                                    <button class="suggestion-btn method" onclick="addMethodFromSuggestion('defend')">defend</button>
                                    <button class="suggestion-btn method" onclick="addMethodFromSuggestion('heal')">heal</button>
                                    <button class="suggestion-btn method" onclick="addMethodFromSuggestion('take_damage')">take_damage</button>
                                    <button class="suggestion-btn method" onclick="addMethodFromSuggestion('level_up')">level_up</button>
                                    <button class="suggestion-btn method" onclick="addMethodFromSuggestion('move')">move</button>
                                    <button class="suggestion-btn method" onclick="addMethodFromSuggestion('cast_spell')">cast_spell</button>
                                    <button class="suggestion-btn method" onclick="addMethodFromSuggestion('use_item')">use_item</button>
                                    <button class="suggestion-btn method" onclick="addMethodFromSuggestion('respawn')">respawn</button>
                                    <button class="suggestion-btn method" onclick="addMethodFromSuggestion('gain_experience')">gain_experience</button>
                                    <button class="suggestion-btn method" onclick="addMethodFromSuggestion('equip_weapon')">equip_weapon</button>
                                    <button class="suggestion-btn method" onclick="addMethodFromSuggestion('equip_armor')">equip_armor</button>
                                    <button class="suggestion-btn method" onclick="addMethodFromSuggestion('show_stats')">show_stats</button>
                                    <button class="suggestion-btn method" onclick="addMethodFromSuggestion('save_game')">save_game</button>
                                    <button class="suggestion-btn method" onclick="addMethodFromSuggestion('load_game')">load_game</button>
                                </div>
                                
                                <div style="margin-top: 1rem; text-align: center;">
                                    <label>Or add custom: </label>
                                    <input type="text" id="customInput" class="builder-input" placeholder="custom_attribute_or_method" style="width: 200px;">
                                    <button class="button secondary" onclick="addCustom()">+ Add Custom</button>
                                </div>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-top: 2rem;">
                            <div>
                                <h4>Attributes (Properties):</h4>
                                <div class="attribute-list" id="attributeList">
                                    <span style="color: #718096;">No attributes yet...</span>
                                </div>
                            </div>
                            <div>
                                <h4>Methods (Actions):</h4>
                                <div class="method-list" id="methodList">
                                    <span style="color: #718096;">No methods yet...</span>
                                </div>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin-top: 2rem;">
                            <button class="button warning" onclick="generateClass()">🔨 Generate Python Class</button>
                            <button class="button secondary" onclick="resetBuilder()">🔄 Reset</button>
                        </div>
                        
                        <div class="code-editor-container" id="generatedClassContainer" style="display: none;">
                            <h4>Your Generated Class:</h4>
                            <div id="generatedClassEditor" class="python-editor"></div>
                            <div class="code-controls">
                                <button class="button" onclick="runGeneratedClass()">▶️ Run Code</button>
                            </div>
                            <div id="generatedClassOutput" class="code-output">Output will appear here...</div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="section">
                <h2>🎯 Learning Outcomes</h2>
                <div class="outcomes">
                    <p><strong>By the end of this lesson, you will be able to:</strong></p>
                    <ul>
                        <li>Design classes with multiple attributes of different types</li>
                        <li>Understand and properly use the __init__ method with parameters</li>
                        <li>Create multiple unique objects from a single class</li>
                        <li>Implement object interactions and relationships</li>
                        <li>Follow Python naming conventions and best practices for classes</li>
                        <li>Debug common errors in class definitions</li>
                        <li>Understand how objects are stored in memory</li>
                    </ul>
                </div>
            </section>

            <section class="section">
                <h2>🔑 Key Terminology</h2>
                <div class="key-terms">
                    <ul>
                        <li><strong>Class:</strong> The blueprint or template for creating objects. (e.g., `class Student:`)</li>
                        <li><strong>Object:</strong> A specific instance created from a class. (e.g., `student1 = Student()`)</li>
                        <li><strong>Instance:</strong> Another word for an object. `student1` is an instance of the `Student` class.</li>
                        <li><strong>Attribute:</strong> A variable that belongs to an object. It stores the object's state. (e.g., `self.name`)</li>
                        <li><strong>Method:</strong> A function that belongs to a class. It defines the object's behavior. (e.g., `def calculate_grade(self):`)</li>
                        <li><strong>Constructor:</strong> The special `__init__` method that is called to create and initialize a new object.</li>
                    </ul>
                </div>
            </section>

            <section class="section">
                <h2>💡 Core Concepts</h2>
                
                <div class="concept-grid">
                    <div class="concept-card">
                        <h4>The __init__ Method Deep Dive</h4>
                        <p>The <code>__init__</code> method is the <strong>constructor</strong> - it runs automatically when you create a new object.</p>
                        <pre style="background: #2d3748; color: #f0f0f0; padding: 1rem; border-radius: 4px; margin-top: 1rem;">
def __init__(self, param1, param2):
    self.attribute1 = param1
    self.attribute2 = param2
    self.attribute3 = "default"</pre>
                        <p style="margin-top: 1rem;"><strong>Key Points:</strong></p>
                        <ul>
                            <li>Always has <code>self</code> as first parameter</li>
                            <li>Can take any number of additional parameters</li>
                            <li>Used to set initial state of object</li>
                        </ul>
                    </div>

                    <div class="concept-card">
                        <h4>Encapsulation & Private Attributes</h4>
                        <p>Encapsulation involves bundling data and methods into a class and restricting direct access to its attributes. In Python, we create <strong>private</strong> attributes using a <strong>double underscore `__`</strong> prefix.</p>
                        <pre style="background: #2d3748; color: #f0f0f0; padding: 0.5rem; border-radius: 4px;">
class BankAccount:
    def __init__(self, balance):
        self.__balance = balance # Private

    def deposit(self, amount):
        if amount > 0:
            self.__balance += amount</pre>
                        <p style="margin-top: 1rem;">This triggers <strong>name mangling</strong>, where Python changes the attribute name to `_ClassName__attribute`, making it very difficult to access from outside the class accidentally.</p>
                    </div>
                    
                    <div class="concept-card">
                        <h4>Instance vs Class Attributes</h4>
                        <p><strong>Instance attributes:</strong> Belong to each object individually. Created in `__init__`.</p>
                        <pre style="background: #2d3748; color: #f0f0f0; padding: 0.5rem; border-radius: 4px;">
self.name = "Alice"  # Instance attribute</pre>
                        <p><strong>Class attributes:</strong> Shared by all objects of the class. Defined directly in the class.</p>
                        <pre style="background: #2d3748; color: #f0f0f0; padding: 0.5rem; border-radius: 4px;">
class Student:
    school = "Cambridge"  # Class attribute</pre>
                        <p style="margin-top: 1rem;">We'll focus on instance attributes in this lesson!</p>
                    </div>
                    
                    <div class="concept-card">
                        <h4>Python Naming Conventions</h4>
                        <ul>
                            <li><strong>Classes:</strong> `PascalCase` (e.g., <code>StudentRecord</code>)</li>
                            <li><strong>Methods/Attributes:</strong> `snake_case` (e.g., <code>calculate_grade</code>)</li>
                            <li><strong>Constants:</strong> `UPPER_CASE` (e.g., <code>MAX_SCORE</code>)</li>
                            <li><strong>Private:</strong> Leading double underscore (e.g., <code>__private_method</code>)</li>
                             <li><strong>Protected:</strong> Leading single underscore (e.g., <code>_protected_member</code>)</li>
                        </ul>
                        <div class="best-practice">
                            <h5>💡 Best Practice</h5>
                            <p>Use descriptive names that clearly indicate purpose!</p>
                        </div>
                    </div>
                </div>

                <h3>Understanding self</h3>
                <div class="concept-card">
                    <p>The <code>self</code> parameter is a reference to the current instance of the class. It's how we access the object's attributes and methods from inside the class.</p>
                    
                    <div class="object-visualizer">
                        <h4>When we create an object:</h4>
                        <pre style="background: #2d3748; color: #f0f0f0; padding: 1rem; border-radius: 4px;">
student1 = Student("Alice", 16)  # self refers to student1
student2 = Student("Bob", 17)    # self refers to student2</pre>
                        <p>Each time, <code>self</code> refers to the specific object being created or used!</p>
                    </div>
                </div>
            </section>

            <section class="section">
                <h2>🔧 Interactive Activities</h2>
                
                <h3>Activity 1: Mastering the __init__ Method</h3>
                <div class="code-editor-container">
                    <h4>Task: Complete the BankAccount Class</h4>
                    <p>Fill in the missing code in the editor below where you see a <code># TODO:</code> comment. The goal is to make the test cases at the bottom pass correctly.</p>
                    <div id="initMethodEditor" class="python-editor"></div>
                    <div class="code-controls">
                        <button class="button" onclick="runInitMethod()">▶️ Run Code</button>
                        <button class="button secondary" onclick="resetInitMethod()">🔄 Reset Code</button>
                        <button class="button success" onclick="showInitHints()">💡 Show Hints</button>
                        <button class="button warning" onclick="attemptShowInitSolution()">✅ Show Solution</button>
                    </div>
                    <div id="initMethodOutput" class="code-output">Output will appear here...</div>
                    
                    <div id="initHints" style="display: none;" class="best-practice">
                        <h5>💡 Hints:</h5>
                        <ul id="initHintsList"></ul>
                    </div>
                </div>

                <h3>Activity 2: Object Creation Laboratory</h3>
                <div class="object-visualizer">
                    <h4>🧪 Complete the Product Class</h4>
                    <p>Your task: Write the <code>__init__</code> constructor and <code>display_info</code> method for the Product class. Follow the TODO comments!</p>
                    
                    <div class="code-editor-container">
                        <div id="objectLabEditor" class="python-editor"></div>
                        <div class="code-controls">
                            <button class="button" onclick="runObjectLab()">▶️ Run Code</button>
                            <button class="button secondary" onclick="resetObjectLab()">🔄 Reset Code</button>
                            <button class="button success" onclick="showObjectLabHints()">💡 Show Hints</button>
                            <button class="button warning" onclick="attemptShowObjectLabSolution()">✅ Show Solution</button>
                        </div>
                        <div id="objectLabOutput" class="code-output">Output will appear here...</div>
                    </div>
                    
                    <div id="objectLabHints" style="display: none;" class="best-practice">
                        <h5>💡 Hints:</h5>
                        <ul id="objectLabHintsList"></ul>
                    </div>
                </div>

                <h3>Activity 3: Object Interactions</h3>
                <div class="best-practice">
                    <p>A powerful feature of OOP is that objects can interact. A common way to achieve this is by passing one object as an argument to another object's method, like <code>hero.attack(monster)</code>. This allows objects to read and modify each other's state.</p>
                </div>
                <div class="challenge-box">
                    <h4>🎮 RPG Battle System</h4>
                    <p>Create interacting game characters that can battle each other!</p>
                    
                    <div class="code-editor-container">
                        <div id="interactionEditor" class="python-editor"></div>
                        <div class="code-controls">
                            <button class="button" onclick="runInteraction()">▶️ Start Battle</button>
                            <button class="button secondary" onclick="resetInteraction()">🔄 Reset Code</button>
                            <button class="button warning" onclick="addSpecialMove()">✨ Add Special Move</button>
                        </div>
                        <div id="interactionOutput" class="code-output">Battle log will appear here...</div>
                    </div>
                </div>

                <h3>Activity 4: Build a Complete Library System</h3>
                <div class="code-editor-container">
                    <h4>🏗️ Library Management System Challenge</h4>
                    <p><strong>Your Task:</strong> Build a complete library management system from scratch by following the specifications below.</p>
                    
                    <div class="best-practice">
                        <h5>📋 System Requirements:</h5>
                        <h4>1. Book Class:</h4>
                        <ul>
                            <li><strong>Attributes in __init__:</strong>
                                <ul>
                                    <li>title (string) - the book's title</li>
                                    <li>author (string) - the book's author</li>
                                    <li>isbn (string) - the book's ISBN number</li>
                                    <li>is_available (boolean) - set to True initially</li>
                                </ul>
                            </li>
                            <li><strong>Methods needed:</strong>
                                <ul>
                                    <li>borrow() - sets is_available to False and prints "Book '[title]' has been borrowed"</li>
                                    <li>return_book() - sets is_available to True and prints "Book '[title]' has been returned"</li>
                                    <li>display_info() - prints all book details in a nice format</li>
                                </ul>
                            </li>
                        </ul>
                        
                        <h4>2. Member Class:</h4>
                        <ul>
                            <li><strong>Attributes in __init__:</strong>
                                <ul>
                                    <li>name (string) - member's name</li>
                                    <li>member_id (string) - unique member ID</li>
                                    <li>borrowed_books (list) - empty list to store Book objects</li>
                                </ul>
                            </li>
                            <li><strong>Methods needed:</strong>
                                <ul>
                                    <li>borrow_book(book) - if book.is_available is True, add to borrowed_books list and call book.borrow()</li>
                                    <li>return_book(book) - if book is in borrowed_books, remove it and call book.return_book()</li>
                                    <li>display_info() - prints member details and list of borrowed books</li>
                                </ul>
                            </li>
                        </ul>
                        
                        <h4>3. Library Class:</h4>
                        <ul>
                            <li><strong>Attributes in __init__:</strong>
                                <ul>
                                    <li>name (string) - library name</li>
                                    <li>books (list) - empty list to store Book objects</li>
                                    <li>members (list) - empty list to store Member objects</li>
                                </ul>
                            </li>
                            <li><strong>Methods needed:</strong>
                                <ul>
                                    <li>add_book(book) - adds a book to the books list</li>
                                    <li>add_member(member) - adds a member to the members list</li>
                                    <li>find_book(title) - searches books list for matching title, returns book or None</li>
                                    <li>display_all_books() - prints all books in the library</li>
                                </ul>
                            </li>
                        </ul>
                        
                        <h4>4. Testing Instructions:</h4>
                        <p>After creating your classes, test them by:</p>
                        <ol>
                            <li>Create a Library object: library = Library("City Library")</li>
                            <li>Create at least 3 Book objects with different titles</li>
                            <li>Add all books to the library using add_book()</li>
                            <li>Create 2 Member objects</li>
                            <li>Add members to the library using add_member()</li>
                            <li>Have member1 borrow 2 books</li>
                            <li>Try to have member2 borrow a book that's already borrowed</li>
                            <li>Have member1 return one book</li>
                            <li>Have member2 borrow the returned book</li>
                            <li>Use find_book() to search for a book</li>
                            <li>Display all member info and all books</li>
                        </ol>
                    </div>
                    
                    <div id="relationshipEditor" class="python-editor"></div>
                    <div class="code-controls">
                        <button class="button" onclick="runRelationship()">▶️ Run Code</button>
                        <button class="button secondary" onclick="resetRelationship()">🔄 Reset Code</button>
                        <button class="button success" onclick="showLibraryHints()">💡 Show Hints</button>
                        <button class="button warning" onclick="attemptShowLibrarySolution()">✅ Show Solution</button>
                    </div>
                    <div id="relationshipOutput" class="code-output">Output will appear here...</div>
                    
                    <div id="libraryHints" style="display: none;" class="best-practice">
                        <h5>💡 Hints:</h5>
                        <ul id="libraryHintsList"></ul>
                    </div>
                </div>

                <h3>Activity 5: Debugging Challenge</h3>
                <div class="challenge-box">
                    <h4>🐛 Fix the Broken Classes!</h4>
                    <p>These classes have common mistakes. Can you fix them all?</p>
                    
                    <div class="code-editor-container">
                        <div id="debugEditor" class="python-editor"></div>
                        <div class="code-controls">
                            <button class="button" onclick="runDebug()">▶️ Test Code</button>
                            <button class="button secondary" onclick="resetDebug()">🔄 Reset Code</button>
                            <button class="button success" onclick="showHints()">💡 Show Hints</button>
                            <button class="button warning" onclick="attemptShowDebugSolution()">✅ Show Solution</button>
                        </div>
                        <div id="debugOutput" class="code-output">Output will appear here...</div>
                        <div id="debugHints" style="display: none;" class="best-practice">
                            <h5>💡 Hints:</h5>
                            <ul id="hintsList"></ul>
                        </div>
                    </div>
                </div>
            </section>

            <section class="section">
                <h2>🌍 Real World Connection</h2>
                <div class="real-world">
                    <h3>How Real Software Uses Classes and Objects</h3>
                    
                    <h4>🎮 Game Development (Unity/Unreal)</h4>
                    <p>Every game entity is an object:</p>
                    <ul>
                        <li><strong>Player Class:</strong> health, inventory, position, abilities</li>
                        <li><strong>Enemy Class:</strong> AI behavior, damage, loot drops</li>
                        <li><strong>Item Class:</strong> rarity, effects, stack size</li>
                    </ul>
                    <p>When you see 100 zombies on screen, that's 100 Enemy objects created from one Enemy class!</p>
                    
                    <h4>📱 Mobile App Development</h4>
                    <p>Instagram's architecture might include:</p>
                    <ul>
                        <li><strong>Post Class:</strong> image, caption, likes, comments, timestamp</li>
                        <li><strong>User Class:</strong> username, bio, followers, posts</li>
                        <li><strong>Story Class:</strong> media, viewers, expiry_time</li>
                    </ul>
                    
                    <h4>🏦 Banking Systems</h4>
                    <p>Financial software uses classes for:</p>
                    <ul>
                        <li><strong>Account Class:</strong> Multiple types (Savings, Checking, Credit)</li>
                        <li><strong>Transaction Class:</strong> Records every money movement</li>
                        <li><strong>Customer Class:</strong> Links to multiple accounts</li>
                    </ul>
                    
                    <div class="best-practice">
                        <h5>💡 Industry Insight</h5>
                        <p>Netflix reported that their recommendation system uses over 1,000 different classes to model user preferences, viewing history, and content relationships!</p>
                    </div>
                </div>
            </section>

            <section class="section">
                <h2>📝 Practice Exam Questions</h2>
                
                <div class="exam-question">
                    <div class="question-header">
                        <h3>Question 1</h3>
                        <span class="marks">6 marks</span>
                    </div>
                    <p>A fitness tracking app needs to store information about workouts.</p>
                    <p>(a) Design a Workout class with at least 4 attributes and an __init__ method. [3 marks]</p>
                    <p>(b) Create two different workout objects from your class. [2 marks]</p>
                    <p>(c) Add a method to calculate calories burned. [1 mark]</p>
                    <textarea class="answer-area" id="q1-answer" placeholder="Write your Python code here..." style="font-family: 'Courier New', monospace;"></textarea>
                    <div class="exam-controls">
                        <button class="button" onclick="toggleMarkScheme('q1')">Show Mark Scheme</button>
                        <div class="predicted-mark">
                            <label>Predicted Mark:</label>
                            <input type="number" min="0" max="6" id="q1-mark" style="width: 60px;">
                            <span>/ 6</span>
                        </div>
                    </div>
                    <div class="mark-scheme" id="q1-scheme">
                        <h4>Mark Scheme:</h4>
                        <p>(a) Class definition [3 marks]:</p>
                        <ul>
                            <li>Correct class syntax with appropriate name (1 mark)</li>
                            <li>__init__ method with self and at least 4 parameters (1 mark)</li>
                            <li>All attributes correctly initialized with self.attribute (1 mark)</li>
                        </ul>
                        <p>(b) Object creation [2 marks]:</p>
                        <ul>
                            <li>First object created with valid syntax (1 mark)</li>
                            <li>Second object created with different values (1 mark)</li>
                        </ul>
                        <p>(c) Method [1 mark]:</p>
                        <ul>
                            <li>Method correctly defined with self parameter and returns/prints calories (1 mark)</li>
                        </ul>
                        <p><strong>Example answer:</strong></p>
                        <pre style="background: #f8f9fa; padding: 1rem; border-radius: 4px;">
class Workout:
    def __init__(self, exercise_type, duration, intensity, date):
        self.exercise_type = exercise_type
        self.duration = duration  # in minutes
        self.intensity = intensity  # scale 1-10
        self.date = date
    
    def calculate_calories(self):
        # Simple calculation based on duration and intensity
        return self.duration * self.intensity * 5

# Creating objects
workout1 = Workout("Running", 30, 8, "2024-01-15")
workout2 = Workout("Swimming", 45, 7, "2024-01-16")</pre>
                    </div>
                </div>

                <div class="exam-question">
                    <div class="question-header">
                        <h3>Question 2</h3>
                        <span class="marks">5 marks</span>
                    </div>
                    <p>Explain why the following code produces an error and correct it:</p>
                    <pre style="background: #f8f9fa; padding: 1rem; border-radius: 4px;">
class Car:
    def __init__(make, model, year):
        make = make
        model = model
        year = year
    
    def display_info(self):
        print(year, make, model)

my_car = Car("Toyota", "Corolla", 2023)
my_car.display_info()</pre>
                    <textarea class="answer-area" id="q2-answer" placeholder="Explain the errors and provide corrected code..."></textarea>
                    <div class="exam-controls">
                        <button class="button" onclick="toggleMarkScheme('q2')">Show Mark Scheme</button>
                        <div class="predicted-mark">
                            <label>Predicted Mark:</label>
                            <input type="number" min="0" max="5" id="q2-mark" style="width: 60px;">
                            <span>/ 5</span>
                        </div>
                    </div>
                    <div class="mark-scheme" id="q2-scheme">
                        <h4>Mark Scheme:</h4>
                        <ul>
                            <li>Identifies missing 'self' parameter in __init__ (1 mark)</li>
                            <li>Identifies attributes not using self.attribute (1 mark)</li>
                            <li>Identifies undefined variables in display_info (1 mark)</li>
                            <li>Provides correct code with all self references (2 marks)</li>
                        </ul>
                        <p><strong>Correct answer:</strong></p>
                        <pre style="background: #f8f9fa; padding: 1rem; border-radius: 4px;">
class Car:
    def __init__(self, make, model, year):  # Added self
        self.make = make     # Added self
        self.model = model   # Added self
        self.year = year     # Added self
    
    def display_info(self):
        print(self.year, self.make, self.model)  # Added self to all

my_car = Car("Toyota", "Corolla", 2023)
my_car.display_info()</pre>
                    </div>
                </div>

                <div class="exam-question">
                    <div class="question-header">
                        <h3>Question 3</h3>
                        <span class="marks">4 marks</span>
                    </div>
                    <p>A game developer creates the following class:</p>
                    <pre style="background: #f8f9fa; padding: 1rem; border-radius: 4px;">
class Player:
    def __init__(self, name):
        self.name = name
        self.score = 0</pre>
                    <p>Write code that:</p>
                    <p>(a) Creates three different Player objects [2 marks]</p>
                    <p>(b) Demonstrates that each object maintains its own score attribute [2 marks]</p>
                    <textarea class="answer-area" id="q3-answer" placeholder="Write your answer here..."></textarea>
                    <div class="exam-controls">
                        <button class="button" onclick="toggleMarkScheme('q3')">Show Mark Scheme</button>
                        <div class="predicted-mark">
                            <label>Predicted Mark:</label>
                            <input type="number" min="0" max="4" id="q3-mark" style="width: 60px;">
                            <span>/ 4</span>
                        </div>
                    </div>
                    <div class="mark-scheme" id="q3-scheme">
                        <h4>Mark Scheme:</h4>
                        <p>(a) Object creation [2 marks]:</p>
                        <ul>
                            <li>Creates three Player objects with different names (2 marks)</li>
                            <li>(1 mark if only creates 2 objects)</li>
                        </ul>
                        <p>(b) Demonstrating independence [2 marks]:</p>
                        <ul>
                            <li>Modifies score for at least one player (1 mark)</li>
                            <li>Shows that other players' scores remain unchanged (1 mark)</li>
                        </ul>
                        <p><strong>Example answer:</strong></p>
                        <pre style="background: #f8f9fa; padding: 1rem; border-radius: 4px;">
# (a) Creating three Player objects
player1 = Player("Sarah")
player2 = Player("Bob")
player3 = Player("Charlie")

# (b) Demonstrating independent scores
player1.score = 100
player2.score = 50
# player3.score remains 0

print(player1.name + ": " + str(player1.score))
print(player2.name + ": " + str(player2.score))
print(player3.name + ": " + str(player3.score))</pre>
                    </div>
                </div>
            </section>

            <section class="section">
                <h2>✨ Key Takeaways</h2>
                <div class="key-takeaways">
                    <ul>
                        <li>The `__init__` method is the constructor that initializes new objects.</li>
                        <li>Always include `self` as the first parameter in all instance methods.</li>
                        <li>Use `self.attribute` to create instance attributes that belong to each object.</li>
                        <li>Each object created from a class is independent and has its own memory space.</li>
                        <li>Objects can interact with each other, often by being passed as method arguments.</li>
                        <li>Use a leading double underscore `__` to create private attributes that are name-mangled to prevent accidental outside access.</li>
                        <li>Follow Python naming conventions: `PascalCase` for classes, `snake_case` for methods/attributes.</li>
                    </ul>
                </div>
            </section>

            <section class="section">
                <h2>⚠️ Common Mistakes to Avoid</h2>
                <div class="common-mistake">
                    <h5>❌ Forgetting `self` in method definitions</h5>
                    <pre style="background: #2d3748; color: #f0f0f0; padding: 0.5rem; border-radius: 4px;">
# Wrong
def __init__(name):
    
# Correct
def __init__(self, name):</pre>
                </div>
                
                <div class="common-mistake">
                    <h5>❌ Not using `self` when accessing attributes</h5>
                    <pre style="background: #2d3748; color: #f0f0f0; padding: 0.5rem; border-radius: 4px;">
# Wrong
def display(self):
    print(name)  # NameError!
    
# Correct
def display(self):
    print(self.name)</pre>
                </div>
                
                <div class="common-mistake">
                    <h5>❌ Creating attributes without `self`</h5>
                    <pre style="background: #2d3748; color: #f0f0f0; padding: 0.5rem; border-radius: 4px;">
# Wrong
def __init__(self, name):
    name = name  # Just creates local variable!
    
# Correct
def __init__(self, name):
    self.name = name</pre>
                </div>
            </section>

            <section class="section">
                <h2>🎥 Video Resources</h2>
                
                <div class="video-container">
                    <h3>Video 1: Deep Dive into __init__ and self</h3>
                    <div class="video-wrapper">
                        <iframe src="https://www.youtube.com/embed/ZDa-Z5JzLYM" 
                                title="Python __init__ and self explained" 
                                frameborder="0" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                allowfullscreen>
                        </iframe>
                    </div>
                    <div class="video-notes">
                        <label for="video1-notes"><strong>Your Notes:</strong></label>
                        <textarea id="video1-notes" placeholder="Take notes on __init__ and self..."></textarea>
                    </div>
                </div>

                <div class="video-container">
                    <h3>Video 2: Creating Multiple Objects</h3>
                    <div class="video-wrapper">
                        <iframe src="https://www.youtube.com/embed/8yjkWGRlUmY" 
                                title="Working with Multiple Objects" 
                                frameborder="0" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                allowfullscreen>
                        </iframe>
                    </div>
                    <div class="video-notes">
                        <label for="video2-notes"><strong>Your Notes:</strong></label>
                        <textarea id="video2-notes" placeholder="Take notes on object creation..."></textarea>
                    </div>
                </div>
            </section>

            <section class="section">
                <h2>🌟 Extension Activities</h2>
                <div class="extension">
                    <h3>Challenge Tasks - Code These!</h3>
                    
                    <h4>Task 1: Enhanced Library System with Fines</h4>
                    <p><strong>Extend your library system with the following features:</strong></p>
                    <ul>
                        <li>Add a `due_date` attribute to the Book class (use a simple day counter, e.g., day 1, day 2)</li>
                        <li>Add a `current_day` attribute to the Library class</li>
                        <li>Create a method `calculate_fine(book)` in the Member class that:
                            <ul>
                                <li>Returns 0 if book is returned on time</li>
                                <li>Returns 50p (0.5) per day if book is overdue</li>
                            </ul>
                        </li>
                        <li>Modify the `borrow_book()` method to set a due date (current_day + 14)</li>
                        <li>Create a method `advance_day()` in Library that increases current_day by 1</li>
                    </ul>
                    
                    <div class="best-practice">
                        <h5>💡 Start with this structure:</h5>
                        <pre style="background: #2d3748; color: #f0f0f0; padding: 1rem; border-radius: 4px;">
class Book:
    def __init__(self, title, author, isbn):
        # existing code...
        self.due_date = None  # Add this
        
class Library:
    def __init__(self, name):
        # existing code...
        self.current_day = 1  # Add this</pre>
                    </div>

                    <h4>Task 2: Student Grade Tracker</h4>
                    <p><strong>Create a complete grade tracking system:</strong></p>
                    <ul>
                        <li><strong>Student class with:</strong>
                            <ul>
                                <li>name, student_id, grades (dictionary where key=subject, value=list of scores)</li>
                                <li>add_grade(subject, score) method</li>
                                <li>calculate_average(subject) method - returns average for one subject</li>
                                <li>calculate_overall_average() method - returns average across all subjects</li>
                                <li>display_report() method - shows all grades nicely formatted</li>
                            </ul>
                        </li>
                        <li><strong>Subject class with:</strong>
                            <ul>
                                <li>name, teacher, max_score</li>
                                <li>is_passing(score) method - returns True if score >= 50% of max_score</li>
                            </ul>
                        </li>
                        <li><strong>GradeBook class with:</strong>
                            <ul>
                                <li>Lists of students and subjects</li>
                                <li>find_top_student(subject) method - returns student with highest average in that subject</li>
                                <li>generate_class_report() method - shows all students' averages</li>
                            </ul>
                        </li>
                    </ul>

                    <h4>Task 3: Bank Account System with Transactions</h4>
                    <p><strong>Build on the BankAccount class from Activity 1:</strong></p>
                    <ul>
                        <li>Create a Transaction class with:
                            <ul>
                                <li>transaction_type ("deposit" or "withdrawal")</li>
                                <li>amount, date (use simple day counter), description</li>
                            </ul>
                        </li>
                        <li>Modify BankAccount to:
                            <ul>
                                <li>Store a list of Transaction objects</li>
                                <li>Create a new Transaction object for each deposit/withdrawal</li>
                                <li>Add method get_transaction_history() that prints all transactions</li>
                                <li>Add method get_balance_on_day(day) that calculates balance up to that day</li>
                            </ul>
                        </li>
                        <li>Create a Bank class that:
                            <ul>
                                <li>Manages multiple BankAccount objects</li>
                                <li>Has transfer_money(from_account, to_account, amount) method</li>
                                <li>Has find_account(account_number) method</li>
                            </ul>
                        </li>
                    </ul>
                    
                    <div class="challenge-box">
                        <h4>🏆 Super Challenge: Restaurant Order System</h4>
                        <p>Create a complete restaurant ordering system with these classes:</p>
                        <ul>
                            <li><strong>MenuItem:</strong> name, price, category (starter/main/dessert), is_vegetarian</li>
                            <li><strong>Order:</strong> table_number, items (list), is_completed</li>
                            <li><strong>Restaurant:</strong> menu (list of MenuItems), active_orders (list)</li>
                        </ul>
                        <p><strong>Required functionality:</strong></p>
                        <ul>
                            <li>Add/remove items from an order</li>
                            <li>Calculate total bill with 10% service charge</li>
                            <li>Filter menu by category or vegetarian options</li>
                            <li>Mark orders as completed and remove from active orders</li>
                            <li>Generate daily sales report</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section class="section">
                <h2>➡️ What's Next?</h2>
                <div class="whats-next">
                    <h3>Coming Up: Methods and Behaviors</h3>
                    <p>Now that you can create objects with attributes, let's make them DO things!</p>
                    
                    <p><strong>In the next lesson, you'll learn:</strong></p>
                    <ul style="text-align: left; display: inline-block;">
                        <li>Different types of methods (instance, accessor, mutator)</li>
                        <li>Method parameters and return values</li>
                        <li>Method chaining for elegant code</li>
                        <li>Object state changes through methods</li>
                        <li>Building interactive object behaviors</li>
                    </ul>
                    
                    <a href="lesson-3-methods-behaviors.html" class="next-lesson-card">
                        <strong>Lesson 3: Methods and Behaviors</strong><br>
                        <small>Making objects come alive!</small>
                    </a>
                </div>
            </section>
        </div>
    </div>

    <script>
        // Global variables
        let pyodide = null;
        let editors = {};
        let attributes = [];
        let methods = [];
        let currentHintIndex = 0;
        let objectLabHintIndex = 0;
        let initHintIndex = 0;

        function resetInitMethod() {
            const template = `# Complete the BankAccount Class

import random

class BankAccount:
    # TODO: Complete the __init__ method
    # It should take account_holder and initial_balance (default 0)
    # Store account_holder and initial_balance as attributes
    # Create a private __account_number using the __generate_account_number method
    def __init__(self, account_holder, initial_balance=0):
        pass  # Remove this and add your code
    
    def __generate_account_number(self):
        """A private method to generate an account number"""
        return "ACC" + str(random.randint(10000, 99999))
    
    # TODO: Complete the deposit method
    # It should take an amount parameter
    # If amount > 0: add to balance and print success message
    # Otherwise: print error message
    def deposit(self, amount):
        pass  # Remove this and add your code
    
    # TODO: Complete the get_balance method
    # It should return the private __balance
    def get_balance(self):
        pass  # Remove this and add your code
    
    # TODO: Complete the display_info method
    # Print "Account Information:"
    # Print the account holder, account number, and balance
    # Use string concatenation with +
    def display_info(self):
        pass  # Remove this and add your code

# --- Test Cases ---
print("--- Running Tests ---")
account1 = BankAccount("John Smith", 1000)

# Test 1: get_balance method
print("Initial balance: " + str(account1.get_balance()))

# Test 2: display_info method
account1.display_info()

# Test 3: deposit method
account1.deposit(500)
print("After deposit: " + str(account1.get_balance()))`;
            
            editors.initMethod.setValue(template);
            // Clear localStorage for this editor to prevent auto-loading solution
            localStorage.removeItem('oop-lesson2-initMethod');
            initHintIndex = 0; // Reset hints
            document.getElementById('initHints').style.display = 'none';
            document.getElementById('initHintsList').innerHTML = '';
        }

        function showInitHints() {
            const hints = [
                "In __init__, start by storing the account_holder: self.account_holder = account_holder",
                "For the balance, use a private attribute with double underscore: self.__balance = initial_balance",
                "To create the account number, call the private method: self.__account_number = self.__generate_account_number()",
                "In deposit(), first check if amount > 0, then add to self.__balance",
                "Remember to use += to add to the balance: self.__balance += amount",
                "For get_balance(), simply return self.__balance",
                "In display_info(), use multiple print statements with string concatenation",
                "Example for display_info: print('Account Holder: ' + self.account_holder)"
            ];
            
            const hintsDiv = document.getElementById('initHints');
            const hintsList = document.getElementById('initHintsList');
            
            if (initHintIndex < hints.length) {
                if (initHintIndex === 0) {
                    hintsList.innerHTML = '';
                }
                const li = document.createElement('li');
                li.textContent = hints[initHintIndex];
                hintsList.appendChild(li);
                initHintIndex++;
                hintsDiv.style.display = 'block';
            } else {
                alert('All hints shown! Try to complete the code now.');
            }
        }

        function attemptShowInitSolution() {
            const code = editors.initMethod.getValue();
            const linesOfCode = code.split('\n').filter(line => 
                line.trim() && 
                !line.trim().startsWith('#') && 
                !line.trim().startsWith('print') &&
                line.trim() !== 'pass'
            ).length;
            
            if (linesOfCode < 15) {
                alert('Please make a more substantial attempt first! You need to write code for all four methods. Use the hints button if you need help.');
                return;
            }
            
            if (confirm('Are you sure you want to see the solution? Make sure you\'ve tried implementing all the methods first!')) {
                showInitSolution();
            }
        }

        // Initialize Python environment
        async function initializePython() {
            pyodide = await loadPyodide();
            document.getElementById('loadingIndicator').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
            initializeEditors();
            updateProgress();
            initializeAutoSave();
        }

        // Initialize CodeMirror editors
        function initializeEditors() {
            // Generated class editor (initially empty)
            editors.generatedClass = CodeMirror(document.getElementById('generatedClassEditor'), {
                mode: 'python',
                theme: 'default',
                lineNumbers: true,
                value: ''
            });

            // Init method editor
            editors.initMethod = CodeMirror(document.getElementById('initMethodEditor'), {
                mode: 'python',
                theme: 'default',
                lineNumbers: true,
                value: `` // Initial value set by resetInitMethod
            });
            resetInitMethod();


            // Object lab editor
            editors.objectLab = CodeMirror(document.getElementById('objectLabEditor'), {
                mode: 'python',
                theme: 'default',
                lineNumbers: true,
                value: `` // Initial value set by resetObjectLab
            });
            resetObjectLab();

            // Interaction editor
            editors.interaction = CodeMirror(document.getElementById('interactionEditor'), {
                mode: 'python',
                theme: 'default',
                lineNumbers: true,
                value: `` // Initial value set by resetInteraction
            });
            resetInteraction();


            // Relationship editor
            editors.relationship = CodeMirror(document.getElementById('relationshipEditor'), {
                mode: 'python',
                theme: 'default',
                lineNumbers: true,
                value: `` // Initial value set by resetRelationship
            });
            resetRelationship();


            // Debug editor
            editors.debug = CodeMirror(document.getElementById('debugEditor'), {
                mode: 'python',
                theme: 'default',
                lineNumbers: true,
                value: `` // Initial value set by resetDebug
            });
            resetDebug();
        }

        // Class Builder Functions
        function addAttribute() {
            const attrName = document.getElementById('attributeName').value.trim().replace(/\s+/g, '_').toLowerCase();
            if (attrName && !attributes.includes(attrName)) {
                attributes.push(attrName);
                updateAttributeList();
                document.getElementById('attributeName').value = '';
            }
        }

        function addMethod() {
            const methodName = document.getElementById('methodName').value.trim().replace(/\s+/g, '_').toLowerCase();
            if (methodName && !methods.includes(methodName)) {
                methods.push(methodName);
                updateMethodList();
                document.getElementById('methodName').value = '';
            }
        }

        function addAttributeFromSuggestion(attrName) {
            if (!attributes.includes(attrName)) {
                attributes.push(attrName);
                updateAttributeList();
                // Disable the button
                document.querySelectorAll('.suggestion-btn').forEach(btn => {
                    if (btn.textContent === attrName && !btn.classList.contains('method')) {
                        btn.classList.add('disabled');
                        btn.disabled = true;
                    }
                });
            }
        }

        function addMethodFromSuggestion(methodName) {
            if (!methods.includes(methodName)) {
                methods.push(methodName);
                updateMethodList();
                // Disable the button
                document.querySelectorAll('.suggestion-btn').forEach(btn => {
                    if (btn.textContent === methodName && btn.classList.contains('method')) {
                        btn.classList.add('disabled');
                        btn.disabled = true;
                    }
                });
            }
        }

        function addCustom() {
            const input = document.getElementById('customInput');
            const value = input.value.trim().replace(/\s+/g, '_').toLowerCase();
            
            if (value) {
                // Try to determine if it's an attribute or method based on common patterns
                const methodPatterns = ['get_', 'set_', 'is_', 'has_', 'can_', 'do_', 'make_', 'create_', 'update_', 'delete_'];
                const isLikelyMethod = methodPatterns.some(pattern => value.startsWith(pattern)) || 
                                       value.includes('_action') || 
                                       ['attack', 'defend', 'move', 'jump', 'run', 'cast', 'use'].some(verb => value.includes(verb));
                
                if (isLikelyMethod && !methods.includes(value)) {
                    methods.push(value);
                    updateMethodList();
                } else if (!isLikelyMethod && !attributes.includes(value)) {
                    attributes.push(value);
                    updateAttributeList();
                }
                
                input.value = '';
            }
        }

        function updateAttributeList() {
            const list = document.getElementById('attributeList');
            if (attributes.length === 0) {
                list.innerHTML = '<span style="color: #718096;">No attributes yet...</span>';
            } else {
                list.innerHTML = attributes.map(attr => 
                    `<span class="attribute-item">${attr}<button class="remove-btn" onclick="removeAttribute('${attr}')">×</button></span>`
                ).join('');
            }
        }

        function updateMethodList() {
            const list = document.getElementById('methodList');
            if (methods.length === 0) {
                list.innerHTML = '<span style="color: #718096;">No methods yet...</span>';
            } else {
                list.innerHTML = methods.map(method => 
                    `<span class="method-item">${method}<button class="remove-btn" onclick="removeMethod('${method}')">×</button></span>`
                ).join('');
            }
        }

        function removeAttribute(attr) {
            attributes = attributes.filter(a => a !== attr);
            updateAttributeList();
        }

        function removeMethod(method) {
            methods = methods.filter(m => m !== method);
            updateMethodList();
        }

        function generateClass() {
            if (attributes.length === 0 && methods.length === 0) {
                alert('Add some attributes and methods first!');
                return;
            }

            // Show loading message
            document.getElementById('generatedClassContainer').style.display = 'block';
            editors.generatedClass.setValue('# Generating your class...\n# Please wait a moment...');
            
            // Use setTimeout to show the loading message before generating
            setTimeout(() => {
                let classCode = `class GameCharacter:
    def __init__(self${attributes.length > 0 ? ', ' + attributes.join(', ') : ''}):
`;
                if (attributes.length === 0) {
                    classCode += `        pass\n`;
                }
                attributes.forEach(attr => {
                    classCode += `        self.${attr} = ${attr}\n`;
                });

                classCode += `
    def display_info(self):
        print("Character Information:")
`;

                attributes.forEach(attr => {
                    const label = attr.replace(/_/g, ' ')
                                        .replace(/\w\S*/g, (txt) => txt.charAt(0).toUpperCase() + txt.substr(1));
                    classCode += `        print("  ${label}: " + str(self.${attr}))\n`;
                });

                classCode += `\n`;

                methods.forEach(method => {
                    classCode += `    def ${method}(self):\n`;
                    classCode += `        print("Performing ${method}...")\n\n`;
                });

                // Generate the parameter values for instantiation
                const paramValues = attributes.map(attr => {
                    switch(attr) {
                        case 'name': return '"Hero"';
                        case 'health': return '100';
                        case 'mana': return '50';
                        case 'stamina': return '80';
                        case 'level': return '1';
                        case 'strength': return '15';
                        case 'defense': return '10';
                        case 'speed': return '12';
                        case 'experience': return '0';
                        case 'gold': return '100';
                        case 'position_x': return '0';
                        case 'position_y': return '0';
                        case 'is_alive': return 'True';
                        case 'team': return '"Heroes"';
                        case 'weapon': return '"Sword"';
                        case 'armor': return '"Leather"';
                        case 'inventory': return '[]';
                        case 'magic_power': return '20';
                        case 'critical_chance': return '0.15';
                        default: return '"value"';
                    }
                }).join(', ');

                classCode += `
hero = GameCharacter(${paramValues})

hero.display_info()

${methods.length > 0 ? methods.map(m => `hero.${m}()`).join('\n') : ''}`;

                editors.generatedClass.setValue(classCode);
            }, 100);
        }

        function resetBuilder() {
            attributes = [];
            methods = [];
            updateAttributeList();
            updateMethodList();
            if (editors.generatedClass) {
                editors.generatedClass.setValue('');
            }
            document.getElementById('generatedClassContainer').style.display = 'none';
            
            // Re-enable all suggestion buttons
            document.querySelectorAll('.suggestion-btn').forEach(btn => {
                btn.classList.remove('disabled');
                btn.disabled = false;
            });
        }

        // Run code functions
        async function runCode(editorKey, outputKey) {
            const code = editors[editorKey].getValue();
            const outputEl = document.getElementById(outputKey);
            outputEl.style.color = "#f0f0f0";
            try {
                const output = await runPythonCode(code);
                outputEl.textContent = output;
            } catch (error) {
                outputEl.style.color = "#ff6b6b";
                outputEl.textContent = "Error: " + error.message;
            }
        }
        
        const runGeneratedClass = () => runCode('generatedClass', 'generatedClassOutput');
        const runInitMethod = () => runCode('initMethod', 'initMethodOutput');
        const runObjectLab = () => runCode('objectLab', 'objectLabOutput');
        const runInteraction = () => runCode('interaction', 'interactionOutput');
        const runRelationship = () => runCode('relationship', 'relationshipOutput');
        const runDebug = () => runCode('debug', 'debugOutput');

        function resetObjectLab() {
            const template = `# Complete the Product class by writing the constructor and display method

class Product:
    # TODO: Write the __init__ method that takes name, price, and stock_quantity
    # Remember to:
    # - Include self as the first parameter
    # - Store each parameter as an attribute using self.name = name, etc.
    # - Initialize reviews as an empty list
    # - Initialize rating as 0
    
    
    
    # TODO: Write the display_info method
    # Remember to:
    # - Include self as the first parameter
    # - Print "Product Information:" first
    # - Print each attribute in a nice format
    # - Use string concatenation with + and str() for numbers
    
    

# Test your code - DO NOT MODIFY BELOW THIS LINE
print("Testing Product Class...")
print("=" * 40)

# Create different products
laptop = Product("Gaming Laptop", 899.99, 15)
headphones = Product("Wireless Headphones", 79.99, 50)
keyboard = Product("Mechanical Keyboard", 129.99, 30)

# Display each product's information
print("Our Products:")
print("-" * 40)
laptop.display_info()
print("-" * 40)
headphones.display_info()
print("-" * 40)
keyboard.display_info()`;
            editors.objectLab.setValue(template);
            localStorage.removeItem('oop-lesson2-objectLab');
            objectLabHintIndex = 0;
            document.getElementById('objectLabHints').style.display = 'none';
            document.getElementById('objectLabHintsList').innerHTML = '';
        }

        function showObjectLabHints() {
            const hints = [
                "The __init__ method should start with: def __init__(self, name, price, stock_quantity):",
                "Inside __init__, create attributes like: self.name = name",
                "Don't forget to initialize self.reviews = [] and self.rating = 0",
                "The display_info method should start with: def display_info(self):",
                "Use print() statements to show the information. Example: print(\"  Name: \" + self.name)"
            ];
            
            const hintsDiv = document.getElementById('objectLabHints');
            const hintsList = document.getElementById('objectLabHintsList');
            
            if (objectLabHintIndex < hints.length) {
                if (objectLabHintIndex === 0) {
                    hintsList.innerHTML = '';
                }
                const li = document.createElement('li');
                li.textContent = hints[objectLabHintIndex];
                hintsList.appendChild(li);
                objectLabHintIndex++;
                hintsDiv.style.display = 'block';
            } else {
                alert('All hints shown! Try to complete the code now.');
            }
        }

        function attemptShowObjectLabSolution() {
            const code = editors.objectLab.getValue();
            // Grab the code before the test cases start
            const userCode = code.split('# Test your code - DO NOT MODIFY BELOW THIS LINE')[0];
            // Count meaningful lines of code
            const linesOfCode = userCode.split('\n').filter(line => 
                line.trim() && 
                !line.trim().startsWith('#') &&
                line.trim() !== 'pass'
            ).length;

            if (linesOfCode < 8) {
                alert('Please make a more substantial attempt to complete both methods before viewing the solution. You should have at least 8 lines of code. Use the hints if you are stuck!');
                return;
            }
            
            if (confirm('Are you sure you want to see the solution? This will replace your current code.')) {
                showObjectLabSolution();
            }
        }

        function showObjectLabSolution() {
            const solution = `# Complete the Product class by writing the constructor and display method

class Product:
    # TODO: Write the __init__ method that takes name, price, and stock_quantity
    # Remember to:
    # - Include self as the first parameter
    # - Store each parameter as an attribute using self.name = name, etc.
    # - Initialize reviews as an empty list
    # - Initialize rating as 0
    def __init__(self, name, price, stock_quantity):
        self.name = name
        self.price = price
        self.stock_quantity = stock_quantity
        self.reviews = []
        self.rating = 0
    
    # TODO: Write the display_info method
    # Remember to:
    # - Include self as the first parameter
    # - Print "Product Information:" first
    # - Print each attribute in a nice format
    # - Use string concatenation with + and str() for numbers
    def display_info(self):
        print("Product Information:")
        print("  Name: " + self.name)
        print("  Price: £" + str(self.price))
        print("  Stock: " + str(self.stock_quantity) + " units")

# Test your code - DO NOT MODIFY BELOW THIS LINE
print("Testing Product Class...")
print("=" * 40)

# Create different products
laptop = Product("Gaming Laptop", 899.99, 15)
headphones = Product("Wireless Headphones", 79.99, 50)
keyboard = Product("Mechanical Keyboard", 129.99, 30)

# Display each product's information
print("Our Products:")
print("-" * 40)
laptop.display_info()
print("-" * 40)
headphones.display_info()
print("-" * 40)
keyboard.display_info()`;
            
            editors.objectLab.setValue(solution);
            objectLabHintIndex = 0; // Reset hints
        }
        
        function showInitSolution() {
            const solution = `# Complete the BankAccount Class

import random

class BankAccount:
    # TODO: Complete the __init__ method
    # It should take account_holder and initial_balance (default 0)
    # Store account_holder and initial_balance as attributes
    # Create a private __account_number using the __generate_account_number method
    def __init__(self, account_holder, initial_balance=0):
        self.account_holder = account_holder
        self.__balance = initial_balance
        self.__account_number = self.__generate_account_number()
    
    def __generate_account_number(self):
        """A private method to generate an account number"""
        return "ACC" + str(random.randint(10000, 99999))
    
    # TODO: Complete the deposit method
    # It should take an amount parameter
    # If amount > 0: add to balance and print success message
    # Otherwise: print error message
    def deposit(self, amount):
        if amount > 0:
            self.__balance += amount
            print("Deposit of " + str(amount) + " was successful.")
        else:
            print("Deposit amount must be positive.")
    
    # TODO: Complete the get_balance method
    # It should return the private __balance
    def get_balance(self):
        return self.__balance
    
    # TODO: Complete the display_info method
    # Print "Account Information:"
    # Print the account holder, account number, and balance
    # Use string concatenation with +
    def display_info(self):
        print("Account Information:")
        print("  Account Holder: " + self.account_holder)
        print("  Account Number: " + self.__account_number)
        print("  Balance: £" + str(self.get_balance()))

# --- Test Cases ---
print("--- Running Tests ---")
account1 = BankAccount("John Smith", 1000)

# Test 1: get_balance method
print("Initial balance: " + str(account1.get_balance()))

# Test 2: display_info method
account1.display_info()

# Test 3: deposit method
account1.deposit(500)
print("After deposit: " + str(account1.get_balance()))`;
            editors.initMethod.setValue(solution);
            initHintIndex = 0; // Reset hints
        }

        function resetInteraction() {
            const template = `# RPG Character Battle System - Complete the methods!

class Character:
    def __init__(self, name, health, attack_power):
        self.name = name
        self.max_health = health
        self.health = health
        self.attack_power = attack_power
        self.is_alive = True
    
    def attack(self, target):
        """Attack another character"""
        # TODO: Complete this method
        # 1. Check if self.is_alive is False. If so, print a message and return
        # 2. Store self.attack_power in a variable called damage
        # 3. Print a message showing who attacks whom for how much damage
        # 4. Call target.take_damage(damage)
        pass  # Remove this when you add your code
    
    def take_damage(self, damage):
        """Take damage from an attack"""
        # TODO: Complete this method
        # 1. Reduce self.health by damage amount
        # 2. Check if self.health <= 0:
        #    - Set self.health to 0
        #    - Set self.is_alive to False
        #    - Print a defeat message
        # 3. Otherwise, print current health status
        pass  # Remove this when you add your code
    
    def display_info(self):
        """Display character status"""
        # TODO: Complete this method
        # Print the character's name and current health/max health
        # Format: "Name (HP: current/max)"
        pass  # Remove this when you add your code

# Test your battle system - DO NOT MODIFY BELOW THIS LINE
print("BATTLE SYSTEM TEST")
print("=" * 40)

# Create characters
hero = Character("Knight", 100, 25)
monster = Character("Dragon", 150, 20)

# Display initial status
print("Initial Status:")
hero.display_info()
monster.display_info()
print("-" * 40)

# Battle sequence
print("\\nBattle Start!")
hero.attack(monster)
monster.attack(hero)

print("\\nAfter Round 1:")
hero.display_info()
monster.display_info()`;
            editors.interaction.setValue(template);
            localStorage.removeItem('oop-lesson2-interaction');
        }

        function addSpecialMove() {
            const currentCode = editors.interaction.getValue();
            const specialMoveCode = `
    def special_attack(self, target):
        """A more powerful attack that ignores some defense."""
        if not self.is_alive: return

        print(self.name + " uses a special attack!")
        damage = self.attack_power * 2
        
        print("SPECIAL ATTACK hits " + target.name + " for " + str(damage) + " damage!")
        target.take_damage(damage)
`;

            if (currentCode.includes('special_attack')) {
                alert("Special attack already added!");
                return;
            }

            const insertPosition = currentCode.indexOf('def take_damage');
            if (insertPosition !== -1) {
                const newCode = currentCode.slice(0, insertPosition) + specialMoveCode + '\n' + currentCode.slice(insertPosition);
                editors.interaction.setValue(newCode);
                alert("`special_attack` method added! Now, modify the battle loop to use it.");
            }
        }

        let libraryHintIndex = 0;

        function resetRelationship() {
            const template = `# Library Management System
# Build the complete system following the requirements above

# Start by creating the Book class with:
# - __init__ method with title, author, isbn, is_available
# - borrow() method
# - return_book() method  
# - display_info() method

class Book:
    # Your code here
    pass


# Next create the Member class with:
# - __init__ method with name, member_id, borrowed_books list
# - borrow_book(book) method
# - return_book(book) method
# - display_info() method

class Member:
    # Your code here
    pass


# Finally create the Library class with:
# - __init__ method with name, books list, members list
# - add_book(book) method
# - add_member(member) method
# - find_book(title) method
# - display_all_books() method

class Library:
    # Your code here
    pass


# Test your system below:
print("=== Library System Test ===")

# Step 1: Create a library

# Step 2: Create books

# Step 3: Add books to library

# Step 4: Create members

# Step 5: Add members to library

# Step 6: Test borrowing and returning

# Step 7: Display final state
`;
            editors.relationship.setValue(template);
            localStorage.removeItem('oop-lesson2-relationship');
            libraryHintIndex = 0;
            document.getElementById('libraryHints').style.display = 'none';
            document.getElementById('libraryHintsList').innerHTML = '';
        }

        function showLibraryHints() {
            const hints = [
                "Start with the Book class. The __init__ method should take 4 parameters: self, title, author, isbn",
                "In Book.__init__, don't forget to set self.is_available = True",
                "The borrow() method should change is_available to False and print a message using string concatenation",
                "For Member class, create an empty list in __init__: self.borrowed_books = []",
                "In borrow_book(), first check: if book.is_available: (then add to list and call book.borrow())",
                "In return_book(), check: if book in self.borrowed_books: (then remove it)",
                "For find_book(), use a for loop to go through self.books and check if book.title == title",
                "Don't forget to test your code! Create objects like: library = Library('City Library')"
            ];
            
            const hintsDiv = document.getElementById('libraryHints');
            const hintsList = document.getElementById('libraryHintsList');
            
            if (libraryHintIndex < hints.length) {
                if (libraryHintIndex === 0) {
                    hintsList.innerHTML = '';
                }
                const li = document.createElement('li');
                li.textContent = hints[libraryHintIndex];
                hintsList.appendChild(li);
                libraryHintIndex++;
                hintsDiv.style.display = 'block';
            } else {
                alert('All hints shown! Try to complete the code now.');
            }
        }

        function attemptShowLibrarySolution() {
            const code = editors.relationship.getValue();
            const linesOfCode = code.split('\n').filter(line => line.trim() && !line.trim().startsWith('#')).length;
            
            if (linesOfCode < 30) {
                alert('Please make a more substantial attempt at the code first! You need to write at least the class definitions and some methods. Use the hints button if you need help.');
                return;
            }
            
            if (confirm('Are you sure you want to see the solution? Make sure you\'ve tried writing all three classes first!')) {
                showLibrarySolution();
            }
        }

        function showLibrarySolution() {
            editors.relationship.setValue(`# Library Management System - Complete Solution

class Book:
    def __init__(self, title, author, isbn):
        self.title = title
        self.author = author
        self.isbn = isbn
        self.is_available = True
    
    def borrow(self):
        self.is_available = False
        print("Book '" + self.title + "' has been borrowed")
    
    def return_book(self):
        self.is_available = True
        print("Book '" + self.title + "' has been returned")
    
    def display_info(self):
        status = "Available" if self.is_available else "Borrowed"
        print("Title: " + self.title)
        print("Author: " + self.author)
        print("ISBN: " + self.isbn)
        print("Status: " + status)
        print("-" * 30)

class Member:
    def __init__(self, name, member_id):
        self.name = name
        self.member_id = member_id
        self.borrowed_books = []
    
    def borrow_book(self, book):
        if book.is_available:
            self.borrowed_books.append(book)
            book.borrow()
            print(self.name + " successfully borrowed '" + book.title + "'")
        else:
            print("Sorry, '" + book.title + "' is not available")
    
    def return_book(self, book):
        if book in self.borrowed_books:
            self.borrowed_books.remove(book)
            book.return_book()
            print(self.name + " successfully returned '" + book.title + "'")
        else:
            print("Error: " + self.name + " did not borrow '" + book.title + "'")
    
    def display_info(self):
        print("Member: " + self.name + " (ID: " + self.member_id + ")")
        print("Books borrowed: " + str(len(self.borrowed_books)))
        if len(self.borrowed_books) > 0:
            print("Borrowed titles:")
            for book in self.borrowed_books:
                print("  - " + book.title)
        print("-" * 30)

class Library:
    def __init__(self, name):
        self.name = name
        self.books = []
        self.members = []
    
    def add_book(self, book):
        self.books.append(book)
        print("Added '" + book.title + "' to library")
    
    def add_member(self, member):
        self.members.append(member)
        print("Added member: " + member.name)
    
    def find_book(self, title):
        for book in self.books:
            if book.title == title:
                return book
        return None
    
    def display_all_books(self):
        print("\\n=== " + self.name + " - All Books ===")
        for book in self.books:
            book.display_info()

# Complete test of the system
print("=== Library System Test ===")
print("=" * 50)

# Step 1: Create a library
library = Library("City Central Library")

# Step 2: Create books
book1 = Book("1984", "George Orwell", "978-0451524935")
book2 = Book("To Kill a Mockingbird", "Harper Lee", "978-0446310789")
book3 = Book("The Great Gatsby", "F. Scott Fitzgerald", "978-0743273565")

# Step 3: Add books to library
library.add_book(book1)
library.add_book(book2)
library.add_book(book3)

# Step 4: Create members
member1 = Member("John Doe", "M001")
member2 = Member("Jane Smith", "M002")

# Step 5: Add members to library
library.add_member(member1)
library.add_member(member2)

# Step 6: Test borrowing and returning
print("\\n--- Testing Borrowing ---")
member1.borrow_book(book1)
member1.borrow_book(book2)
member2.borrow_book(book1)  # Should fail - already borrowed

print("\\n--- Testing Returning ---")
member1.return_book(book1)
member2.borrow_book(book1)  # Should work now

print("\\n--- Testing Book Search ---")
found_book = library.find_book("1984")
if found_book:
    print("Found: " + found_book.title + " by " + found_book.author)
else:
    print("Book not found")

# Step 7: Display final state
print("\\n--- Final State ---")
member1.display_info()
member2.display_info()
library.display_all_books()`);
            libraryHintIndex = 0; // Reset hints
        }

        function resetDebug() {
            const buggyCode = `# Fix the bugs in this code!
# There are 5 errors to find and fix

class Vehicle:
    num_vehicles = 0 # A class attribute

    def init(self, brand, model):  # Bug 1: Missing underscores
        brand = brand  # Bug 2: Not using self.brand
        self.model = model
        num_vehicles += 1 # Bug 3: Modifying class attribute incorrectly
    
    def drive(miles):  # Bug 4: Missing self parameter
        mileage += miles  # Bug 5: 'mileage' doesn't exist here
        print("Drove " + str(miles) + " miles.")
    
    def display_info(self):
        print("Vehicle: " + self.brand + " " + self.model)

# Test the code
car = Vehicle("Toyota", "Camry")
car.drive(100)
car.display_info()
print("Total vehicles created: " + str(Vehicle.num_vehicles))`;
            editors.debug.setValue(buggyCode);
            localStorage.removeItem('oop-lesson2-debug');
            currentHintIndex = 0;
            document.getElementById('debugHints').style.display = 'none';
            document.getElementById('hintsList').innerHTML = '';
        }

        function showHints() {
            const hints = [
                "Bug 1: How are special methods like constructors always named?",
                "Bug 2: To save something as an attribute of an instance, what must you prefix it with?",
                "Bug 3: To modify an attribute that belongs to the *class* itself, how should you refer to it?",
                "Bug 4: What is the mandatory first parameter for any method that acts on an instance?",
                "Bug 5: The `drive` method tries to access a `mileage` variable, but it was never created. How do you access the *instance's* mileage?"
            ];
            
            const hintsDiv = document.getElementById('debugHints');
            const hintsList = document.getElementById('hintsList');
            
            if (currentHintIndex < hints.length) {
                if (currentHintIndex === 0) {
                    hintsList.innerHTML = '';
                }
                const li = document.createElement('li');
                li.textContent = hints[currentHintIndex];
                hintsList.appendChild(li);
                currentHintIndex++;
                hintsDiv.style.display = 'block';
            } else {
                alert('All hints shown! Try to fix the code now.');
            }
        }
        
        function attemptShowDebugSolution() {
            if (confirm('Are you sure you want to view the solution? Try to find all 5 bugs on your own first. This will replace all your current work in this editor.')) {
                showDebugSolution();
            }
        }

        function showDebugSolution() {
            editors.debug.setValue(`# Fixed version of the code!

class Vehicle:
    num_vehicles = 0 # A class attribute

    def __init__(self, brand, model):  # Fixed 1: Correct name __init__
        self.brand = brand  # Fixed 2: Used self.brand to create instance attribute
        self.model = model
        self.mileage = 0 # Mileage should be an instance attribute
        Vehicle.num_vehicles += 1 # Fixed 3: Correctly reference class attribute
    
    def drive(self, miles):  # Fixed 4: Added self parameter
        self.mileage += miles  # Fixed 5: Used self.mileage to modify instance attribute
        print("Drove " + str(miles) + " miles.")
    
    def display_info(self):
        # This was already correct, but depends on the __init__ fixes
        print("Vehicle: " + self.brand + " " + self.model)
        print("Mileage: " + str(self.mileage))

# Test the code
car = Vehicle("Toyota", "Camry")
car.drive(100)
car.display_info()

truck = Vehicle("Ford", "F-150")
truck.drive(50)
truck.display_info()

print("\\nTotal vehicles created: " + str(Vehicle.num_vehicles))`);
        }

        // Utility function to run Python code
        async function runPythonCode(code) {
            let output = '';
            try {
                pyodide.runPython(`
                    import sys
                    import io
                    sys.stdout = io.StringIO()
                `);
                await pyodide.runPythonAsync(code);
                output = pyodide.runPython("sys.stdout.getvalue()");
            } catch (e) {
                output = e.toString();
                throw new Error(output);
            } finally {
                pyodide.runPython("sys.stdout = sys.__stdout__");
            }
            return output || '(No output produced)';
        }

        // Mark scheme functionality
        function toggleMarkScheme(questionId) {
            const scheme = document.getElementById(questionId + '-scheme');
            const button = scheme.previousElementSibling.querySelector('.button');
            
            if (scheme.classList.contains('visible')) {
                scheme.classList.remove('visible');
                button.textContent = 'Show Mark Scheme';
            } else {
                const answerArea = document.getElementById(questionId + '-answer');
                const answer = answerArea ? answerArea.value : " ";
                if (answer.length < 20) {
                    alert('Please write a more detailed answer before viewing the mark scheme.');
                    return;
                }
                
                scheme.classList.add('visible');
                button.textContent = 'Hide Mark Scheme';
            }
        }

        // Progress tracking
        function updateProgress() {
            window.addEventListener('scroll', () => {
                const windowHeight = window.innerHeight;
                const documentHeight = document.documentElement.scrollHeight - windowHeight;
                const scrolled = window.scrollY;
                if (documentHeight > 0) {
                    const progress = (scrolled / documentHeight) * 100;
                    document.getElementById('progressBar').style.width = progress + '%';
                }
            });
        }

        // Auto-save functionality
        function initializeAutoSave() {
            Object.keys(editors).forEach(key => {
                const editor = editors[key];
                editor.on('change', () => {
                    localStorage.setItem('oop-lesson2-' + key, editor.getValue());
                });
                
                const saved = localStorage.getItem('oop-lesson2-' + key);
                // For editors with a reset function, only load saved if it's not the initial template.
                if (saved) {
                   editor.setValue(saved);
                }
            });
            
            document.querySelectorAll('textarea[id$="-notes"], textarea[id$="-answer"]').forEach(textarea => {
                const saved = localStorage.getItem('oop-lesson2-' + textarea.id);
                if (saved) {
                    textarea.value = saved;
                }
                textarea.addEventListener('input', () => {
                    localStorage.setItem('oop-lesson2-' + textarea.id, textarea.value);
                });
            });
        }

        // Initialize everything when page loads
        window.addEventListener('load', () => {
            initializePython();
        });

        // Add keyboard shortcuts for running code
        document.addEventListener('keydown', (e) => {
            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                const activeElement = document.activeElement;
                if (activeElement.classList.contains('CodeMirror-focused') || activeElement.tagName === 'TEXTAREA') {
                    const editorContainer = activeElement.closest('.code-editor-container, .class-builder');
                     if (editorContainer) {
                         const runButton = editorContainer.querySelector('button[onclick^="run"]');
                         if (runButton) {
                             runButton.click();
                         }
                     }
                }
            }
        });
    </script>
</body>
</html>
