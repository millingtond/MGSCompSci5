<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 1: Introduction to Object-Oriented Programming</title>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/python/python.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Styles */
        .lesson-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .lesson-header h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .lesson-meta {
            display: flex;
            gap: 2rem;
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        /* Skill Tracker */
        .skill-tracker {
            background: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .skill-tracker h4 {
            color: #4a5568;
            margin-right: 1rem;
        }

        .skill-badge {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.4s ease;
        }

        .skill-badge.locked {
            background: #e2e8f0;
            color: #718096;
            filter: grayscale(80%);
        }

        .skill-badge.unlocked {
            background: #c6f6d5;
            color: #2f855a;
            filter: grayscale(0%);
            transform: scale(1.05);
        }

        .skill-badge.unlocked .skill-icon {
            animation: popIn 0.5s ease;
        }

        @keyframes popIn {
            0% { transform: scale(0); }
            80% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .breadcrumb {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .breadcrumb a {
            color: #667eea;
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        /* Section Styles */
        .section {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .section h2 {
            color: #667eea;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section h3 {
            color: #4a5568;
            margin: 1.5rem 0 1rem;
        }

        /* Starter Activity Styles */
        .starter-activity {
            background: #f0f4ff;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }

        /* Learning Outcomes */
        .outcomes {
            background: #e6fffa;
            border-left: 4px solid #38b2ac;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .outcomes ul {
            list-style-position: inside;
            margin-top: 0.5rem;
        }

        .outcomes li {
            margin: 0.5rem 0;
        }

        /* Core Concepts */
        .concept-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .concept-card {
            background: #f7fafc;
            padding: 1.5rem;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }

        .concept-card h4 {
            color: #667eea;
            margin-bottom: 0.5rem;
        }

        /* Button Styles */
        .button {
            background: #667eea;
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .button:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }
        
        .button.hint-button {
            background: #f6ad55; /* Orange color */
        }
        
        .button.hint-button:hover {
            background: #ed8936;
        }

        .button.secondary {
            background: #718096;
        }

        .button.secondary:hover {
            background: #4a5568;
        }

        .button.success {
            background: #48bb78;
        }

        .button.success:hover {
            background: #38a169;
        }
        
        .hint-output {
            display: none; /* Hidden by default */
            margin-top: 1rem;
            padding: 1rem;
            background: #fef5e7;
            border-left: 5px solid #f6ad55;
            border-radius: 4px;
            color: #b95d09;
            font-family: sans-serif;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Progress Bar */
        .progress-bar {
            background: #e2e8f0;
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            margin: 2rem 0;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
        }

        /* Interactive Game Styles */
        .object-detective-game {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 10px;
            margin: 1.5rem 0;
        }

        .game-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .game-card {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .game-card.selected {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .game-card.correct {
            border-color: #48bb78;
            background: #f0fff4;
        }

        .game-card.incorrect {
            border-color: #e53e3e;
            background: #fff5f5;
        }

        /* Code Editor Styles */
        .code-editor-container {
            background: #f7fafc;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
        }

        .CodeMirror {
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            height: auto;
            font-size: 14px;
        }

        .code-output {
            background: #1a1a1a;
            color: #f0f0f0;
            padding: 1rem;
            border-radius: 4px;
            margin-top: 1rem;
            font-family: 'Courier New', monospace;
            min-height: 100px;
            white-space: pre-wrap;
            overflow-x: auto;
        }

        .code-controls {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        /* Comparison Visualizer */
        .comparison-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }

        .comparison-side {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            border: 2px solid #e2e8f0;
        }

        .comparison-side h4 {
            text-align: center;
            margin-bottom: 1rem;
            color: #4a5568;
        }

        .comparison-side.oop {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .comparison-side.procedural {
            border-color: #f6ad55;
            background: #fef5e7;
        }

        /* Visual Object Diagram */
        .object-diagram {
            background: white;
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            position: relative;
        }

        .object-header {
            background: #667eea;
            color: white;
            padding: 0.5rem;
            margin: -1rem -1rem 1rem;
            border-radius: 6px 6px 0 0;
            font-weight: bold;
        }

        .object-attributes {
            border-top: 1px solid #e2e8f0;
            padding-top: 0.5rem;
            margin-top: 0.5rem;
        }

        .object-methods {
            border-top: 1px solid #e2e8f0;
            padding-top: 0.5rem;
            margin-top: 0.5rem;
        }

        /* Real World Connection */
        .real-world {
            background: #fef5e7;
            border-left: 4px solid #f39c12;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 4px;
        }

        /* Exam Question Styles */
        .exam-question {
            background: #f7fafc;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            border: 2px solid #667eea;
        }
        
        .exam-question .CodeMirror { /* Style for CodeMirror inside exam questions */
             margin: 1rem 0;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .marks {
            background: #667eea;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-weight: bold;
        }

        .answer-area {
            width: 100%;
            min-height: 150px;
            padding: 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 4px;
            font-family: inherit;
            font-size: 1rem;
            resize: vertical;
        }

        .exam-controls {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            align-items: center;
        }

        .predicted-mark {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .mark-scheme {
            background: #e6fffa;
            padding: 1rem;
            border-radius: 4px;
            margin-top: 1rem;
            display: none;
        }

        .mark-scheme.visible {
            display: block;
        }
        
        .feedback {
            margin-top: 1rem;
            padding: 0.8rem;
            border-radius: 4px;
            font-weight: bold;
            display: none; /* Hidden by default */
        }
        
        .feedback.correct {
            display: inline-block;
            background: #e6fffa;
            color: #2c7a7b;
            border-left: 5px solid #38b2ac;
        }
        
        .feedback.incorrect {
            display: inline-block;
            background: #fff5f5;
            color: #c53030;
            border-left: 5px solid #e53e3e;
        }

        /* Key Takeaways */
        .key-takeaways {
            background: #f0fff4;
            border-left: 4px solid #48bb78;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 4px;
        }

        .key-takeaways ul {
            list-style-type: none;
            padding-left: 0;
        }

        .key-takeaways li {
            margin: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
        }

        .key-takeaways li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #48bb78;
            font-weight: bold;
        }

        /* Video Section */
        .video-container {
            margin: 1.5rem 0;
            background: #f7fafc;
            padding: 1rem;
            border-radius: 8px;
        }

        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 8px;
        }

        .video-notes {
            margin-top: 1rem;
        }

        .video-notes textarea {
            width: 100%;
            min-height: 100px;
            padding: 0.8rem;
            border: 2px solid #e2e8f0;
            border-radius: 4px;
            font-family: inherit;
            resize: vertical;
        }

        /* Extension Activities */
        .extension {
            background: #fef5e7;
            border-left: 4px solid #f39c12;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 4px;
        }

        /* What's Next */
        .whats-next {
            background: #f0f4ff;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            text-align: center;
        }

        .next-lesson-card {
            display: inline-block;
            background: white;
            padding: 1rem 2rem;
            border-radius: 8px;
            margin-top: 1rem;
            text-decoration: none;
            color: #333;
            border: 2px solid #667eea;
            transition: all 0.3s ease;
        }

        .next-lesson-card:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        /* Loading Indicator */
        .loading {
            text-align: center;
            padding: 2rem;
            color: #667eea;
        }

        .loading::after {
            content: "...";
            animation: dots 1.5s steps(4, end) infinite;
        }

        @keyframes dots {
            0%, 20% { content: ""; }
            40% { content: "."; }
            60% { content: ".."; }
            80%, 100% { content: "..."; }
        }

        /* Pet Visualizer */
        .pet-container {
            background: #f0f9ff;
            padding: 2rem;
            border-radius: 10px;
            margin: 1.5rem 0;
            text-align: center;
        }

        .pet-display {
            font-size: 4rem;
            margin: 1rem 0;
        }

        .pet-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .stat-bar {
            background: #e2e8f0;
            border-radius: 20px;
            padding: 0.5rem;
            position: relative;
            overflow: hidden;
        }

        .stat-fill {
            background: linear-gradient(90deg, #48bb78, #38a169);
            height: 100%;
            border-radius: 20px;
            transition: width 0.5s ease;
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
        }

        .stat-label {
            position: relative;
            z-index: 1;
            font-weight: bold;
            color: #2d3748;
        }
        
        /* Blueprint & Factory Visualizer */
        .factory-container {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 2rem;
            margin-top: 1.5rem;
            background: #f7fafc;
            padding: 1.5rem;
            border-radius: 8px;
        }

        .blueprint-panel {
            background: #f0f4ff;
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 1.5rem;
        }
        
        .blueprint-panel h4 {
            text-align: center;
            margin-bottom: 1.5rem;
            color: #5a67d8;
        }

        .blueprint-field {
            margin-bottom: 1rem;
        }

        .blueprint-field label {
            display: block;
            margin-bottom: 0.25rem;
            font-weight: bold;
            color: #4a5568;
        }

        .blueprint-field input {
            width: 100%;
            padding: 0.5rem;
            border-radius: 4px;
            border: 1px solid #e2e8f0;
            font-size: 1rem;
        }
        
        .blueprint-controls {
            margin-top: 1.5rem;
            text-align: center;
        }
        
        .factory-output-panel {
            padding: 1rem;
            background: white;
            border-radius: 8px;
            border: 2px dashed #a0aec0;
            min-height: 200px;
        }

        .factory-output-panel h4 {
            text-align: center;
            margin-bottom: 1rem;
            color: #4a5568;
        }
        
        #robot-objects-container {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .robot-card {
            background: #e6fffa;
            border: 1px solid #38b2ac;
            border-radius: 6px;
            padding: 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            width: calc(50% - 0.5rem); /* Two cards per row */
            animation: fadeIn 0.5s ease;
        }

        .robot-card-header {
            font-weight: bold;
            color: #2c7a7b;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            border-bottom: 1px solid #b2f5ea;
            padding-bottom: 0.5rem;
        }

        .robot-card ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }
        
        .robot-card li {
            margin-bottom: 0.25rem;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        
        /* Attribute/Method Sorter Game */
        .sorter-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .sorter-column h4 {
            text-align: center;
            margin-bottom: 1rem;
            color: #4a5568;
        }

        .source-zone, .drop-zone {
            background: #f7fafc;
            border: 2px dashed #cbd5e0;
            border-radius: 8px;
            padding: 1rem;
            min-height: 250px;
            transition: all 0.3s ease;
        }

        .drop-zone.drag-over {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .sorter-card {
            background: white;
            color: #2d3748;
            padding: 0.8rem 1rem;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            margin-bottom: 0.5rem;
            cursor: grab;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            font-family: 'Courier New', monospace;
            font-weight: bold;
            user-select: none;
            transition: all 0.3s ease;
        }

        .sorter-card:active {
            cursor: grabbing;
        }
        
        .sorter-card.correct {
            border-left: 5px solid #48bb78;
            background: #f0fff4;
        }

        .sorter-card.incorrect {
            border-left: 5px solid #e53e3e;
            background: #fff5f5;
        }
        
        .sorter-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            margin-top: 1rem;
        }

        #sorter-score {
            font-size: 1.2rem;
            font-weight: bold;
            color: #4a5568;
        }
        
        /* Syntax Error Challenge */
        .syntax-challenge-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .challenge-item {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 1.5rem;
        }

        .challenge-item h4 {
            color: #718096;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .challenge-item pre {
            background: #1a1a1a;
            color: #f0f0f0;
            padding: 1rem;
            border-radius: 4px;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
        }
        
        .challenge-question {
            font-weight: bold;
            color: #4a5568;
            margin: 1rem 0;
        }

        .challenge-options label {
            display: block;
            background: white;
            padding: 0.8rem;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .challenge-options label:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }
        
        .challenge-options input[type="radio"] {
            margin-right: 0.5rem;
        }
        
        /* Refactoring Challenge */
        .refactor-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 1.5rem;
        }

        .refactor-side h4 {
            text-align: center;
            margin-bottom: 1rem;
        }

        .refactor-side .code-output {
            min-height: 50px;
        }
        
        .refactor-controls {
            text-align: center;
            margin-top: 1.5rem;
        }
        
        .refactor-controls .feedback {
            margin-top: 1rem;
            display: inline-block;
        }
        
        /* Garage Simulation */
        .garage-simulation-container {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 2rem;
            background: #f0f4ff;
            padding: 1.5rem;
            border-radius: 8px;
        }

        .garage-controls {
            background: white;
            padding: 1rem;
            border-radius: 6px;
        }
        
        .garage-controls h4 {
            margin-bottom: 1rem;
        }
        
        .garage-controls input {
            width: 100%;
            padding: 0.5rem;
            margin-bottom: 0.5rem;
            border-radius: 4px;
            border: 1px solid #e2e8f0;
        }
        
        .garage-controls hr {
            border: none;
            border-top: 1px solid #e2e8f0;
            margin: 1.5rem 0;
        }
        
        .garage-display {
            background: #4a5568;
            padding: 1rem;
            border-radius: 6px;
            color: white;
        }
        
        #garage-container {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            min-height: 150px;
        }
        
        .car-card {
            background: #f7fafc;
            color: #2d3748;
            padding: 1rem;
            border-radius: 6px;
            width: 200px;
            border-top: 5px solid #667eea;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .car-card h5 {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }
        
        .fuel-bar {
            width: 100%;
            height: 20px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .fuel-fill {
            height: 100%;
            background: linear-gradient(90deg, #48bb78, #38a169);
            transition: width 0.5s ease;
        }
        
        .garage-code-reference {
            margin-top: 2rem;
        }
        
        /* Vocabulary Match-Up Game */
        .vocab-match-container {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 2rem;
            margin-top: 1.5rem;
        }

        .terms-column, .definitions-column {
            background: #f7fafc;
            border-radius: 8px;
            padding: 1rem;
        }

        .term-card {
            background: #e9d8fd;
            color: #5b21b6;
            padding: 0.8rem 1rem;
            border: 1px solid #c084fc;
            border-radius: 4px;
            margin-bottom: 0.8rem;
            cursor: grab;
            font-weight: bold;
            text-align: center;
            user-select: none;
            transition: all 0.2s ease;
        }

        .term-card:active {
            cursor: grabbing;
            transform: scale(1.05);
        }

        .definition-slot {
            background: white;
            border: 2px dashed #cbd5e0;
            border-radius: 6px;
            padding: 1rem;
            margin-bottom: 0.8rem;
            min-height: 55px;
            display: flex;
            align-items: center;
            transition: all 0.2s ease;
        }

        .definition-slot.drag-over {
            border-color: #f6ad55;
            background: #fef5e7;
        }
        
        .definition-slot.correct-match {
            border-style: solid;
            border-color: #48bb78;
            background: #f0fff4;
            color: #2f855a;
        }

        .definition-slot.correct-match .term-card {
            cursor: default;
            background: #48bb78;
            border-color: #2f855a;
            color: white;
            margin-right: 1rem;
        }
        
        .vocab-controls {
            text-align: center;
            margin-top: 1.5rem;
        }

        .vocab-controls .feedback {
            min-height: 2rem;
            margin-bottom: 1rem;
        }


        /* Responsive */
        @media (max-width: 768px) {
            .lesson-header h1 {
                font-size: 1.8rem;
            }
            
            .concept-grid, .comparison-container, .factory-container, .refactor-container {
                grid-template-columns: 1fr;
            }
            
            .sorter-container {
                grid-template-columns: 1fr;
            }
            
            .garage-simulation-container {
                grid-template-columns: 1fr;
            }
            
            .exam-controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .robot-card {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="breadcrumb">
            <a href="hub.html">Hub</a> → 
            <a href="python-oop.html">Python OOP</a> → 
            <strong>Lesson 1: Introduction to OOP</strong>
        </nav>

        <header class="lesson-header">
            <h1>Lesson 1: Introduction to Object-Oriented Programming</h1>
            <div class="lesson-meta">
                <span>🐍 Language: Python</span>
                <span>⏱️ Duration: 60 minutes</span>
                <span>🎯 Level: AS/A Level</span>
            </div>
        </header>
        
        <div class="skill-tracker">
            <h4>Skills Unlocked:</h4>
            <div class="skill-badge locked" id="skill-objects">
                <span class="skill-icon">❓</span> <span class="skill-name">Object Identification</span>
            </div>
            <div class="skill-badge locked" id="skill-attributes">
                <span class="skill-icon">🏷️</span> <span class="skill-name">Attributes vs. Methods</span>
            </div>
            <div class="skill-badge locked" id="skill-instantiation">
                <span class="skill-icon">⚙️</span> <span class="skill-name">Class Instantiation</span>
            </div>
             <div class="skill-badge locked" id="skill-debugging">
                <span class="skill-icon">🐞</span> <span class="skill-name">Debugging</span>
            </div>
            <div class="skill-badge locked" id="skill-vocabulary">
                <span class="skill-icon">📚</span> <span class="skill-name">OOP Vocabulary</span>
            </div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressBar"></div>
        </div>

        <div id="loadingIndicator" class="loading">
            Loading Python environment
        </div>

        <div id="mainContent" style="display: none;">
            <section class="section">
                <h2>🚀 Starter Activity: Object Detective</h2>
                <div class="starter-activity">
                    <p>You're a detective in the digital world! Can you identify which of these things would make good "objects" in a computer program? Click on items that have both <strong>properties</strong> (characteristics) and <strong>behaviors</strong> (actions).</p>
                    
                    <div class="object-detective-game">
                        <div class="game-grid" id="objectGame">
                            <div class="game-card" data-object="true" data-name="Car">🚗 Car</div>
                            <div class="game-card" data-object="true" data-name="Student">👨‍🎓 Student</div>
                            <div class="game-card" data-object="false" data-name="Color">🎨 Blue</div>
                            <div class="game-card" data-object="true" data-name="BankAccount">🏦 Bank Account</div>
                            <div class="game-card" data-object="false" data-name="Number">🔢 42</div>
                            <div class="game-card" data-object="true" data-name="Game">🎮 Video Game</div>
                            <div class="game-card" data-object="true" data-name="Email">📧 Email</div>
                            <div class="game-card" data-object="false" data-name="Running">🏃 Running</div>
                        </div>
                        <div style="text-align: center; margin-top: 1rem;">
                            <div id="gameScore" style="font-size: 1.2rem; margin-bottom: 1rem;">Score: 0/5 correct objects identified</div>
                            <button class="button" onclick="checkObjectGame()">Check Answers</button>
                            <button class="button secondary" onclick="resetObjectGame()">Reset</button>
                        </div>
                    </div>
                </div>
            </section>

            <section class="section">
                <h2>🎯 Learning Outcomes</h2>
                <div class="outcomes">
                    <p><strong>By the end of this lesson, you will be able to:</strong></p>
                    <ul>
                        <li>Explain what Object-Oriented Programming (OOP) is and why it's useful</li>
                        <li>Identify real-world entities that can be modeled as objects</li>
                        <li>Understand the key terminology: classes, objects, attributes, and methods</li>
                        <li>Compare procedural programming with object-oriented programming</li>
                        <li>Write your first simple class definition in Python</li>
                        <li>Create (instantiate) objects from a class</li>
                    </ul>
                </div>
            </section>

            <section class="section">
                <h2>💡 Core Concepts</h2>
                
                <div class="concept-grid">
                    <div class="concept-card">
                        <h4>What is Object-Oriented Programming?</h4>
                        <p>OOP is a programming paradigm that organizes code into <strong>objects</strong> - bundles of related data and functions that represent real-world entities.</p>
                        <p style="margin-top: 1rem;"><strong>Think of it like this:</strong> Instead of having separate variables and functions scattered around, we group related things together into objects, just like in real life!</p>
                    </div>
                    
                    <div class="concept-card">
                        <h4>Key OOP Terminology</h4>
                        <ul>
                            <li><strong>Class:</strong> A blueprint or template for creating objects (like a cookie cutter)</li>
                            <li><strong>Object:</strong> An instance of a class (like an actual cookie)</li>
                            <li><strong>Attributes:</strong> Data stored inside an object (like a cookie's flavor)</li>
                            <li><strong>Methods:</strong> Functions that belong to an object (like eating the cookie)</li>
                        </ul>
                    </div>
                    
                    <div class="concept-card">
                        <h4>Why Use OOP?</h4>
                        <ul>
                            <li>✅ <strong>Organization:</strong> Related code stays together</li>
                            <li>✅ <strong>Reusability:</strong> Create once, use many times</li>
                            <li>✅ <strong>Modularity:</strong> Easy to modify and maintain</li>
                            <li>✅ <strong>Real-world modeling:</strong> Code mirrors real life</li>
                            <li>✅ <strong>Teamwork:</strong> Different people can work on different objects</li>
                        </ul>
                    </div>
                </div>

                <h3>Visual Representation of an Object</h3>
                <div class="object-diagram">
                    <div class="object-header">Car Object</div>
                    <div class="object-attributes">
                        <strong>Attributes (Properties):</strong>
                        <ul>
                            <li>make = "Toyota"</li>
                            <li>model = "Corolla"</li>
                            <li>year = 2023</li>
                            <li>color = "Blue"</li>
                            <li>speed = 0</li>
                        </ul>
                    </div>
                    <div class="object-methods">
                        <strong>Methods (Behaviors):</strong>
                        <ul>
                            <li>start_engine()</li>
                            <li>accelerate(amount)</li>
                            <li>brake()</li>
                            <li>turn(direction)</li>
                            <li>honk()</li>
                        </ul>
                    </div>
                </div>
            </section>
            
            <section class="section">
                <h2>🔩 The Blueprint & The Factory</h2>
                <p>This interactive tool shows how a single <strong>Class</strong> (the blueprint) is used to create many unique <strong>Objects</strong> (the products). Fill out the blueprint and click "Build Robot" to create an object in the factory.</p>

                <div class="factory-container">
                    <div class="blueprint-panel">
                        <h4>🤖 Robot Blueprint (Class)</h4>
                        <div class="blueprint-field">
                            <label for="robot-name-input">Name:</label>
                            <input type="text" id="robot-name-input" placeholder="e.g., Unit 734">
                        </div>
                        <div class="blueprint-field">
                            <label for="robot-color-input">Color:</label>
                            <input type="text" id="robot-color-input" placeholder="e.g., Metallic Blue">
                        </div>
                        <div class="blueprint-field">
                            <label for="robot-sn-input">Serial #:</label>
                            <input type="text" id="robot-sn-input" placeholder="e.g., 987-XYZ">
                        </div>
                        <div class="blueprint-controls">
                            <button class="button" onclick="buildRobot()">Build Robot</button>
                        </div>
                    </div>

                    <div class="factory-output-panel">
                        <h4>🏭 Factory Output (Objects)</h4>
                        <div id="robot-objects-container">
                            </div>
                    </div>
                </div>
            </section>

            <section class="section">
                <h2>🔧 Interactive Activities</h2>
                
                <h3>Activity 1: Procedural vs OOP Comparison</h3>
                <p>Let's see the difference between procedural and object-oriented approaches with a simple example:</p>
                
                <div class="comparison-container">
                    <div class="comparison-side procedural">
                        <h4>❌ Procedural Approach</h4>
                        <div class="code-editor-container">
                            <div id="proceduralEditor" class="python-editor"></div>
                            <div class="code-controls">
                                <button class="button" onclick="runProceduralCode()">▶️ Run Code</button>
                            </div>
                            <div id="proceduralOutput" class="code-output">Output will appear here...</div>
                        </div>
                    </div>
                    
                    <div class="comparison-side oop">
                        <h4>✅ Object-Oriented Approach</h4>
                        <div class="code-editor-container">
                            <div id="oopEditor" class="python-editor"></div>
                            <div class="code-controls">
                                <button class="button" onclick="runOOPCode()">▶️ Run Code</button>
                            </div>
                            <div id="oopOutput" class="code-output">Output will appear here...</div>
                        </div>
                    </div>
                </div>

                <h3>Activity 2: Attribute or Method?</h3>
                <p>An object has data (<strong>attributes</strong>) and actions it can perform (<strong>methods</strong>). For a `UserAccount` object, drag and drop the cards below into the correct category.</p>

                <div class="sorter-container">
                    <div class="sorter-column" id="card-source-container">
                        <h4>Draggable Cards</h4>
                        <div class="source-zone" id="card-source">
                            <div class="sorter-card" id="card1" draggable="true" data-type="attribute">username</div>
                            <div class="sorter-card" id="card2" draggable="true" data-type="method">login()</div>
                            <div class="sorter-card" id="card3" draggable="true" data-type="attribute">last_login_date</div>
                            <div class="sorter-card" id="card4" draggable="true" data-type="method">logout()</div>
                            <div class="sorter-card" id="card5" draggable="true" data-type="attribute">password</div>
                            <div class="sorter-card" id="card6" draggable="true" data-type="method">change_password()</div>
                        </div>
                    </div>
                    <div class="sorter-column">
                        <h4>Attributes (has/is)</h4>
                        <div class="drop-zone" id="attributes-dropzone" data-type="attribute"></div>
                    </div>
                    <div class="sorter-column">
                        <h4>Methods (does)</h4>
                        <div class="drop-zone" id="methods-dropzone" data-type="method"></div>
                    </div>
                </div>
                <div class="sorter-controls">
                    <div id="sorter-score">Score: 0/6</div>
                    <button class="button success" onclick="checkSorter()">Check Answers</button>
                    <button class="button secondary" onclick="resetSorter()">Reset</button>
                </div>

                <h3>Activity 3: Build Your First Virtual Pet! 🐾</h3>
                <div class="pet-container">
                    <p>Let's create a simple virtual pet using OOP concepts. Watch how the pet responds to your actions!</p>
                    
                    <div class="pet-display" id="petEmoji">🐶</div>
                    
                    <div class="pet-stats">
                        <div class="stat-bar">
                            <div class="stat-fill" id="hungerBar" style="width: 50%;"></div>
                            <span class="stat-label">Hunger: <span id="hungerValue">50</span>/100</span>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-fill" id="happinessBar" style="width: 80%; background: linear-gradient(90deg, #f6ad55, #ed8936);"></div>
                            <span class="stat-label">Happiness: <span id="happinessValue">80</span>/100</span>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-fill" id="energyBar" style="width: 70%; background: linear-gradient(90deg, #4299e1, #3182ce);"></div>
                            <span class="stat-label">Energy: <span id="energyValue">70</span>/100</span>
                        </div>
                    </div>
                    
                    <div class="code-editor-container" style="text-align: left;">
                        <div id="petEditor" class="python-editor"></div>
                        <div class="code-controls">
                            <button class="button success" onclick="runPetCode()">▶️ Create Pet</button>
                            <button class="button hint-button" onclick="getAIHint('pet')">💡 Get a Hint</button>
                            <button class="button" onclick="feedPet()">🍖 Feed</button>
                            <button class="button" onclick="playWithPet()">🎾 Play</button>
                            <button class="button" onclick="petSleep()">😴 Sleep</button>
                        </div>
                        <div class="hint-output" id="pet-hint-output"></div>
                        <div id="petOutput" class="code-output">Pet actions will appear here...</div>
                    </div>
                </div>

                <h3>Activity 4: Class Design Workshop</h3>
                <div class="code-editor-container">
                    <h4>Design Your Own Class</h4>
                    <p>Choose a real-world object and create a class for it. Follow the template below:</p>
                    <div id="classDesignEditor" class="python-editor"></div>
                    <div class="code-controls">
                        <button class="button" onclick="runClassDesign()">▶️ Test Your Class</button>
                        <button class="button secondary" onclick="loadClassTemplate()">📝 Load Template</button>
                        <button class="button secondary" onclick="loadClassExample('student')">👨‍🎓 Student Example</button>
                        <button class="button secondary" onclick="loadClassExample('book')">📚 Book Example</button>
                        <button class="button secondary" onclick="loadClassExample('phone')">📱 Phone Example</button>
                    </div>
                    <div id="classDesignOutput" class="code-output">Output will appear here...</div>
                </div>

                <h3>Activity 5: Object Creation Practice</h3>
                <div class="code-editor-container">
                    <h4>Creating Multiple Objects</h4>
                    <p>Practice creating multiple objects from the same class and see how each maintains its own state:</p>
                    <div id="multiObjectEditor" class="python-editor"></div>
                    <div class="code-controls">
                        <button class="button" onclick="runMultiObject()">▶️ Run Code</button>
                    </div>
                    <div id="multiObjectOutput" class="code-output">Output will appear here...</div>
                </div>
            </section>

            <section class="section">
                <h2>🌍 Real World Connection</h2>
                <div class="real-world">
                    <h3>OOP is Everywhere in Modern Software!</h3>
                    
                    <p><strong>Video Games:</strong> Every character, weapon, and item is an object. When you play Minecraft, each block is an object with properties (type, durability) and methods (break, place).</p>
                    
                    <p><strong>Social Media:</strong> On Instagram, each post is an object with attributes (image, caption, likes) and methods (like, comment, share).</p>
                    
                    <p><strong>Banking Apps:</strong> Your account is an object with attributes (balance, account number) and methods (deposit, withdraw, transfer).</p>
                    
                    <p><strong>E-commerce:</strong> Every product on Amazon is an object with properties (price, name, stock) and behaviors (add to cart, review, buy).</p>
                    
                    <p><strong>Operating Systems:</strong> Windows represents every file as an object with properties (name, size, date) and methods (open, delete, copy).</p>
                    
                    <div style="background: #e8f5e8; padding: 1rem; border-radius: 6px; margin-top: 1rem;">
                        <p><strong>💡 Fun Fact:</strong> Python itself is built using OOP! Everything in Python is an object - even numbers and strings have methods you can call!</p>
                    </div>
                </div>
            </section>
            
            <section class="section">
                <h2>🐞 Spot the Syntax Error</h2>
                <p>A big part of programming is learning to spot and fix errors. Look at the Python code snippets below and identify the mistake in each one.</p>

                <div class="syntax-challenge-container">
                    <div class="challenge-item">
                        <h4>Challenge 1 of 4</h4>
                        <pre><code>class Dog:
    def __init__(self, name):
        self.name = name

    def bark(self):
        # This method has an error
        print(name, "says woof!")</code></pre>
                        <p class="challenge-question">What is the error in the `bark` method?</p>
                        <div class="challenge-options" id="challenge1-options">
                            <label><input type="radio" name="challenge1"> The method needs a docstring.</label>
                            <label><input type="radio" name="challenge1" data-correct="true"> It should be `self.name` to access the attribute.</label>
                            <label><input type="radio" name="challenge1"> `print` statements cannot be used inside methods.</label>
                        </div>
                        <button class="button" onclick="checkSyntaxAnswer(1)">Check Answer</button>
                        <div class="feedback" id="feedback1"></div>
                    </div>

                    <div class="challenge-item">
                        <h4>Challenge 2 of 4</h4>
                        <pre><code>class Student
    def __init__(self, name):
        self.name = name
        self.grades = []</code></pre>
                        <p class="challenge-question">What is the error in the first line of this code?</p>
                        <div class="challenge-options" id="challenge2-options">
                            <label><input type="radio" name="challenge2" data-correct="true"> It is missing a colon `:` after `Student`.</label>
                            <label><input type="radio" name="challenge2"> Class names must be in all caps.</label>
                            <label><input type="radio" name="challenge2"> The `pass` keyword is missing.</label>
                        </div>
                        <button class="button" onclick="checkSyntaxAnswer(2)">Check Answer</button>
                        <div class="feedback" id="feedback2"></div>
                    </div>
                    
                    <div class="challenge-item">
                        <h4>Challenge 3 of 4</h4>
                        <pre><code>class Cat:
    def __init__(self, name):
        self.name = name

    def introduce():
        # This method has an error
        print("Hello, my name is", self.name)</code></pre>
                        <p class="challenge-question">What is the error in the `introduce` method definition?</p>
                        <div class="challenge-options" id="challenge3-options">
                            <label><input type="radio" name="challenge3"> The method name is too long.</label>
                            <label><input type="radio" name="challenge3"> Methods cannot have print statements.</label>
                            <label><input type="radio" name="challenge3" data-correct="true"> It is missing the `self` parameter in `introduce(self)`.</label>
                        </div>
                        <button class="button" onclick="checkSyntaxAnswer(3)">Check Answer</button>
                        <div class="feedback" id="feedback3"></div>
                    </div>

                    <div class="challenge-item">
                        <h4>Challenge 4 of 4</h4>
                        <pre><code>class Book:
    def _init_(self, title):
        self.title = title</code></pre>
                        <p class="challenge-question">What is the error in the initializer method?</p>
                        <div class="challenge-options" id="challenge4-options">
                            <label><input type="radio" name="challenge4" data-correct="true"> It should be `__init__` with double underscores.</label>
                            <label><input type="radio" name="challenge4"> The `title` parameter should come before `self`.</label>
                            <label><input type="radio" name="challenge4"> `self` is a reserved keyword and cannot be used.</label>
                        </div>
                        <button class="button" onclick="checkSyntaxAnswer(4)">Check Answer</button>
                        <div class="feedback" id="feedback4"></div>
                    </div>
                </div>
            </section>
            
            <section class="section">
                <h2>🔁 Code Refactoring Challenge</h2>
                <p>The code below works, but it's repetitive and hard to maintain. Rewrite it in the editor on the right using a `Player` class to make it cleaner and more scalable.</p>
                <div class="refactor-container">
                    <div class="refactor-side">
                        <h4>❌ Procedural Code (Before)</h4>
                        <pre><code># This code is repetitive
player1_name = "Alice"
player1_health = 100
player1_damage = 15

player2_name = "Bob"
player2_health = 120
player2_damage = 10

# Attacking logic
player2_health = player2_health - player1_damage
print(f"{player1_name} attacks {player2_name}!")
print(f"{player2_name}'s health is now {player2_health}")

print("-" * 20)

player1_health = player1_health - player2_damage
print(f"{player2_name} attacks {player1_name}!")
print(f"{player1_name}'s health is now {player1_health}")
</code></pre>
                        <div class="code-output" id="procedural-refactor-output"></div>
                    </div>
                    <div class="refactor-side">
                        <h4>✅ OOP Code (Your Turn)</h4>
                        <div id="refactorEditor"></div>
                        <div class="code-output" id="oop-refactor-output"></div>
                    </div>
                </div>
                <div class="refactor-controls">
                    <button class="button success" onclick="runRefactorChallenge()">Run & Compare</button>
                    <div class="feedback" id="refactor-feedback"></div>
                </div>
            </section>
            
            <section class="section">
                <h2>🚗 OOP Garage Simulation</h2>
                <p>This simulation shows how multiple objects maintain their own state. Add cars to the garage, then use the global controls to make them race. Watch how each car's fuel changes independently.</p>
                
                <div class="garage-simulation-container">
                    <div class="garage-controls">
                        <h4>Admin Panel</h4>
                        <input type="text" id="car-name-input" placeholder="Enter car name (e.g., Red Racer)">
                        <button class="button" onclick="addCarToGarage()">Add Car</button>
                        <hr>
                        <h4>Global Controls</h4>
                        <button class="button success" onclick="raceAllCars()">Race One Lap!</button>
                    </div>
                    <div class="garage-display">
                        <h4>Your Garage</h4>
                        <div id="garage-container">
                            </div>
                    </div>
                </div>
                <div class="garage-code-reference">
                    <h4>Code Reference: The `Car` Class</h4>
                    <pre><code>class Car:
    def __init__(self, name):
        self.name = name
        self.fuel = 100 # Starts with a full tank
        self.laps_completed = 0

    def race_lap(self):
        fuel_used = 5 + (len(self.name) % 5) # Use name for variety
        if self.fuel >= fuel_used:
            self.fuel -= fuel_used
            self.laps_completed += 1
            return f"{self.name} completed a lap!"
        else:
            return f"{self.name} is out of fuel!"
</code></pre>
                </div>
            </section>

            <section class="section">
                <h2>📝 Practice Exam Questions</h2>
                
                <div class="exam-question">
                    <div class="question-header">
                        <h3>Question 1</h3>
                        <span class="marks">4 marks</span>
                    </div>
                    <p>Explain the difference between a class and an object in object-oriented programming. Give an example to illustrate your answer.</p>
                    <textarea class="answer-area" id="q1-answer" placeholder="Write your answer here..."></textarea>
                    <div class="exam-controls">
                        <button class="button" onclick="toggleMarkScheme('q1')">Show Mark Scheme</button>
                        <div class="predicted-mark">
                            <label>Predicted Mark:</label>
                            <input type="number" min="0" max="4" id="q1-mark" style="width: 60px;">
                            <span>/ 4</span>
                        </div>
                    </div>
                    <div class="mark-scheme" id="q1-scheme">
                        <h4>Mark Scheme:</h4>
                        <ul>
                            <li>A class is a blueprint/template for creating objects (1 mark)</li>
                            <li>An object is an instance/specific occurrence of a class (1 mark)</li>
                            <li>Valid example given, e.g., Car class vs specific car object (1 mark)</li>
                            <li>Clear explanation linking the example to the concepts (1 mark)</li>
                        </ul>
                        <p><strong>Example answer:</strong> A class is like a blueprint or template that defines the structure and behavior of objects. An object is a specific instance created from that class. For example, 'Car' would be a class that defines what attributes (color, model) and methods (drive, stop) all cars have, while 'my_toyota' would be a specific object created from the Car class with its own values like color='red' and model='Corolla'.</p>
                    </div>
                </div>

                <div class="exam-question">
                    <div class="question-header">
                        <h3>Question 2</h3>
                        <span class="marks">6 marks</span>
                    </div>
                    <p>A library wants to create a system to manage books. Design a Book class with:</p>
                    <ul>
                        <li>At least 3 appropriate attributes</li>
                        <li>An initialization method</li>
                        <li>At least 2 other methods</li>
                    </ul>
                    <div id="q2-editor"></div>
                    <div id="q2-output" class="code-output" style="display: none;"></div>
                    <div class="exam-controls">
                        <button class="button success" onclick="runQ2Code()">▶️ Run Code</button>
                        <button class="button" onclick="toggleMarkScheme('q2')">Show Mark Scheme</button>
                        <div class="predicted-mark">
                            <label>Predicted Mark:</label>
                            <input type="number" min="0" max="6" id="q2-mark" style="width: 60px;">
                            <span>/ 6</span>
                        </div>
                    </div>
                    <div class="mark-scheme" id="q2-scheme">
                        <h4>Mark Scheme:</h4>
                        <ul>
                            <li>Class definition with correct syntax: class Book: (1 mark)</li>
                            <li>At least 3 appropriate attributes (e.g., title, author, ISBN, available) (1 mark)</li>
                            <li>__init__ method correctly defined with self and parameters (1 mark)</li>
                            <li>Attributes correctly initialized with self.attribute = value (1 mark)</li>
                            <li>Two appropriate methods defined (e.g., borrow(), return_book()) (1 mark)</li>
                            <li>Methods use self parameter and are logically implemented (1 mark)</li>
                        </ul>
                        <p><strong>Example answer:</strong></p>
                        <pre style="background: #f8f9fa; padding: 1rem; border-radius: 4px;">
class Book:
    def __init__(self, title, author, isbn):
        self.title = title
        self.author = author
        self.isbn = isbn
        self.available = True
    
    def borrow(self):
        if self.available:
            self.available = False
            return f"{self.title} has been borrowed"
        else:
            return f"{self.title} is not available"
    
    def return_book(self):
        self.available = True
        return f"{self.title} has been returned"</pre>
                    </div>
                </div>

                <div class="exam-question">
                    <div class="question-header">
                        <h3>Question 3</h3>
                        <span class="marks">3 marks</span>
                    </div>
                    <p>State three advantages of using object-oriented programming instead of procedural programming.</p>
                    <textarea class="answer-area" id="q3-answer" placeholder="Write your answer here..."></textarea>
                    <div class="exam-controls">
                        <button class="button" onclick="toggleMarkScheme('q3')">Show Mark Scheme</button>
                        <div class="predicted-mark">
                            <label>Predicted Mark:</label>
                            <input type="number" min="0" max="3" id="q3-mark" style="width: 60px;">
                            <span>/ 3</span>
                        </div>
                    </div>
                    <div class="mark-scheme" id="q3-scheme">
                        <h4>Mark Scheme:</h4>
                        <p>One mark for each valid advantage (max 3):</p>
                        <ul>
                            <li>Code reusability - classes can be reused in different programs</li>
                            <li>Encapsulation - data and methods are bundled together</li>
                            <li>Modularity - easier to maintain and modify code</li>
                            <li>Real-world modeling - code structure mirrors real-world entities</li>
                            <li>Easier debugging - problems can be isolated to specific objects</li>
                            <li>Team development - different developers can work on different classes</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section class="section">
                <h2>✨ Key Takeaways</h2>
                <div class="key-takeaways">
                    <ul>
                        <li>Object-Oriented Programming organizes code into objects that contain both data and functions</li>
                        <li>A class is a blueprint/template; an object is a specific instance of a class</li>
                        <li>Objects have attributes (data/properties) and methods (functions/behaviors)</li>
                        <li>OOP makes code more organized, reusable, and easier to understand</li>
                        <li>In Python, we define classes using the 'class' keyword</li>
                        <li>The __init__ method is special - it runs when we create a new object</li>
                        <li>We use 'self' to refer to the current object inside class methods</li>
                        <li>OOP mirrors how we think about real-world entities and their interactions</li>
                    </ul>
                </div>
            </section>
            
            <section class="section">
                <h2>🤝 OOP Vocabulary Match-Up</h2>
                <p>Let's check your understanding of the key terms. Drag each term from the left and drop it onto its correct definition on the right.</p>

                <div class="vocab-match-container">
                    <div class="terms-column" id="terms-source">
                        <div class="term-card" id="term1" draggable="true" data-match-id="1">Class</div>
                        <div class="term-card" id="term2" draggable="true" data-match-id="2">Object</div>
                        <div class="term-card" id="term3" draggable="true" data-match-id="3">Attribute</div>
                        <div class="term-card" id="term4" draggable="true" data-match-id="4">Method</div>
                        <div class="term-card" id="term5" draggable="true" data-match-id="5">Instantiation</div>
                        <div class="term-card" id="term6" draggable="true" data-match-id="6">__init__</div>
                        <div class="term-card" id="term7" draggable="true" data-match-id="7">self</div>
                    </div>

                    <div class="definitions-column">
                        <div class="definition-slot" data-match-id="4">A function that belongs to an object and defines its behavior.</div>
                        <div class="definition-slot" data-match-id="7">A keyword used inside a method to refer to the current object instance.</div>
                        <div class="definition-slot" data-match-id="1">A blueprint or template used to create objects.</div>
                        <div class="definition-slot" data-match-id="5">The process of creating a new object from a class.</div>
                        <div class="definition-slot" data-match-id="2">A specific instance of a class, with its own data.</div>
                        <div class="definition-slot" data-match-id="6">A special method that runs automatically when a new object is created.</div>
                        <div class="definition-slot" data-match-id="3">A variable or piece of data that belongs to an object.</div>
                    </div>
                </div>
                <div class="vocab-controls">
                    <div class="feedback" id="vocab-feedback"></div>
                    <button class="button secondary" onclick="resetVocabMatch()">Reset Game</button>
                </div>
            </section>

            <section class="section">
                <h2>🎥 Video Resources</h2>
                
                <div class="video-container">
                    <h3>Video 1: Introduction to OOP Concepts</h3>
                    <div class="video-wrapper">
                        <iframe src="https://www.youtube.com/embed/pTB0EiLXUC8" 
                                title="Object-oriented Programming in Python" 
                                frameborder="0" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                allowfullscreen>
                        </iframe>
                    </div>
                    <div class="video-notes">
                        <label for="video1-notes"><strong>Your Notes:</strong></label>
                        <textarea id="video1-notes" placeholder="Take notes on key OOP concepts..."></textarea>
                    </div>
                </div>

                <div class="video-container">
                    <h3>Video 2: Classes and Objects in Python</h3>
                    <div class="video-wrapper">
                        <iframe src="https://www.youtube.com/embed/ZDa-Z5JzLYM" 
                                title="Python Classes and Objects" 
                                frameborder="0" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                allowfullscreen>
                        </iframe>
                    </div>
                    <div class="video-notes">
                        <label for="video2-notes"><strong>Your Notes:</strong></label>
                        <textarea id="video2-notes" placeholder="Take notes on Python class syntax..."></textarea>
                    </div>
                </div>
            </section>

            <section class="section">
                <h2>🌟 Extension Activities</h2>
                <div class="extension">
                    <h3>Challenge Tasks</h3>
                    
                    <h4>1. Design a School System</h4>
                    <p>Create classes for a school management system. Think about:</p>
                    <ul>
                        <li>What classes would you need? (Student, Teacher, Course, etc.)</li>
                        <li>What attributes would each have?</li>
                        <li>What methods would be useful?</li>
                        <li>How would these objects interact?</li>
                    </ul>
                    
                    <h4>2. Research Task: OOP Languages</h4>
                    <p>Research and compare how OOP is implemented in different programming languages:</p>
                    <ul>
                        <li>How does Java's OOP differ from Python's?</li>
                        <li>What about C++ or C#?</li>
                        <li>Which language enforces OOP principles most strictly?</li>
                    </ul>
                    
                    <h4>3. Advanced Virtual Pet</h4>
                    <p>Extend the virtual pet example to include:</p>
                    <ul>
                        <li>Multiple types of pets (inheritance preview!)</li>
                        <li>Pet interactions (pets can play together)</li>
                        <li>Save/load pet state to a file</li>
                        <li>A simple text-based game loop</li>
                    </ul>
                    
                    <h4>4. Real-World Analysis</h4>
                    <p>Choose a popular application (like Spotify, WhatsApp, or a game you play) and:</p>
                    <ul>
                        <li>Identify at least 5 objects that might exist in its code</li>
                        <li>List possible attributes and methods for each</li>
                        <li>Draw a diagram showing how they might interact</li>
                    </ul>
                </div>
            </section>

            <section class="section">
                <h2>➡️ What's Next?</h2>
                <div class="whats-next">
                    <h3>Coming Up: Classes and Objects in Detail</h3>
                    <p>Now that you understand the basics of OOP, we'll dive deeper into creating and using classes effectively!</p>
                    
                    <p><strong>In the next lesson, you'll learn:</strong></p>
                    <ul style="text-align: left; display: inline-block;">
                        <li>How to design classes with multiple attributes</li>
                        <li>The __init__ method in detail</li>
                        <li>Creating multiple objects from one class</li>
                        <li>Object interactions and relationships</li>
                        <li>Best practices for class design</li>
                    </ul>
                    
                    <a href="lesson-2-classes-objects.html" class="next-lesson-card">
                        <strong>Lesson 2: Classes and Objects</strong><br>
                        <small>Deep dive into Python classes</small>
                    </a>
                </div>
            </section>
        </div>
    </div>

    <script>
        // Global variables
        let pyodide = null;
        let editors = {};
        let petObject = null;
        
        // --- Progress Tracker Logic ---
        function updateSkill(skillId) {
            const skillBadge = document.getElementById(skillId);
            if (skillBadge && skillBadge.classList.contains('locked')) {
                skillBadge.classList.remove('locked');
                skillBadge.classList.add('unlocked');
                localStorage.setItem(skillId, 'unlocked');
            }
        }

        function loadProgress() {
            const skills = document.querySelectorAll('.skill-badge');
            skills.forEach(skill => {
                if (localStorage.getItem(skill.id) === 'unlocked') {
                    skill.classList.remove('locked');
                    skill.classList.add('unlocked');
                }
            });
        }

        // Initialize Python environment
        async function initializePython() {
            pyodide = await loadPyodide();
            document.getElementById('loadingIndicator').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
            initializeEditors();
            updateProgress();
        }

        // Initialize CodeMirror editors
        function initializeEditors() {
            // Procedural editor
            editors.procedural = CodeMirror(document.getElementById('proceduralEditor'), {
                mode: 'python',
                theme: 'default',
                lineNumbers: true,
                value: `# Procedural Approach - Everything is separate
dog_name = "Buddy"
dog_age = 3
dog_breed = "Labrador"

cat_name = "Whiskers"
cat_age = 2
cat_breed = "Persian"

def dog_bark():
    print(f"{dog_name} says: Woof!")

def cat_meow():
    print(f"{cat_name} says: Meow!")

def dog_birthday():
    global dog_age
    dog_age += 1
    print(f"{dog_name} is now {dog_age} years old")

# Using the functions
dog_bark()
cat_meow()
dog_birthday()`
            });

            // OOP editor
            editors.oop = CodeMirror(document.getElementById('oopEditor'), {
                mode: 'python',
                theme: 'default',
                lineNumbers: true,
                value: `# Object-Oriented Approach - Everything is organized
class Pet:
    def __init__(self, name, age, breed):
        self.name = name
        self.age = age
        self.breed = breed
    
    def make_sound(self):
        pass  # To be defined in specific pet types
    
    def birthday(self):
        self.age += 1
        print(f"{self.name} is now {self.age} years old")

class Dog(Pet):
    def make_sound(self):
        print(f"{self.name} says: Woof!")

class Cat(Pet):
    def make_sound(self):
        print(f"{self.name} says: Meow!")

# Creating objects
dog = Dog("Buddy", 3, "Labrador")
cat = Cat("Whiskers", 2, "Persian")

# Using the objects
dog.make_sound()
cat.make_sound()
dog.birthday()`
            });

            // Pet editor
            editors.pet = CodeMirror(document.getElementById('petEditor'), {
                mode: 'python',
                theme: 'default',
                lineNumbers: true,
                value: `class VirtualPet:
    # Define the initialization method. It should accept self, name, and an optional pet_type.
    
        # Inside __init__, create an attribute for name, setting it to the name parameter.
        # Create an attribute for pet_type, setting it to the pet_type parameter.
        # Create an attribute for hunger and set it to an initial value of 50.
        # Create an attribute for happiness and set it to an initial value of 80.
        # Create an attribute for energy and set it to an initial value of 70.
    
    # Define the feed method. It should accept self.
    
        # Decrease the hunger attribute. Use max(0, ...) to prevent it from going below 0.
        # Increase the happiness attribute. Use min(100, ...) to prevent it from going over 100.
        # Return a string saying the pet enjoyed the meal.
    
    # Define the play method. It should accept self.
    
        # Check if the pet's energy is too low (e.g., less than 20). If so, return a "too tired" message.
        # If the pet has enough energy, increase happiness (don't exceed 100).
        # Decrease energy (don't go below 0).
        # Increase hunger slightly (don't exceed 100).
        # Return a string saying the pet had fun.
    
    # Define the sleep method. It should accept self.
    
        # Increase the energy attribute (don't exceed 100).
        # Increase happiness slightly (don't exceed 100).
        # Return a string saying the pet had a nice nap.
    
    # Define the status method. It should accept self.
    
        # Return a formatted string showing the pet's name, hunger, happiness, and energy.


# Create an instance of your VirtualPet class called 'my_pet'. Give it a name like "Buddy".
# Print the status of your newly created pet by calling its status method.
`
            });

            // Class design editor
            editors.classDesign = CodeMirror(document.getElementById('classDesignEditor'), {
                mode: 'python',
                theme: 'default',
                lineNumbers: true,
                value: `# Design your own class here!
# Choose something from real life and model it as a class

class YourClassNameHere:
    def __init__(self):
        # Initialize your attributes here
        pass
    
    def your_method_here(self):
        # Define what this method does
        pass

# Create an object from your class
# Test your methods`
            });

            // Multi-object editor
            editors.multiObject = CodeMirror(document.getElementById('multiObjectEditor'), {
                mode: 'python',
                theme: 'default',
                lineNumbers: true,
                value: `class Student:
    def __init__(self, name, age, grade):
        self.name = name
        self.age = age
        self.grade = grade
        self.subjects = []
    
    def add_subject(self, subject):
        self.subjects.append(subject)
        print(f"{self.name} enrolled in {subject}")
    
    def introduce(self):
        print(f"Hi! I'm {self.name}, {self.age} years old, in grade {self.grade}")
        if self.subjects:
            print(f"I study: {', '.join(self.subjects)}")

# Create multiple student objects
alice = Student("Alice", 16, 11)
bob = Student("Bob", 17, 12)
charlie = Student("Charlie", 16, 11)

# Each object maintains its own state
alice.add_subject("Computer Science")
alice.add_subject("Mathematics")

bob.add_subject("Physics")
bob.add_subject("Chemistry")

charlie.add_subject("Computer Science")
charlie.add_subject("Art")

# Display information
print("\\n=== Our Students ===")
alice.introduce()
print()
bob.introduce()
print()
charlie.introduce()`
            });

            // Exam Question 2 editor
            editors.q2 = CodeMirror(document.getElementById('q2-editor'), {
                mode: 'python',
                theme: 'default',
                lineNumbers: true,
                value: `# Write the Python code for the Book class here.\n\n`
            });
            
            editors.refactor = CodeMirror(document.getElementById('refactorEditor'), {
                mode: 'python',
                theme: 'default',
                lineNumbers: true,
                value: `# 1. Create a Player class here.\n# 2. It needs an __init__ method for name, health, and damage.\n# 3. It needs an attack method that takes another player ('target') as a parameter.\n\n\n# 4. Create two instances of your Player class\n\n\n# 5. Make them attack each other`
            });
        }

        // Object Detective Game
        let selectedCards = [];
        let gameCompleted = false;

        function resetObjectGame() {
            selectedCards = [];
            gameCompleted = false;
            document.querySelectorAll('.game-card').forEach(card => {
                card.classList.remove('selected', 'correct', 'incorrect');
            });
            document.getElementById('gameScore').textContent = 'Score: 0/5 correct objects identified';
        }

        document.querySelectorAll('.game-card').forEach(card => {
            card.addEventListener('click', function() {
                if (gameCompleted) return;
                
                if (this.classList.contains('selected')) {
                    this.classList.remove('selected');
                    selectedCards = selectedCards.filter(c => c !== this);
                } else {
                    this.classList.add('selected');
                    selectedCards.push(this);
                }
            });
        });

        function checkObjectGame() {
            gameCompleted = true;
            let correct = 0;
            const correctObjects = document.querySelectorAll('.game-card[data-object="true"]').length;
            
            document.querySelectorAll('.game-card').forEach(card => {
                const isObject = card.dataset.object === 'true';
                const isSelected = card.classList.contains('selected');
                
                if (isObject && isSelected) {
                    card.classList.add('correct');
                    correct++;
                } else if (!isObject && isSelected) {
                    card.classList.add('incorrect');
                } else if (isObject && !isSelected) {
                    card.classList.add('incorrect');
                }
            });
            
            document.getElementById('gameScore').textContent = `Score: ${correct}/${correctObjects} correct objects identified`;
            
            if (correct === correctObjects) {
                updateSkill('skill-objects');
                setTimeout(() => alert('🎉 Perfect! You understand what makes a good object!'), 100);
            }
        }

        // Generic code runner function
        async function runCode(editorKey, outputId) {
            const code = editors[editorKey].getValue();
            const outputEl = document.getElementById(outputId);
            outputEl.style.display = 'block'; // Make sure output is visible
            
            try {
                await pyodide.runPythonAsync(`
import sys
from io import StringIO
sys.stdout = StringIO()
${code}
output = sys.stdout.getvalue()
                `);
                const output = pyodide.globals.get('output');
                outputEl.textContent = output || 'Code executed successfully. No output produced.';
                outputEl.style.color = '#f0f0f0';
            } catch (error) {
                outputEl.textContent = `Error: ${error.message}`;
                outputEl.style.color = '#e53e3e';
            }
        }

        // Specific run functions
        function runProceduralCode() { runCode('procedural', 'proceduralOutput'); }
        function runOOPCode() { runCode('oop', 'oopOutput'); }
        async function runPetCode() {
            await runCode('pet', 'petOutput');
            if (!document.getElementById('petOutput').textContent.toLowerCase().includes('error')) {
                updateSkill('skill-instantiation');
            }
            updatePetDisplay();
        }
        function runClassDesign() { runCode('classDesign', 'classDesignOutput'); }
        function runMultiObject() { runCode('multiObject', 'multiObjectOutput'); }
        function runQ2Code() { runCode('q2', 'q2-output'); }


        // Pet interaction functions
        async function petAction(action) {
             if (!pyodide.globals.get('my_pet')) {
                document.getElementById('petOutput').textContent = 'Create your pet first!';
                return;
            }
            try {
                await pyodide.runPythonAsync(`
import sys
from io import StringIO
sys.stdout = StringIO()
result = my_pet.${action}()
print(result)
print(my_pet.status())
output = sys.stdout.getvalue()
                `);
                const output = pyodide.globals.get('output');
                document.getElementById('petOutput').textContent = output;
                updatePetDisplay();
            } catch (error) {
                document.getElementById('petOutput').textContent = `Error: ${error.message}`;
            }
        }
        
        function feedPet() { petAction('feed'); }
        function playWithPet() { petAction('play'); }
        function petSleep() { petAction('sleep'); }


        async function updatePetDisplay() {
            if (!pyodide.globals.get('my_pet')) return;
            try {
                const hunger = await pyodide.runPythonAsync('my_pet.hunger');
                const happiness = await pyodide.runPythonAsync('my_pet.happiness');
                const energy = await pyodide.runPythonAsync('my_pet.energy');
                
                document.getElementById('hungerValue').textContent = hunger;
                document.getElementById('hungerBar').style.width = `${hunger}%`;
                
                document.getElementById('happinessValue').textContent = happiness;
                document.getElementById('happinessBar').style.width = `${happiness}%`;
                
                document.getElementById('energyValue').textContent = energy;
                document.getElementById('energyBar').style.width = `${energy}%`;
                
                // Update emoji based on stats
                if (happiness > 80) {
                    document.getElementById('petEmoji').textContent = '🐕';
                } else if (happiness > 50) {
                    document.getElementById('petEmoji').textContent = '🐶';
                } else {
                    document.getElementById('petEmoji').textContent = '😢';
                }
            } catch (error) {
                // Pet not created yet or error in attributes
            }
        }

        // Class design loader functions
        function loadClassTemplate() {
            editors.classDesign.setValue(`# Class Template
class MyClass:
    def __init__(self, attribute1, attribute2):
        """Initialize the object with given attributes"""
        self.attribute1 = attribute1
        self.attribute2 = attribute2
        self.attribute3 = "default value"
    
    def method1(self):
        """Describe what this method does"""
        return f"Attribute 1 is: {self.attribute1}"
    
    def method2(self, parameter):
        """Another method that takes a parameter"""
        self.attribute2 = parameter
        return f"Attribute 2 changed to: {self.attribute2}"

# Create and test your object
obj = MyClass("value1", "value2")
print(obj.method1())
print(obj.method2("new value"))
print(f"Final state: {obj.attribute1}, {obj.attribute2}, {obj.attribute3}")`);
        }

        function loadClassExample(type) {
            const examples = {
                student: `class Student:
    def __init__(self, name, student_id, year):
        self.name = name
        self.student_id = student_id
        self.year = year
        self.grades = {}
        self.attendance = 100
    
    def add_grade(self, subject, grade):
        self.grades[subject] = grade
        print(f"Added grade {grade} for {subject}")
    
    def get_average(self):
        if not self.grades:
            return 0
        return sum(self.grades.values()) / len(self.grades)
    
    def update_attendance(self, percentage):
        self.attendance = percentage
        return f"{self.name}'s attendance is now {percentage}%"

# Test the Student class
student1 = Student("Emma Wilson", "SW2024001", 11)
student1.add_grade("Computer Science", 95)
student1.add_grade("Mathematics", 87)
student1.add_grade("Physics", 91)

print(f"Student: {student1.name}")
print(f"Average grade: {student1.get_average():.1f}")
print(student1.update_attendance(98))`,

                book: `class Book:
    def __init__(self, title, author, isbn, pages):
        self.title = title
        self.author = author
        self.isbn = isbn
        self.pages = pages
        self.current_page = 0
        self.is_borrowed = False
        self.borrower = None
    
    def read_pages(self, num_pages):
        self.current_page = min(self.current_page + num_pages, self.pages)
        progress = (self.current_page / self.pages) * 100
        return f"Read {num_pages} pages. Progress: {progress:.1f}%"
    
    def borrow(self, borrower_name):
        if not self.is_borrowed:
            self.is_borrowed = True
            self.borrower = borrower_name
            return f"{borrower_name} borrowed '{self.title}'"
        else:
            return f"Sorry, '{self.title}' is already borrowed by {self.borrower}"
    
    def return_book(self):
        if self.is_borrowed:
            borrower = self.borrower
            self.is_borrowed = False
            self.borrower = None
            return f"{borrower} returned '{self.title}'"
        else:
            return f"'{self.title}' wasn't borrowed"

# Test the Book class
book1 = Book("The Hitchhiker's Guide", "Douglas Adams", "978-0345391803", 224)
print(book1.borrow("Alice"))
print(book1.read_pages(50))
print(book1.read_pages(100))
print(book1.borrow("Bob"))  # Should fail
print(book1.return_book())`,

                phone: `class Smartphone:
    def __init__(self, brand, model, storage_gb):
        self.brand = brand
        self.model = model
        self.storage_gb = storage_gb
        self.battery_percentage = 100
        self.apps = ["Phone", "Messages", "Camera"]
        self.is_on = True
        self.brightness = 50
    
    def install_app(self, app_name):
        if app_name not in self.apps:
            self.apps.append(app_name)
            return f"Installed {app_name}"
        else:
            return f"{app_name} is already installed"
    
    def use_phone(self, minutes):
        if self.is_on:
            battery_drain = minutes * 0.5
            self.battery_percentage = max(0, self.battery_percentage - battery_drain)
            if self.battery_percentage == 0:
                self.is_on = False
                return "Phone died! Please charge."
            return f"Used phone for {minutes} minutes. Battery: {self.battery_percentage:.1f}%"
        else:
            return "Phone is off. Please turn it on first."
    
    def charge(self, minutes):
        charge_amount = minutes * 2
        self.battery_percentage = min(100, self.battery_percentage + charge_amount)
        if not self.is_on and self.battery_percentage > 0:
            self.is_on = True
        return f"Charged for {minutes} minutes. Battery: {self.battery_percentage:.1f}%"
    
    def list_apps(self):
        return f"Installed apps: {', '.join(self.apps)}"

# Test the Smartphone class
my_phone = Smartphone("Apple", "iPhone 13", 128)
print(f"My {my_phone.brand} {my_phone.model}")
print(my_phone.install_app("WhatsApp"))
print(my_phone.install_app("Instagram"))
print(my_phone.use_phone(120))
print(my_phone.list_apps())
print(my_phone.charge(30))`
            };
            
            editors.classDesign.setValue(examples[type]);
        }
        
        function buildRobot() {
            // 1. Get values from the input fields
            const name = document.getElementById('robot-name-input').value;
            const color = document.getElementById('robot-color-input').value;
            const serial = document.getElementById('robot-sn-input').value;
            const outputContainer = document.getElementById('robot-objects-container');

            // 2. Simple validation
            if (!name || !serial) {
                alert('Please provide at least a Name and a Serial # for the robot.');
                return; // Stop the function
            }

            // 3. Create the new robot card element
            const robotCard = document.createElement('div');
            robotCard.className = 'robot-card';
            
            // 4. Populate the card with the object's unique data
            robotCard.innerHTML = `
                <div class="robot-card-header">${name}</div>
                <ul>
                    <li><strong>Color:</strong> ${color || 'N/A'}</li>
                    <li><strong>Serial #:</strong> ${serial}</li>
                </ul>
            `;
            
            // 5. Add the new card to the factory output
            outputContainer.appendChild(robotCard);

            // 6. Clear the input fields for the next robot
            document.getElementById('robot-name-input').value = '';
            document.getElementById('robot-color-input').value = '';
            document.getElementById('robot-sn-input').value = '';
            document.getElementById('robot-name-input').focus();
        }
        
        // --- Sorter Game Logic ---
        function checkSorter() {
            const dropZones = document.querySelectorAll('.drop-zone');
            let correctCount = 0;
            let totalCards = 0;

            dropZones.forEach(zone => {
                const correctType = zone.dataset.type;
                const cardsInZone = zone.querySelectorAll('.sorter-card');
                
                cardsInZone.forEach(card => {
                    totalCards++;
                    if (card.dataset.type === correctType) {
                        card.classList.add('correct');
                        card.classList.remove('incorrect');
                        correctCount++;
                    } else {
                        card.classList.add('incorrect');
                        card.classList.remove('correct');
                    }
                });
            });

            document.getElementById('sorter-score').textContent = `Score: ${correctCount}/6`;
            if (correctCount === 6) {
                updateSkill('skill-attributes');
                setTimeout(() => alert('🎉 Perfect score! You know your attributes from your methods!'), 100);
            }
        }
        
        function resetSorter() {
            const sourceContainer = document.getElementById('card-source');
            const allCards = document.querySelectorAll('.sorter-card');

            allCards.forEach(card => {
                card.classList.remove('correct', 'incorrect');
                sourceContainer.appendChild(card);
            });
            
            document.getElementById('sorter-score').textContent = `Score: 0/6`;
        }
        
        function checkSyntaxAnswer(challengeNum) {
            const feedbackEl = document.getElementById(`feedback${challengeNum}`);
            const selectedOption = document.querySelector(`input[name="challenge${challengeNum}"]:checked`);

            if (!selectedOption) {
                alert('Please select an answer first!');
                return;
            }

            if (selectedOption.hasAttribute('data-correct')) {
                updateSkill('skill-debugging');
                feedbackEl.textContent = 'Correct! Well spotted.';
                feedbackEl.className = 'feedback correct';
            } else {
                feedbackEl.textContent = 'Not quite. That isn\'t the primary error in this snippet. Try again!';
                feedbackEl.className = 'feedback incorrect';
            }
        }
        
        // --- AI Hint Logic ---
        function getAIHint(activityKey) {
            const code = editors[activityKey].getValue();
            const hintOutputEl = document.getElementById(`${activityKey}-hint-output`);
            let hint = '';

            // This acts as a router to different analysis functions
            if (activityKey === 'pet') {
                hint = analyzePetCode(code);
            } else if (activityKey === 'q2') {
                // You could create an analyzeBookCode(code) function here
                hint = "Hint functionality for this question is not yet implemented.";
            } else {
                hint = "No hints available for this section.";
            }
            
            hintOutputEl.style.display = 'block';
            hintOutputEl.textContent = `💡 Hint: ${hint}`;
        }

        function analyzePetCode(code) {
            if (code.trim() === '') {
                return "A great place to start is by defining the `__init__` method. This method sets up the object's initial attributes. What attributes does a virtual pet need?";
            }
            if (!code.includes("class VirtualPet")) {
                 return "It looks like the class definition itself is missing or has a typo. Remember, classes are defined with the `class` keyword followed by a name, like `class MyClassName:`";
            }
            if (code.includes("_init_") && !code.includes("__init__")) {
                return "The name of the initializer method is very specific. Are you sure it has the right number of underscores on each side?";
            }
            if (/\sdef\s\w+\(\):/.test(code)) {
                return "I see a method defined without any parameters inside the parentheses. Remember, methods inside a class need a special first parameter to refer to the object itself. What is that keyword?";
            }
            if (/\s+hunger\s*=/.test(code) && !/\s+self\.hunger\s*=/.test(code)) {
                return "You're trying to change an attribute like 'hunger'. How do you tell Python you mean *this specific object's* hunger, and not just a temporary local variable?";
            }
            if (!code.includes("def feed")) {
                return "Looking good so far! A good next step would be to define the `feed` method. What should happen to the pet's hunger when it eats?";
            }
            if (!code.includes("def play")) {
                return "The `feed` method looks like a good start. Now, think about the `play` method. Playing should be fun, but it might also make the pet tired or hungry.";
            }
            return "Your code structure looks reasonable. Try running it to see what happens. If you get an error, read it carefully! It often tells you the exact line number and type of the problem.";
        }
        
        async function runRefactorChallenge() {
            const proceduralCode = `
player1_name = "Alice"
player1_health = 100
player1_damage = 15

player2_name = "Bob"
player2_health = 120
player2_damage = 10

player2_health = player2_health - player1_damage
print(f"{player1_name} attacks {player2_name}!")
print(f"{player2_name}'s health is now {player2_health}")

print("-" * 20)

player1_health = player1_health - player2_damage
print(f"{player2_name} attacks {player1_name}!")
print(f"{player1_name}'s health is now {player1_health}")
`;
            
            try {
                await pyodide.runPythonAsync(`
import sys, io
sys.stdout = io.StringIO()
${proceduralCode}
procedural_output = sys.stdout.getvalue()
                `);
                const procOutput = pyodide.globals.get('procedural_output');
                document.getElementById('procedural-refactor-output').textContent = procOutput;
                
                const oopCode = editors.refactor.getValue();
                await pyodide.runPythonAsync(`
sys.stdout = io.StringIO()
${oopCode}
oop_output = sys.stdout.getvalue()
                `);
                const oopOutput = pyodide.globals.get('oop_output');
                document.getElementById('oop-refactor-output').textContent = oopOutput;

                const feedbackEl = document.getElementById('refactor-feedback');
                if (procOutput.trim() === oopOutput.trim() && oopOutput.trim() !== '') {
                    feedbackEl.textContent = 'Excellent! The output is identical. You have successfully refactored the code!';
                    feedbackEl.className = 'feedback correct';
                } else {
                    feedbackEl.textContent = 'The outputs do not match. Check your class logic and method calls.';
                    feedbackEl.className = 'feedback incorrect';
                }
            } catch (error) {
                document.getElementById('oop-refactor-output').textContent = `Error: ${error.message}`;
            }
        }
        
        // --- Garage Simulation Logic ---
        let garage = [];

        class Car {
            constructor(name) {
                this.name = name;
                this.fuel = 100;
                this.laps_completed = 0;
            }

            race_lap() {
                const fuel_used = 5 + (this.name.length % 5);
                if (this.fuel >= fuel_used) {
                    this.fuel -= fuel_used;
                    this.laps_completed += 1;
                    console.log(`${this.name} completed a lap!`);
                } else {
                    console.log(`${this.name} is out of fuel!`);
                }
            }
        }

        function addCarToGarage() {
            const carNameInput = document.getElementById('car-name-input');
            const carName = carNameInput.value.trim();
            if (carName === "") {
                alert("Please enter a name for the car.");
                return;
            }
            const newCar = new Car(carName);
            garage.push(newCar);
            carNameInput.value = "";
            renderGarage();
        }

        function raceAllCars() {
            if (garage.length === 0) {
                alert("Add some cars to the garage before racing!");
                return;
            }
            garage.forEach(car => car.race_lap());
            renderGarage();
        }

        function renderGarage() {
            const garageContainer = document.getElementById('garage-container');
            garageContainer.innerHTML = '';
            garage.forEach(car => {
                const carCard = document.createElement('div');
                carCard.className = 'car-card';
                carCard.innerHTML = `
                    <h5>${car.name}</h5>
                    <p>Laps: ${car.laps_completed}</p>
                    <p>Fuel: ${car.fuel}%</p>
                    <div class="fuel-bar">
                        <div class="fuel-fill" style="width: ${car.fuel}%;"></div>
                    </div>
                `;
                garageContainer.appendChild(carCard);
            });
        }

        // Mark scheme functionality
        function toggleMarkScheme(questionId) {
            const scheme = document.getElementById(`${questionId}-scheme`);
            const button = scheme.parentElement.querySelector('.button:not(.success)');
            
            if (scheme.classList.contains('visible')) {
                scheme.classList.remove('visible');
                button.textContent = 'Show Mark Scheme';
            } else {
                const answerArea = document.getElementById(`${questionId}-answer`);
                if(answerArea && answerArea.value.length < 20) {
                     alert('Please write a more detailed answer before viewing the mark scheme.');
                     return;
                }
                
                scheme.classList.add('visible');
                button.textContent = 'Hide Mark Scheme';
            }
        }

        // Progress tracking
        function updateProgress() {
            window.addEventListener('scroll', () => {
                const windowHeight = window.innerHeight;
                const documentHeight = document.documentElement.scrollHeight - windowHeight;
                const scrolled = window.scrollY;
                const progress = (scrolled / documentHeight) * 100;
                
                document.getElementById('progressBar').style.width = `${progress}%`;
            });
        }
        
        // --- Vocabulary Match-Up Game Logic ---
        function setupVocabListeners() {
            const termCards = document.querySelectorAll('.term-card');
            const definitionSlots = document.querySelectorAll('.definition-slot');

            termCards.forEach(card => {
                card.addEventListener('dragstart', (e) => {
                    if (!card.draggable) return;
                    e.dataTransfer.setData('text/plain', e.target.id);
                    setTimeout(() => card.style.opacity = '0.5', 0);
                });

                card.addEventListener('dragend', (e) => {
                    e.target.style.opacity = '1';
                });
            });

            definitionSlots.forEach(slot => {
                slot.addEventListener('dragover', (e) => {
                    if (slot.classList.contains('correct-match')) return;
                    e.preventDefault();
                    slot.classList.add('drag-over');
                });

                slot.addEventListener('dragleave', (e) => {
                    slot.classList.remove('drag-over');
                });

                slot.addEventListener('drop', (e) => {
                    if (slot.classList.contains('correct-match')) return;
                    e.preventDefault();
                    slot.classList.remove('drag-over');
                    
                    const id = e.dataTransfer.getData('text/plain');
                    const draggedCard = document.getElementById(id);
                    
                    if (draggedCard.dataset.matchId === slot.dataset.matchId) {
                        slot.prepend(draggedCard);
                        draggedCard.draggable = false;
                        slot.classList.add('correct-match');
                        
                        const allSlots = document.querySelectorAll('.definition-slot');
                        const matchedSlots = document.querySelectorAll('.correct-match');
                        if (allSlots.length === matchedSlots.length) {
                            updateSkill('skill-vocabulary');
                            const feedbackEl = document.getElementById('vocab-feedback');
                            feedbackEl.textContent = '🎉 Congratulations! You matched all the terms! 🎉';
                            feedbackEl.className = 'feedback correct';
                        }
                    }
                });
            });
        }
        
        function resetVocabMatch() {
            const sourceContainer = document.getElementById('terms-source');
            const allCards = document.querySelectorAll('.term-card');
            const allSlots = document.querySelectorAll('.definition-slot');

            allCards.forEach(card => {
                card.draggable = true;
                sourceContainer.appendChild(card);
            });
            
            allSlots.forEach(slot => {
                slot.classList.remove('correct-match');
            });
            
            const feedbackEl = document.getElementById('vocab-feedback');
            feedbackEl.textContent = '';
            feedbackEl.className = 'feedback';
        }

        // Initialize everything when page loads - FINAL CORRECT VERSION
        window.addEventListener('load', () => {
            loadProgress();
            
            initializePython().then(() => {
                
                // Setup for Sorter Game (Attribute or Method?)
                const sorterCards = document.querySelectorAll('.sorter-card');
                const sorterDropZones = document.querySelectorAll('.drop-zone, .source-zone');

                sorterCards.forEach(card => {
                    card.addEventListener('dragstart', (e) => {
                        e.dataTransfer.setData('text/plain', e.target.id);
                        setTimeout(() => card.style.opacity = '0.5', 0);
                    });
                    
                    card.addEventListener('dragend', () => {
                        card.style.opacity = '1';
                    });
                });
    
                sorterDropZones.forEach(zone => {
                    zone.addEventListener('dragover', (e) => {
                        e.preventDefault();
                        zone.classList.add('drag-over');
                    });
                    zone.addEventListener('dragleave', () => {
                        zone.classList.remove('drag-over');
                    });
                    zone.addEventListener('drop', (e) => {
                        e.preventDefault();
                        zone.classList.remove('drag-over');
                        const id = e.dataTransfer.getData('text/plain');
                        if (!id) return;
                        const draggable = document.getElementById(id);
                        zone.appendChild(draggable);
                    });
                });

                // Setup for Vocabulary Match-Up Game
                setupVocabListeners(); 
            });
        });
        
    </script>
    
</body>
</html>