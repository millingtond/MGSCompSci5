<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lessons 7 & 8: Polymorphism - One Interface, Many Forms | 9618 OOP</title>
    <style>
        :root {
            --primary: #7c3aed;
            --primary-dark: #6d28d9;
            --primary-light: #a78bfa;
            --secondary: #ec4899;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
            --dark: #1e293b;
            --light: #f8fafc;
            --gray: #64748b;
            --white: #ffffff;
            --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background: var(--light);
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 2rem 0;
            box-shadow: var(--shadow);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .header p {
            font-size: 1.25rem;
            opacity: 0.9;
        }

        /* Achievement System */
        .achievement-banner {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 1rem;
            margin-top: 1rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .achievement-icon {
            font-size: 2rem;
        }

        .achievement-text {
            flex: 1;
        }

        .achievement-count {
            font-size: 1.5rem;
            font-weight: bold;
        }

        /* Navigation Tabs */
        .tabs {
            background: white;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .tab-list {
            display: flex;
            overflow-x: auto;
            scrollbar-width: thin;
        }

        .tab {
            padding: 1rem 1.5rem;
            border: none;
            background: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            color: var(--gray);
            white-space: nowrap;
            position: relative;
            transition: all 0.3s ease;
        }

        .tab:hover {
            color: var(--primary);
        }

        .tab.active {
            color: var(--primary);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--primary);
        }

        .tab.completed {
            color: var(--success);
        }

        .tab.completed::before {
            content: '✓ ';
            color: var(--success);
        }

        /* Content */
        .content {
            padding: 2rem 0;
        }

        .section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
        }

        .card h2 {
            color: var(--primary-dark);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card h3 {
            color: var(--primary);
            margin: 1.5rem 0 1rem;
        }

        /* Interactive Elements */
        .interactive-box {
            background: var(--light);
            border: 2px solid var(--primary-light);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .code-block {
            background: var(--dark);
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            font-family: 'Consolas', 'Monaco', monospace;
            overflow-x: auto;
            margin: 1rem 0;
            white-space: pre;
            line-height: 1.5;
        }

        .code-block .keyword {
            color: #c084fc;
        }

        .code-block .string {
            color: #86efac;
        }

        .code-block .number {
            color: #fbbf24;
        }

        .code-block .comment {
            color: #64748b;
            font-style: italic;
        }

        .code-block .function {
            color: #60a5fa;
        }

        .code-block .class-name {
            color: #fbbf24;
        }

        .code-block .output {
            color: #94a3b8;
            font-style: italic;
        }

        /* Interactive Demo */
        .demo-container {
            background: var(--light);
            border: 2px solid var(--primary);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .demo-controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .demo-output {
            background: var(--dark);
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 8px;
            font-family: monospace;
            min-height: 200px;
            white-space: pre-wrap;
        }

        /* Shape Demo */
        .shape-container {
            display: flex;
            gap: 2rem;
            justify-content: center;
            align-items: center;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .shape-box {
            text-align: center;
            padding: 1rem;
            border: 2px dashed var(--primary-light);
            border-radius: 8px;
            min-width: 150px;
        }

        .shape {
            margin: 1rem auto;
        }

        .circle {
            width: 80px;
            height: 80px;
            background: var(--primary);
            border-radius: 50%;
        }

        .square {
            width: 80px;
            height: 80px;
            background: var(--secondary);
        }

        .triangle {
            width: 0;
            height: 0;
            border-left: 40px solid transparent;
            border-right: 40px solid transparent;
            border-bottom: 80px solid var(--success);
        }

        /* Buttons */
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--gray);
            color: white;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        /* Input fields */
        input[type="text"],
        input[type="number"],
        textarea,
        select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        input:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* Alert boxes */
        .alert {
            padding: 1rem 1.5rem;
            border-radius: 8px;
            margin: 1rem 0;
            display: flex;
            align-items: start;
            gap: 0.75rem;
        }

        .alert-info {
            background: #dbeafe;
            color: #1e40af;
            border: 1px solid #60a5fa;
        }

        .alert-success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #34d399;
        }

        .alert-warning {
            background: #fef3c7;
            color: #92400e;
            border: 1px solid #fbbf24;
        }

        .alert-danger {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #f87171;
        }

        /* Quiz styles */
        .quiz-option {
            display: block;
            width: 100%;
            padding: 1rem;
            margin: 0.5rem 0;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }

        .quiz-option:hover {
            border-color: var(--primary-light);
            transform: translateX(5px);
        }

        .quiz-option.correct {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }

        .quiz-option.incorrect {
            background: var(--danger);
            color: white;
            border-color: var(--danger);
        }

        /* Polymorphism Visualization */
        .poly-visual {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            margin: 2rem 0;
        }

        .interface-box {
            background: var(--primary-light);
            color: white;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-weight: bold;
        }

        .implementation-container {
            display: flex;
            gap: 2rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .implementation-box {
            background: white;
            border: 2px solid var(--primary);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            min-width: 150px;
            transition: all 0.3s ease;
        }

        .implementation-box:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-lg);
        }

        .arrow-down {
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-top: 20px solid var(--primary-light);
            margin: 0 auto;
        }

        /* Utility classes */
        .mt-1 { margin-top: 0.5rem; }
        .mt-2 { margin-top: 1rem; }
        .mt-3 { margin-top: 1.5rem; }
        .mt-4 { margin-top: 2rem; }
        
        .mb-1 { margin-bottom: 0.5rem; }
        .mb-2 { margin-bottom: 1rem; }
        .mb-3 { margin-bottom: 1.5rem; }
        .mb-4 { margin-bottom: 2rem; }

        .text-center { text-align: center; }
        .text-small { font-size: 0.875rem; }
        .text-muted { color: var(--gray); }

        .flex { display: flex; }
        .flex-center { display: flex; align-items: center; justify-content: center; }
        .gap-1 { gap: 0.5rem; }
        .gap-2 { gap: 1rem; }

        /* Animations */
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes morph {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.1) rotate(90deg); }
            50% { transform: scale(0.9) rotate(180deg); }
            75% { transform: scale(1.1) rotate(270deg); }
        }

        .morph {
            animation: morph 4s infinite;
        }

        /* Achievement notification */
        .achievement-popup {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--success);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: var(--shadow-lg);
            display: none;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header h1 { font-size: 2rem; }
            .tab { padding: 0.75rem 1rem; font-size: 0.875rem; }
            .card { padding: 1.5rem; }
            .shape-container { flex-direction: column; }
            .implementation-container { flex-direction: column; align-items: center; }
        }
    </style>
</head>
<body>
    <!-- Achievement Popup -->
    <div id="achievement-popup" class="achievement-popup">
        <strong>🏆 Achievement Unlocked!</strong>
        <p id="achievement-text"></p>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <h1>Lessons 7 & 8: One Interface, Many Forms - Polymorphism</h1>
            <p>Master the art of writing flexible, extensible code with polymorphism</p>
            <div class="achievement-banner">
                <div class="achievement-icon">🏆</div>
                <div class="achievement-text">
                    <div>Polymorphism Master</div>
                    <div class="text-small">Complete all sections to unlock</div>
                </div>
                <div class="achievement-count" id="achievement-count">0/5</div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="tabs">
        <div class="container">
            <div class="tab-list">
                <button class="tab active" data-section="intro">Introduction</button>
                <button class="tab" data-section="concept">What is Polymorphism?</button>
                <button class="tab" data-section="greek">The Greek Connection</button>
                <button class="tab" data-section="override">Method Overriding</button>
                <button class="tab" data-section="demo">Live Demonstration</button>
                <button class="tab" data-section="rpg-poly">RPG Polymorphism</button>
                <button class="tab" data-section="collections">Polymorphic Collections</button>
                <button class="tab" data-section="benefits">Why Use Polymorphism?</button>
                <button class="tab" data-section="practice">Practice Exercises</button>
                <button class="tab" data-section="patterns">Design Patterns</button>
                <button class="tab" data-section="summary">Summary & Quiz</button>
            </div>
        </div>
    </nav>

    <!-- Content -->
    <main class="content">
        <div class="container">
            <!-- Introduction -->
            <section id="intro" class="section active">
                <div class="card">
                    <h2>🎯 Learning Objectives</h2>
                    <p>By the end of these lessons, you will be able to:</p>
                    <ul style="margin-left: 2rem; line-height: 2;">
                        <li>Explain polymorphism and its benefits</li>
                        <li>Implement method overriding in derived classes</li>
                        <li>Create polymorphic collections of objects</li>
                        <li>Use polymorphism to write more flexible code</li>
                        <li>Apply polymorphism to the RPG project</li>
                        <li>Recognize common polymorphic patterns</li>
                    </ul>
                </div>

                <div class="card">
                    <h2>🚀 Starter Activity: The Shape Problem</h2>
                    <div class="interactive-box">
                        <h3>Imagine This Scenario</h3>
                        <p>You're building a drawing application that needs to handle different shapes:</p>
                        
                        <div class="shape-container">
                            <div class="shape-box">
                                <h4>Circle</h4>
                                <div class="shape circle"></div>
                                <p>Area = πr²</p>
                            </div>
                            <div class="shape-box">
                                <h4>Square</h4>
                                <div class="shape square"></div>
                                <p>Area = side²</p>
                            </div>
                            <div class="shape-box">
                                <h4>Triangle</h4>
                                <div class="shape triangle"></div>
                                <p>Area = ½ × base × height</p>
                            </div>
                        </div>

                        <div class="alert alert-warning mt-2">
                            <span>🤔</span>
                            <div>
                                <strong>The Challenge:</strong> Each shape calculates area differently, but we want to treat them all as "shapes" in our code. How can we write code that says "calculate the area" without knowing which specific shape we're dealing with?
                                <p class="mt-2"><strong>This is where polymorphism comes in!</strong></p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="text-center mt-3">
                    <button class="btn btn-primary" onclick="nextSection()">
                        Discover Polymorphism →
                    </button>
                </div>
            </section>

            <!-- What is Polymorphism -->
            <section id="concept" class="section">
                <div class="card">
                    <h2>🎭 What is Polymorphism?</h2>
                    
                    <div class="alert alert-info">
                        <span>💡</span>
                        <div>
                            <strong>Definition:</strong> Polymorphism allows objects of different types to be treated as objects of a common base type, while still maintaining their own specific behaviors.
                        </div>
                    </div>

                    <h3>The Theater Analogy</h3>
                    <div class="interactive-box">
                        <p>Think of polymorphism like actors in a play:</p>
                        <ul style="margin-left: 2rem; line-height: 2;">
                            <li>🎭 <strong>The Role</strong>: "Character" (base class)</li>
                            <li>👤 <strong>Different Actors</strong>: Each brings their own interpretation</li>
                            <li>📜 <strong>Same Script</strong>: All follow the same interface</li>
                            <li>🎬 <strong>Unique Performance</strong>: Each actor performs differently</li>
                        </ul>
                        <p class="mt-2">In programming, different objects (actors) can play the same role (base class) but perform actions (methods) in their own unique way!</p>
                    </div>
                </div>

                <div class="card">
                    <h2>🔍 Polymorphism in Action</h2>
                    <div class="poly-visual">
                        <div class="interface-box">make_sound() method</div>
                        <div class="arrow-down"></div>
                        <div class="implementation-container">
                            <div class="implementation-box">
                                <h4>🐕 Dog</h4>
                                <p>"Woof!"</p>
                            </div>
                            <div class="implementation-box">
                                <h4>🐱 Cat</h4>
                                <p>"Meow!"</p>
                            </div>
                            <div class="implementation-box">
                                <h4>🐄 Cow</h4>
                                <p>"Moo!"</p>
                            </div>
                        </div>
                    </div>
                    <p class="text-center text-muted">Same method call, different implementations!</p>
                </div>
            </section>

            <!-- The Greek Connection -->
            <section id="greek" class="section">
                <div class="card">
                    <h2>🏛️ The Greek Connection</h2>
                    
                    <div class="interactive-box">
                        <h3>Etymology</h3>
                        <p>The word "polymorphism" comes from Greek:</p>
                        <ul style="margin-left: 2rem; line-height: 2;">
                            <li><strong>Poly</strong> = Many</li>
                            <li><strong>Morph</strong> = Form/Shape</li>
                            <li><strong>Polymorphism</strong> = Many Forms</li>
                        </ul>
                        
                        <div class="text-center mt-3">
                            <div class="shape circle morph" style="display: inline-block;"></div>
                        </div>
                        <p class="text-center text-muted">One interface, many forms!</p>
                    </div>

                    <h3>Real-World Examples</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                        <div class="interactive-box">
                            <h4>🚗 Vehicles</h4>
                            <p>All vehicles can "move", but:</p>
                            <ul style="margin-left: 1rem;">
                                <li>Cars drive on roads</li>
                                <li>Boats sail on water</li>
                                <li>Planes fly in air</li>
                            </ul>
                        </div>
                        <div class="interactive-box">
                            <h4>🎮 Game Characters</h4>
                            <p>All characters can "attack", but:</p>
                            <ul style="margin-left: 1rem;">
                                <li>Warriors use swords</li>
                                <li>Mages cast spells</li>
                                <li>Archers shoot arrows</li>
                            </ul>
                        </div>
                        <div class="interactive-box">
                            <h4>📱 Notifications</h4>
                            <p>All can "notify", but:</p>
                            <ul style="margin-left: 1rem;">
                                <li>Email sends messages</li>
                                <li>SMS sends texts</li>
                                <li>Push sends alerts</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Method Overriding -->
            <section id="override" class="section">
                <div class="card">
                    <h2>🔄 Method Overriding</h2>
                    
                    <div class="alert alert-info">
                        <span>💡</span>
                        <div>
                            <strong>Key Concept:</strong> Method overriding is when a derived class provides its own implementation of a method that exists in the base class.
                        </div>
                    </div>

                    <h3>Basic Example</h3>
                    <div class="code-block"><span class="comment"># Base class with a method to override</span>
<span class="keyword">class</span> <span class="class-name">Animal</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(self, name):
        self.__name = name
    
    <span class="keyword">def</span> <span class="function">make_sound</span>(self):
        <span class="keyword">return</span> <span class="string">"Some generic animal sound"</span>
    
    <span class="keyword">def</span> <span class="function">get_name</span>(self):
        <span class="keyword">return</span> self.__name

<span class="comment"># Derived classes override make_sound()</span>
<span class="keyword">class</span> <span class="class-name">Dog</span>(Animal):
    <span class="keyword">def</span> <span class="function">make_sound</span>(self):  <span class="comment"># Override!</span>
        <span class="keyword">return</span> <span class="string">"Woof! Woof!"</span>

<span class="keyword">class</span> <span class="class-name">Cat</span>(Animal):
    <span class="keyword">def</span> <span class="function">make_sound</span>(self):  <span class="comment"># Override!</span>
        <span class="keyword">return</span> <span class="string">"Meow!"</span>

<span class="keyword">class</span> <span class="class-name">Cow</span>(Animal):
    <span class="keyword">def</span> <span class="function">make_sound</span>(self):  <span class="comment"># Override!</span>
        <span class="keyword">return</span> <span class="string">"Moo!"</span></div>

                    <h3>The Magic of Polymorphism</h3>
                    <div class="code-block"><span class="comment"># Create different animals</span>
dog = Dog(<span class="string">"Buddy"</span>)
cat = Cat(<span class="string">"Whiskers"</span>)
cow = Cow(<span class="string">"Bessie"</span>)

<span class="comment"># Put them in a list - all treated as Animals</span>
animals = [dog, cat, cow]

<span class="comment"># Call the same method on each - get different results!</span>
<span class="keyword">for</span> animal <span class="keyword">in</span> animals:
    print(<span class="string">f"{animal.get_name()} says: {animal.make_sound()}"</span>)

<span class="comment"># Output:</span>
<span class="output"># Buddy says: Woof! Woof!
# Whiskers says: Meow!
# Bessie says: Moo!</span></div>
                </div>

                <div class="card">
                    <h2>📝 Rules for Method Overriding</h2>
                    <div class="interactive-box">
                        <ol style="margin-left: 2rem; line-height: 2;">
                            <li><strong>Same Name:</strong> The method must have the same name as in the parent class</li>
                            <li><strong>Same Parameters:</strong> The method should accept the same parameters</li>
                            <li><strong>Inheritance Required:</strong> The class must inherit from the parent class</li>
                            <li><strong>Different Implementation:</strong> The method body can be completely different</li>
                        </ol>
                    </div>

                    <h3>Calling Parent Methods</h3>
                    <div class="code-block"><span class="keyword">class</span> <span class="class-name">LoudDog</span>(Dog):
    <span class="keyword">def</span> <span class="function">make_sound</span>(self):
        <span class="comment"># Get parent's sound and make it louder!</span>
        parent_sound = super().make_sound()
        <span class="keyword">return</span> parent_sound.upper() + <span class="string">"!!!"</span>

loud_dog = LoudDog(<span class="string">"Max"</span>)
print(loud_dog.make_sound())  <span class="output"># WOOF! WOOF!!!!</span></div>
                </div>
            </section>

            <!-- Live Demonstration -->
            <section id="demo" class="section">
                <div class="card">
                    <h2>🎮 Live Polymorphism Demonstration</h2>
                    
                    <div class="demo-container">
                        <h3>Shape Calculator</h3>
                        <p>See polymorphism in action with our shape calculator!</p>
                        
                        <div class="demo-controls">
                            <button class="btn btn-primary" onclick="addShape('circle')">Add Circle</button>
                            <button class="btn btn-primary" onclick="addShape('square')">Add Square</button>
                            <button class="btn btn-primary" onclick="addShape('triangle')">Add Triangle</button>
                            <button class="btn btn-secondary" onclick="calculateAllAreas()">Calculate All Areas</button>
                            <button class="btn btn-danger" onclick="clearShapes()">Clear</button>
                        </div>
                        
                        <div class="demo-output" id="shape-demo-output">
<span class="comment"># Shape objects will appear here...</span>
<span class="comment"># Click the buttons above to add shapes!</span></div>
                    </div>
                </div>

                <div class="card">
                    <h2>📊 The Code Behind the Demo</h2>
                    <div class="code-block"><span class="keyword">class</span> <span class="class-name">Shape</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(self, name):
        self._name = name
    
    <span class="keyword">def</span> <span class="function">calculate_area</span>(self):
        <span class="keyword">raise</span> NotImplementedError(<span class="string">"Subclasses must implement"</span>)
    
    <span class="keyword">def</span> <span class="function">get_info</span>(self):
        <span class="keyword">return</span> <span class="string">f"{self._name} - Area: {self.calculate_area():.2f}"</span>

<span class="keyword">class</span> <span class="class-name">Circle</span>(Shape):
    <span class="keyword">def</span> <span class="function">__init__</span>(self, radius):
        super().__init__(<span class="string">"Circle"</span>)
        self.radius = radius
    
    <span class="keyword">def</span> <span class="function">calculate_area</span>(self):
        <span class="keyword">return</span> <span class="number">3.14159</span> * self.radius ** <span class="number">2</span>

<span class="keyword">class</span> <span class="class-name">Square</span>(Shape):
    <span class="keyword">def</span> <span class="function">__init__</span>(self, side):
        super().__init__(<span class="string">"Square"</span>)
        self.side = side
    
    <span class="keyword">def</span> <span class="function">calculate_area</span>(self):
        <span class="keyword">return</span> self.side ** <span class="number">2</span>

<span class="keyword">class</span> <span class="class-name">Triangle</span>(Shape):
    <span class="keyword">def</span> <span class="function">__init__</span>(self, base, height):
        super().__init__(<span class="string">"Triangle"</span>)
        self.base = base
        self.height = height
    
    <span class="keyword">def</span> <span class="function">calculate_area</span>(self):
        <span class="keyword">return</span> <span class="number">0.5</span> * self.base * self.height</div>
                </div>
            </section>

            <!-- RPG Polymorphism -->
            <section id="rpg-poly" class="section">
                <div class="card">
                    <h2>🎮 Polymorphism in Our RPG</h2>
                    <p>Let's apply polymorphism to make our RPG combat system more flexible!</p>
                    
                    <h3>Polymorphic Attack System</h3>
                    <div class="code-block"><span class="comment"># Base Character class with attack method</span>
<span class="keyword">class</span> <span class="class-name">Character</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(self, name, health):
        self._name = name
        self._health = health
        self._max_health = health
    
    <span class="keyword">def</span> <span class="function">attack</span>(self, target):
        <span class="comment"># Base implementation - to be overridden</span>
        damage = <span class="number">5</span>  <span class="comment"># Basic damage</span>
        print(<span class="string">f"{self._name} attacks {target._name} for {damage} damage!"</span>)
        target.take_damage(damage)
    
    <span class="keyword">def</span> <span class="function">take_damage</span>(self, amount):
        self._health = max(<span class="number">0</span>, self._health - amount)
        <span class="keyword">if</span> self._health == <span class="number">0</span>:
            print(<span class="string">f"{self._name} has been defeated!"</span>)

<span class="comment"># Different character types with unique attacks</span>
<span class="keyword">class</span> <span class="class-name">Warrior</span>(Character):
    <span class="keyword">def</span> <span class="function">__init__</span>(self, name):
        super().__init__(name, <span class="number">120</span>)  <span class="comment"># High health</span>
        self._strength = <span class="number">15</span>
    
    <span class="keyword">def</span> <span class="function">attack</span>(self, target):
        damage = self._strength + <span class="number">10</span>  <span class="comment"># Strong physical attack</span>
        print(<span class="string">f"⚔️ {self._name} swings their sword at {target._name} for {damage} damage!"</span>)
        target.take_damage(damage)

<span class="keyword">class</span> <span class="class-name">Mage</span>(Character):
    <span class="keyword">def</span> <span class="function">__init__</span>(self, name):
        super().__init__(name, <span class="number">80</span>)   <span class="comment"># Lower health</span>
        self._magic_power = <span class="number">20</span>
        self._mana = <span class="number">50</span>
    
    <span class="keyword">def</span> <span class="function">attack</span>(self, target):
        <span class="keyword">if</span> self._mana >= <span class="number">10</span>:
            damage = self._magic_power + <span class="number">15</span>  <span class="comment"># Powerful magic attack</span>
            self._mana -= <span class="number">10</span>
            print(<span class="string">f"🔮 {self._name} casts Fireball at {target._name} for {damage} damage!"</span>)
            target.take_damage(damage)
        <span class="keyword">else</span>:
            <span class="comment"># Fall back to basic attack if no mana</span>
            print(<span class="string">f"💫 {self._name} is out of mana! Using staff attack..."</span>)
            super().attack(target)

<span class="keyword">class</span> <span class="class-name">Archer</span>(Character):
    <span class="keyword">def</span> <span class="function">__init__</span>(self, name):
        super().__init__(name, <span class="number">100</span>)  <span class="comment"># Medium health</span>
        self._dexterity = <span class="number">18</span>
        self._arrows = <span class="number">30</span>
    
    <span class="keyword">def</span> <span class="function">attack</span>(self, target):
        <span class="keyword">if</span> self._arrows > <span class="number">0</span>:
            <span class="comment"># Critical hit chance based on dexterity</span>
            import random
            is_critical = random.random() < (self._dexterity / <span class="number">50</span>)
            damage = <span class="number">12</span>
            <span class="keyword">if</span> is_critical:
                damage *= <span class="number">2</span>
                print(<span class="string">f"🎯 CRITICAL HIT! {self._name} shoots {target._name} for {damage} damage!"</span>)
            <span class="keyword">else</span>:
                print(<span class="string">f"🏹 {self._name} shoots an arrow at {target._name} for {damage} damage!"</span>)
            self._arrows -= <span class="number">1</span>
            target.take_damage(damage)
        <span class="keyword">else</span>:
            print(<span class="string">f"🏹 {self._name} is out of arrows! Using dagger..."</span>)
            super().attack(target)</div>
                </div>

                <div class="card">
                    <h2>⚔️ Polymorphic Battle System</h2>
                    <div class="interactive-box">
                        <p>The beauty of polymorphism: we can have any character attack any other character!</p>
                        
                        <div class="code-block"><span class="comment"># Create different types of characters</span>
warrior = Warrior(<span class="string">"Thorin"</span>)
mage = Mage(<span class="string">"Gandalf"</span>)
archer = Archer(<span class="string">"Legolas"</span>)
goblin = Character(<span class="string">"Goblin"</span>, <span class="number">40</span>)  <span class="comment"># Basic enemy</span>

<span class="comment"># All characters in one list - polymorphism!</span>
party = [warrior, mage, archer]
enemies = [goblin]

<span class="comment"># Battle function works with ANY character type</span>
<span class="keyword">def</span> <span class="function">battle_round</span>(attackers, defenders):
    <span class="keyword">for</span> attacker <span class="keyword">in</span> attackers:
        <span class="keyword">if</span> defenders <span class="keyword">and</span> attacker._health > <span class="number">0</span>:
            target = defenders[<span class="number">0</span>]  <span class="comment"># Attack first defender</span>
            attacker.attack(target)  <span class="comment"># Polymorphic call!</span>
            
            <span class="comment"># Remove defeated enemies</span>
            <span class="keyword">if</span> target._health == <span class="number">0</span>:
                defenders.remove(target)

<span class="comment"># Run the battle!</span>
battle_round(party, enemies)</div>
                        
                        <button class="btn btn-primary mt-2" onclick="runBattleDemo()">
                            Run Battle Demo
                        </button>
                        <div id="battle-output" class="mt-2"></div>
                    </div>
                </div>
            </section>

            <!-- Polymorphic Collections -->
            <section id="collections" class="section">
                <div class="card">
                    <h2>📚 Polymorphic Collections</h2>
                    
                    <div class="alert alert-info">
                        <span>💡</span>
                        <div>
                            <strong>Key Insight:</strong> One of the most powerful features of polymorphism is the ability to store objects of different types in the same collection, as long as they share a common base class.
                        </div>
                    </div>

                    <h3>Managing Different Character Types</h3>
                    <div class="code-block"><span class="keyword">class</span> <span class="class-name">GameWorld</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(self):
        self._characters = []  <span class="comment"># Can hold ANY Character subclass</span>
    
    <span class="keyword">def</span> <span class="function">add_character</span>(self, character):
        self._characters.append(character)
        print(<span class="string">f"{character._name} has entered the game world!"</span>)
    
    <span class="keyword">def</span> <span class="function">heal_all</span>(self, amount):
        <span class="comment"># Works on ALL character types!</span>
        <span class="keyword">for</span> character <span class="keyword">in</span> self._characters:
            old_health = character._health
            character._health = min(character._max_health, character._health + amount)
            healed = character._health - old_health
            print(<span class="string">f"{character._name} healed for {healed} HP"</span>)
    
    <span class="keyword">def</span> <span class="function">display_all</span>(self):
        print(<span class="string">"\n=== Game World Characters ==="</span>)
        <span class="keyword">for</span> character <span class="keyword">in</span> self._characters:
            <span class="comment"># Each character type might display differently</span>
            character.display_info()  <span class="comment"># Polymorphic call!</span>

<span class="comment"># Usage</span>
world = GameWorld()

<span class="comment"># Add different types - all work with the same methods!</span>
world.add_character(Warrior(<span class="string">"Conan"</span>))
world.add_character(Mage(<span class="string">"Merlin"</span>))
world.add_character(Archer(<span class="string">"Robin Hood"</span>))
world.add_character(Character(<span class="string">"Village Guard"</span>, <span class="number">50</span>))

<span class="comment"># Polymorphic operations on the entire collection</span>
world.heal_all(<span class="number">20</span>)
world.display_all()</div>
                </div>

                <div class="card">
                    <h2>🎯 Exercise: Polymorphic Inventory</h2>
                    <div class="interactive-box">
                        <p>Create an inventory system that can hold different types of items:</p>
                        
                        <textarea id="inventory-code" rows="20" style="font-family: monospace;">class Item:
    def __init__(self, name, value):
        self._name = name
        self._value = value
    
    def use(self, character):
        # Base implementation - to be overridden
        print(f"{character._name} uses {self._name}")

# TODO: Create these subclasses
# 1. HealthPotion - heals the character
# 2. ManaPotion - restores mana (for mages)
# 3. Weapon - equips to the character
# 4. Scroll - casts a spell

class Inventory:
    def __init__(self):
        self._items = []  # Polymorphic collection!
    
    # TODO: Add methods to manage items</textarea>
                        
                        <button class="btn btn-primary mt-2" onclick="checkInventoryCode()">
                            Check Implementation
                        </button>
                        <div id="inventory-feedback" class="mt-2"></div>
                    </div>
                </div>
            </section>

            <!-- Benefits of Polymorphism -->
            <section id="benefits" class="section">
                <div class="card">
                    <h2>🌟 Why Use Polymorphism?</h2>
                    
                    <h3>1. Code Flexibility</h3>
                    <div class="interactive-box">
                        <p>Write code once, use it with many types:</p>
                        <div class="code-block"><span class="comment"># This function works with ANY character type!</span>
<span class="keyword">def</span> <span class="function">heal_party</span>(characters, amount):
    <span class="keyword">for</span> character <span class="keyword">in</span> characters:
        character.heal(amount)  <span class="comment"># Don't need to know the specific type</span></div>
                    </div>

                    <h3>2. Easy Extension</h3>
                    <div class="interactive-box">
                        <p>Add new types without changing existing code:</p>
                        <div class="code-block"><span class="comment"># Add a new character type - existing code still works!</span>
<span class="keyword">class</span> <span class="class-name">Paladin</span>(Character):
    <span class="keyword">def</span> <span class="function">attack</span>(self, target):
        <span class="comment"># Unique paladin attack</span>
        damage = <span class="number">20</span>
        self.heal(<span class="number">5</span>)  <span class="comment"># Paladins heal when attacking!</span>
        print(<span class="string">f"⚔️✨ {self._name} smites {target._name} with holy power!"</span>)
        target.take_damage(damage)</div>
                    </div>

                    <h3>3. Cleaner Code</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                        <div class="interactive-box">
                            <h4>❌ Without Polymorphism</h4>
                            <div class="code-block" style="font-size: 0.9rem;"><span class="keyword">if</span> isinstance(char, Warrior):
    warrior_attack(char, target)
<span class="keyword">elif</span> isinstance(char, Mage):
    mage_attack(char, target)
<span class="keyword">elif</span> isinstance(char, Archer):
    archer_attack(char, target)
<span class="comment"># Gets messy fast!</span></div>
                        </div>
                        <div class="interactive-box">
                            <h4>✅ With Polymorphism</h4>
                            <div class="code-block" style="font-size: 0.9rem;">char.attack(target)
<span class="comment"># Clean and simple!</span></div>
                        </div>
                    </div>

                    <h3>4. Maintainability</h3>
                    <div class="alert alert-success">
                        <span>🔧</span>
                        <div>
                            Changes to a specific type only affect that class, not the code that uses it. This makes your code much easier to maintain and debug!
                        </div>
                    </div>
                </div>
            </section>

            <!-- Practice Exercises -->
            <section id="practice" class="section">
                <div class="card">
                    <h2>💪 Practice Exercises</h2>
                    
                    <h3>Exercise 1: Animal Orchestra</h3>
                    <div class="interactive-box">
                        <p>Create an animal orchestra where different animals play instruments:</p>
                        
                        <textarea id="orchestra-code" rows="15" style="font-family: monospace;">class Musician:
    def __init__(self, name):
        self._name = name
    
    def play_music(self):
        # To be overridden
        pass

# TODO: Create these subclasses
# 1. Drummer - plays drums with a beat
# 2. Guitarist - plays guitar with chords
# 3. Singer - sings with lyrics

# Test your orchestra here!</textarea>
                        
                        <button class="btn btn-primary mt-2" onclick="checkOrchestraCode()">
                            Test Orchestra
                        </button>
                        <div id="orchestra-feedback" class="mt-2"></div>
                    </div>
                </div>

                <div class="card">
                    <h3>Exercise 2: Payment System</h3>
                    <div class="interactive-box">
                        <p>Design a payment system that handles different payment methods:</p>
                        
                        <textarea id="payment-code" rows="20" style="font-family: monospace;">class PaymentMethod:
    def __init__(self, user_name):
        self._user_name = user_name
    
    def process_payment(self, amount):
        # To be overridden
        raise NotImplementedError()

# TODO: Create these payment types
# 1. CreditCard - charges with card number
# 2. PayPal - uses email
# 3. Cryptocurrency - uses wallet address
# 4. Each should override process_payment()

class PaymentProcessor:
    def __init__(self):
        self._payments = []
    
    def add_payment_method(self, method):
        self._payments.append(method)
    
    # TODO: Add method to process all payments</textarea>
                        
                        <button class="btn btn-primary mt-2" onclick="checkPaymentCode()">
                            Check Payment System
                        </button>
                        <div id="payment-feedback" class="mt-2"></div>
                    </div>
                </div>

                <div class="card">
                    <h3>Exercise 3: RPG Spell System</h3>
                    <div class="interactive-box">
                        <p>Create a polymorphic spell system for the RPG:</p>
                        
                        <textarea id="spell-code" rows="25" style="font-family: monospace;">class Spell:
    def __init__(self, name, mana_cost):
        self._name = name
        self._mana_cost = mana_cost
    
    def cast(self, caster, target=None):
        # Check mana, then call _execute
        if hasattr(caster, '_mana') and caster._mana >= self._mana_cost:
            caster._mana -= self._mana_cost
            self._execute(caster, target)
        else:
            print(f"{caster._name} doesn't have enough mana!")
    
    def _execute(self, caster, target):
        # To be overridden by specific spells
        pass

# TODO: Create these spell types
# 1. HealingSpell - heals the caster or target
# 2. DamageSpell - damages the target
# 3. BuffSpell - increases stats temporarily
# 4. SummonSpell - creates a new character

# Create a spellbook that can hold any type of spell!</textarea>
                        
                        <button class="btn btn-primary mt-2" onclick="checkSpellCode()">
                            Test Spell System
                        </button>
                        <div id="spell-feedback" class="mt-2"></div>
                    </div>
                </div>
            </section>

            <!-- Design Patterns -->
            <section id="patterns" class="section">
                <div class="card">
                    <h2>🎨 Common Polymorphic Design Patterns</h2>
                    
                    <h3>1. Strategy Pattern</h3>
                    <div class="interactive-box">
                        <p>Different algorithms for the same task:</p>
                        <div class="code-block"><span class="keyword">class</span> <span class="class-name">AttackStrategy</span>:
    <span class="keyword">def</span> <span class="function">execute</span>(self, attacker, target):
        <span class="keyword">pass</span>

<span class="keyword">class</span> <span class="class-name">MeleeAttack</span>(AttackStrategy):
    <span class="keyword">def</span> <span class="function">execute</span>(self, attacker, target):
        damage = attacker._strength * <span class="number">2</span>
        print(<span class="string">f"Melee attack for {damage} damage!"</span>)
        target.take_damage(damage)

<span class="keyword">class</span> <span class="class-name">RangedAttack</span>(AttackStrategy):
    <span class="keyword">def</span> <span class="function">execute</span>(self, attacker, target):
        damage = attacker._dexterity * <span class="number">1.5</span>
        print(<span class="string">f"Ranged attack for {damage} damage!"</span>)
        target.take_damage(damage)

<span class="comment"># Character can switch strategies!</span>
character._attack_strategy = MeleeAttack()
character._attack_strategy.execute(character, enemy)</div>
                    </div>

                    <h3>2. Factory Pattern</h3>
                    <div class="interactive-box">
                        <p>Create objects without specifying exact classes:</p>
                        <div class="code-block"><span class="keyword">class</span> <span class="class-name">CharacterFactory</span>:
    <span class="keyword">@staticmethod</span>
    <span class="keyword">def</span> <span class="function">create_character</span>(char_type, name):
        <span class="keyword">if</span> char_type == <span class="string">"warrior"</span>:
            <span class="keyword">return</span> Warrior(name)
        <span class="keyword">elif</span> char_type == <span class="string">"mage"</span>:
            <span class="keyword">return</span> Mage(name)
        <span class="keyword">elif</span> char_type == <span class="string">"archer"</span>:
            <span class="keyword">return</span> Archer(name)
        <span class="keyword">else</span>:
            <span class="keyword">return</span> Character(name, <span class="number">100</span>)

<span class="comment"># Create characters dynamically</span>
player_class = input(<span class="string">"Choose class (warrior/mage/archer): "</span>)
player = CharacterFactory.create_character(player_class, <span class="string">"Hero"</span>)</div>
                    </div>

                    <h3>3. Template Method Pattern</h3>
                    <div class="interactive-box">
                        <p>Define algorithm structure, let subclasses fill in details:</p>
                        <div class="code-block"><span class="keyword">class</span> <span class="class-name">Quest</span>:
    <span class="keyword">def</span> <span class="function">complete</span>(self, player):
        <span class="comment"># Template method - defines the structure</span>
        print(<span class="string">f"Starting quest: {self._name}"</span>)
        self._do_task(player)      <span class="comment"># Polymorphic!</span>
        reward = self._get_reward() <span class="comment"># Polymorphic!</span>
        player.add_experience(reward)
        print(<span class="string">f"Quest complete! Gained {reward} XP"</span>)
    
    <span class="keyword">def</span> <span class="function">_do_task</span>(self, player):
        <span class="comment"># Override in subclasses</span>
        <span class="keyword">pass</span>
    
    <span class="keyword">def</span> <span class="function">_get_reward</span>(self):
        <span class="comment"># Override in subclasses</span>
        <span class="keyword">return</span> <span class="number">0</span></div>
                    </div>
                </div>
            </section>

            <!-- Summary -->
            <section id="summary" class="section">
                <div class="card">
                    <h2>📚 Lesson Summary</h2>
                    
                    <h3>Key Concepts Mastered</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem;">
                        <div class="interactive-box">
                            <h4>🎭 Polymorphism</h4>
                            <p>"Many forms" - objects of different types treated uniformly through common interface</p>
                        </div>
                        
                        <div class="interactive-box">
                            <h4>🔄 Method Overriding</h4>
                            <p>Derived classes provide their own implementation of base class methods</p>
                        </div>
                        
                        <div class="interactive-box">
                            <h4>📚 Polymorphic Collections</h4>
                            <p>Store different object types in same collection using base class reference</p>
                        </div>
                        
                        <div class="interactive-box">
                            <h4>🌟 Benefits</h4>
                            <p>Flexibility, extensibility, cleaner code, easier maintenance</p>
                        </div>
                    </div>

                    <h3>The Power of Polymorphism</h3>
                    <div class="alert alert-success">
                        <span>💪</span>
                        <div>
                            <strong>Remember:</strong> Polymorphism allows you to write code that works with the base class, but automatically uses the correct derived class implementation. This is the key to flexible, maintainable object-oriented programs!
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>🎯 Final Quiz</h2>
                    <div class="interactive-box">
                        <div class="mb-3">
                            <p><strong>1. What does polymorphism mean?</strong></p>
                            <button class="quiz-option" onclick="checkQuiz(1, 'a', this)">Many programs</button>
                            <button class="quiz-option" onclick="checkQuiz(1, 'b', this)">Many forms</button>
                            <button class="quiz-option" onclick="checkQuiz(1, 'c', this)">Many classes</button>
                            <button class="quiz-option" onclick="checkQuiz(1, 'd', this)">Many methods</button>
                        </div>
                        
                        <div class="mb-3">
                            <p><strong>2. What is method overriding?</strong></p>
                            <button class="quiz-option" onclick="checkQuiz(2, 'a', this)">Deleting a parent method</button>
                            <button class="quiz-option" onclick="checkQuiz(2, 'b', this)">Calling two methods at once</button>
                            <button class="quiz-option" onclick="checkQuiz(2, 'c', this)">Providing new implementation in derived class</button>
                            <button class="quiz-option" onclick="checkQuiz(2, 'd', this)">Making methods run faster</button>
                        </div>
                        
                        <div class="mb-3">
                            <p><strong>3. Which allows polymorphic behavior?</strong></p>
                            <button class="quiz-option" onclick="checkQuiz(3, 'a', this)">Global variables</button>
                            <button class="quiz-option" onclick="checkQuiz(3, 'b', this)">Private attributes</button>
                            <button class="quiz-option" onclick="checkQuiz(3, 'c', this)">Inheritance and method overriding</button>
                            <button class="quiz-option" onclick="checkQuiz(3, 'd', this)">Multiple constructors</button>
                        </div>
                        
                        <div class="mb-3">
                            <p><strong>4. What's the main benefit of polymorphism?</strong></p>
                            <button class="quiz-option" onclick="checkQuiz(4, 'a', this)">Faster execution</button>
                            <button class="quiz-option" onclick="checkQuiz(4, 'b', this)">Less memory usage</button>
                            <button class="quiz-option" onclick="checkQuiz(4, 'c', this)">Code flexibility and reusability</button>
                            <button class="quiz-option" onclick="checkQuiz(4, 'd', this)">Automatic bug fixing</button>
                        </div>

                        <div class="mb-3">
                            <p><strong>5. In a polymorphic collection, objects must:</strong></p>
                            <button class="quiz-option" onclick="checkQuiz(5, 'a', this)">Be exactly the same type</button>
                            <button class="quiz-option" onclick="checkQuiz(5, 'b', this)">Share a common base class</button>
                            <button class="quiz-option" onclick="checkQuiz(5, 'c', this)">Have the same attributes</button>
                            <button class="quiz-option" onclick="checkQuiz(5, 'd', this)">Use global variables</button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>🎯 What's Next?</h2>
                    <div class="alert alert-info">
                        <span>📚</span>
                        <div>
                            <strong>Coming Up:</strong> Lesson 9 - Containment (Aggregation)
                            <p class="mt-2">Learn about "has-a" relationships and how objects can contain other objects!</p>
                        </div>
                    </div>
                    
                    <div class="text-center mt-3">
                        <button class="btn btn-success pulse" onclick="completeLesson()">
                            Complete Lessons 7 & 8 →
                        </button>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <script>
        // Achievement system
        let achievements = {
            firstOverride: false,
            polymorphicCollection: false,
            battleMaster: false,
            shapeShifter: false,
            quizMaster: false
        };

        let earnedAchievements = 0;

        function unlockAchievement(name, description) {
            if (!achievements[name]) {
                achievements[name] = true;
                earnedAchievements++;
                document.getElementById('achievement-count').textContent = `${earnedAchievements}/5`;
                
                // Show popup
                const popup = document.getElementById('achievement-popup');
                document.getElementById('achievement-text').textContent = description;
                popup.style.display = 'block';
                
                setTimeout(() => {
                    popup.style.display = 'none';
                }, 3000);
            }
        }

        // Tab navigation
        const tabs = document.querySelectorAll('.tab');
        const sections = document.querySelectorAll('.section');
        
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const targetSection = tab.dataset.section;
                
                // Update active tab
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Update active section
                sections.forEach(s => s.classList.remove('active'));
                document.getElementById(targetSection).classList.add('active');
                
                // Mark as completed
                tab.classList.add('completed');
                
                // Check for achievements
                if (targetSection === 'override') {
                    unlockAchievement('firstOverride', 'Learned about method overriding!');
                }
                
                // Scroll to top
                window.scrollTo(0, 0);
            });
        });
        
        // Navigation
        function nextSection() {
            const activeTab = document.querySelector('.tab.active');
            const nextTab = activeTab.nextElementSibling;
            if (nextTab) {
                nextTab.click();
            }
        }

        // Shape demo
        let shapes = [];
        
        function addShape(type) {
            let shape;
            if (type === 'circle') {
                shape = { type: 'Circle', radius: 5, area: () => 3.14159 * 5 * 5 };
            } else if (type === 'square') {
                shape = { type: 'Square', side: 8, area: () => 8 * 8 };
            } else if (type === 'triangle') {
                shape = { type: 'Triangle', base: 10, height: 6, area: () => 0.5 * 10 * 6 };
            }
            
            shapes.push(shape);
            updateShapeDisplay();
            
            if (shapes.length >= 3 && shapes.some(s => s.type === 'Circle') && 
                shapes.some(s => s.type === 'Square') && shapes.some(s => s.type === 'Triangle')) {
                unlockAchievement('shapeShifter', 'Created all shape types!');
            }
        }
        
        function updateShapeDisplay() {
            const output = document.getElementById('shape-demo-output');
            let html = '<span class="comment"># Current shapes:</span>\n';
            
            shapes.forEach((shape, index) => {
                html += `shapes[${index}] = ${shape.type}()\n`;
            });
            
            output.innerHTML = html;
        }
        
        function calculateAllAreas() {
            const output = document.getElementById('shape-demo-output');
            let html = output.innerHTML + '\n<span class="comment"># Calculating areas polymorphically:</span>\n';
            
            shapes.forEach((shape, index) => {
                html += `shapes[${index}].calculate_area() = ${shape.area().toFixed(2)}\n`;
            });
            
            output.innerHTML = html;
            
            if (shapes.length > 0) {
                unlockAchievement('polymorphicCollection', 'Used polymorphic collection!');
            }
        }
        
        function clearShapes() {
            shapes = [];
            updateShapeDisplay();
        }

        // Battle demo
        function runBattleDemo() {
            const output = document.getElementById('battle-output');
            output.innerHTML = `
                <div class="alert alert-info">
                    <strong>Battle Output:</strong><br>
                    ⚔️ Thorin swings their sword at Goblin for 25 damage!<br>
                    🔮 Gandalf casts Fireball at Goblin for 35 damage!<br>
                    Goblin has been defeated!<br>
                    <br>
                    <em>Notice how each character type attacks differently, but we call the same attack() method!</em>
                </div>
            `;
            unlockAchievement('battleMaster', 'Conducted a polymorphic battle!');
        }

        // Code checking functions
        function checkInventoryCode() {
            const code = document.getElementById('inventory-code').value;
            const feedback = document.getElementById('inventory-feedback');
            
            const requirements = {
                'HealthPotion class': code.includes('class HealthPotion'),
                'Overrides use method': code.includes('def use') && code.includes('heal'),
                'ManaPotion class': code.includes('class ManaPotion'),
                'Weapon class': code.includes('class Weapon'),
                'Polymorphic methods': code.includes('def use') && code.split('def use').length > 2
            };
            
            const passed = Object.values(requirements).filter(v => v).length;
            const total = Object.keys(requirements).length;
            
            if (passed === total) {
                feedback.innerHTML = '<div class="alert alert-success">✅ Excellent polymorphic inventory system!</div>';
            } else {
                const implemented = Object.entries(requirements)
                    .filter(([k, v]) => v)
                    .map(([k]) => k);
                feedback.innerHTML = `<div class="alert alert-info">Progress: ${passed}/${total} features. Implemented: ${implemented.join(', ')}</div>`;
            }
        }

        function checkOrchestraCode() {
            const code = document.getElementById('orchestra-code').value;
            const feedback = document.getElementById('orchestra-feedback');
            
            const hasDrummer = code.includes('class Drummer') && code.includes('play_music');
            const hasGuitarist = code.includes('class Guitarist') && code.includes('play_music');
            const hasSinger = code.includes('class Singer') && code.includes('play_music');
            
            if (hasDrummer && hasGuitarist && hasSinger) {
                feedback.innerHTML = '<div class="alert alert-success">🎵 Your orchestra is ready to perform! Each musician plays their own way - that\'s polymorphism!</div>';
            } else {
                feedback.innerHTML = '<div class="alert alert-warning">Keep working on your musicians. Make sure each overrides play_music()!</div>';
            }
        }

        function checkPaymentCode() {
            const code = document.getElementById('payment-code').value;
            const feedback = document.getElementById('payment-feedback');
            
            const hasCreditCard = code.includes('class CreditCard');
            const hasPayPal = code.includes('class PayPal');
            const hasCrypto = code.includes('class Cryptocurrency');
            const hasProcessMethod = code.includes('def process_payment');
            
            const implemented = [hasCreditCard, hasPayPal, hasCrypto, hasProcessMethod].filter(v => v).length;
            
            if (implemented === 4) {
                feedback.innerHTML = '<div class="alert alert-success">💳 Perfect payment system! Each payment method processes differently but uses the same interface.</div>';
            } else {
                feedback.innerHTML = `<div class="alert alert-info">Progress: ${implemented}/4 components implemented.</div>`;
            }
        }

        function checkSpellCode() {
            const code = document.getElementById('spell-code').value;
            const feedback = document.getElementById('spell-feedback');
            
            const requirements = {
                'HealingSpell': code.includes('class HealingSpell'),
                'DamageSpell': code.includes('class DamageSpell'),
                'BuffSpell': code.includes('class BuffSpell'),
                'SummonSpell': code.includes('class SummonSpell'),
                '_execute override': code.split('def _execute').length >= 3
            };
            
            const passed = Object.values(requirements).filter(v => v).length;
            
            if (passed === 5) {
                feedback.innerHTML = '<div class="alert alert-success">🔮 Amazing spell system! Your spells demonstrate perfect polymorphism.</div>';
            } else {
                feedback.innerHTML = `<div class="alert alert-info">Progress: ${passed}/5 spell features implemented.</div>`;
            }
        }

        // Quiz functionality
        const quizAnswers = {
            1: 'b', // Many forms
            2: 'c', // Providing new implementation in derived class
            3: 'c', // Inheritance and method overriding
            4: 'c', // Code flexibility and reusability
            5: 'b'  // Share a common base class
        };
        
        function checkQuiz(question, answer, button) {
            const options = button.parentElement.querySelectorAll('.quiz-option');
            
            options.forEach(opt => {
                opt.classList.remove('correct', 'incorrect');
                opt.disabled = true;
            });
            
            if (answer === quizAnswers[question]) {
                button.classList.add('correct');
                
                // Check if all questions answered correctly
                const allCorrect = Object.keys(quizAnswers).every(q => {
                    const correctBtn = document.querySelector(`.quiz-option[onclick*="checkQuiz(${q}, '${quizAnswers[q]}'"]`);
                    return correctBtn && correctBtn.classList.contains('correct');
                });
                
                if (allCorrect) {
                    unlockAchievement('quizMaster', 'Aced the polymorphism quiz!');
                }
            } else {
                button.classList.add('incorrect');
                // Show correct answer
                options.forEach(opt => {
                    if (opt.onclick.toString().includes(`'${quizAnswers[question]}'`)) {
                        opt.classList.add('correct');
                    }
                });
            }
        }

        // Lesson completion
        function completeLesson() {
            const totalAchievements = Object.keys(achievements).length;
            const earnedCount = Object.values(achievements).filter(v => v).length;
            
            alert(`🎉 Congratulations! You've completed Lessons 7 & 8: Polymorphism

You've learned:
✅ What polymorphism means ("many forms")
✅ How to override methods in derived classes
✅ Creating polymorphic collections
✅ The benefits of polymorphic design
✅ Common polymorphic patterns

Achievements earned: ${earnedCount}/${totalAchievements}

Next: Lesson 9 - Containment (Aggregation)`);
        }
    </script>
</body>
</html>