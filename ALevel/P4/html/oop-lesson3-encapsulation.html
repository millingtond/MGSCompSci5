<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 4: Data Protection - Encapsulation | 9618 OOP</title>
    <style>
        :root {
            --primary: #4f46e5;
            --primary-dark: #4338ca;
            --primary-light: #6366f1;
            --secondary: #7c3aed;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
            --dark: #1e293b;
            --light: #f8fafc;
            --gray: #64748b;
            --white: #ffffff;
            --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background: var(--light);
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 2rem 0;
            box-shadow: var(--shadow);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .header p {
            font-size: 1.25rem;
            opacity: 0.9;
        }

        /* Navigation Tabs */
        .tabs {
            background: white;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .tab-list {
            display: flex;
            overflow-x: auto;
            scrollbar-width: thin;
        }

        .tab {
            padding: 1rem 1.5rem;
            border: none;
            background: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            color: var(--gray);
            white-space: nowrap;
            position: relative;
            transition: all 0.3s ease;
        }

        .tab:hover {
            color: var(--primary);
        }

        .tab.active {
            color: var(--primary);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--primary);
        }

        /* Content */
        .content {
            padding: 2rem 0;
        }

        .section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
        }

        .card h2 {
            color: var(--primary-dark);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card h3 {
            color: var(--primary);
            margin: 1.5rem 0 1rem;
        }

        /* Interactive Elements */
        .interactive-box {
            background: var(--light);
            border: 2px solid var(--primary-light);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .code-block {
            background: var(--dark);
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            font-family: 'Consolas', 'Monaco', monospace;
            overflow-x: auto;
            margin: 1rem 0;
            white-space: pre;
            line-height: 1.5;
        }

        .code-block .keyword {
            color: #c084fc;
        }

        .code-block .string {
            color: #86efac;
        }

        .code-block .number {
            color: #fbbf24;
        }

        .code-block .comment {
            color: #64748b;
            font-style: italic;
        }

        .code-block .function {
            color: #60a5fa;
        }

        .code-block .class-name {
            color: #fbbf24;
        }

        /* Buttons */
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--gray);
            color: white;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        /* Input fields */
        input[type="text"],
        input[type="number"],
        textarea,
        select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        input:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* Alert boxes */
        .alert {
            padding: 1rem 1.5rem;
            border-radius: 8px;
            margin: 1rem 0;
            display: flex;
            align-items: start;
            gap: 0.75rem;
        }

        .alert-info {
            background: #dbeafe;
            color: #1e40af;
            border: 1px solid #60a5fa;
        }

        .alert-success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #34d399;
        }

        .alert-warning {
            background: #fef3c7;
            color: #92400e;
            border: 1px solid #fbbf24;
        }

        .alert-danger {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #f87171;
        }

        /* Progress indicators */
        .progress-bar {
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary);
            transition: width 0.5s ease;
        }

        /* Quiz styles */
        .quiz-option {
            display: block;
            width: 100%;
            padding: 1rem;
            margin: 0.5rem 0;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }

        .quiz-option:hover {
            border-color: var(--primary-light);
            transform: translateX(5px);
        }

        .quiz-option.correct {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }

        .quiz-option.incorrect {
            background: var(--danger);
            color: white;
            border-color: var(--danger);
        }

        /* Utility classes */
        .mt-1 { margin-top: 0.5rem; }
        .mt-2 { margin-top: 1rem; }
        .mt-3 { margin-top: 1.5rem; }
        .mt-4 { margin-top: 2rem; }
        
        .mb-1 { margin-bottom: 0.5rem; }
        .mb-2 { margin-bottom: 1rem; }
        .mb-3 { margin-bottom: 1.5rem; }
        .mb-4 { margin-bottom: 2rem; }

        .text-center { text-align: center; }
        .text-small { font-size: 0.875rem; }
        .text-muted { color: var(--gray); }

        .flex { display: flex; }
        .flex-center { display: flex; align-items: center; justify-content: center; }
        .gap-1 { gap: 0.5rem; }
        .gap-2 { gap: 1rem; }

        /* Animations */
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header h1 { font-size: 2rem; }
            .tab { padding: 0.75rem 1rem; font-size: 0.875rem; }
            .card { padding: 1.5rem; }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <h1>Lesson 4: Data Protection - Encapsulation</h1>
            <p>Learn how to protect your data and create secure, maintainable code</p>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="tabs">
        <div class="container">
            <div class="tab-list">
                <button class="tab active" data-section="intro">Introduction</button>
                <button class="tab" data-section="concept">What is Encapsulation?</button>
                <button class="tab" data-section="public-private">Public vs Private</button>
                <button class="tab" data-section="getters">Getter Methods</button>
                <button class="tab" data-section="setters">Setter Methods</button>
                <button class="tab" data-section="validation">Data Validation</button>
                <button class="tab" data-section="rpg-refactor">RPG Refactoring</button>
                <button class="tab" data-section="practice">Practice</button>
                <button class="tab" data-section="summary">Summary</button>
            </div>
        </div>
    </nav>

    <!-- Content -->
    <main class="content">
        <div class="container">
            <!-- Introduction -->
            <section id="intro" class="section active">
                <div class="card">
                    <h2>🎯 Learning Objectives</h2>
                    <p>By the end of this lesson, you will be able to:</p>
                    <ul style="margin-left: 2rem; line-height: 2;">
                        <li>Explain the principle of encapsulation and its benefits</li>
                        <li>Implement public and private access modifiers</li>
                        <li>Create getter (accessor) methods for controlled data access</li>
                        <li>Implement setter (mutator) methods with data validation</li>
                        <li>Apply encapsulation to protect data integrity in your RPG game</li>
                    </ul>
                </div>

                <div class="card">
                    <h2>🚀 Starter Activity</h2>
                    <div class="interactive-box">
                        <h3>The Problem with Public Data</h3>
                        <p>Look at this Player class from our previous lesson:</p>
                        
                        <div class="code-block"><span class="keyword">class</span> <span class="class-name">Player</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(self, name, health):
        self.name = name
        self.health = health
        self.max_health = health

<span class="comment"># Creating a player</span>
hero = Player(<span class="string">"Arion"</span>, <span class="number">100</span>)

<span class="comment"># What could go wrong?</span>
hero.health = <span class="number">-50</span>      <span class="comment"># Negative health?!</span>
hero.health = <span class="string">"lots"</span>   <span class="comment"># Wrong data type!</span>
hero.max_health = <span class="number">999999</span> <span class="comment"># Cheating!</span></div>

                        <div class="alert alert-warning mt-2">
                            <span>⚠️</span>
                            <div>
                                <strong>Think about it:</strong> What problems could these direct modifications cause in your game?
                                <textarea class="mt-2" rows="3" placeholder="Write your thoughts here..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="text-center mt-3">
                    <button class="btn btn-primary" onclick="nextSection()">
                        Continue to Learn About Encapsulation →
                    </button>
                </div>
            </section>

            <!-- What is Encapsulation -->
            <section id="concept" class="section">
                <div class="card">
                    <h2>📦 What is Encapsulation?</h2>
                    
                    <div class="alert alert-info">
                        <span>💡</span>
                        <div>
                            <strong>Definition:</strong> Encapsulation is the bundling of data (attributes) and the methods that operate on that data into a single unit (class), while restricting direct access to some of the object's components.
                        </div>
                    </div>

                    <h3>The Safe Analogy</h3>
                    <div class="interactive-box">
                        <p>Think of encapsulation like a safe:</p>
                        <ul style="margin-left: 2rem; line-height: 2;">
                            <li>🔐 The <strong>valuable items</strong> (data) are locked inside</li>
                            <li>🔑 You need the right <strong>combination or key</strong> (methods) to access them</li>
                            <li>🛡️ This <strong>protects</strong> the contents from unauthorized access</li>
                            <li>📋 There are <strong>rules</strong> about what can go in and out</li>
                        </ul>
                    </div>

                    <h3>Key Benefits of Encapsulation</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-top: 1rem;">
                        <div class="interactive-box">
                            <h4>🛡️ Data Protection</h4>
                            <p>Prevents invalid data from corrupting your objects</p>
                        </div>
                        <div class="interactive-box">
                            <h4>🔧 Maintainability</h4>
                            <p>Changes to internal implementation don't break external code</p>
                        </div>
                        <div class="interactive-box">
                            <h4>🎯 Control</h4>
                            <p>Decide exactly how your data can be accessed and modified</p>
                        </div>
                        <div class="interactive-box">
                            <h4>🐛 Debugging</h4>
                            <p>Easier to track where and how data changes</p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>🎮 Real-World Example</h2>
                    <p>In our RPG game, imagine if players could directly modify their stats:</p>
                    
                    <div class="code-block"><span class="comment"># Without encapsulation - DANGEROUS!</span>
player.gold = <span class="number">999999</span>     <span class="comment"># Infinite money cheat</span>
player.level = <span class="number">100</span>       <span class="comment"># Skip the entire game</span>
player.damage = <span class="number">-10</span>      <span class="comment"># Healing enemies?!</span></div>

                    <p class="mt-2">Encapsulation prevents these game-breaking modifications!</p>
                </div>
            </section>

            <!-- Public vs Private -->
            <section id="public-private" class="section">
                <div class="card">
                    <h2>🔑 Public vs Private Access</h2>
                    
                    <h3>Access Modifiers</h3>
                    <p>Access modifiers control who can see and use your class members:</p>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1rem;">
                        <div class="interactive-box">
                            <h4>🌍 Public Members</h4>
                            <ul style="margin-left: 1.5rem;">
                                <li>Accessible from anywhere</li>
                                <li>Part of the class's interface</li>
                                <li>In Python: normal naming</li>
                                <li>Example: <code>self.name</code></li>
                            </ul>
                        </div>
                        <div class="interactive-box">
                            <h4>🔒 Private Members</h4>
                            <ul style="margin-left: 1.5rem;">
                                <li>Only accessible within the class</li>
                                <li>Hidden implementation details</li>
                                <li>In Python: start with __</li>
                                <li>Example: <code>self.__health</code></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>🔧 Implementation in Different Languages</h2>
                    
                    <h3>Python Implementation</h3>
                    <div class="code-block"><span class="keyword">class</span> <span class="class-name">Character</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(self, name, health):
        self.__name = name      <span class="comment"># Private attribute (double underscore)</span>
        self.__health = health  <span class="comment"># Private attribute</span>
        self.level = <span class="number">1</span>         <span class="comment"># Public attribute</span></div>

                    <h3>Pseudocode (Cambridge 9618 Style)</h3>
                    <div class="code-block"><span class="keyword">CLASS</span> Character
    <span class="keyword">PRIVATE</span> Name : STRING
    <span class="keyword">PRIVATE</span> Health : INTEGER
    <span class="keyword">PUBLIC</span> Level : INTEGER
    
    <span class="keyword">PUBLIC PROCEDURE</span> New(N : STRING, H : INTEGER)
        Name ← N
        Health ← H
        Level ← <span class="number">1</span>
    <span class="keyword">ENDPROCEDURE</span>
<span class="keyword">ENDCLASS</span></div>
                </div>

                <div class="card">
                    <h2>🧪 Try It Yourself</h2>
                    <div class="interactive-box">
                        <p>Convert these public attributes to private. Add __ before each attribute name:</p>
                        
                        <div style="display: grid; grid-template-columns: auto 1fr; gap: 1rem; align-items: center;">
                            <label>self.gold =</label>
                            <input type="text" id="private1" placeholder="Enter private version">
                            
                            <label>self.experience =</label>
                            <input type="text" id="private2" placeholder="Enter private version">
                            
                            <label>self.inventory =</label>
                            <input type="text" id="private3" placeholder="Enter private version">
                        </div>
                        
                        <button class="btn btn-primary mt-2" onclick="checkPrivateAttributes()">
                            Check Answers
                        </button>
                        <div id="private-feedback" class="mt-2"></div>
                    </div>
                </div>
            </section>

            <!-- Getter Methods -->
            <section id="getters" class="section">
                <div class="card">
                    <h2>👁️ Getter Methods (Accessors)</h2>
                    
                    <div class="alert alert-info">
                        <span>💡</span>
                        <div>
                            <strong>Definition:</strong> Getter methods provide controlled read-only access to private attributes. They allow external code to see the value without being able to change it directly.
                        </div>
                    </div>

                    <h3>Why Use Getters?</h3>
                    <ul style="margin-left: 2rem; line-height: 2;">
                        <li>✅ Provide read-only access to private data</li>
                        <li>✅ Can add logic (formatting, calculations) before returning</li>
                        <li>✅ Maintain encapsulation while allowing necessary access</li>
                        <li>✅ Can change internal implementation without breaking external code</li>
                    </ul>
                </div>

                <div class="card">
                    <h2>📝 Implementing Getters</h2>
                    
                    <h3>Python Example</h3>
                    <div class="code-block"><span class="keyword">class</span> <span class="class-name">Player</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(self, name, health):
        self.__name = name
        self.__health = health
        self.__max_health = health
    
    <span class="comment"># Getter for name</span>
    <span class="keyword">def</span> <span class="function">get_name</span>(self):
        <span class="keyword">return</span> self.__name
    
    <span class="comment"># Getter for health</span>
    <span class="keyword">def</span> <span class="function">get_health</span>(self):
        <span class="keyword">return</span> self.__health
    
    <span class="comment"># Getter with logic</span>
    <span class="keyword">def</span> <span class="function">get_health_percentage</span>(self):
        <span class="keyword">return</span> (self.__health / self.__max_health) * <span class="number">100</span>

<span class="comment"># Usage</span>
player = Player(<span class="string">"Arion"</span>, <span class="number">100</span>)
print(player.get_name())              <span class="comment"># "Arion"</span>
print(player.get_health_percentage()) <span class="comment"># 100.0</span></div>

                    <h3>Pseudocode Example</h3>
                    <div class="code-block"><span class="keyword">CLASS</span> Player
    <span class="keyword">PRIVATE</span> Name : STRING
    <span class="keyword">PRIVATE</span> Health : INTEGER
    
    <span class="keyword">PUBLIC FUNCTION</span> GetName() <span class="keyword">RETURNS</span> STRING
        <span class="keyword">RETURN</span> Name
    <span class="keyword">ENDFUNCTION</span>
    
    <span class="keyword">PUBLIC FUNCTION</span> GetHealth() <span class="keyword">RETURNS</span> INTEGER
        <span class="keyword">RETURN</span> Health
    <span class="keyword">ENDFUNCTION</span>
<span class="keyword">ENDCLASS</span></div>
                </div>

                <div class="card">
                    <h2>✏️ Practice: Write Getters</h2>
                    <div class="interactive-box">
                        <p>Complete the getter methods for this Enemy class:</p>
                        
                        <div class="code-block"><span class="keyword">class</span> <span class="class-name">Enemy</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(self, name, damage):
        self.__name = name
        self.__damage = damage
        self.__is_alive = <span class="keyword">True</span>
    
    <span class="comment"># Complete this getter</span>
    <span class="keyword">def</span> <input type="text" id="getter1" placeholder="method_name" style="width: 150px;">(self):
        <span class="keyword">return</span> self.__name
    
    <span class="comment"># Complete this getter</span>
    <span class="keyword">def</span> get_damage(self):
        <span class="keyword">return</span> <input type="text" id="getter2" placeholder="?" style="width: 150px;"></div>
                        
                        <button class="btn btn-primary mt-2" onclick="checkGetters()">
                            Check Implementation
                        </button>
                        <div id="getter-feedback" class="mt-2"></div>
                    </div>
                </div>
            </section>

            <!-- Setter Methods -->
            <section id="setters" class="section">
                <div class="card">
                    <h2>✏️ Setter Methods (Mutators)</h2>
                    
                    <div class="alert alert-info">
                        <span>💡</span>
                        <div>
                            <strong>Definition:</strong> Setter methods provide controlled write access to private attributes. They allow you to validate data before it's stored.
                        </div>
                    </div>

                    <h3>The Power of Validation</h3>
                    <p>Setters let you enforce rules about your data:</p>
                    
                    <div class="interactive-box">
                        <h4>Example Rules for RPG Stats:</h4>
                        <ul style="margin-left: 1.5rem;">
                            <li>Health must be between 0 and max_health</li>
                            <li>Level must be positive</li>
                            <li>Name cannot be empty</li>
                            <li>Gold cannot be negative</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h2>🛡️ Implementing Setters with Validation</h2>
                    
                    <h3>Basic Setter</h3>
                    <div class="code-block"><span class="keyword">class</span> <span class="class-name">Player</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(self, name, health):
        self.__name = name
        self.__health = health
        self.__max_health = health
    
    <span class="comment"># Simple setter - no validation (not recommended)</span>
    <span class="keyword">def</span> <span class="function">set_name</span>(self, new_name):
        self.__name = new_name</div>

                    <h3>Setter with Validation</h3>
                    <div class="code-block"><span class="keyword">class</span> <span class="class-name">Player</span>:
    <span class="comment"># ... (previous code)</span>
    
    <span class="comment"># Setter with validation</span>
    <span class="keyword">def</span> <span class="function">set_health</span>(self, new_health):
        <span class="keyword">if</span> new_health < <span class="number">0</span>:
            self.__health = <span class="number">0</span>
        <span class="keyword">elif</span> new_health > self.__max_health:
            self.__health = self.__max_health
        <span class="keyword">else</span>:
            self.__health = new_health
    
    <span class="comment"># Setter with type checking</span>
    <span class="keyword">def</span> <span class="function">set_name</span>(self, new_name):
        <span class="keyword">if</span> isinstance(new_name, str) <span class="keyword">and</span> new_name.strip() != <span class="string">""</span>:
            self.__name = new_name
        <span class="keyword">else</span>:
            print(<span class="string">"Invalid name!"</span>)</div>

                    <h3>Pseudocode Example</h3>
                    <div class="code-block"><span class="keyword">PUBLIC PROCEDURE</span> SetHealth(NewHealth : INTEGER)
    <span class="keyword">IF</span> NewHealth < <span class="number">0</span> <span class="keyword">THEN</span>
        Health ← <span class="number">0</span>
    <span class="keyword">ELSEIF</span> NewHealth > MaxHealth <span class="keyword">THEN</span>
        Health ← MaxHealth
    <span class="keyword">ELSE</span>
        Health ← NewHealth
    <span class="keyword">ENDIF</span>
<span class="keyword">ENDPROCEDURE</span></div>
                </div>

                <div class="card">
                    <h2>🎯 Interactive: Test the Validation</h2>
                    <div class="interactive-box">
                        <p>See how setters protect your data:</p>
                        
                        <div class="mb-3">
                            <label>Try to set health to:</label>
                            <input type="number" id="health-input" value="-50">
                            <button class="btn btn-primary mt-2" onclick="testHealthSetter()">
                                Set Health
                            </button>
                        </div>
                        
                        <div id="health-result" class="alert alert-info" style="display: none;">
                            <span>ℹ️</span>
                            <div id="health-message"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Data Validation -->
            <section id="validation" class="section">
                <div class="card">
                    <h2>✅ Data Validation Best Practices</h2>
                    
                    <h3>Types of Validation</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem;">
                        <div class="interactive-box">
                            <h4>1. Range Validation</h4>
                            <div class="code-block"><span class="keyword">if</span> <span class="number">0</span> <= value <= <span class="number">100</span>:
    self.__stat = value</div>
                        </div>
                        
                        <div class="interactive-box">
                            <h4>2. Type Validation</h4>
                            <div class="code-block"><span class="keyword">if</span> isinstance(value, int):
    self.__level = value</div>
                        </div>
                        
                        <div class="interactive-box">
                            <h4>3. Business Rules</h4>
                            <div class="code-block"><span class="keyword">if</span> self.__gold >= price:
    self.__gold -= price</div>
                        </div>
                        
                        <div class="interactive-box">
                            <h4>4. Format Validation</h4>
                            <div class="code-block"><span class="keyword">if</span> value.strip() != <span class="string">""</span>:
    self.__name = value</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>🔍 Complete Example: Item Class</h2>
                    <div class="code-block"><span class="keyword">class</span> <span class="class-name">Item</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(self, name, value, weight):
        self.__name = name
        self.__value = <span class="number">0</span>
        self.__weight = <span class="number">0.0</span>
        
        <span class="comment"># Use setters to validate initial values</span>
        self.set_value(value)
        self.set_weight(weight)
    
    <span class="comment"># Getters</span>
    <span class="keyword">def</span> <span class="function">get_name</span>(self):
        <span class="keyword">return</span> self.__name
    
    <span class="keyword">def</span> <span class="function">get_value</span>(self):
        <span class="keyword">return</span> self.__value
    
    <span class="keyword">def</span> <span class="function">get_weight</span>(self):
        <span class="keyword">return</span> self.__weight
    
    <span class="comment"># Setters with validation</span>
    <span class="keyword">def</span> <span class="function">set_value</span>(self, new_value):
        <span class="keyword">if</span> isinstance(new_value, (int, float)) <span class="keyword">and</span> new_value >= <span class="number">0</span>:
            self.__value = int(new_value)
        <span class="keyword">else</span>:
            print(<span class="string">f"Invalid value: {new_value}. Value must be non-negative."</span>)
    
    <span class="keyword">def</span> <span class="function">set_weight</span>(self, new_weight):
        <span class="keyword">if</span> isinstance(new_weight, (int, float)) <span class="keyword">and</span> new_weight > <span class="number">0</span>:
            self.__weight = float(new_weight)
        <span class="keyword">else</span>:
            print(<span class="string">f"Invalid weight: {new_weight}. Weight must be positive."</span>)

<span class="comment"># Testing the validation</span>
sword = Item(<span class="string">"Iron Sword"</span>, <span class="number">100</span>, <span class="number">5.5</span>)
sword.set_value(<span class="number">-50</span>)    <span class="comment"># Invalid value: -50. Value must be non-negative.</span>
sword.set_weight(<span class="number">0</span>)     <span class="comment"># Invalid weight: 0. Weight must be positive.</span></div>
                </div>

                <div class="card">
                    <h2>💡 Validation Challenge</h2>
                    <div class="interactive-box">
                        <p>Write a setter for a player's level with these rules:</p>
                        <ul style="margin-left: 1.5rem;">
                            <li>Level must be between 1 and 100</li>
                            <li>Level can only increase (no level downs)</li>
                            <li>Each level up gives 10 skill points</li>
                        </ul>
                        
                        <textarea id="level-setter" rows="10" style="font-family: monospace;">def set_level(self, new_level):
    # Write your validation code here
    pass</textarea>
                        
                        <button class="btn btn-primary mt-2" onclick="checkLevelSetter()">
                            Test Your Code
                        </button>
                        <div id="level-feedback" class="mt-2"></div>
                    </div>
                </div>
            </section>

            <!-- RPG Refactoring -->
            <section id="rpg-refactor" class="section">
                <div class="card">
                    <h2>🎮 Refactoring Our RPG Classes</h2>
                    <p>Let's apply encapsulation to our Player and Enemy classes from previous lessons:</p>
                    
                    <h3>Before (No Encapsulation)</h3>
                    <div class="code-block"><span class="keyword">class</span> <span class="class-name">Player</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(self, name, health):
        self.name = name        <span class="comment"># Public - can be changed to anything!</span>
        self.health = health    <span class="comment"># Public - can be negative!</span>
        self.gold = <span class="number">50</span>         <span class="comment"># Public - infinite money cheat!</span></div>

                    <h3>After (With Encapsulation)</h3>
                    <div class="code-block"><span class="keyword">class</span> <span class="class-name">Player</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(self, name, health):
        self.__name = name          <span class="comment"># Private</span>
        self.__health = health      <span class="comment"># Private</span>
        self.__max_health = health  <span class="comment"># Private</span>
        self.__gold = <span class="number">50</span>           <span class="comment"># Private</span>
        self.__level = <span class="number">1</span>           <span class="comment"># Private</span>
        self.__experience = <span class="number">0</span>      <span class="comment"># Private</span>
    
    <span class="comment"># Getters</span>
    <span class="keyword">def</span> <span class="function">get_name</span>(self):
        <span class="keyword">return</span> self.__name
    
    <span class="keyword">def</span> <span class="function">get_health</span>(self):
        <span class="keyword">return</span> self.__health
    
    <span class="keyword">def</span> <span class="function">get_gold</span>(self):
        <span class="keyword">return</span> self.__gold
    
    <span class="comment"># Setters with validation</span>
    <span class="keyword">def</span> <span class="function">set_health</span>(self, new_health):
        <span class="keyword">if</span> new_health < <span class="number">0</span>:
            self.__health = <span class="number">0</span>
        <span class="keyword">elif</span> new_health > self.__max_health:
            self.__health = self.__max_health
        <span class="keyword">else</span>:
            self.__health = new_health
    
    <span class="keyword">def</span> <span class="function">add_gold</span>(self, amount):
        <span class="keyword">if</span> amount > <span class="number">0</span>:
            self.__gold += amount
    
    <span class="keyword">def</span> <span class="function">spend_gold</span>(self, amount):
        <span class="keyword">if</span> <span class="number">0</span> < amount <= self.__gold:
            self.__gold -= amount
            <span class="keyword">return True</span>
        <span class="keyword">return False</span>
    
    <span class="keyword">def</span> <span class="function">take_damage</span>(self, damage):
        <span class="keyword">if</span> damage > <span class="number">0</span>:
            self.set_health(self.__health - damage)
    
    <span class="keyword">def</span> <span class="function">heal</span>(self, amount):
        <span class="keyword">if</span> amount > <span class="number">0</span>:
            self.set_health(self.__health + amount)</div>
                </div>

                <div class="card">
                    <h2>🛡️ Your Turn: Encapsulate the Enemy Class</h2>
                    <div class="interactive-box">
                        <p>Complete the Enemy class with proper encapsulation:</p>
                        
                        <textarea id="enemy-class" rows="20" style="font-family: monospace;">class Enemy:
    def __init__(self, name, damage, health):
        # TODO: Make all attributes private
        self.name = name
        self.damage = damage
        self.health = health
    
    # TODO: Add getters for all attributes
    
    # TODO: Add setter for health with validation
    
    # TODO: Add method to attack player</textarea>
                        
                        <button class="btn btn-primary mt-2" onclick="checkEnemyClass()">
                            Check Implementation
                        </button>
                        <div id="enemy-feedback" class="mt-2"></div>
                    </div>
                </div>

                <div class="card">
                    <h2>🎯 Practical Task</h2>
                    <div class="alert alert-warning">
                        <span>📝</span>
                        <div>
                            <strong>Task:</strong> Modify your Player and Enemy classes from previous lessons to use encapsulation:
                            <ol style="margin-left: 1.5rem; margin-top: 0.5rem;">
                                <li>Make all attributes private (use __ prefix)</li>
                                <li>Create getter methods for all attributes</li>
                                <li>Create setter methods with appropriate validation</li>
                                <li>Test that invalid values are properly rejected</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Practice -->
            <section id="practice" class="section">
                <div class="card">
                    <h2>💪 Practice Exercises</h2>
                    
                    <h3>Exercise 1: Bank Account Class</h3>
                    <div class="interactive-box">
                        <p>Create a BankAccount class with proper encapsulation:</p>
                        <ul style="margin-left: 1.5rem;">
                            <li>Private attributes: __balance, __account_number</li>
                            <li>Getter for balance</li>
                            <li>Deposit method (amount must be positive)</li>
                            <li>Withdraw method (check sufficient funds)</li>
                        </ul>
                        
                        <textarea id="bank-account" rows="15" style="font-family: monospace;">class BankAccount:
    # Write your implementation here
    pass</textarea>
                        
                        <button class="btn btn-primary mt-2" onclick="checkBankAccount()">
                            Test Your Code
                        </button>
                        <div id="bank-feedback" class="mt-2"></div>
                    </div>
                </div>

                <div class="card">
                    <h2>📝 Quick Quiz</h2>
                    <div class="interactive-box">
                        <div class="mb-3">
                            <p><strong>1. What is the main purpose of encapsulation?</strong></p>
                            <button class="quiz-option" onclick="checkQuiz(1, 'a', this)">To make code run faster</button>
                            <button class="quiz-option" onclick="checkQuiz(1, 'b', this)">To protect data and control access</button>
                            <button class="quiz-option" onclick="checkQuiz(1, 'c', this)">To create more classes</button>
                            <button class="quiz-option" onclick="checkQuiz(1, 'd', this)">To use less memory</button>
                        </div>
                        
                        <div class="mb-3">
                            <p><strong>2. In Python, how do you make an attribute private?</strong></p>
                            <button class="quiz-option" onclick="checkQuiz(2, 'a', this)">Use the private keyword</button>
                            <button class="quiz-option" onclick="checkQuiz(2, 'b', this)">Start the name with __</button>
                            <button class="quiz-option" onclick="checkQuiz(2, 'c', this)">End the name with __</button>
                            <button class="quiz-option" onclick="checkQuiz(2, 'd', this)">Use capital letters</button>
                        </div>
                        
                        <div class="mb-3">
                            <p><strong>3. What should a setter method always include?</strong></p>
                            <button class="quiz-option" onclick="checkQuiz(3, 'a', this)">A return statement</button>
                            <button class="quiz-option" onclick="checkQuiz(3, 'b', this)">Print statements</button>
                            <button class="quiz-option" onclick="checkQuiz(3, 'c', this)">Data validation</button>
                            <button class="quiz-option" onclick="checkQuiz(3, 'd', this)">Multiple parameters</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Summary -->
            <section id="summary" class="section">
                <div class="card">
                    <h2>📚 Lesson Summary</h2>
                    
                    <h3>Key Concepts Covered</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem;">
                        <div class="interactive-box">
                            <h4>🔐 Encapsulation</h4>
                            <p>Bundling data with methods that operate on it, while restricting direct access</p>
                        </div>
                        
                        <div class="interactive-box">
                            <h4>🔑 Access Modifiers</h4>
                            <p>Public: accessible everywhere<br>Private: accessible only within the class</p>
                        </div>
                        
                        <div class="interactive-box">
                            <h4>👁️ Getter Methods</h4>
                            <p>Provide controlled read access to private attributes</p>
                        </div>
                        
                        <div class="interactive-box">
                            <h4>✏️ Setter Methods</h4>
                            <p>Provide controlled write access with validation</p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>✅ Benefits of Encapsulation</h2>
                    <ul style="margin-left: 2rem; line-height: 2;">
                        <li><strong>Data Protection:</strong> Prevents invalid or inconsistent data states</li>
                        <li><strong>Flexibility:</strong> Internal implementation can change without affecting external code</li>
                        <li><strong>Debugging:</strong> Easier to track where data is modified</li>
                        <li><strong>Security:</strong> Sensitive data is hidden from external access</li>
                        <li><strong>Maintainability:</strong> Clear interface between class internals and external code</li>
                    </ul>
                </div>

                <div class="card">
                    <h2>🎯 Next Steps</h2>
                    <div class="alert alert-success">
                        <span>✅</span>
                        <div>
                            <strong>Congratulations!</strong> You've completed Lesson 4 on Encapsulation.
                            <p class="mt-2">In the next lesson, we'll explore <strong>Inheritance</strong> - how to create new classes based on existing ones!</p>
                        </div>
                    </div>
                    
                    <div class="text-center mt-3">
                        <button class="btn btn-success pulse" onclick="completeLesson()">
                            Complete Lesson & Continue →
                        </button>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <script>
        // Tab navigation
        const tabs = document.querySelectorAll('.tab');
        const sections = document.querySelectorAll('.section');
        
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const targetSection = tab.dataset.section;
                
                // Update active tab
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Update active section
                sections.forEach(s => s.classList.remove('active'));
                document.getElementById(targetSection).classList.add('active');
                
                // Scroll to top
                window.scrollTo(0, 0);
            });
        });
        
        // Navigation functions
        function nextSection() {
            const activeTab = document.querySelector('.tab.active');
            const nextTab = activeTab.nextElementSibling;
            if (nextTab) {
                nextTab.click();
            }
        }
        
        // Public vs Private section
        function checkPrivateAttributes() {
            const answers = {
                'private1': 'self.__gold',
                'private2': 'self.__experience',
                'private3': 'self.__inventory'
            };
            
            let correct = 0;
            const feedback = document.getElementById('private-feedback');
            
            for (let [id, answer] of Object.entries(answers)) {
                const input = document.getElementById(id);
                if (input.value.trim() === answer) {
                    input.style.borderColor = 'var(--success)';
                    correct++;
                } else {
                    input.style.borderColor = 'var(--danger)';
                }
            }
            
            if (correct === 3) {
                feedback.innerHTML = '<div class="alert alert-success">✅ Perfect! You understand how to make attributes private in Python.</div>';
            } else {
                feedback.innerHTML = `<div class="alert alert-warning">⚠️ ${correct}/3 correct. Remember: use double underscore (__) before the attribute name.</div>`;
            }
        }
        
        // Getter section
        function checkGetters() {
            const getter1 = document.getElementById('getter1').value.trim();
            const getter2 = document.getElementById('getter2').value.trim();
            const feedback = document.getElementById('getter-feedback');
            
            if (getter1 === 'get_name' && getter2 === 'self.__damage') {
                feedback.innerHTML = '<div class="alert alert-success">✅ Excellent! Your getter methods are correctly implemented.</div>';
            } else {
                let hints = [];
                if (getter1 !== 'get_name') hints.push('The first getter should be named "get_name"');
                if (getter2 !== 'self.__damage') hints.push('The second getter should return "self.__damage"');
                feedback.innerHTML = `<div class="alert alert-warning">⚠️ Not quite right. Hints: ${hints.join('; ')}</div>`;
            }
        }
        
        // Setter section
        function testHealthSetter() {
            const value = parseInt(document.getElementById('health-input').value);
            const resultDiv = document.getElementById('health-result');
            const messageDiv = document.getElementById('health-message');
            
            resultDiv.style.display = 'block';
            
            if (value < 0) {
                messageDiv.innerHTML = `
                    <strong>Input:</strong> ${value}<br>
                    <strong>Result:</strong> Health set to 0<br>
                    <strong>Explanation:</strong> The setter prevented negative health!
                `;
            } else if (value > 100) {
                messageDiv.innerHTML = `
                    <strong>Input:</strong> ${value}<br>
                    <strong>Result:</strong> Health set to 100 (max_health)<br>
                    <strong>Explanation:</strong> The setter capped health at maximum!
                `;
            } else {
                messageDiv.innerHTML = `
                    <strong>Input:</strong> ${value}<br>
                    <strong>Result:</strong> Health set to ${value}<br>
                    <strong>Explanation:</strong> Valid value accepted!
                `;
            }
        }
        
        // Validation section
        function checkLevelSetter() {
            const code = document.getElementById('level-setter').value;
            const feedback = document.getElementById('level-feedback');
            
            // Check for key validation elements
            const checks = {
                'Range check': code.includes('1') && code.includes('100'),
                'Increase only': code.includes('new_level >') || code.includes('new_level >='),
                'Skill points': code.includes('skill_points') || code.includes('10')
            };
            
            const passed = Object.values(checks).filter(v => v).length;
            const total = Object.keys(checks).length;
            
            if (passed === total) {
                feedback.innerHTML = '<div class="alert alert-success">✅ Excellent validation logic!</div>';
            } else {
                const missing = Object.entries(checks)
                    .filter(([k, v]) => !v)
                    .map(([k]) => k);
                feedback.innerHTML = `<div class="alert alert-warning">⚠️ Missing: ${missing.join(', ')}</div>`;
            }
        }
        
        // RPG Refactoring section
        function checkEnemyClass() {
            const code = document.getElementById('enemy-class').value;
            const feedback = document.getElementById('enemy-feedback');
            
            const requirements = {
                'Private attributes': code.includes('self.__name') && code.includes('self.__damage'),
                'Name getter': code.includes('def get_name'),
                'Damage getter': code.includes('def get_damage'),
                'Health setter': code.includes('def set_health'),
                'Validation': code.includes('if') && (code.includes('0') || code.includes('validation'))
            };
            
            const passed = Object.values(requirements).filter(v => v).length;
            const total = Object.keys(requirements).length;
            
            if (passed === total) {
                feedback.innerHTML = '<div class="alert alert-success">✅ Perfect Enemy class with encapsulation!</div>';
            } else {
                const completed = Object.entries(requirements)
                    .filter(([k, v]) => v)
                    .map(([k]) => k);
                feedback.innerHTML = `<div class="alert alert-info">Progress: ${passed}/${total} requirements completed. Done: ${completed.join(', ')}</div>`;
            }
        }
        
        // Practice section
        function checkBankAccount() {
            const code = document.getElementById('bank-account').value;
            const feedback = document.getElementById('bank-feedback');
            
            const requirements = {
                'Private balance': code.includes('self.__balance'),
                'Private account number': code.includes('self.__account_number'),
                'Balance getter': code.includes('def get_balance'),
                'Deposit method': code.includes('def deposit'),
                'Withdraw method': code.includes('def withdraw'),
                'Positive check': code.includes('> 0'),
                'Sufficient funds': code.includes('<=') || code.includes('sufficient')
            };
            
            const passed = Object.values(requirements).filter(v => v).length;
            const total = Object.keys(requirements).length;
            
            if (passed === total) {
                feedback.innerHTML = '<div class="alert alert-success">✅ Excellent BankAccount implementation!</div>';
            } else {
                feedback.innerHTML = `<div class="alert alert-info">Progress: ${passed}/${total} requirements met.</div>`;
            }
        }
        
        // Quiz functionality
        const quizAnswers = {
            1: 'b', // To protect data and control access
            2: 'b', // Start the name with __
            3: 'c'  // Data validation
        };
        
        function checkQuiz(question, answer, button) {
            const options = button.parentElement.querySelectorAll('.quiz-option');
            
            options.forEach(opt => {
                opt.classList.remove('correct', 'incorrect');
                opt.disabled = true;
            });
            
            if (answer === quizAnswers[question]) {
                button.classList.add('correct');
            } else {
                button.classList.add('incorrect');
                // Show correct answer
                options.forEach(opt => {
                    if (opt.textContent.includes(getCorrectAnswerText(question))) {
                        opt.classList.add('correct');
                    }
                });
            }
        }
        
        function getCorrectAnswerText(question) {
            const correctTexts = {
                1: 'To protect data and control access',
                2: 'Start the name with __',
                3: 'Data validation'
            };
            return correctTexts[question];
        }
        
        // Lesson completion
        function completeLesson() {
            alert('🎉 Congratulations! You\'ve completed Lesson 4: Data Protection - Encapsulation\n\nYou\'ve learned:\n✅ What encapsulation is and why it\'s important\n✅ How to use private attributes\n✅ Creating getter and setter methods\n✅ Implementing data validation\n\nNext: Lesson 5 & 6 - Inheritance');
            // In a real application, this would save progress and navigate to the next lesson
        }
    </script>
</body>
</html>