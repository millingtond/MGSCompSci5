<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Standards City - Building a Compatible World</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #3498db 0%, #2ecc71 100%);
            color: #333;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            animation: fadeIn 0.3s;
        }

        .modal-content {
            background-color: #fff;
            margin: 5% auto;
            padding: 30px;
            border: 3px solid #3498db;
            width: 90%;
            max-width: 600px;
            border-radius: 15px;
            box-shadow: 0 5px 30px rgba(0,0,0,0.3);
            animation: slideIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Header Styles */
        .header {
            background: #fff;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
            position: relative;
        }

        .header h1 {
            color: #3498db;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header .subtitle {
            color: #7f8c8d;
            font-size: 1.2em;
        }

        .reset-btn {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: #e74c3c;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .reset-btn:hover {
            background: #c0392b;
            transform: translateY(-50%) scale(1.05);
        }

        /* Progress Bar */
        .progress-container {
            width: 90%;
            max-width: 800px;
            height: 35px;
            background: rgba(255,255,255,0.3);
            border: 2px solid #fff;
            border-radius: 20px;
            margin: 20px auto;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #f39c12, #e67e22);
            width: 0%;
            transition: width 0.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-weight: bold;
            font-size: 1.1em;
        }

        /* City Container */
        .city-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .district {
            display: none;
            background: #fff;
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 5px 25px rgba(0,0,0,0.1);
            animation: fadeIn 0.5s;
        }

        .district.active {
            display: block;
        }

        .district h2 {
            color: #3498db;
            margin-bottom: 20px;
            font-size: 2em;
        }

        /* Chaos Simulation */
        .chaos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .device-card {
            background: #f8f9fa;
            border: 3px solid #dee2e6;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
        }

        .device-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .device-card.incompatible {
            background: #ffebee;
            border-color: #f44336;
            animation: shake 0.5s;
        }

        .device-card.compatible {
            background: #e8f5e9;
            border-color: #4caf50;
            animation: pulse 0.5s;
        }

        .device-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .connection-line {
            position: absolute;
            height: 3px;
            background: #e74c3c;
            transform-origin: left center;
            z-index: -1;
        }

        .connection-line.success {
            background: #27ae60;
        }

        /* Standards Gallery */
        .standards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .standard-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
            border: 3px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .standard-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            border-color: #3498db;
        }

        .standard-card.explored {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
        }

        .standard-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .standard-card h3 {
            margin-bottom: 10px;
            font-size: 1.5em;
        }

        .standard-details {
            display: none;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid rgba(255,255,255,0.3);
            text-align: left;
        }

        .standard-card.explored .standard-details {
            display: block;
        }

        /* Interactive Demo */
        .demo-area {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
        }

        .device-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .device-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1em;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .device-btn:hover {
            background: #2980b9;
            transform: scale(1.05);
        }

        .device-btn.selected {
            background: #27ae60;
            box-shadow: 0 0 20px rgba(39,174,96,0.5);
        }

        .compatibility-matrix {
            background: #fff;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            overflow-x: auto;
        }

        .compatibility-table {
            width: 100%;
            border-collapse: collapse;
        }

        .compatibility-table th, .compatibility-table td {
            padding: 12px;
            text-align: center;
            border: 1px solid #dee2e6;
        }

        .compatibility-table th {
            background: #3498db;
            color: white;
        }

        .compatible-cell {
            background: #d4edda;
            color: #155724;
            font-weight: bold;
        }

        .incompatible-cell {
            background: #f8d7da;
            color: #721c24;
            font-weight: bold;
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding: 20px 0;
            margin: 30px 0;
        }

        .timeline-line {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 3px;
            background: #3498db;
            transform: translateX(-50%);
        }

        .timeline-item {
            position: relative;
            padding: 20px;
            margin: 20px 0;
            width: 45%;
        }

        .timeline-item:nth-child(odd) {
            left: 0;
            text-align: right;
        }

        .timeline-item:nth-child(even) {
            left: 55%;
            text-align: left;
        }

        .timeline-content {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            position: relative;
        }

        .timeline-date {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 60px;
            height: 60px;
            background: #3498db;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9em;
        }

        .timeline-item:nth-child(odd) .timeline-date {
            right: -80px;
        }

        .timeline-item:nth-child(even) .timeline-date {
            left: -80px;
        }

        /* Benefits Showcase */
        .benefits-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .benefit-box {
            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
            border-radius: 15px;
            padding: 25px;
            border: 2px solid #e9ecef;
            transition: all 0.3s;
            cursor: pointer;
        }

        .benefit-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-color: #3498db;
        }

        .benefit-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
            color: #3498db;
        }

        .benefit-box h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        /* Question Box */
        .question-box {
            background: #e3f2fd;
            border: 2px solid #2196f3;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }

        .question-box h3 {
            color: #1976d2;
            margin-bottom: 15px;
        }

        .answer-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-top: 15px;
        }

        .answer-btn {
            background: #fff;
            border: 2px solid #2196f3;
            color: #1976d2;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1em;
            font-weight: 500;
        }

        .answer-btn:hover:not(:disabled) {
            background: #2196f3;
            color: white;
            transform: scale(1.05);
        }

        .answer-btn.correct {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
            animation: correctPulse 0.5s;
        }

        .answer-btn.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
            animation: shake 0.5s;
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Achievement */
        .achievement {
            position: fixed;
            top: 100px;
            right: -400px;
            background: #fff;
            padding: 20px 30px;
            border-radius: 15px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.2);
            transition: right 0.5s;
            border-left: 5px solid #f39c12;
        }

        .achievement.show {
            right: 20px;
        }

        .achievement h4 {
            color: #f39c12;
            margin-bottom: 5px;
        }

        /* Button Styles */
        .btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 500;
            transition: all 0.3s;
            margin: 10px 5px;
        }

        .btn:hover:not(:disabled) {
            background: #2980b9;
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }

        /* Analogy Box */
        .analogy-box {
            background: linear-gradient(135deg, #fff9c4 0%, #fff59d 100%);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border: 2px solid #f9a825;
        }

        .analogy-box h3 {
            color: #f57c00;
            margin-bottom: 15px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            .reset-btn {
                position: static;
                margin-top: 10px;
            }
            .timeline-item {
                width: 100%;
                left: 0 !important;
                text-align: left !important;
            }
            .timeline-date {
                position: relative !important;
                left: 0 !important;
                right: 0 !important;
                margin: 10px 0;
            }
            .timeline-line {
                left: 20px;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Interactive Elements */
        .interactive-element {
            cursor: pointer;
            transition: all 0.3s;
        }

        .interactive-element:hover {
            transform: scale(1.05);
        }

        /* Status Indicators */
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-left: 8px;
        }

        .status-indicator.green {
            background: #27ae60;
            box-shadow: 0 0 10px rgba(39,174,96,0.5);
        }

        .status-indicator.red {
            background: #e74c3c;
            box-shadow: 0 0 10px rgba(231,76,60,0.5);
        }

        /* Focus States for Accessibility */
        button:focus, .device-card:focus, .standard-card:focus {
            outline: 3px solid #f39c12;
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <!-- Instructions Modal -->
    <div id="instructionsModal" class="modal" role="dialog" aria-labelledby="modalTitle" aria-describedby="modalDescription">
        <div class="modal-content">
            <h2 id="modalTitle" style="color: #3498db; margin-bottom: 20px;">üèôÔ∏è Welcome to Standards City!</h2>
            <p id="modalDescription" style="line-height: 1.8; margin-bottom: 15px;">
                You're the new Chief Technology Officer of Standards City! Your mission is to ensure all technology 
                in the city works together harmoniously. Without standards, it would be chaos!
            </p>
            <h3 style="color: #3498db; margin: 20px 0 10px;">Your City Districts:</h3>
            <ul style="list-style: none; padding-left: 0;">
                <li style="margin: 10px 0;">üöß <strong>District 1:</strong> Experience the chaos without standards</li>
                <li style="margin: 10px 0;">üìö <strong>District 2:</strong> Explore common computing standards</li>
                <li style="margin: 10px 0;">üîå <strong>District 3:</strong> Test device compatibility</li>
                <li style="margin: 10px 0;">üìÖ <strong>District 4:</strong> Journey through standards history</li>
                <li style="margin: 10px 0;">‚ú® <strong>District 5:</strong> Discover the benefits of standards</li>
            </ul>
            <p style="margin: 20px 0; color: #e67e22; font-weight: bold;">
                Build a fully compatible city to earn your Standards Expert certification!
            </p>
            <button class="btn" id="closeInstructionsBtn">Enter Standards City</button>
        </div>
    </div>

    <!-- Achievement Notification -->
    <div id="achievement" class="achievement" role="alert" aria-live="polite">
        <h4>Achievement Unlocked!</h4>
        <p id="achievementText">Great work!</p>
    </div>

    <!-- Header -->
    <div class="header">
        <h1>üèôÔ∏è Standards City</h1>
        <p class="subtitle">Building a Compatible Digital World</p>
        <button class="reset-btn" id="resetBtn" aria-label="Reset all progress">üîÑ Reset City</button>
    </div>

    <!-- Progress Bar -->
    <div class="progress-container" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
        <div id="progressBar" class="progress-bar">0%</div>
    </div>

    <!-- City Container -->
    <div class="city-container">
        <!-- District 1: Chaos Without Standards -->
        <div id="district1" class="district active">
            <h2>üöß District 1: The Chaos Zone</h2>
            <p style="margin-bottom: 20px;">Welcome to a world without standards! Try to connect different manufacturers' devices and see what happens...</p>
            
            <div class="chaos-grid" id="chaosGrid">
                <div class="device-card" data-manufacturer="TechCorp" data-connector="proprietary-A" tabindex="0" role="button" aria-label="TechCorp Laptop">
                    <div class="device-icon">üíª</div>
                    <h3>TechCorp Laptop</h3>
                    <p>Connector: TechCorp-A</p>
                </div>
                
                <div class="device-card" data-manufacturer="CompuMax" data-connector="proprietary-B" tabindex="0" role="button" aria-label="CompuMax Mouse">
                    <div class="device-icon">üñ±Ô∏è</div>
                    <h3>CompuMax Mouse</h3>
                    <p>Connector: CompuMax-B</p>
                </div>
                
                <div class="device-card" data-manufacturer="DataPro" data-connector="proprietary-C" tabindex="0" role="button" aria-label="DataPro Keyboard">
                    <div class="device-icon">‚å®Ô∏è</div>
                    <h3>DataPro Keyboard</h3>
                    <p>Connector: DataPro-C</p>
                </div>
                
                <div class="device-card" data-manufacturer="TechCorp" data-connector="proprietary-A" tabindex="0" role="button" aria-label="TechCorp Printer">
                    <div class="device-icon">üñ®Ô∏è</div>
                    <h3>TechCorp Printer</h3>
                    <p>Connector: TechCorp-A</p>
                </div>
                
                <div class="device-card" data-manufacturer="MegaTech" data-connector="proprietary-D" tabindex="0" role="button" aria-label="MegaTech Storage">
                    <div class="device-icon">üíæ</div>
                    <h3>MegaTech Storage</h3>
                    <p>Connector: MegaTech-D</p>
                </div>
                
                <div class="device-card" data-manufacturer="CompuMax" data-connector="proprietary-B" tabindex="0" role="button" aria-label="CompuMax Monitor">
                    <div class="device-icon">üñ•Ô∏è</div>
                    <h3>CompuMax Monitor</h3>
                    <p>Connector: CompuMax-B</p>
                </div>
            </div>

            <div id="chaosResult" style="margin-top: 20px; padding: 20px; background: #fff3cd; border: 2px solid #ffc107; border-radius: 10px; display: none;">
                <h3>Connection Result:</h3>
                <p id="chaosMessage"></p>
            </div>

            <div class="analogy-box">
                <h3>üèóÔ∏è Construction Analogy</h3>
                <p>Imagine if every construction company used different sized bricks, different types of cement, 
                and unique electrical outlets. Buildings from different companies couldn't share materials or 
                connect to each other's power systems. That's computing without standards!</p>
            </div>

            <div class="question-box" id="district1Question" style="display: none;">
                <h3>Chaos Understanding: What happens without standards?</h3>
                <div class="answer-options">
                    <button class="answer-btn" data-answer="faster">Technology works faster</button>
                    <button class="answer-btn" data-answer="incompatible">Only same-company products work together</button>
                    <button class="answer-btn" data-answer="cheaper">Products become cheaper</button>
                    <button class="answer-btn" data-answer="secure">Systems are more secure</button>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button id="nextBtn1" class="btn" disabled>Next District ‚Üí</button>
            </div>
        </div>

        <!-- District 2: Standards Gallery -->
        <div id="district2" class="district">
            <h2>üìö District 2: Standards Gallery</h2>
            <p style="margin-bottom: 20px;">Explore the essential standards that make modern computing possible. Click each standard to learn more!</p>
            
            <div class="standards-grid">
                <div class="standard-card" data-standard="usb" tabindex="0" role="button" aria-label="USB Standard">
                    <div class="standard-icon">üîå</div>
                    <h3>USB</h3>
                    <p>Universal Serial Bus</p>
                    <div class="standard-details">
                        <strong>Purpose:</strong> Connect peripherals to computers<br>
                        <strong>Created:</strong> 1996<br>
                        <strong>Versions:</strong> USB 1.0 to USB4<br>
                        <strong>Impact:</strong> Replaced dozens of proprietary connectors
                    </div>
                </div>

                <div class="standard-card" data-standard="html" tabindex="0" role="button" aria-label="HTML Standard">
                    <div class="standard-icon">üåê</div>
                    <h3>HTML</h3>
                    <p>HyperText Markup Language</p>
                    <div class="standard-details">
                        <strong>Purpose:</strong> Structure web pages<br>
                        <strong>Created:</strong> 1993<br>
                        <strong>Current:</strong> HTML5<br>
                        <strong>Impact:</strong> Foundation of the World Wide Web
                    </div>
                </div>

                <div class="standard-card" data-standard="wifi" tabindex="0" role="button" aria-label="Wi-Fi Standard">
                    <div class="standard-icon">üì∂</div>
                    <h3>Wi-Fi</h3>
                    <p>IEEE 802.11</p>
                    <div class="standard-details">
                        <strong>Purpose:</strong> Wireless networking<br>
                        <strong>Created:</strong> 1997<br>
                        <strong>Versions:</strong> 802.11a/b/g/n/ac/ax<br>
                        <strong>Impact:</strong> Enabled wireless internet everywhere
                    </div>
                </div>

                <div class="standard-card" data-standard="ethernet" tabindex="0" role="button" aria-label="Ethernet Standard">
                    <div class="standard-icon">üîó</div>
                    <h3>Ethernet</h3>
                    <p>IEEE 802.3</p>
                    <div class="standard-details">
                        <strong>Purpose:</strong> Wired networking<br>
                        <strong>Created:</strong> 1983<br>
                        <strong>Speeds:</strong> 10Mbps to 400Gbps<br>
                        <strong>Impact:</strong> Backbone of local networks
                    </div>
                </div>

                <div class="standard-card" data-standard="mp3" tabindex="0" role="button" aria-label="MP3 Standard">
                    <div class="standard-icon">üéµ</div>
                    <h3>MP3</h3>
                    <p>MPEG Audio Layer III</p>
                    <div class="standard-details">
                        <strong>Purpose:</strong> Audio compression<br>
                        <strong>Created:</strong> 1993<br>
                        <strong>Compression:</strong> 10:1 ratio<br>
                        <strong>Impact:</strong> Revolutionized digital music
                    </div>
                </div>

                <div class="standard-card" data-standard="bluetooth" tabindex="0" role="button" aria-label="Bluetooth Standard">
                    <div class="standard-icon">üì°</div>
                    <h3>Bluetooth</h3>
                    <p>IEEE 802.15.1</p>
                    <div class="standard-details">
                        <strong>Purpose:</strong> Short-range wireless<br>
                        <strong>Created:</strong> 1998<br>
                        <strong>Range:</strong> 10-100 meters<br>
                        <strong>Impact:</strong> Wireless accessories everywhere
                    </div>
                </div>

                <div class="standard-card" data-standard="hdmi" tabindex="0" role="button" aria-label="HDMI Standard">
                    <div class="standard-icon">üì∫</div>
                    <h3>HDMI</h3>
                    <p>High-Definition Multimedia</p>
                    <div class="standard-details">
                        <strong>Purpose:</strong> Audio/video transmission<br>
                        <strong>Created:</strong> 2003<br>
                        <strong>Versions:</strong> HDMI 1.0 to 2.1<br>
                        <strong>Impact:</strong> Single cable for HD content
                    </div>
                </div>

                <div class="standard-card" data-standard="tcpip" tabindex="0" role="button" aria-label="TCP/IP Standard">
                    <div class="standard-icon">üåç</div>
                    <h3>TCP/IP</h3>
                    <p>Internet Protocol Suite</p>
                    <div class="standard-details">
                        <strong>Purpose:</strong> Internet communication<br>
                        <strong>Created:</strong> 1970s<br>
                        <strong>Layers:</strong> 4-layer model<br>
                        <strong>Impact:</strong> Foundation of the internet
                    </div>
                </div>
            </div>

            <div class="question-box" id="district2Question" style="display: none;">
                <h3>Standards Knowledge: What do standards enable?</h3>
                <div class="answer-options">
                    <button class="answer-btn" data-answer="monopoly">One company to control everything</button>
                    <button class="answer-btn" data-answer="compatibility">Different manufacturers' products to work together</button>
                    <button class="answer-btn" data-answer="complexity">More complex technology</button>
                    <button class="answer-btn" data-answer="restrictions">Fewer product choices</button>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button id="nextBtn2" class="btn" disabled>Next District ‚Üí</button>
            </div>
        </div>

        <!-- District 3: Compatibility Testing Lab -->
        <div id="district3" class="district">
            <h2>üîå District 3: Compatibility Testing Lab</h2>
            <p style="margin-bottom: 20px;">Test how USB standard enables universal compatibility. Select devices to see what can connect!</p>
            
            <div class="demo-area">
                <h3>Select Devices to Connect:</h3>
                <div class="device-selector">
                    <button class="device-btn" data-device="laptop">
                        <span style="font-size: 2em;">üíª</span>
                        <span>Laptop</span>
                    </button>
                    <button class="device-btn" data-device="phone">
                        <span style="font-size: 2em;">üì±</span>
                        <span>Phone</span>
                    </button>
                    <button class="device-btn" data-device="printer">
                        <span style="font-size: 2em;">üñ®Ô∏è</span>
                        <span>Printer</span>
                    </button>
                    <button class="device-btn" data-device="camera">
                        <span style="font-size: 2em;">üì∑</span>
                        <span>Camera</span>
                    </button>
                    <button class="device-btn" data-device="storage">
                        <span style="font-size: 2em;">üíæ</span>
                        <span>Storage</span>
                    </button>
                    <button class="device-btn" data-device="keyboard">
                        <span style="font-size: 2em;">‚å®Ô∏è</span>
                        <span>Keyboard</span>
                    </button>
                </div>

                <div class="compatibility-matrix" id="compatibilityMatrix" style="display: none;">
                    <h3>USB Compatibility Matrix:</h3>
                    <table class="compatibility-table">
                        <thead>
                            <tr>
                                <th>Device 1</th>
                                <th>Device 2</th>
                                <th>USB Version</th>
                                <th>Compatible?</th>
                            </tr>
                        </thead>
                        <tbody id="compatibilityResults">
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="analogy-box" style="margin-top: 30px;">
                <h3>üîã Power Outlet Analogy</h3>
                <p>USB is like standardized power outlets. Before standards, each appliance manufacturer had their 
                own plug design. Now, any device can plug into any outlet (with adapters for different regions). 
                USB did the same for computer peripherals!</p>
            </div>

            <div class="question-box" id="district3Question" style="display: none;">
                <h3>USB Understanding: What problem did USB solve?</h3>
                <div class="answer-options">
                    <button class="answer-btn" data-answer="speed">Slow data transfer</button>
                    <button class="answer-btn" data-answer="connectors">Dozens of different proprietary connectors</button>
                    <button class="answer-btn" data-answer="wireless">Need for wireless connections</button>
                    <button class="answer-btn" data-answer="security">Security vulnerabilities</button>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button id="nextBtn3" class="btn" disabled>Next District ‚Üí</button>
            </div>
        </div>

        <!-- District 4: Standards Timeline -->
        <div id="district4" class="district">
            <h2>üìÖ District 4: Standards History Museum</h2>
            <p style="margin-bottom: 20px;">Journey through the evolution of computing standards and see how they transformed technology!</p>
            
            <div class="timeline">
                <div class="timeline-line"></div>
                
                <div class="timeline-item">
                    <div class="timeline-content">
                        <h3>ASCII Standard</h3>
                        <p>American Standard Code for Information Interchange - allowing different computers to exchange text</p>
                    </div>
                    <div class="timeline-date">1963</div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-content">
                        <h3>Ethernet Invented</h3>
                        <p>Standardized wired networking, becoming IEEE 802.3 in 1983</p>
                    </div>
                    <div class="timeline-date">1973</div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-content">
                        <h3>TCP/IP Adopted</h3>
                        <p>ARPANET adopts TCP/IP, creating the foundation for the internet</p>
                    </div>
                    <div class="timeline-date">1983</div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-content">
                        <h3>HTML Created</h3>
                        <p>Tim Berners-Lee creates HTML, standardizing web page structure</p>
                    </div>
                    <div class="timeline-date">1993</div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-content">
                        <h3>USB 1.0 Released</h3>
                        <p>Universal Serial Bus standard replaces numerous proprietary connectors</p>
                    </div>
                    <div class="timeline-date">1996</div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-content">
                        <h3>Wi-Fi Standard</h3>
                        <p>IEEE 802.11 wireless standard enables cable-free networking</p>
                    </div>
                    <div class="timeline-date">1997</div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-content">
                        <h3>Bluetooth 1.0</h3>
                        <p>Short-range wireless standard for connecting devices</p>
                    </div>
                    <div class="timeline-date">1999</div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-content">
                        <h3>USB-C Standard</h3>
                        <p>Reversible connector supporting power, data, and video</p>
                    </div>
                    <div class="timeline-date">2014</div>
                </div>
            </div>

            <div style="background: #ecf0f1; padding: 20px; border-radius: 10px; margin: 20px 0;">
                <h3>üîÆ Future Standards</h3>
                <p>Standards continue to evolve! Current developments include Wi-Fi 7, USB4, 
                and quantum computing standards. Each new standard builds on previous ones while 
                maintaining backward compatibility when possible.</p>
            </div>

            <div class="question-box" id="district4Question">
                <h3>Timeline Understanding: Why do standards evolve over time?</h3>
                <div class="answer-options">
                    <button class="answer-btn" data-answer="profit">To make more profit</button>
                    <button class="answer-btn" data-answer="technology">To adapt to new technology needs</button>
                    <button class="answer-btn" data-answer="control">To control the market</button>
                    <button class="answer-btn" data-answer="complexity">To make things more complex</button>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button id="nextBtn4" class="btn" disabled>Next District ‚Üí</button>
            </div>
        </div>

        <!-- District 5: Benefits Showcase -->
        <div id="district5" class="district">
            <h2>‚ú® District 5: Standards Benefits Center</h2>
            <p style="margin-bottom: 20px;">Discover why standards are essential for modern computing. Each benefit transforms how we use technology!</p>
            
            <div class="benefits-container">
                <div class="benefit-box" tabindex="0">
                    <div class="benefit-icon">ü§ù</div>
                    <h3>Universal Compatibility</h3>
                    <p>Any USB device works with any USB port, regardless of manufacturer. 
                    Imagine buying a mouse and knowing it will work with your computer!</p>
                    <div style="margin-top: 15px; font-size: 0.9em; color: #7f8c8d;">
                        <strong>Example:</strong> A Logitech mouse works with Dell, HP, Apple, or any computer with USB
                    </div>
                </div>

                <div class="benefit-box" tabindex="0">
                    <div class="benefit-icon">üí∞</div>
                    <h3>Lower Costs</h3>
                    <p>Mass production of standardized components reduces prices. Competition 
                    increases when any manufacturer can make compatible products.</p>
                    <div style="margin-top: 15px; font-size: 0.9em; color: #7f8c8d;">
                        <strong>Example:</strong> USB cables cost pounds instead of proprietary cables costing tens of pounds
                    </div>
                </div>

                <div class="benefit-box" tabindex="0">
                    <div class="benefit-icon">üöÄ</div>
                    <h3>Innovation Acceleration</h3>
                    <p>Developers can focus on new features instead of compatibility. Standards 
                    provide a stable foundation for innovation.</p>
                    <div style="margin-top: 15px; font-size: 0.9em; color: #7f8c8d;">
                        <strong>Example:</strong> Web developers use HTML/CSS/JavaScript to create amazing sites
                    </div>
                </div>

                <div class="benefit-box" tabindex="0">
                    <div class="benefit-icon">üåç</div>
                    <h3>Global Communication</h3>
                    <p>Standards like TCP/IP enable worldwide internet. Email works between 
                    any providers thanks to SMTP/IMAP standards.</p>
                    <div style="margin-top: 15px; font-size: 0.9em; color: #7f8c8d;">
                        <strong>Example:</strong> Gmail users can email Outlook users seamlessly
                    </div>
                </div>

                <div class="benefit-box" tabindex="0">
                    <div class="benefit-icon">‚ôªÔ∏è</div>
                    <h3>Longevity & Support</h3>
                    <p>Standards ensure long-term support and compatibility. Old devices can 
                    still connect to new systems through standard interfaces.</p>
                    <div style="margin-top: 15px; font-size: 0.9em; color: #7f8c8d;">
                        <strong>Example:</strong> 20-year-old USB 1.0 devices still work with modern computers
                    </div>
                </div>

                <div class="benefit-box" tabindex="0">
                    <div class="benefit-icon">üéì</div>
                    <h3>Simplified Learning</h3>
                    <p>Learn one standard, use it everywhere. Developers and users don't need 
                    to learn proprietary systems for each manufacturer.</p>
                    <div style="margin-top: 15px; font-size: 0.9em; color: #7f8c8d;">
                        <strong>Example:</strong> Learning HTML works for any web browser
                    </div>
                </div>
            </div>

            <div class="analogy-box" style="margin-top: 30px;">
                <h3>üó£Ô∏è Language Analogy</h3>
                <p>Standards are like having a common language. Just as English allows people from different 
                countries to communicate, USB allows devices from different manufacturers to "talk" to each 
                other. Without this common language, each manufacturer would speak their own!</p>
            </div>

            <div class="question-box">
                <h3>Final Assessment: What statement about standards is TRUE?</h3>
                <div class="answer-options">
                    <button class="answer-btn" data-answer="limit">Standards limit innovation</button>
                    <button class="answer-btn" data-answer="expensive">Standards make products more expensive</button>
                    <button class="answer-btn" data-answer="enable">Standards enable products from different manufacturers to work together</button>
                    <button class="answer-btn" data-answer="slow">Standards slow down technology development</button>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button id="completeBtn" class="btn" disabled>Complete City Tour üèÜ</button>
            </div>
        </div>
    </div>

    <script>
        'use strict';

        // Constants
        const CONFIG = {
            TOTAL_DISTRICTS: 5,
            ACHIEVEMENT_DISPLAY_TIME: 3000,
            ANIMATION_DELAY: 300,
            TOTAL_STANDARDS: 8,
            REQUIRED_CONNECTIONS: 3,
            REQUIRED_DEVICES: 2
        };

        // State Management
        const CityState = {
            current: {
                district: 1,
                selectedDevices: [],
                chaosConnections: 0,
                compatibilityTests: 0
            },
            progress: {
                overall: 0,
                standardsExplored: 0,
                districtScores: {1: false, 2: false, 3: false, 4: false, 5: false}
            }
        };

        // DOM Cache
        const DOMCache = {
            progressBar: null,
            achievement: null,
            achievementText: null,
            instructionsModal: null,
            cityContainer: null
        };

        // Initialize Application
        function initializeApp() {
            cacheDOMElements();
            attachEventListeners();
            showInstructions();
        }

        // Cache DOM Elements
        function cacheDOMElements() {
            DOMCache.progressBar = document.getElementById('progressBar');
            DOMCache.achievement = document.getElementById('achievement');
            DOMCache.achievementText = document.getElementById('achievementText');
            DOMCache.instructionsModal = document.getElementById('instructionsModal');
            DOMCache.cityContainer = document.querySelector('.city-container');
        }

        // Event Listeners
        function attachEventListeners() {
            // Modal
            document.getElementById('closeInstructionsBtn').addEventListener('click', closeInstructions);
            
            // Reset
            document.getElementById('resetBtn').addEventListener('click', resetSimulation);
            
            // Delegation for city container
            DOMCache.cityContainer.addEventListener('click', handleCityClick);
            DOMCache.cityContainer.addEventListener('keypress', handleCityKeypress);
            
            // Navigation buttons
            for (let i = 1; i <= 4; i++) {
                const btn = document.getElementById(`nextBtn${i}`);
                if (btn) {
                    btn.addEventListener('click', () => nextDistrict(i + 1));
                }
            }
            
            // Complete button
            document.getElementById('completeBtn')?.addEventListener('click', completeCity);
        }

        // Event Delegation
        function handleCityClick(e) {
            const target = e.target.closest('.interactive-element, .device-card, .standard-card, .device-btn, .answer-btn');
            if (!target) return;

            if (target.classList.contains('device-card')) {
                handleDeviceClick(target);
            } else if (target.classList.contains('standard-card')) {
                exploreStandard(target);
            } else if (target.classList.contains('device-btn')) {
                selectDevice(target);
            } else if (target.classList.contains('answer-btn')) {
                checkAnswer(target);
            }
        }

        // Keyboard Support
        function handleCityKeypress(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                const target = e.target;
                if (target.classList.contains('device-card') || 
                    target.classList.contains('standard-card') ||
                    target.classList.contains('benefit-box')) {
                    e.preventDefault();
                    target.click();
                }
            }
        }

        // Modal Functions
        function showInstructions() {
            if (DOMCache.instructionsModal) {
                DOMCache.instructionsModal.style.display = 'block';
            }
        }

        function closeInstructions() {
            if (DOMCache.instructionsModal) {
                DOMCache.instructionsModal.style.display = 'none';
            }
        }

        // Progress Management
        function updateProgress() {
            const completedDistricts = Object.values(CityState.progress.districtScores).filter(v => v).length;
            const progress = (completedDistricts / CONFIG.TOTAL_DISTRICTS) * 100;
            CityState.progress.overall = progress;
            
            if (DOMCache.progressBar) {
                DOMCache.progressBar.style.width = progress + '%';
                DOMCache.progressBar.textContent = Math.round(progress) + '%';
            }
        }

        // Achievement System
        function showAchievement(text) {
            if (!DOMCache.achievement || !DOMCache.achievementText) return;
            
            DOMCache.achievementText.textContent = text;
            DOMCache.achievement.classList.add('show');
            
            setTimeout(() => {
                DOMCache.achievement.classList.remove('show');
            }, CONFIG.ACHIEVEMENT_DISPLAY_TIME);
        }

        // District 1: Chaos Without Standards
        function handleDeviceClick(device) {
            const devices = CityState.current.selectedDevices;
            
            if (devices.length === 0) {
                devices.push(device);
                device.classList.add('selected');
                showAchievement('First device selected!');
            } else if (devices.length === 1 && devices[0] !== device) {
                devices.push(device);
                device.classList.add('selected');
                checkCompatibility(devices[0], device);
                
                // Reset after animation
                setTimeout(() => {
                    devices.forEach(d => d.classList.remove('selected'));
                    CityState.current.selectedDevices = [];
                }, 2000);
            }
        }

        function checkCompatibility(device1, device2) {
            const manufacturer1 = device1.dataset.manufacturer;
            const manufacturer2 = device2.dataset.manufacturer;
            const connector1 = device1.dataset.connector;
            const connector2 = device2.dataset.connector;
            
            const compatible = manufacturer1 === manufacturer2 && connector1 === connector2;
            
            const resultDiv = document.getElementById('chaosResult');
            const messageDiv = document.getElementById('chaosMessage');
            
            if (resultDiv && messageDiv) {
                resultDiv.style.display = 'block';
                
                if (compatible) {
                    device1.classList.add('compatible');
                    device2.classList.add('compatible');
                    messageDiv.innerHTML = `‚úÖ <strong>Compatible!</strong> Both devices are from ${manufacturer1} 
                        and use the same proprietary connector (${connector1}).`;
                    showAchievement('Lucky match - same manufacturer!');
                } else {
                    device1.classList.add('incompatible');
                    device2.classList.add('incompatible');
                    messageDiv.innerHTML = `‚ùå <strong>Incompatible!</strong> ${manufacturer1} uses ${connector1} 
                        while ${manufacturer2} uses ${connector2}. Without standards, these devices cannot connect!`;
                    showAchievement('Incompatible - different systems!');
                }
                
                CityState.current.chaosConnections++;
                
                if (CityState.current.chaosConnections >= CONFIG.REQUIRED_CONNECTIONS) {
                    const questionBox = document.getElementById('district1Question');
                    if (questionBox) questionBox.style.display = 'block';
                }
            }
            
            // Clean up classes
            setTimeout(() => {
                device1.classList.remove('compatible', 'incompatible');
                device2.classList.remove('compatible', 'incompatible');
            }, 2000);
        }

        // District 2: Standards Gallery
        function exploreStandard(card) {
            if (card.classList.contains('explored')) return;
            
            card.classList.add('explored');
            CityState.progress.standardsExplored++;
            
            const standard = card.dataset.standard;
            const messages = {
                'usb': 'USB - The universal connector that changed everything!',
                'html': 'HTML - The language that built the World Wide Web!',
                'wifi': 'Wi-Fi - Wireless freedom for billions of devices!',
                'ethernet': 'Ethernet - The reliable backbone of wired networks!',
                'mp3': 'MP3 - Music compression that enabled digital audio revolution!',
                'bluetooth': 'Bluetooth - Short-range wireless for accessories!',
                'hdmi': 'HDMI - One cable for all your audio and video needs!',
                'tcpip': 'TCP/IP - The protocols that power the entire internet!'
            };
            
            showAchievement(messages[standard] || 'Standard explored!');
            
            if (CityState.progress.standardsExplored >= CONFIG.TOTAL_STANDARDS) {
                const questionBox = document.getElementById('district2Question');
                if (questionBox) questionBox.style.display = 'block';
                showAchievement('All standards explored! You understand the ecosystem!');
            }
        }

        // District 3: Compatibility Testing
        function selectDevice(btn) {
            const device = btn.dataset.device;
            const selectedDevices = document.querySelectorAll('.device-btn.selected');
            
            if (btn.classList.contains('selected')) {
                btn.classList.remove('selected');
                return;
            }
            
            if (selectedDevices.length >= 2) {
                showAchievement('Maximum 2 devices - deselect one first!');
                return;
            }
            
            btn.classList.add('selected');
            
            if (selectedDevices.length === 1) {
                testUSBCompatibility();
            }
        }

        function testUSBCompatibility() {
            const selected = document.querySelectorAll('.device-btn.selected');
            if (selected.length !== 2) return;
            
            const device1 = selected[0].dataset.device;
            const device2 = selected[1].dataset.device;
            
            const matrix = document.getElementById('compatibilityMatrix');
            const results = document.getElementById('compatibilityResults');
            
            if (matrix && results) {
                matrix.style.display = 'block';
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${selected[0].querySelector('span:last-child').textContent}</td>
                    <td>${selected[1].querySelector('span:last-child').textContent}</td>
                    <td>USB 3.0</td>
                    <td class="compatible-cell">‚úÖ Compatible!</td>
                `;
                
                results.appendChild(row);
                
                CityState.current.compatibilityTests++;
                showAchievement('USB makes everything compatible!');
                
                if (CityState.current.compatibilityTests >= CONFIG.REQUIRED_DEVICES) {
                    const questionBox = document.getElementById('district3Question');
                    if (questionBox) questionBox.style.display = 'block';
                }
                
                // Reset selection after delay
                setTimeout(() => {
                    selected.forEach(btn => btn.classList.remove('selected'));
                }, 1500);
            }
        }

        // Answer Checking
        function checkAnswer(btn) {
            const answer = btn.dataset.answer;
            const district = getCurrentDistrict();
            
            const correctAnswers = {
                1: 'incompatible',    // What happens without standards
                2: 'compatibility',   // What standards enable
                3: 'connectors',      // What USB solved
                4: 'technology',      // Why standards evolve
                5: 'enable'          // True statement about standards
            };
            
            if (answer === correctAnswers[district]) {
                btn.classList.add('correct');
                CityState.progress.districtScores[district] = true;
                updateProgress();
                showAchievement('Correct! Excellent understanding!');
                
                // Enable next button
                const nextBtnId = district < 5 ? `nextBtn${district}` : 'completeBtn';
                const nextBtn = document.getElementById(nextBtnId);
                if (nextBtn) nextBtn.disabled = false;
                
                // Disable other buttons
                btn.parentElement.querySelectorAll('.answer-btn').forEach(b => {
                    if (b !== btn) b.disabled = true;
                });
            } else {
                btn.classList.add('incorrect');
                showAchievement('Not quite right. Think about what standards do!');
            }
        }

        // Navigation
        function getCurrentDistrict() {
            const activeDistrict = document.querySelector('.district.active');
            if (!activeDistrict) return null;
            
            const match = activeDistrict.id.match(/district(\d+)/);
            return match ? parseInt(match[1]) : null;
        }

        function nextDistrict(num) {
            document.querySelectorAll('.district').forEach(d => d.classList.remove('active'));
            
            const target = document.getElementById(`district${num}`);
            if (target) {
                target.classList.add('active');
                CityState.current.district = num;
                window.scrollTo(0, 0);
            }
        }

        // Reset Simulation
        function resetSimulation() {
            if (!confirm('Are you sure you want to reset all progress?')) return;
            
            // Reset state
            CityState.current = {
                district: 1,
                selectedDevices: [],
                chaosConnections: 0,
                compatibilityTests: 0
            };
            CityState.progress = {
                overall: 0,
                standardsExplored: 0,
                districtScores: {1: false, 2: false, 3: false, 4: false, 5: false}
            };
            
            // Reset UI
            document.querySelectorAll('.standard-card').forEach(card => {
                card.classList.remove('explored');
            });
            
            document.querySelectorAll('.answer-btn').forEach(btn => {
                btn.classList.remove('correct', 'incorrect');
                btn.disabled = false;
            });
            
            document.querySelectorAll('.device-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // Clear compatibility results
            const results = document.getElementById('compatibilityResults');
            if (results) results.innerHTML = '';
            
            const matrix = document.getElementById('compatibilityMatrix');
            if (matrix) matrix.style.display = 'none';
            
            // Hide questions
            document.querySelectorAll('.question-box').forEach(box => {
                if (!box.id.includes('district5')) {
                    box.style.display = 'none';
                }
            });
            
            // Reset buttons
            for (let i = 1; i <= 5; i++) {
                const btn = document.getElementById(i < 5 ? `nextBtn${i}` : 'completeBtn');
                if (btn) btn.disabled = true;
            }
            
            // Update progress
            updateProgress();
            
            // Show first district
            nextDistrict(1);
            
            showAchievement('City reset - starting fresh!');
        }

        // Complete City
        function completeCity() {
            showAchievement('üèÜ Congratulations! You are now a Standards Expert!');
            
            const message = `Standards City Certification Complete!\n\n` +
                `You have mastered:\n` +
                `‚úì Why standards are essential\n` +
                `‚úì Common computing standards\n` +
                `‚úì How standards enable compatibility\n` +
                `‚úì The evolution of standards\n` +
                `‚úì Benefits of standardization\n\n` +
                `You're now ready to build a fully compatible digital world!`;
            
            alert(message);
        }

        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            initializeApp();
        }
    </script>
</body>
</html>