<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protocol Post Office - Network Protocol Learning</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #333;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            animation: fadeIn 0.3s;
        }

        .modal-content {
            background-color: #fff;
            margin: 5% auto;
            padding: 30px;
            border: 3px solid #f39c12;
            width: 90%;
            max-width: 600px;
            border-radius: 15px;
            box-shadow: 0 5px 30px rgba(0,0,0,0.3);
            animation: slideIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Header Styles */
        .header {
            background: #fff;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: relative;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header .subtitle {
            color: #7f8c8d;
            font-size: 1.2em;
        }

        .reset-btn {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: #e74c3c;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .reset-btn:hover {
            background: #c0392b;
            transform: translateY(-50%) scale(1.05);
        }

        /* Progress Bar */
        .progress-container {
            width: 90%;
            max-width: 800px;
            height: 30px;
            background: rgba(255,255,255,0.3);
            border: 2px solid #fff;
            border-radius: 15px;
            margin: 20px auto;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #2ecc71, #27ae60);
            width: 0%;
            transition: width 0.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-weight: bold;
        }

        /* Station Container */
        .station-container {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .station {
            display: none;
            background: #fff;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            animation: fadeIn 0.5s;
        }

        .station.active {
            display: block;
        }

        .station h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 2em;
        }

        /* Protocol Cards */
        .protocol-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .protocol-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            height: 200px;
            transform-style: preserve-3d;
            perspective: 1000px;
        }

        .protocol-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            padding: 20px;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            border-radius: 10px;
        }

        .card-front {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .card-back {
            background: #fff;
            transform: rotateY(180deg);
            border: 2px solid #667eea;
            color: #333;
        }

        .protocol-card.flipped .card-front {
            transform: rotateY(180deg);
        }

        .protocol-card.flipped .card-back {
            transform: rotateY(0deg);
        }

        .protocol-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        /* Drag and Drop Styles */
        .scenario-container {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            margin: 20px 0;
        }

        .scenario-list {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
        }

        .scenario-item {
            background: #fff;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            cursor: move;
            transition: all 0.3s;
        }

        .scenario-item:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .scenario-item.dragging {
            opacity: 0.5;
        }

        .protocol-bins {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .protocol-bin {
            background: #f8f9fa;
            border: 3px dashed #dee2e6;
            border-radius: 10px;
            padding: 20px;
            min-height: 150px;
            text-align: center;
            transition: all 0.3s;
        }

        .protocol-bin.drag-over {
            background: #e8f5e9;
            border-color: #4caf50;
            transform: scale(1.05);
        }

        .protocol-bin h3 {
            color: #495057;
            margin-bottom: 10px;
        }

        .bin-items {
            margin-top: 15px;
        }

        .bin-item {
            background: #fff;
            border: 2px solid #28a745;
            border-radius: 5px;
            padding: 10px;
            margin: 5px 0;
            font-size: 0.9em;
            animation: dropIn 0.3s;
        }

        @keyframes dropIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Layer Cake Visualization */
        .layer-cake {
            max-width: 600px;
            margin: 30px auto;
        }

        .layer {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 20px;
            margin: 10px 0;
            opacity: 0.3;
            transition: all 0.3s;
            cursor: pointer;
        }

        .layer.active {
            opacity: 1;
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .layer h4 {
            color: #495057;
            margin-bottom: 10px;
        }

        .layer-content {
            display: none;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #dee2e6;
        }

        .layer.active .layer-content {
            display: block;
            animation: fadeIn 0.3s;
        }

        /* Packet Journey */
        .journey-visual {
            position: relative;
            height: 400px;
            background: #f8f9fa;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }

        .journey-node {
            position: absolute;
            width: 80px;
            height: 80px;
            background: #fff;
            border: 3px solid #3498db;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 2;
        }

        .journey-node:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(52, 152, 219, 0.5);
        }

        .journey-node.active {
            background: #3498db;
            color: white;
        }

        .journey-line {
            position: absolute;
            height: 3px;
            background: #bdc3c7;
            z-index: 1;
        }

        .data-packet {
            position: absolute;
            width: 30px;
            height: 30px;
            background: #f39c12;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transition: all 2s linear;
            z-index: 3;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }

        /* Security Demo */
        .security-demo {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .security-box {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s;
        }

        .security-box h3 {
            margin-bottom: 20px;
        }

        .security-box.secure {
            border: 3px solid #27ae60;
        }

        .security-box.insecure {
            border: 3px solid #e74c3c;
        }

        .data-display {
            background: #fff;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            min-height: 80px;
            word-break: break-all;
        }

        /* Question Box */
        .question-box {
            background: #e3f2fd;
            border: 2px solid #2196f3;
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
        }

        .question-box h3 {
            color: #1976d2;
            margin-bottom: 15px;
        }

        .answer-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .answer-btn {
            background: #fff;
            border: 2px solid #2196f3;
            color: #1976d2;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1em;
            font-weight: 500;
        }

        .answer-btn:hover {
            background: #2196f3;
            color: white;
            transform: scale(1.05);
        }

        .answer-btn.correct {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
            animation: pulse 0.5s;
        }

        .answer-btn.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
            animation: shake 0.5s;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        /* Achievement */
        .achievement {
            position: fixed;
            top: 100px;
            right: -400px;
            background: #fff;
            padding: 20px 30px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            transition: right 0.5s;
            border-left: 5px solid #f39c12;
        }

        .achievement.show {
            right: 20px;
        }

        .achievement h4 {
            color: #f39c12;
            margin-bottom: 5px;
        }

        /* Button Styles */
        .btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 500;
            transition: all 0.3s;
            margin: 10px 5px;
        }

        .btn:hover {
            background: #2980b9;
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
            transform: none;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            .reset-btn {
                position: static;
                margin-top: 10px;
            }
            .scenario-container {
                grid-template-columns: 1fr;
            }
            .protocol-bins {
                grid-template-columns: 1fr;
            }
            .security-demo {
                grid-template-columns: 1fr;
            }
            .journey-visual {
                height: 500px;
                overflow-x: auto;
            }
        }

        /* Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .floating {
            animation: float 3s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <!-- Instructions Modal -->
    <div id="instructionsModal" class="modal">
        <div class="modal-content">
            <h2 style="color: #2c3e50; margin-bottom: 20px;">üìÆ Welcome to Protocol Post Office!</h2>
            <p style="line-height: 1.8; margin-bottom: 15px;">
                You've been hired as a digital postal worker! Your job is to understand how different network protocols 
                deliver data across the internet, just like how different postal services handle different types of mail.
            </p>
            <h3 style="color: #3498db; margin: 20px 0 10px;">Your Training Stations:</h3>
            <ul style="list-style: none; padding-left: 0;">
                <li style="margin: 10px 0;">üìã <strong>Station 1:</strong> Learn about each protocol's purpose</li>
                <li style="margin: 10px 0;">üì¨ <strong>Station 2:</strong> Sort real-world scenarios to correct protocols</li>
                <li style="margin: 10px 0;">üéÇ <strong>Station 3:</strong> Build packets layer by layer</li>
                <li style="margin: 10px 0;">üöö <strong>Station 4:</strong> Track data packet delivery</li>
                <li style="margin: 10px 0;">üîí <strong>Station 5:</strong> Understand HTTP vs HTTPS security</li>
            </ul>
            <p style="margin: 20px 0; color: #e74c3c; font-weight: bold;">
                Complete all stations to become a certified Protocol Postal Expert!
            </p>
            <button class="btn" onclick="closeInstructions()">Start Training</button>
        </div>
    </div>

    <!-- Achievement Notification -->
    <div id="achievement" class="achievement">
        <h4>Achievement Unlocked!</h4>
        <p id="achievementText">Great job!</p>
    </div>

    <!-- Header -->
    <div class="header">
        <h1>üìÆ Protocol Post Office</h1>
        <p class="subtitle">Network Protocol Training Center</p>
        <button class="reset-btn" onclick="resetSimulation()">üîÑ Reset Training</button>
    </div>

    <!-- Progress Bar -->
    <div class="progress-container">
        <div id="progressBar" class="progress-bar">0%</div>
    </div>

    <!-- Station Container -->
    <div class="station-container">
        <!-- Station 1: Protocol Overview -->
        <div id="station1" class="station active">
            <h2>üìã Station 1: Protocol Directory</h2>
            <p style="margin-bottom: 20px;">Click on each protocol card to learn what it does. Each protocol handles different types of network communication!</p>
            
            <div class="protocol-grid">
                <div class="protocol-card" onclick="flipCard(this, 'tcp')">
                    <div class="card-front">
                        <div class="protocol-icon">üì¶</div>
                        <h3>TCP</h3>
                        <p>Transmission Control Protocol</p>
                    </div>
                    <div class="card-back">
                        <h4>TCP - The Package Handler</h4>
                        <p>Breaks data into packets, ensures reliable delivery, and reassembles at destination. Like tracking parcels!</p>
                        <small>Used by: All internet applications</small>
                    </div>
                </div>

                <div class="protocol-card" onclick="flipCard(this, 'ip')">
                    <div class="card-front">
                        <div class="protocol-icon">üó∫Ô∏è</div>
                        <h3>IP</h3>
                        <p>Internet Protocol</p>
                    </div>
                    <div class="card-back">
                        <h4>IP - The Address System</h4>
                        <p>Routes packets across networks using IP addresses. Like postal codes for the internet!</p>
                        <small>Works with: TCP for TCP/IP</small>
                    </div>
                </div>

                <div class="protocol-card" onclick="flipCard(this, 'http')">
                    <div class="card-front">
                        <div class="protocol-icon">üåê</div>
                        <h3>HTTP</h3>
                        <p>HyperText Transfer Protocol</p>
                    </div>
                    <div class="card-back">
                        <h4>HTTP - The Web Browser</h4>
                        <p>Transfers web pages from servers to browsers. Standard protocol for the World Wide Web!</p>
                        <small>Port: 80 (insecure)</small>
                    </div>
                </div>

                <div class="protocol-card" onclick="flipCard(this, 'https')">
                    <div class="card-front">
                        <div class="protocol-icon">üîí</div>
                        <h3>HTTPS</h3>
                        <p>HTTP Secure</p>
                    </div>
                    <div class="card-back">
                        <h4>HTTPS - The Secure Web</h4>
                        <p>HTTP with SSL/TLS encryption. Protects data during transfer - essential for banking and shopping!</p>
                        <small>Port: 443 (encrypted)</small>
                    </div>
                </div>

                <div class="protocol-card" onclick="flipCard(this, 'ftp')">
                    <div class="card-front">
                        <div class="protocol-icon">üìÅ</div>
                        <h3>FTP</h3>
                        <p>File Transfer Protocol</p>
                    </div>
                    <div class="card-back">
                        <h4>FTP - The File Mover</h4>
                        <p>Transfers files between computers. Used for uploading websites to servers!</p>
                        <small>Ports: 20-21</small>
                    </div>
                </div>

                <div class="protocol-card" onclick="flipCard(this, 'smtp')">
                    <div class="card-front">
                        <div class="protocol-icon">üì§</div>
                        <h3>SMTP</h3>
                        <p>Simple Mail Transfer Protocol</p>
                    </div>
                    <div class="card-back">
                        <h4>SMTP - The Email Sender</h4>
                        <p>Sends emails from clients to servers and between servers. The postal service of email!</p>
                        <small>Port: 25 or 587</small>
                    </div>
                </div>

                <div class="protocol-card" onclick="flipCard(this, 'pop')">
                    <div class="card-front">
                        <div class="protocol-icon">üì•</div>
                        <h3>POP</h3>
                        <p>Post Office Protocol</p>
                    </div>
                    <div class="card-back">
                        <h4>POP - The Email Collector</h4>
                        <p>Downloads emails to device and deletes from server. Old but simple!</p>
                        <small>Port: 110 (POP3)</small>
                    </div>
                </div>

                <div class="protocol-card" onclick="flipCard(this, 'imap')">
                    <div class="card-front">
                        <div class="protocol-icon">üì®</div>
                        <h3>IMAP</h3>
                        <p>Internet Message Access Protocol</p>
                    </div>
                    <div class="card-back">
                        <h4>IMAP - The Email Synchronizer</h4>
                        <p>Keeps emails on server, syncs across devices. Modern email management!</p>
                        <small>Port: 143</small>
                    </div>
                </div>
            </div>

            <div class="question-box" id="station1Question" style="display: none;">
                <h3>Quick Check: Which protocol breaks data into packets?</h3>
                <div class="answer-options">
                    <button class="answer-btn" onclick="checkAnswer(1, 1, 'HTTP')">HTTP</button>
                    <button class="answer-btn" onclick="checkAnswer(1, 2, 'TCP')">TCP</button>
                    <button class="answer-btn" onclick="checkAnswer(1, 3, 'FTP')">FTP</button>
                    <button class="answer-btn" onclick="checkAnswer(1, 4, 'SMTP')">SMTP</button>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button id="nextBtn1" class="btn" onclick="nextStation(2)" disabled>Next Station ‚Üí</button>
            </div>
        </div>

        <!-- Station 2: Protocol Sorting -->
        <div id="station2" class="station">
            <h2>üì¨ Station 2: Protocol Sorting Center</h2>
            <p style="margin-bottom: 20px;">Drag each scenario to the correct protocol bin. Match real-world activities with their protocols!</p>
            
            <div class="scenario-container">
                <div class="scenario-list">
                    <h3>Scenarios to Sort:</h3>
                    <div class="scenario-item" draggable="true" data-protocol="http">
                        Browsing BBC News website
                    </div>
                    <div class="scenario-item" draggable="true" data-protocol="https">
                        Online banking with Lloyds
                    </div>
                    <div class="scenario-item" draggable="true" data-protocol="ftp">
                        Uploading website files to server
                    </div>
                    <div class="scenario-item" draggable="true" data-protocol="smtp">
                        Sending email from Gmail
                    </div>
                    <div class="scenario-item" draggable="true" data-protocol="imap">
                        Checking email on multiple devices
                    </div>
                    <div class="scenario-item" draggable="true" data-protocol="pop">
                        Downloading emails to one computer
                    </div>
                </div>

                <div class="protocol-bins">
                    <div class="protocol-bin" data-protocol="http">
                        <h3>üåê HTTP</h3>
                        <p>Regular web browsing</p>
                        <div class="bin-items"></div>
                    </div>
                    <div class="protocol-bin" data-protocol="https">
                        <h3>üîí HTTPS</h3>
                        <p>Secure web browsing</p>
                        <div class="bin-items"></div>
                    </div>
                    <div class="protocol-bin" data-protocol="ftp">
                        <h3>üìÅ FTP</h3>
                        <p>File transfers</p>
                        <div class="bin-items"></div>
                    </div>
                    <div class="protocol-bin" data-protocol="smtp">
                        <h3>üì§ SMTP</h3>
                        <p>Sending emails</p>
                        <div class="bin-items"></div>
                    </div>
                    <div class="protocol-bin" data-protocol="imap">
                        <h3>üì® IMAP</h3>
                        <p>Email sync</p>
                        <div class="bin-items"></div>
                    </div>
                    <div class="protocol-bin" data-protocol="pop">
                        <h3>üì• POP</h3>
                        <p>Email download</p>
                        <div class="bin-items"></div>
                    </div>
                </div>
            </div>

            <div class="question-box" id="station2Question" style="display: none;">
                <h3>Protocol Knowledge: Which email protocol deletes messages from the server after downloading?</h3>
                <div class="answer-options">
                    <button class="answer-btn" onclick="checkAnswer(2, 1, 'SMTP')">SMTP</button>
                    <button class="answer-btn" onclick="checkAnswer(2, 2, 'IMAP')">IMAP</button>
                    <button class="answer-btn" onclick="checkAnswer(2, 3, 'POP')">POP</button>
                    <button class="answer-btn" onclick="checkAnswer(2, 4, 'FTP')">FTP</button>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button id="nextBtn2" class="btn" onclick="nextStation(3)" disabled>Next Station ‚Üí</button>
            </div>
        </div>

        <!-- Station 3: Layer Cake -->
        <div id="station3" class="station">
            <h2>üéÇ Station 3: Protocol Layer Assembly</h2>
            <p style="margin-bottom: 20px;">Click each layer to see how data gets wrapped with protocol information. This is called encapsulation!</p>
            
            <div class="layer-cake">
                <div class="layer" onclick="activateLayer(this, 4)">
                    <h4>Layer 4: Application Layer</h4>
                    <p>HTTP, HTTPS, FTP, SMTP, POP, IMAP</p>
                    <div class="layer-content">
                        <p><strong>What happens:</strong> Your application (browser, email client) creates the data to send.</p>
                        <p><strong>Example:</strong> "GET /index.html" request or email message content</p>
                    </div>
                </div>

                <div class="layer" onclick="activateLayer(this, 3)">
                    <h4>Layer 3: Transport Layer</h4>
                    <p>TCP</p>
                    <div class="layer-content">
                        <p><strong>What happens:</strong> Data is broken into packets, numbered for reassembly.</p>
                        <p><strong>Added info:</strong> Packet numbers, checksums for error checking</p>
                    </div>
                </div>

                <div class="layer" onclick="activateLayer(this, 2)">
                    <h4>Layer 2: Internet Layer</h4>
                    <p>IP</p>
                    <div class="layer-content">
                        <p><strong>What happens:</strong> Source and destination IP addresses are added.</p>
                        <p><strong>Added info:</strong> IP headers with routing information</p>
                    </div>
                </div>

                <div class="layer" onclick="activateLayer(this, 1)">
                    <h4>Layer 1: Network Access Layer</h4>
                    <p>Ethernet, Wi-Fi</p>
                    <div class="layer-content">
                        <p><strong>What happens:</strong> MAC addresses added, data converted to signals.</p>
                        <p><strong>Added info:</strong> Physical addressing for local delivery</p>
                    </div>
                </div>
            </div>

            <div style="text-align: center; margin: 30px 0;">
                <button class="btn" onclick="animateEncapsulation()">üé¨ Watch Encapsulation Animation</button>
            </div>

            <div class="question-box" id="station3Question" style="display: none;">
                <h3>Layer Logic: Why are protocols organized in layers?</h3>
                <div class="answer-options">
                    <button class="answer-btn" onclick="checkAnswer(3, 1, 'speed')">To make data transfer faster</button>
                    <button class="answer-btn" onclick="checkAnswer(3, 2, 'independent')">So layers can be developed independently</button>
                    <button class="answer-btn" onclick="checkAnswer(3, 3, 'security')">For better security only</button>
                    <button class="answer-btn" onclick="checkAnswer(3, 4, 'cost')">To reduce network costs</button>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button id="nextBtn3" class="btn" onclick="nextStation(4)" disabled>Next Station ‚Üí</button>
            </div>
        </div>

        <!-- Station 4: Packet Journey -->
        <div id="station4" class="station">
            <h2>üöö Station 4: Packet Delivery Route</h2>
            <p style="margin-bottom: 20px;">Click on devices to see how protocols work together to deliver data across the network!</p>
            
            <div class="journey-visual" id="journeyVisual">
                <div class="journey-node" style="left: 50px; top: 150px;" onclick="showNodeInfo('client')">
                    <div>üíª</div>
                    <small>Client</small>
                </div>
                
                <div class="journey-node" style="left: 250px; top: 150px;" onclick="showNodeInfo('router1')">
                    <div>üì°</div>
                    <small>Router</small>
                </div>
                
                <div class="journey-node" style="left: 450px; top: 150px;" onclick="showNodeInfo('internet')">
                    <div>üåê</div>
                    <small>Internet</small>
                </div>
                
                <div class="journey-node" style="left: 650px; top: 150px;" onclick="showNodeInfo('router2')">
                    <div>üì°</div>
                    <small>Router</small>
                </div>
                
                <div class="journey-node" style="left: 850px; top: 150px;" onclick="showNodeInfo('server')">
                    <div>üñ•Ô∏è</div>
                    <small>Server</small>
                </div>
            </div>

            <div style="background: #f8f9fa; border-radius: 10px; padding: 20px; margin-top: 20px;">
                <h3 id="nodeTitle">Click a device to learn more!</h3>
                <p id="nodeInfo">See how each device uses different protocols to handle data.</p>
            </div>

            <div style="text-align: center; margin: 20px 0;">
                <button class="btn" onclick="sendPacketAnimation()">üì¶ Send Test Packet</button>
            </div>

            <div class="question-box" id="station4Question" style="display: none;">
                <h3>Routing Knowledge: Which protocol adds IP addresses to packets?</h3>
                <div class="answer-options">
                    <button class="answer-btn" onclick="checkAnswer(4, 1, 'TCP')">TCP</button>
                    <button class="answer-btn" onclick="checkAnswer(4, 2, 'IP')">IP</button>
                    <button class="answer-btn" onclick="checkAnswer(4, 3, 'HTTP')">HTTP</button>
                    <button class="answer-btn" onclick="checkAnswer(4, 4, 'SMTP')">SMTP</button>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button id="nextBtn4" class="btn" onclick="nextStation(5)" disabled>Next Station ‚Üí</button>
            </div>
        </div>

        <!-- Station 5: Security Checkpoint -->
        <div id="station5" class="station">
            <h2>üîí Station 5: Security Checkpoint - HTTP vs HTTPS</h2>
            <p style="margin-bottom: 20px;">See the difference between secure and insecure data transmission!</p>
            
            <div class="security-demo">
                <div class="security-box insecure">
                    <h3>üîì HTTP (Insecure)</h3>
                    <p>Data sent as plain text - anyone can read it!</p>
                    
                    <input type="password" id="httpPassword" placeholder="Enter a password" style="width: 100%; padding: 10px; margin: 10px 0;">
                    <button class="btn" onclick="sendHTTP()">Send via HTTP</button>
                    
                    <div class="data-display" id="httpDisplay">
                        <em>Data will appear here...</em>
                    </div>
                    
                    <p style="color: #e74c3c; margin-top: 10px;">‚ö†Ô∏è Anyone on the network can see this!</p>
                </div>

                <div class="security-box secure">
                    <h3>üîí HTTPS (Secure)</h3>
                    <p>Data encrypted with SSL/TLS - protected transmission!</p>
                    
                    <input type="password" id="httpsPassword" placeholder="Enter a password" style="width: 100%; padding: 10px; margin: 10px 0;">
                    <button class="btn" onclick="sendHTTPS()">Send via HTTPS</button>
                    
                    <div class="data-display" id="httpsDisplay">
                        <em>Data will appear here...</em>
                    </div>
                    
                    <p style="color: #27ae60; margin-top: 10px;">‚úì Data is encrypted and safe!</p>
                </div>
            </div>

            <div style="background: #fff3cd; border: 2px solid #ffc107; border-radius: 10px; padding: 20px; margin: 20px 0;">
                <h3 style="color: #856404;">üîê Why HTTPS Matters:</h3>
                <ul style="margin-left: 20px; line-height: 1.8;">
                    <li>Protects passwords and personal information</li>
                    <li>Prevents data tampering during transmission</li>
                    <li>Verifies website authenticity (no imposters!)</li>
                    <li>Required for online banking, shopping, and sensitive data</li>
                </ul>
            </div>

            <div class="question-box">
                <h3>Security Check: What does HTTPS use to protect data?</h3>
                <div class="answer-options">
                    <button class="answer-btn" onclick="checkAnswer(5, 1, 'firewall')">Firewall</button>
                    <button class="answer-btn" onclick="checkAnswer(5, 2, 'encryption')">SSL/TLS Encryption</button>
                    <button class="answer-btn" onclick="checkAnswer(5, 3, 'antivirus')">Antivirus</button>
                    <button class="answer-btn" onclick="checkAnswer(5, 4, 'password')">Strong Passwords</button>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button id="completeBtn" class="btn" onclick="completeTraining()" disabled>Complete Training üèÜ</button>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentStation = 1;
        let progress = 0;
        let protocolsLearned = 0;
        let scenariosSorted = 0;
        let layersExplored = 0;
        let packetsSent = 0;
        let stationScores = {1: false, 2: false, 3: false, 4: false, 5: false};

        // Initialize simulation
        window.onload = function() {
            showInstructions();
            initializeDragAndDrop();
            drawJourneyConnections();
        };

        // Modal functions
        function showInstructions() {
            document.getElementById('instructionsModal').style.display = 'block';
        }

        function closeInstructions() {
            document.getElementById('instructionsModal').style.display = 'none';
        }

        // Reset simulation
        function resetSimulation() {
            if (confirm('Are you sure you want to reset all progress?')) {
                location.reload();
            }
        }

        // Progress management
        function updateProgress() {
            const completedStations = Object.values(stationScores).filter(v => v).length;
            progress = (completedStations / 5) * 100;
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = progress + '%';
            progressBar.textContent = Math.round(progress) + '%';
        }

        // Achievement system
        function showAchievement(text) {
            const achievement = document.getElementById('achievement');
            const achievementText = document.getElementById('achievementText');
            achievementText.textContent = text;
            achievement.classList.add('show');
            setTimeout(() => {
                achievement.classList.remove('show');
            }, 3000);
        }

        // Station 1: Protocol Cards
        function flipCard(card, protocol) {
            card.classList.toggle('flipped');
            
            if (!card.dataset.learned) {
                card.dataset.learned = 'true';
                protocolsLearned++;
                
                if (protocolsLearned === 8) {
                    document.getElementById('station1Question').style.display = 'block';
                    showAchievement('All protocols learned!');
                }
            }
        }

        // Station 2: Drag and Drop
        function initializeDragAndDrop() {
            const scenarios = document.querySelectorAll('.scenario-item');
            const bins = document.querySelectorAll('.protocol-bin');
            
            scenarios.forEach(scenario => {
                scenario.addEventListener('dragstart', dragStart);
                scenario.addEventListener('dragend', dragEnd);
            });
            
            bins.forEach(bin => {
                bin.addEventListener('dragover', dragOver);
                bin.addEventListener('drop', dragDrop);
                bin.addEventListener('dragleave', dragLeave);
            });
        }

        function dragStart(e) {
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text', e.target.textContent);
            e.dataTransfer.setData('protocol', e.target.dataset.protocol);
            e.target.classList.add('dragging');
        }

        function dragEnd(e) {
            e.target.classList.remove('dragging');
        }

        function dragOver(e) {
            e.preventDefault();
            e.currentTarget.classList.add('drag-over');
        }

        function dragLeave(e) {
            e.currentTarget.classList.remove('drag-over');
        }

        function dragDrop(e) {
            e.preventDefault();
            const bin = e.currentTarget;
            bin.classList.remove('drag-over');
            
            const draggedProtocol = e.dataTransfer.getData('protocol');
            const binProtocol = bin.dataset.protocol;
            const text = e.dataTransfer.getData('text');
            
            if (draggedProtocol === binProtocol) {
                const binItems = bin.querySelector('.bin-items');
                const item = document.createElement('div');
                item.className = 'bin-item';
                item.textContent = text;
                binItems.appendChild(item);
                
                // Remove original
                document.querySelector('.scenario-item.dragging').remove();
                
                scenariosSorted++;
                showAchievement('Correct! ' + scenariosSorted + '/6 sorted');
                
                if (scenariosSorted === 6) {
                    document.getElementById('station2Question').style.display = 'block';
                    showAchievement('Perfect sorting!');
                }
            } else {
                showAchievement('Wrong protocol! Try again.');
            }
        }

        // Station 3: Layer Cake
        function activateLayer(layer, num) {
            // Toggle active state
            layer.classList.toggle('active');
            
            // Track progress
            if (layer.classList.contains('active') && !layer.dataset.explored) {
                layer.dataset.explored = 'true';
                layersExplored++;
                
                if (layersExplored === 4) {
                    document.getElementById('station3Question').style.display = 'block';
                    showAchievement('All layers explored!');
                }
            }
        }

        function animateEncapsulation() {
            const layers = document.querySelectorAll('.layer');
            let delay = 0;
            
            // Reset all layers
            layers.forEach(layer => layer.classList.remove('active'));
            
            // Animate from top to bottom
            layers.forEach((layer, index) => {
                setTimeout(() => {
                    layer.classList.add('active');
                    if (index === layers.length - 1) {
                        showAchievement('Encapsulation complete!');
                    }
                }, delay);
                delay += 500;
            });
        }

        // Station 4: Packet Journey
        function drawJourneyConnections() {
            const visual = document.getElementById('journeyVisual');
            const nodes = visual.querySelectorAll('.journey-node');
            
            for (let i = 0; i < nodes.length - 1; i++) {
                const line = document.createElement('div');
                line.className = 'journey-line';
                
                const x1 = nodes[i].offsetLeft + 40;
                const y1 = nodes[i].offsetTop + 40;
                const x2 = nodes[i + 1].offsetLeft + 40;
                const y2 = nodes[i + 1].offsetTop + 40;
                
                const length = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
                
                line.style.width = length + 'px';
                line.style.left = x1 + 'px';
                line.style.top = y1 + 'px';
                
                visual.appendChild(line);
            }
        }

        function showNodeInfo(node) {
            const info = {
                'client': {
                    title: 'üíª Client Computer',
                    text: 'Uses HTTP/HTTPS to request web pages. TCP breaks data into packets. IP adds addressing.'
                },
                'router1': {
                    title: 'üì° Local Router',
                    text: 'Uses IP protocol to route packets. Connects your LAN to the internet.'
                },
                'internet': {
                    title: 'üåê Internet',
                    text: 'Routers use IP addresses to forward packets across multiple networks to destination.'
                },
                'router2': {
                    title: 'üì° Destination Router',
                    text: 'Receives packets and forwards them to the correct device on the destination network.'
                },
                'server': {
                    title: 'üñ•Ô∏è Web Server',
                    text: 'Receives HTTP/HTTPS requests, processes them, and sends back requested data.'
                }
            };
            
            document.getElementById('nodeTitle').textContent = info[node].title;
            document.getElementById('nodeInfo').textContent = info[node].text;
            
            // Highlight node
            document.querySelectorAll('.journey-node').forEach(n => n.classList.remove('active'));
            event.target.closest('.journey-node').classList.add('active');
        }

        function sendPacketAnimation() {
            const visual = document.getElementById('journeyVisual');
            const packet = document.createElement('div');
            packet.className = 'data-packet';
            packet.textContent = 'üì¶';
            
            packet.style.left = '70px';
            packet.style.top = '170px';
            visual.appendChild(packet);
            
            // Animate through nodes
            const positions = [
                {left: '270px', top: '170px'},
                {left: '470px', top: '170px'},
                {left: '670px', top: '170px'},
                {left: '870px', top: '170px'}
            ];
            
            let step = 0;
            const animate = setInterval(() => {
                if (step < positions.length) {
                    packet.style.left = positions[step].left;
                    packet.style.top = positions[step].top;
                    step++;
                } else {
                    clearInterval(animate);
                    setTimeout(() => packet.remove(), 500);
                    packetsSent++;
                    
                    if (packetsSent === 1) {
                        document.getElementById('station4Question').style.display = 'block';
                    }
                    showAchievement('Packet delivered successfully!');
                }
            }, 2000);
        }

        // Station 5: Security Demo
        function sendHTTP() {
            const password = document.getElementById('httpPassword').value;
            if (!password) {
                showAchievement('Please enter a password to send');
                return;
            }
            
            // Show plain text
            document.getElementById('httpDisplay').innerHTML = 
                `<strong>Transmitted data:</strong><br>
                password=${password}<br>
                <span style="color: #e74c3c;">‚ö†Ô∏è Visible to anyone!</span>`;
            
            showAchievement('Data sent insecurely via HTTP!');
        }

        function sendHTTPS() {
            const password = document.getElementById('httpsPassword').value;
            if (!password) {
                showAchievement('Please enter a password to send');
                return;
            }
            
            // Show encrypted text
            const encrypted = btoa(password).replace(/./g, () => 
                '&#' + (Math.floor(Math.random() * 26) + 97) + ';'
            );
            
            document.getElementById('httpsDisplay').innerHTML = 
                `<strong>Transmitted data:</strong><br>
                <span style="font-family: monospace;">${encrypted}</span><br>
                <span style="color: #27ae60;">‚úì Encrypted with SSL/TLS!</span>`;
            
            showAchievement('Data sent securely via HTTPS!');
        }

        // Answer checking
        function checkAnswer(station, option, answer) {
            const btn = event.target;
            const correctAnswers = {
                1: 'TCP',           // Which breaks data into packets
                2: 'POP',           // Which deletes from server
                3: 'independent',   // Why layers
                4: 'IP',            // Which adds IP addresses
                5: 'encryption'     // What HTTPS uses
            };
            
            if (answer === correctAnswers[station]) {
                btn.classList.add('correct');
                stationScores[station] = true;
                updateProgress();
                showAchievement('Correct! Well done!');
                
                // Enable next button
                const nextBtnId = station < 5 ? `nextBtn${station}` : 'completeBtn';
                document.getElementById(nextBtnId).disabled = false;
                
                // Disable other buttons
                btn.parentElement.querySelectorAll('.answer-btn').forEach(b => {
                    if (b !== btn) b.disabled = true;
                });
            } else {
                btn.classList.add('incorrect');
                showAchievement('Not quite right. Try again!');
            }
        }

        // Station navigation
        function nextStation(stationNum) {
            document.querySelectorAll('.station').forEach(s => s.classList.remove('active'));
            document.getElementById(`station${stationNum}`).classList.add('active');
            currentStation = stationNum;
            window.scrollTo(0, 0);
        }

        function completeTraining() {
            showAchievement('üèÜ Congratulations! You are now a Protocol Postal Expert!');
            alert('Training Complete!\n\nYou have mastered:\n‚úì All 7 major network protocols\n‚úì Protocol layering and encapsulation\n‚úì Real-world protocol usage\n‚úì HTTP vs HTTPS security\n\nWell done, Protocol Postal Worker!');
        }
    </script>
</body>
</html>