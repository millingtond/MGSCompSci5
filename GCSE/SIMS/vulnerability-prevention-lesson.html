<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1.4.2 Identifying and Preventing Vulnerabilities</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #667eea;
            --primary-dark: #5a67d8;
            --success-color: #4CAF50;
            --danger-color: #f44336;
            --warning-color: #ff9800;
            --background-gradient: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            --header-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--background-gradient);
            color: #333;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .lesson-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 900px;
            width: 100%;
            overflow: hidden;
        }

        .header {
            background: var(--header-gradient);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }

        .progress-bar {
            height: 8px;
            background: rgba(255,255,255,0.3);
            position: relative;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--success-color);
            width: 0%;
            transition: width 0.5s ease;
        }

        .content {
            padding: 40px;
            min-height: 500px;
        }

        .slide {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .slide.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .method-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            border: 2px solid #e0e0e0;
            transition: all 0.3s ease;
        }

        .method-card:hover {
            border-color: var(--primary-color);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.1);
        }

        .method-icon {
            font-size: 3em;
            margin-bottom: 15px;
            display: inline-block;
        }

        .method-title {
            color: var(--primary-color);
            font-size: 1.8em;
            margin-bottom: 15px;
        }

        .method-description {
            line-height: 1.8;
            color: #555;
            margin-bottom: 20px;
        }

        .prevention-box {
            background: #e8f5e9;
            border-left: 4px solid var(--success-color);
            padding: 20px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .prevention-box h4 {
            color: #2e7d32;
            margin-bottom: 10px;
        }

        .attack-box {
            background: #ffebee;
            border-left: 4px solid var(--danger-color);
            padding: 20px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .attack-box h4 {
            color: #c62828;
            margin-bottom: 10px;
        }

        .interactive-demo {
            background: #f5f5f5;
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
        }

        .demo-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
            font-size: 1em;
        }

        .demo-button:hover:not(:disabled) {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .demo-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .simulation-area {
            background: #263238;
            color: var(--success-color);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            min-height: 150px;
            position: relative;
            overflow: hidden;
        }

        .terminal-line {
            margin: 5px 0;
            opacity: 0;
            animation: terminalFade 0.5s forwards;
        }

        @keyframes terminalFade {
            to { opacity: 1; }
        }

        .firewall-visual {
            display: flex;
            align-items: center;
            justify-content: space-around;
            padding: 30px;
            background: #f0f0f0;
            border-radius: 10px;
            margin: 20px 0;
        }

        .network-element {
            text-align: center;
            padding: 20px;
        }

        .firewall-wall {
            background: linear-gradient(to bottom, #ff6b6b, #ee5a24);
            width: 20px;
            height: 150px;
            position: relative;
            box-shadow: 0 0 20px rgba(238, 90, 36, 0.5);
        }

        .packet {
            position: absolute;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            left: -100px;
            top: 50%;
            transform: translateY(-50%);
        }

        .packet.good {
            background: var(--success-color);
        }

        .packet.bad {
            background: var(--danger-color);
        }

        @keyframes movePacketThrough {
            0% { left: -100px; }
            50% { left: 50%; transform: translateX(-50%) translateY(-50%); }
            100% { left: calc(100% + 100px); }
        }

        @keyframes movePacketBlocked {
            0% { left: -100px; }
            50% { left: 50%; transform: translateX(-50%) translateY(-50%); }
            100% { left: -100px; }
        }

        .password-tester {
            background: #f5f5f5;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .password-input {
            width: 100%;
            padding: 15px;
            font-size: 1.2em;
            border: 2px solid #ddd;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .password-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .strength-meter {
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
            margin: 10px 0;
        }

        .strength-bar {
            height: 100%;
            width: 0%;
            transition: all 0.3s ease;
        }

        .strength-bar.weak { 
            background: var(--danger-color); 
            width: 33%; 
        }
        
        .strength-bar.medium { 
            background: var(--warning-color); 
            width: 66%; 
        }
        
        .strength-bar.strong { 
            background: var(--success-color); 
            width: 100%; 
        }

        .encryption-demo {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 20px;
            align-items: center;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 10px;
        }

        .encryption-box {
            background: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid #ddd;
            transition: all 0.3s ease;
        }

        .encryption-box.active {
            border-color: var(--primary-color);
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }

        .arrow {
            font-size: 2em;
            color: var(--primary-color);
        }

        .quiz-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .quiz-question {
            font-size: 1.2em;
            margin-bottom: 20px;
            color: #333;
        }

        .quiz-option {
            background: white;
            border: 2px solid #e0e0e0;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover:not(.correct):not(.incorrect) {
            border-color: var(--primary-color);
            background: #f5f7ff;
        }

        .quiz-option.correct {
            background: #e8f5e9;
            border-color: var(--success-color);
            cursor: default;
        }

        .quiz-option.incorrect {
            background: #ffebee;
            border-color: var(--danger-color);
            cursor: default;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            padding: 30px 40px;
            background: #f8f9fa;
            border-top: 1px solid #e0e0e0;
        }

        .nav-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .nav-button:hover:not(:disabled) {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .nav-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .summary-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
            text-align: center;
            transition: all 0.3s ease;
        }

        .summary-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .summary-card .icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .summary-card h4 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .content {
                padding: 20px;
            }
            .navigation {
                padding: 20px;
            }
            .encryption-demo {
                grid-template-columns: 1fr;
            }
            .arrow {
                transform: rotate(90deg);
            }
        }
    </style>
</head>
<body>
    <div class="lesson-container">
        <div class="header">
            <h1>1.4.2 Identifying and Preventing Vulnerabilities</h1>
            <p>Learn how to protect systems using common prevention methods</p>
            <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                <div class="progress-fill" id="progressBar"></div>
            </div>
        </div>

        <div class="content">
            <!-- Slide 1: Introduction -->
            <div class="slide active">
                <h2>Welcome to Vulnerability Prevention</h2>
                <p style="font-size: 1.1em; line-height: 1.8; margin: 20px 0;">
                    In this lesson, you'll learn about 7 essential methods to prevent cyber vulnerabilities and protect computer systems from the threats we explored in lesson 1.4.1.
                </p>
                
                <div class="method-card">
                    <h3 style="color: var(--primary-color); margin-bottom: 20px;">What You'll Learn:</h3>
                    <div class="summary-grid">
                        <div class="summary-card">
                            <div class="icon">🔍</div>
                            <h4>Penetration Testing</h4>
                            <p>Finding vulnerabilities before attackers do</p>
                        </div>
                        <div class="summary-card">
                            <div class="icon">🛡️</div>
                            <h4>Anti-malware Software</h4>
                            <p>Protecting against malicious programs</p>
                        </div>
                        <div class="summary-card">
                            <div class="icon">🔥</div>
                            <h4>Firewalls</h4>
                            <p>Controlling network traffic</p>
                        </div>
                        <div class="summary-card">
                            <div class="icon">👥</div>
                            <h4>User Access Levels</h4>
                            <p>Limiting user permissions</p>
                        </div>
                        <div class="summary-card">
                            <div class="icon">🔐</div>
                            <h4>Passwords</h4>
                            <p>Strong authentication</p>
                        </div>
                        <div class="summary-card">
                            <div class="icon">🔒</div>
                            <h4>Encryption</h4>
                            <p>Protecting data confidentiality</p>
                        </div>
                        <div class="summary-card">
                            <div class="icon">🏢</div>
                            <h4>Physical Security</h4>
                            <p>Protecting hardware access</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 2: Penetration Testing -->
            <div class="slide">
                <div class="method-card">
                    <div class="method-icon">🔍</div>
                    <h2 class="method-title">Penetration Testing</h2>
                    <p class="method-description">
                        Penetration testing (pen testing) is like hiring a "friendly hacker" to find vulnerabilities in your system before real attackers do. It's a proactive approach to security.
                    </p>

                    <div class="prevention-box">
                        <h4>What it prevents:</h4>
                        <ul>
                            <li>Unknown vulnerabilities being exploited</li>
                            <li>SQL injection attacks (by testing input sanitization)</li>
                            <li>Unpatched security holes</li>
                            <li>Weak authentication systems</li>
                        </ul>
                    </div>

                    <div class="attack-box">
                        <h4>How it works:</h4>
                        <p>Security experts simulate real attacks on your system, trying various methods to break in. They then report their findings so you can fix the vulnerabilities.</p>
                        <p style="margin-top: 10px;"><strong>SQL Injection Prevention found through testing:</strong></p>
                        <ul style="margin-left: 20px;">
                            <li>Input sanitization - removing dangerous characters (quotes, semicolons, backslashes, =)</li>
                            <li>Setting appropriate database user access levels</li>
                            <li>Using parameterized queries to separate data from code</li>
                        </ul>
                    </div>

                    <div class="interactive-demo">
                        <h4>Pen Testing Simulation</h4>
                        <p>Click to see a pen test in action:</p>
                        <button class="demo-button" id="penTestBtn">Run Penetration Test</button>
                        <div class="simulation-area" id="penTestOutput" style="display: none;"></div>
                    </div>
                </div>
            </div>

            <!-- Slide 3: Anti-malware Software -->
            <div class="slide">
                <div class="method-card">
                    <div class="method-icon">🛡️</div>
                    <h2 class="method-title">Anti-malware Software</h2>
                    <p class="method-description">
                        Anti-malware software acts as a guard that constantly watches for malicious programs trying to infect your system. It uses various detection methods to identify and remove threats.
                    </p>

                    <div class="prevention-box">
                        <h4>What it prevents:</h4>
                        <ul>
                            <li>Viruses and worms</li>
                            <li>Trojans and spyware</li>
                            <li>Ransomware attacks</li>
                            <li>Adware and rootkits</li>
                        </ul>
                    </div>

                    <div class="attack-box">
                        <h4>How it works:</h4>
                        <p>Uses signature-based detection (matching known malware patterns), behavioral analysis (detecting suspicious activities), and real-time scanning to identify and quarantine threats.</p>
                        <p style="margin-top: 10px;"><strong>Advanced techniques:</strong> Heuristic analysis examines code for suspicious properties, and sandbox testing isolates untested code from production environments.</p>
                    </div>

                    <div class="interactive-demo">
                        <h4>Malware Detection Demo</h4>
                        <p>See how anti-malware software detects threats:</p>
                        <button class="demo-button" id="malwareScanBtn">Start Scan</button>
                        <div class="simulation-area" id="malwareScanOutput" style="display: none;"></div>
                    </div>
                </div>
            </div>

            <!-- Slide 4: Firewalls -->
            <div class="slide">
                <div class="method-card">
                    <div class="method-icon">🔥</div>
                    <h2 class="method-title">Firewalls</h2>
                    <p class="method-description">
                        A firewall acts as a barrier between your trusted internal network and untrusted external networks like the internet. It monitors and controls all incoming and outgoing network traffic based on predetermined security rules.
                    </p>

                    <div class="prevention-box">
                        <h4>What it prevents:</h4>
                        <ul>
                            <li>Unauthorized network access</li>
                            <li>DoS/DDoS attacks from bots and infected computers</li>
                            <li>Port scanning attempts</li>
                            <li>Malicious incoming connections</li>
                            <li>Data interception attempts</li>
                        </ul>
                    </div>

                    <div class="attack-box">
                        <h4>How it works:</h4>
                        <p>Examines all network packets, checks them against security rules, and blocks suspicious or unauthorized traffic while allowing legitimate connections through.</p>
                    </div>

                    <div class="interactive-demo">
                        <h4>Firewall in Action</h4>
                        <div class="firewall-visual" id="firewallDemo">
                            <div class="network-element">
                                <div style="font-size: 3em;">🌐</div>
                                <p>Internet</p>
                            </div>
                            <div class="firewall-wall" id="firewall">
                                <div id="goodPacket" class="packet good" style="display: none;">✓</div>
                                <div id="badPacket" class="packet bad" style="display: none;">✗</div>
                            </div>
                            <div class="network-element">
                                <div style="font-size: 3em;">💻</div>
                                <p>Your Network</p>
                            </div>
                        </div>
                        <button class="demo-button" id="goodTrafficBtn">Send Good Traffic</button>
                        <button class="demo-button" id="badTrafficBtn">Send Bad Traffic</button>
                    </div>
                </div>
            </div>

            <!-- Slide 5: User Access Levels -->
            <div class="slide">
                <div class="method-card">
                    <div class="method-icon">👥</div>
                    <h2 class="method-title">User Access Levels</h2>
                    <p class="method-description">
                        User access levels implement the principle of "least privilege" - giving users only the permissions they need to do their job, nothing more.
                    </p>

                    <div class="prevention-box">
                        <h4>What it prevents:</h4>
                        <ul>
                            <li>Insider threats and data theft</li>
                            <li>Accidental data deletion or modification</li>
                            <li>Privilege escalation attacks</li>
                            <li>Unauthorized system changes</li>
                        </ul>
                    </div>

                    <div class="attack-box">
                        <h4>How it works:</h4>
                        <p>Network policies define which users can see which folders and files, and the type of access they have (Read-Only or Read-Write). This creates different permission levels (e.g., Admin, User, Guest) with specific access rights.</p>
                        <p style="margin-top: 10px;">Users can only access resources and perform actions allowed by their level, preventing accidental or malicious damage to critical systems.</p>
                    </div>

                    <div class="interactive-demo">
                        <h4>Access Level Example</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0;">
                            <div style="background: #ffebee; padding: 15px; border-radius: 8px;">
                                <h5>Guest</h5>
                                <p>✓ View public files<br>✗ Edit files<br>✗ Install software<br>✗ Change settings</p>
                            </div>
                            <div style="background: #fff3e0; padding: 15px; border-radius: 8px;">
                                <h5>User</h5>
                                <p>✓ View files<br>✓ Edit own files<br>✗ Install software<br>✗ Change settings</p>
                            </div>
                            <div style="background: #e8f5e9; padding: 15px; border-radius: 8px;">
                                <h5>Admin</h5>
                                <p>✓ View all files<br>✓ Edit all files<br>✓ Install software<br>✓ Change settings</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 6: Passwords -->
            <div class="slide">
                <div class="method-card">
                    <div class="method-icon">🔐</div>
                    <h2 class="method-title">Strong Passwords</h2>
                    <p class="method-description">
                        Passwords are the first line of defense against unauthorized access. Strong passwords make it extremely difficult for attackers to guess or crack them.
                    </p>

                    <div class="prevention-box">
                        <h4>What it prevents:</h4>
                        <ul>
                            <li>Brute force attacks</li>
                            <li>Dictionary attacks</li>
                            <li>Unauthorized account access</li>
                            <li>Identity theft</li>
                        </ul>
                    </div>

                    <div class="attack-box">
                        <h4>How it works:</h4>
                        <p>Strong passwords use a combination of uppercase, lowercase, numbers, and symbols, making them mathematically difficult to crack. Length is more important than complexity!</p>
                        <p style="margin-top: 10px;"><strong>Additional security measures:</strong></p>
                        <ul style="margin-left: 20px;">
                            <li><strong>Two-Factor Authentication (2FA):</strong> Adds an extra layer by requiring a code sent to another device</li>
                            <li><strong>Regular password changes:</strong> Reduces risk if passwords are compromised</li>
                            <li><strong>Biometric authentication:</strong> Fingerprint readers and facial recognition as alternatives or second factors</li>
                        </ul>
                    </div>

                    <div class="interactive-demo">
                        <h4>Password Strength Tester</h4>
                        <div class="password-tester">
                            <input type="text" class="password-input" id="passwordInput" placeholder="Enter a password to test..." maxlength="128">
                            <div class="strength-meter">
                                <div class="strength-bar" id="strengthBar"></div>
                            </div>
                            <p id="passwordFeedback" style="margin-top: 10px;">Enter a password to see its strength</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 7: Encryption -->
            <div class="slide">
                <div class="method-card">
                    <div class="method-icon">🔒</div>
                    <h2 class="method-title">Encryption</h2>
                    <p class="method-description">
                        Encryption transforms readable data into scrambled code that can only be decoded with the correct key, protecting information even if it's intercepted.
                    </p>

                    <div class="prevention-box">
                        <h4>What it prevents:</h4>
                        <ul>
                            <li>Data interception and theft</li>
                            <li>Man-in-the-middle attacks</li>
                            <li>Unauthorized data access</li>
                            <li>Information disclosure</li>
                        </ul>
                    </div>

                    <div class="attack-box">
                        <h4>How it works:</h4>
                        <p>Uses mathematical algorithms to transform plain text into cipher text. Only someone with the decryption key can convert it back to readable form.</p>
                        <p style="margin-top: 10px;"><strong>Common encryption implementations:</strong></p>
                        <ul style="margin-left: 20px;">
                            <li><strong>WPA2:</strong> Secure encryption for Wi-Fi networks</li>
                            <li><strong>HTTPS:</strong> Encrypts web traffic between browser and server</li>
                            <li><strong>VPN:</strong> Creates encrypted tunnel for all network traffic</li>
                            <li><strong>File encryption:</strong> Protects data stored on drives</li>
                        </ul>
                    </div>

                    <div class="interactive-demo">
                        <h4>Encryption Demo</h4>
                        <div class="encryption-demo">
                            <div class="encryption-box" id="plainTextBox">
                                <h5>Plain Text</h5>
                                <p id="plainText">Secret Message</p>
                            </div>
                            <div class="arrow">→</div>
                            <div class="encryption-box" id="encryptedTextBox">
                                <h5>Encrypted</h5>
                                <p id="encryptedText">?????</p>
                            </div>
                        </div>
                        <button class="demo-button" id="encryptBtn">Encrypt Message</button>
                        <button class="demo-button" id="decryptBtn">Decrypt Message</button>
                    </div>
                </div>
            </div>

            <!-- Slide 8: Physical Security -->
            <div class="slide">
                <div class="method-card">
                    <div class="method-icon">🏢</div>
                    <h2 class="method-title">Physical Security</h2>
                    <p class="method-description">
                        Physical security protects the actual hardware and infrastructure from unauthorized physical access, theft, or damage.
                    </p>

                    <div class="prevention-box">
                        <h4>What it prevents:</h4>
                        <ul>
                            <li>Hardware theft and burglary</li>
                            <li>Unauthorized physical access to servers</li>
                            <li>USB-based attacks</li>
                            <li>Shoulder surfing</li>
                            <li>Damage from fire, flood, and natural disasters</li>
                        </ul>
                    </div>

                    <div class="attack-box">
                        <h4>How it works:</h4>
                        <p>Uses locks, security cameras, access cards, biometric scanners, and security personnel to control who can physically access computer systems and data centers.</p>
                        <p style="margin-top: 10px;"><strong>Important measures:</strong> Keeping servers in locked rooms accessible only to network managers, and ensuring backups are kept off-site in different secure locations to protect against disasters.</p>
                    </div>

                    <div class="interactive-demo">
                        <h4>Physical Security Measures</h4>
                        <div class="summary-grid">
                            <div class="summary-card">
                                <div class="icon">🚪</div>
                                <h4>Access Control</h4>
                                <p>Key cards, biometrics</p>
                            </div>
                            <div class="summary-card">
                                <div class="icon">📹</div>
                                <h4>Surveillance</h4>
                                <p>CCTV monitoring</p>
                            </div>
                            <div class="summary-card">
                                <div class="icon">🔐</div>
                                <h4>Secure Storage</h4>
                                <p>Locked server rooms</p>
                            </div>
                            <div class="summary-card">
                                <div class="icon">👮</div>
                                <h4>Security Personnel</h4>
                                <p>Guards and monitoring</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 9: Knowledge Check -->
            <div class="slide">
                <h2>Knowledge Check</h2>
                <p style="margin-bottom: 30px;">Test your understanding of vulnerability prevention methods!</p>

                <div class="quiz-section" data-quiz-id="quiz1">
                    <div class="quiz-question">Which prevention method would best protect against a brute force password attack?</div>
                    <div class="quiz-option" data-correct="false">Firewalls</div>
                    <div class="quiz-option" data-correct="true">Strong passwords with account lockout policies</div>
                    <div class="quiz-option" data-correct="false">Physical security</div>
                    <div class="quiz-option" data-correct="false">Anti-malware software</div>
                </div>

                <div class="quiz-section" style="margin-top: 30px;" data-quiz-id="quiz2">
                    <div class="quiz-question">What is the main purpose of penetration testing?</div>
                    <div class="quiz-option" data-correct="false">To install firewalls</div>
                    <div class="quiz-option" data-correct="false">To encrypt data</div>
                    <div class="quiz-option" data-correct="true">To find vulnerabilities before attackers do</div>
                    <div class="quiz-option" data-correct="false">To create user accounts</div>
                </div>
            </div>

            <!-- Slide 10: Summary -->
            <div class="slide">
                <h2>Summary: Complete Security Strategy</h2>
                <p style="margin-bottom: 30px;">Remember, the best security uses multiple layers of protection:</p>

                <div class="method-card">
                    <h3 style="color: var(--primary-color); margin-bottom: 20px;">Prevention Methods vs Threats (from 1.4.1):</h3>
                    <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">
                        <tr style="background: #f8f9fa;">
                            <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Threat</th>
                            <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Prevention Methods</th>
                        </tr>
                        <tr>
                            <td style="padding: 10px; border: 1px solid #ddd;">Malware</td>
                            <td style="padding: 10px; border: 1px solid #ddd;">Anti-malware software, Firewalls, User access levels</td>
                        </tr>
                        <tr>
                            <td style="padding: 10px; border: 1px solid #ddd;">Social Engineering</td>
                            <td style="padding: 10px; border: 1px solid #ddd;">Security training, Strong passwords, User access levels</td>
                        </tr>
                        <tr>
                            <td style="padding: 10px; border: 1px solid #ddd;">Brute Force</td>
                            <td style="padding: 10px; border: 1px solid #ddd;">Strong passwords, Account lockouts, 2FA</td>
                        </tr>
                        <tr>
                            <td style="padding: 10px; border: 1px solid #ddd;">DoS/DDoS</td>
                            <td style="padding: 10px; border: 1px solid #ddd;">Firewalls, Network monitoring, Traffic filtering</td>
                        </tr>
                        <tr>
                            <td style="padding: 10px; border: 1px solid #ddd;">Data Interception</td>
                            <td style="padding: 10px; border: 1px solid #ddd;">Encryption (WPA2, HTTPS, VPN)</td>
                        </tr>
                        <tr>
                            <td style="padding: 10px; border: 1px solid #ddd;">SQL Injection</td>
                            <td style="padding: 10px; border: 1px solid #ddd;">Input sanitization, Pen testing, Database access controls</td>
                        </tr>
                    </table>
                </div>

                <div class="prevention-box" style="margin-top: 30px;">
                    <h4>Remember:</h4>
                    <p>No single method provides complete protection. Effective security combines all these methods to create multiple layers of defense - if one fails, others are there to protect your systems!</p>
                    <p style="margin-top: 10px;"><strong>Additional best practices:</strong></p>
                    <ul style="margin-left: 20px;">
                        <li>Regular security training to prevent social engineering attacks</li>
                        <li>Keep operating systems and antivirus software updated</li>
                        <li>Regular backups to limit damage if attacks succeed</li>
                        <li>Network policies to restrict what users can and cannot do</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="navigation">
            <button class="nav-button" id="prevBtn" aria-label="Previous slide">← Previous</button>
            <button class="nav-button" id="nextBtn" aria-label="Next slide">Next →</button>
        </div>
    </div>

    <script>
        'use strict';

        // Constants and Configuration
        const CONFIG = {
            TOTAL_SLIDES: 10,
            ANIMATION: {
                PEN_TEST_DELAY: 1000,
                MALWARE_SCAN_DELAY: 800,
                PACKET_ANIMATION_DURATION: 2000,
                DEBOUNCE_DELAY: 300
            },
            PASSWORD: {
                MIN_LENGTH: 8,
                STRONG_LENGTH: 12,
                MAX_LENGTH: 128
            },
            SELECTORS: {
                SLIDE: '.slide',
                QUIZ_OPTION: '.quiz-option',
                NAV_PREV: '#prevBtn',
                NAV_NEXT: '#nextBtn',
                PROGRESS_BAR: '#progressBar'
            }
        };

        // State Management
        class LessonState {
            constructor() {
                this.currentSlide = 0;
                this.animations = {
                    penTest: null,
                    malwareScan: null,
                    firewall: { good: null, bad: null }
                };
                this.quizAnswered = new Set();
                this.encryptedState = false;
            }

            isAnimationRunning(type, subType = null) {
                if (subType) {
                    return this.animations[type][subType] !== null;
                }
                return this.animations[type] !== null;
            }

            setAnimation(type, value, subType = null) {
                if (subType) {
                    this.animations[type][subType] = value;
                } else {
                    this.animations[type] = value;
                }
            }

            clearAnimation(type, subType = null) {
                if (subType) {
                    if (this.animations[type][subType]) {
                        clearTimeout(this.animations[type][subType]);
                        this.animations[type][subType] = null;
                    }
                } else {
                    if (this.animations[type]) {
                        clearTimeout(this.animations[type]);
                        this.animations[type] = null;
                    }
                }
            }
        }

        // DOM Management
        class DOMManager {
            constructor() {
                this.cache = {};
                this.initializeCache();
            }

            initializeCache() {
                this.cache = {
                    slides: document.querySelectorAll(CONFIG.SELECTORS.SLIDE),
                    progressBar: document.querySelector(CONFIG.SELECTORS.PROGRESS_BAR),
                    prevBtn: document.querySelector(CONFIG.SELECTORS.NAV_PREV),
                    nextBtn: document.querySelector(CONFIG.SELECTORS.NAV_NEXT)
                };
            }

            getElement(id) {
                if (!this.cache[id]) {
                    this.cache[id] = document.getElementById(id);
                }
                return this.cache[id];
            }

            querySelector(selector) {
                return document.querySelector(selector);
            }

            querySelectorAll(selector) {
                return document.querySelectorAll(selector);
            }
        }

        // Utility Functions
        const Utils = {
            debounce(func, delay) {
                let timeoutId;
                return function(...args) {
                    clearTimeout(timeoutId);
                    timeoutId = setTimeout(() => func.apply(this, args), delay);
                };
            },

            sanitizeInput(input) {
                return input.replace(/[<>&"'/]/g, '');
            },

            createTerminalLine(text, className = 'terminal-line') {
                const line = document.createElement('div');
                line.className = className;
                line.textContent = text; // Safe from XSS
                return line;
            }
        };

        // Main Application Class
        class VulnerabilityLesson {
            constructor() {
                this.state = new LessonState();
                this.dom = new DOMManager();
                this.debouncedPasswordCheck = Utils.debounce(
                    this.checkPasswordStrength.bind(this),
                    CONFIG.ANIMATION.DEBOUNCE_DELAY
                );
                this.init();
            }

            init() {
                this.attachEventListeners();
                this.showSlide(0);
            }

            attachEventListeners() {
                // Navigation
                this.dom.cache.prevBtn?.addEventListener('click', () => this.previousSlide());
                this.dom.cache.nextBtn?.addEventListener('click', () => this.nextSlide());

                // Demo buttons
                this.dom.getElement('penTestBtn')?.addEventListener('click', () => this.runPenTest());
                this.dom.getElement('malwareScanBtn')?.addEventListener('click', () => this.scanForMalware());
                this.dom.getElement('goodTrafficBtn')?.addEventListener('click', () => this.simulateTraffic('good'));
                this.dom.getElement('badTrafficBtn')?.addEventListener('click', () => this.simulateTraffic('bad'));
                this.dom.getElement('encryptBtn')?.addEventListener('click', () => this.demonstrateEncryption());
                this.dom.getElement('decryptBtn')?.addEventListener('click', () => this.demonstrateDecryption());

                // Password input
                const passwordInput = this.dom.getElement('passwordInput');
                passwordInput?.addEventListener('input', () => this.debouncedPasswordCheck());

                // Quiz delegation
                document.addEventListener('click', (e) => {
                    if (e.target.classList.contains('quiz-option')) {
                        this.handleQuizAnswer(e.target);
                    }
                });

                // Keyboard navigation
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'ArrowLeft') this.previousSlide();
                    if (e.key === 'ArrowRight') this.nextSlide();
                });
            }

            showSlide(index) {
                // Boundary checks
                if (index < 0) index = 0;
                if (index >= CONFIG.TOTAL_SLIDES) index = CONFIG.TOTAL_SLIDES - 1;

                this.state.currentSlide = index;

                // Update slides
                this.dom.cache.slides.forEach((slide, i) => {
                    slide.classList.toggle('active', i === index);
                });

                // Update navigation
                this.updateNavigation();
                this.updateProgress();

                // Update ARIA
                this.dom.cache.progressBar?.setAttribute('aria-valuenow', 
                    Math.round(((index + 1) / CONFIG.TOTAL_SLIDES) * 100));
            }

            updateNavigation() {
                const { prevBtn, nextBtn } = this.dom.cache;
                const { currentSlide } = this.state;

                prevBtn.disabled = currentSlide === 0;
                nextBtn.disabled = currentSlide === CONFIG.TOTAL_SLIDES - 1;
                nextBtn.textContent = currentSlide === CONFIG.TOTAL_SLIDES - 1 ? 'Complete ✓' : 'Next →';
            }

            updateProgress() {
                const progress = ((this.state.currentSlide + 1) / CONFIG.TOTAL_SLIDES) * 100;
                this.dom.cache.progressBar.style.width = `${progress}%`;
            }

            nextSlide() {
                if (this.state.currentSlide < CONFIG.TOTAL_SLIDES - 1) {
                    this.showSlide(this.state.currentSlide + 1);
                }
            }

            previousSlide() {
                if (this.state.currentSlide > 0) {
                    this.showSlide(this.state.currentSlide - 1);
                }
            }

            // Interactive Demonstrations
            async runPenTest() {
                if (this.state.isAnimationRunning('penTest')) return;

                const output = this.dom.getElement('penTestOutput');
                const button = this.dom.getElement('penTestBtn');
                if (!output || !button) return;

                button.disabled = true;
                output.style.display = 'block';
                output.innerHTML = '';

                const tests = [
                    'Starting penetration test...',
                    'Scanning ports... Found open ports: 80, 443, 3306',
                    'Testing for SQL injection vulnerabilities...',
                    '⚠️ VULNERABILITY FOUND: SQL injection in login form',
                    'Testing authentication strength...',
                    '⚠️ VULNERABILITY FOUND: Weak password policy',
                    'Checking for outdated software...',
                    '✓ All software up to date',
                    'Test complete. 2 vulnerabilities found.'
                ];

                for (let i = 0; i < tests.length; i++) {
                    const timeoutId = setTimeout(() => {
                        output.appendChild(Utils.createTerminalLine(tests[i]));
                    }, i * CONFIG.ANIMATION.PEN_TEST_DELAY);
                    
                    this.state.setAnimation('penTest', timeoutId);
                }

                // Re-enable button after completion
                setTimeout(() => {
                    button.disabled = false;
                    this.state.clearAnimation('penTest');
                }, tests.length * CONFIG.ANIMATION.PEN_TEST_DELAY);
            }

            async scanForMalware() {
                if (this.state.isAnimationRunning('malwareScan')) return;

                const output = this.dom.getElement('malwareScanOutput');
                const button = this.dom.getElement('malwareScanBtn');
                if (!output || !button) return;

                button.disabled = true;
                output.style.display = 'block';
                output.innerHTML = '';

                const scans = [
                    'Initializing malware scan...',
                    'Scanning system files... 1,234 files scanned',
                    'Checking running processes...',
                    '⚠️ THREAT DETECTED: Suspicious process "crypto_miner.exe"',
                    'Quarantining infected file...',
                    '✓ Threat removed successfully',
                    'Updating virus definitions...',
                    '✓ Scan complete. 1 threat removed.'
                ];

                for (let i = 0; i < scans.length; i++) {
                    const timeoutId = setTimeout(() => {
                        output.appendChild(Utils.createTerminalLine(scans[i]));
                    }, i * CONFIG.ANIMATION.MALWARE_SCAN_DELAY);
                    
                    this.state.setAnimation('malwareScan', timeoutId);
                }

                setTimeout(() => {
                    button.disabled = false;
                    this.state.clearAnimation('malwareScan');
                }, scans.length * CONFIG.ANIMATION.MALWARE_SCAN_DELAY);
            }

            simulateTraffic(type) {
                const animationType = type === 'good' ? 'good' : 'bad';
                if (this.state.isAnimationRunning('firewall', animationType)) return;

                const packet = this.dom.getElement(type + 'Packet');
                const button = this.dom.getElement(type + 'TrafficBtn');
                if (!packet || !button) return;

                button.disabled = true;
                packet.style.display = 'flex';
                packet.style.animation = type === 'good' 
                    ? 'movePacketThrough 2s ease-in-out' 
                    : 'movePacketBlocked 2s ease-in-out';

                const timeoutId = setTimeout(() => {
                    packet.style.display = 'none';
                    packet.style.animation = '';
                    button.disabled = false;
                    this.state.clearAnimation('firewall', animationType);
                }, CONFIG.ANIMATION.PACKET_ANIMATION_DURATION);

                this.state.setAnimation('firewall', timeoutId, animationType);
            }

            checkPasswordStrength() {
                const input = this.dom.getElement('passwordInput');
                const strengthBar = this.dom.getElement('strengthBar');
                const feedback = this.dom.getElement('passwordFeedback');

                if (!input || !strengthBar || !feedback) return;

                const password = input.value;

                // Validate length
                if (password.length > CONFIG.PASSWORD.MAX_LENGTH) {
                    feedback.textContent = 'Password too long (max 128 characters)';
                    strengthBar.className = 'strength-bar';
                    strengthBar.style.width = '0%';
                    return;
                }

                // Calculate strength
                const strength = this.calculatePasswordStrength(password);
                this.updatePasswordUI(strengthBar, feedback, strength, password.length);
            }

            calculatePasswordStrength(password) {
                let strength = 0;
                if (password.length >= CONFIG.PASSWORD.MIN_LENGTH) strength++;
                if (password.length >= CONFIG.PASSWORD.STRONG_LENGTH) strength++;
                if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength++;
                if (/\d/.test(password)) strength++;
                if (/[^a-zA-Z0-9]/.test(password)) strength++;
                return strength;
            }

            updatePasswordUI(strengthBar, feedback, strength, length) {
                // Reset classes
                strengthBar.className = 'strength-bar';
                
                if (length === 0) {
                    strengthBar.style.width = '0%';
                    feedback.textContent = 'Enter a password to see its strength';
                    return;
                }

                const strengthLevels = [
                    { threshold: 2, class: 'weak', message: 'Weak - Easy to crack in minutes' },
                    { threshold: 3, class: 'medium', message: 'Medium - Would take days to crack' },
                    { threshold: Infinity, class: 'strong', message: 'Strong - Would take years to crack!' }
                ];

                const level = strengthLevels.find(l => strength <= l.threshold);
                strengthBar.classList.add(level.class);
                feedback.textContent = level.message;
            }

            demonstrateEncryption() {
                const plainText = this.dom.getElement('plainText');
                const encryptedText = this.dom.getElement('encryptedText');
                const plainBox = this.dom.getElement('plainTextBox');
                const encryptedBox = this.dom.getElement('encryptedTextBox');

                if (!plainText || !encryptedText || !plainBox || !encryptedBox) return;

                plainText.textContent = 'Secret Message';
                plainBox.classList.add('active');
                
                setTimeout(() => {
                    encryptedText.style.color = '#f44336';
                    encryptedText.textContent = 'X#k9@mN$pQ2&fL5';
                    encryptedBox.classList.add('active');
                    plainBox.classList.remove('active');
                    this.state.encryptedState = true;
                }, 500);
            }

            demonstrateDecryption() {
                const encryptedText = this.dom.getElement('encryptedText');
                const plainBox = this.dom.getElement('plainTextBox');
                const encryptedBox = this.dom.getElement('encryptedTextBox');

                if (!encryptedText || !this.state.encryptedState) return;

                encryptedBox.classList.add('active');
                
                setTimeout(() => {
                    encryptedText.style.color = '#4CAF50';
                    encryptedText.textContent = 'Secret Message';
                    plainBox.classList.add('active');
                    encryptedBox.classList.remove('active');
                    this.state.encryptedState = false;
                }, 500);
            }

            handleQuizAnswer(element) {
                // Prevent multiple answers
                const quizSection = element.closest('.quiz-section');
                if (!quizSection) return;
                
                const quizId = quizSection.dataset.quizId;
                if (this.state.quizAnswered.has(quizId)) return;

                this.state.quizAnswered.add(quizId);

                const isCorrect = element.dataset.correct === 'true';
                element.classList.add(isCorrect ? 'correct' : 'incorrect');

                // Disable all options
                quizSection.querySelectorAll('.quiz-option').forEach(opt => {
                    opt.style.pointerEvents = 'none';
                    opt.style.cursor = 'default';
                });

                // Show correct answer if wrong
                if (!isCorrect) {
                    quizSection.querySelector('[data-correct="true"]')?.classList.add('correct');
                }
            }

            // Utility method
            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
        }

        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                new VulnerabilityLesson();
            });
        } else {
            new VulnerabilityLesson();
        }
    </script>
</body>
</html>