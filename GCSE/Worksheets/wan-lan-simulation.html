<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WAN and LAN Networks - GCSE Computer Science</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #3b82f6;
            --primary-dark: #2563eb;
            --secondary: #10b981;
            --secondary-dark: #059669;
            --wan-color: #8b5cf6;
            --wan-light: #a78bfa;
            --lan-color: #06b6d4;
            --lan-light: #67e8f9;
            --success: #22c55e;
            --error: #ef4444;
            --warning: #f59e0b;
            --bg-gradient: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
            --card-bg: rgba(255, 255, 255, 0.98);
            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-gradient);
            min-height: 100vh;
            color: #1f2937;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* Animated background elements */
        body::before {
            content: '';
            position: fixed;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(139, 92, 246, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            top: -150px;
            right: -150px;
            animation: float 20s ease-in-out infinite;
        }

        body::after {
            content: '';
            position: fixed;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(6, 182, 212, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            bottom: -200px;
            left: -200px;
            animation: float 25s ease-in-out infinite reverse;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            33% { transform: translate(30px, -30px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            box-shadow: var(--shadow-xl);
            padding: 40px;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--wan-color), var(--lan-color), var(--wan-color));
            background-size: 200% 100%;
            animation: gradient-shift 3s linear infinite;
        }

        @keyframes gradient-shift {
            0% { background-position: 0% 0; }
            100% { background-position: 200% 0; }
        }

        h1 {
            text-align: center;
            font-size: 3em;
            font-weight: 800;
            margin-bottom: 40px;
            background: linear-gradient(135deg, var(--wan-color) 0%, var(--lan-color) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
            letter-spacing: -0.02em;
        }

        h1::after {
            content: 'ï¿½';
            position: absolute;
            right: -70px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.7em;
            animation: rotate 10s linear infinite;
        }

        @keyframes rotate {
            from { transform: translateY(-50%) rotate(0deg); }
            to { transform: translateY(-50%) rotate(360deg); }
        }

        .section {
            margin-bottom: 50px;
            opacity: 0;
            animation: fadeInUp 0.6s ease-out forwards;
        }

        .section:nth-child(2) { animation-delay: 0.1s; }
        .section:nth-child(3) { animation-delay: 0.2s; }
        .section:nth-child(4) { animation-delay: 0.3s; }
        .section:nth-child(5) { animation-delay: 0.4s; }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h2 {
            color: #1e293b;
            margin-bottom: 25px;
            font-size: 2em;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .info-panel {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            padding: 30px;
            border-radius: 16px;
            margin: 25px 0;
            border-left: 5px solid var(--primary);
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .info-panel:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .info-panel::after {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.05) 0%, transparent 70%);
            transform: rotate(45deg);
        }

        .network-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .network-card {
            background: white;
            padding: 35px;
            border-radius: 20px;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid transparent;
        }

        .network-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: var(--wan-color);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.4s ease;
        }

        .network-card.lan::before {
            background: var(--lan-color);
        }

        .network-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: var(--shadow-xl);
            border-color: currentColor;
        }

        .network-card:hover::before {
            transform: scaleX(1);
        }

        .network-card h3 {
            font-size: 1.8em;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 15px;
            font-weight: 700;
        }

        .wan-card h3 { color: var(--wan-color); }
        .lan-card h3 { color: var(--lan-color); }

        .question-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .feature-question {
            padding: 20px;
            background: #f8fafc;
            border-radius: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .feature-question:hover {
            border-color: #e5e7eb;
        }

        .feature-question strong {
            display: block;
            margin-bottom: 15px;
            color: #1e293b;
            font-size: 1.1em;
        }

        .feature-options {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .feature-options button {
            flex: 1;
            min-width: 150px;
            padding: 10px 15px;
            border: 2px solid #e5e7eb;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            text-transform: none;
            letter-spacing: normal;
            font-weight: 500;
        }

        .feature-options button:hover:not(:disabled) {
            background: #f3f4f6;
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .feature-options button:disabled {
            cursor: not-allowed;
            opacity: 0.8;
        }

        .feature-options button.correct {
            background: rgba(34, 197, 94, 0.2);
            border-color: var(--success);
            color: #16a34a;
            font-weight: 600;
        }

        .feature-options button.incorrect {
            background: rgba(239, 68, 68, 0.2);
            border-color: var(--error);
            color: #dc2626;
            text-decoration: line-through;
        }

        .feature-answer {
            display: none;
            padding: 15px;
            background: rgba(59, 130, 246, 0.05);
            border-radius: 8px;
            border: 2px solid var(--primary);
            margin-top: 10px;
            animation: slideDown 0.3s ease;
        }

        .feature-answer.show {
            display: block;
        }

        .feature-answer.correct {
            background: rgba(34, 197, 94, 0.05);
            border-color: var(--success);
        }

        .feature-answer.incorrect {
            background: rgba(239, 68, 68, 0.05);
            border-color: var(--error);
        }

        .connection-label {
            position: absolute;
            background: rgba(255, 255, 255, 0.95);
            color: #1e293b;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            z-index: 5;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            pointer-events: none;
            white-space: nowrap;
        }

        .connection-label.wan {
            border: 1px solid var(--wan-color);
            color: var(--wan-color);
        }

        .connection-label.lan {
            border: 1px solid var(--lan-color);
            color: var(--lan-color);
        }

        .network-visual {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            padding: 40px;
            border-radius: 20px;
            margin: 30px 0;
            position: relative;
            min-height: 500px;
            overflow: hidden;
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .network-visual::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 30%, rgba(139, 92, 246, 0.1) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(6, 182, 212, 0.1) 0%, transparent 40%);
            pointer-events: none;
        }

        .visual-container {
            position: relative;
            width: 100%;
            height: 450px;
            transform: translateZ(0);
        }

        .device {
            position: absolute;
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            color: white;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            z-index: 10;
            user-select: none;
        }

        .device:hover {
            transform: scale(1.15) translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        }

        .device.router {
            background: linear-gradient(135deg, var(--wan-color) 0%, #7c3aed 100%);
            width: 90px;
            height: 90px;
            font-size: 40px;
            border-radius: 20px;
        }

        .device.switch {
            background: linear-gradient(135deg, var(--lan-color) 0%, #0891b2 100%);
            border-radius: 50%;
            width: 80px;
            height: 80px;
        }

        .device.active {
            animation: device-pulse 1s ease-in-out;
        }

        @keyframes device-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .connection {
            position: absolute;
            height: 3px;
            background: rgba(148, 163, 184, 0.5);
            transform-origin: left center;
            z-index: 1;
            transition: all 0.3s ease;
        }

        .connection.wan {
            background: linear-gradient(90deg, 
                transparent 0%, 
                var(--wan-light) 10%,
                var(--wan-color) 50%,
                var(--wan-light) 90%,
                transparent 100%
            );
            height: 5px;
            box-shadow: 0 0 10px rgba(139, 92, 246, 0.5);
        }

        .connection.lan {
            background: linear-gradient(90deg,
                transparent 0%,
                var(--lan-light) 10%,
                var(--lan-color) 50%,
                var(--lan-light) 90%,
                transparent 100%
            );
            height: 4px;
            box-shadow: 0 0 8px rgba(6, 182, 212, 0.5);
        }

        .connection.active {
            animation: flow-line 1s ease-in-out;
        }

        @keyframes flow-line {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; height: 8px; }
        }

        .data-packet {
            position: absolute;
            width: 30px;
            height: 30px;
            background: radial-gradient(circle, #fbbf24 0%, #f59e0b 100%);
            border-radius: 50%;
            box-shadow: 
                0 0 20px rgba(251, 191, 36, 0.8),
                inset 0 0 10px rgba(245, 158, 11, 0.5);
            z-index: 20;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            color: #7c2d12;
            transform: scale(0);
            animation: packet-appear 0.3s ease forwards;
        }

        @keyframes packet-appear {
            to { transform: scale(1); }
        }

        .data-packet.disappearing {
            animation: packet-disappear 0.3s ease forwards;
        }

        @keyframes packet-disappear {
            to { transform: scale(0); opacity: 0; }
        }

        .label {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            white-space: nowrap;
            z-index: 15;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            pointer-events: none;
        }

        .toggle-container {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin: 30px 0;
        }

        .toggle-btn {
            padding: 15px 40px;
            border: none;
            border-radius: 14px;
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .toggle-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            transition: left 0.3s ease;
        }

        .toggle-btn:hover::before {
            left: 100%;
        }

        .toggle-btn.wan {
            background: linear-gradient(135deg, var(--wan-color) 0%, #7c3aed 100%);
            color: white;
        }

        .toggle-btn.lan {
            background: linear-gradient(135deg, var(--lan-color) 0%, #0891b2 100%);
            color: white;
        }

        .toggle-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .toggle-btn.active {
            transform: scale(1.05);
            box-shadow: 
                var(--shadow-xl),
                inset 0 0 20px rgba(255, 255, 255, 0.2);
        }

        .info-box {
            background: rgba(59, 130, 246, 0.1);
            border: 2px solid var(--primary);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            font-size: 16px;
            line-height: 1.6;
            position: relative;
            overflow: hidden;
        }

        .info-box::before {
            content: 'ð¡';
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 24px;
            opacity: 0.5;
        }

        .quiz-section {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            padding: 50px;
            border-radius: 24px;
            margin-top: 50px;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.06);
        }

        .quiz-question {
            margin-bottom: 30px;
            padding: 30px;
            background: white;
            border-radius: 16px;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
        }

        .quiz-question::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: var(--primary);
            transform: scaleY(0);
            transform-origin: top;
            transition: transform 0.3s ease;
        }

        .quiz-question:hover {
            transform: translateX(8px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
        }

        .quiz-question:hover::before {
            transform: scaleY(1);
        }

        .quiz-question h4 {
            color: #1e293b;
            margin-bottom: 20px;
            font-size: 1.3em;
            font-weight: 600;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .quiz-option {
            padding: 18px 24px;
            background: #f8fafc;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
            font-weight: 500;
        }

        .quiz-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .quiz-option:hover {
            background: #e2e8f0;
            transform: translateX(10px);
            border-color: var(--primary);
        }

        .quiz-option:hover::before {
            left: 100%;
        }

        .quiz-option.selected {
            background: rgba(59, 130, 246, 0.15);
            border-color: var(--primary);
            font-weight: 600;
        }

        .quiz-option.correct {
            background: rgba(34, 197, 94, 0.15);
            border-color: var(--success);
            animation: correct-answer 0.6s ease;
        }

        .quiz-option.incorrect {
            background: rgba(239, 68, 68, 0.15);
            border-color: var(--error);
            animation: wrong-answer 0.5s ease;
        }

        @keyframes correct-answer {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); background: rgba(34, 197, 94, 0.25); }
        }

        @keyframes wrong-answer {
            0%, 100% { transform: translateX(0); }
            10% { transform: translateX(-10px); }
            20% { transform: translateX(10px); }
            30% { transform: translateX(-10px); }
            40% { transform: translateX(10px); }
            50% { transform: translateX(-5px); }
            60% { transform: translateX(5px); }
            70% { transform: translateX(-2px); }
            80% { transform: translateX(2px); }
        }

        .feedback {
            margin-top: 20px;
            padding: 18px 24px;
            border-radius: 12px;
            display: none;
            animation: slideDown 0.3s ease;
            position: relative;
            font-weight: 500;
            line-height: 1.5;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: rgba(34, 197, 94, 0.1);
            color: #16a34a;
            border: 2px solid rgba(34, 197, 94, 0.3);
        }

        .feedback.incorrect {
            background: rgba(239, 68, 68, 0.1);
            color: #dc2626;
            border: 2px solid rgba(239, 68, 68, 0.3);
        }

        .controls {
            text-align: center;
            margin: 40px 0;
            display: flex;
            gap: 25px;
            justify-content: center;
        }

        button {
            padding: 16px 40px;
            font-size: 17px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 600;
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        button::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        button:hover::after {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #64748b 0%, #475569 100%);
            color: white;
        }

        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        button:active {
            transform: translateY(0);
        }

        .score {
            text-align: center;
            font-size: 1.5em;
            font-weight: 700;
            margin: 30px 0;
            padding: 25px;
            background: white;
            border-radius: 16px;
            box-shadow: var(--shadow-md);
            color: #1e293b;
            position: relative;
            overflow: hidden;
        }

        .score::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--wan-color), var(--lan-color));
        }

        /* Tooltip */
        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.95);
            color: white;
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            white-space: nowrap;
            z-index: 100;
            pointer-events: none;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .tooltip.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* Loading state */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 2em;
            }

            h1::after {
                display: none;
            }

            .network-comparison {
                grid-template-columns: 1fr;
            }

            .visual-container {
                height: 350px;
            }

            .toggle-container {
                flex-direction: column;
            }

            .toggle-btn {
                width: 100%;
            }

            .quiz-section {
                padding: 30px 20px;
            }

            .controls {
                flex-direction: column;
            }

            button {
                width: 100%;
            }
        }

        /* Print styles */
        @media print {
            body {
                background: white;
            }

            .network-visual,
            .toggle-container,
            .controls {
                display: none;
            }
        }

        /* High contrast mode */
        @media (prefers-contrast: high) {
            :root {
                --primary: #0066cc;
                --wan-color: #663399;
                --lan-color: #006666;
            }
        }

        /* Reduced motion */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>WAN and LAN Networks</h1>
        
        <div class="section">
            <h2>ð Understanding Network Types</h2>
            <div class="info-panel">
                <p><strong>Networks are categorized by their geographical coverage and ownership.</strong></p>
                <p style="margin-top: 15px;">In your GCSE, you need to understand two main types:</p>
                <ul style="margin-top: 15px; margin-left: 25px; list-style: none;">
                    <li style="margin-bottom: 10px;">ð <strong>WAN (Wide Area Network)</strong> - Covers large geographical areas like cities or countries</li>
                    <li>ð¢ <strong>LAN (Local Area Network)</strong> - Limited to small areas like a building or campus</li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>âï¸ Interactive Network Learning</h2>
            <p style="text-align: center; margin-bottom: 20px; color: #64748b;">
                Test your understanding by answering these questions about WAN and LAN characteristics!
            </p>
            <div class="network-comparison">
                <div class="network-card wan-card">
                    <h3>ð WAN - Wide Area Network</h3>
                    <div id="wan-questions" class="question-list">
                        <div class="feature-question" data-feature="geography">
                            <strong>Q: What geographical area does a WAN cover?</strong>
                            <div class="feature-options">
                                <button onclick="checkFeatureAnswer('wan', 'geography', 'small')">Small area like a building</button>
                                <button onclick="checkFeatureAnswer('wan', 'geography', 'large')">Large areas (cities/countries)</button>
                            </div>
                            <div class="feature-answer" id="wan-geography-answer"></div>
                        </div>
                        
                        <div class="feature-question" data-feature="ownership">
                            <strong>Q: Who owns the cables in a WAN?</strong>
                            <div class="feature-options">
                                <button onclick="checkFeatureAnswer('wan', 'ownership', 'company')">The company using them</button>
                                <button onclick="checkFeatureAnswer('wan', 'ownership', 'telecom')">Telecommunications companies</button>
                            </div>
                            <div class="feature-answer" id="wan-ownership-answer"></div>
                        </div>
                        
                        <div class="feature-question" data-feature="cost">
                            <strong>Q: How expensive is WAN infrastructure?</strong>
                            <div class="feature-options">
                                <button onclick="checkFeatureAnswer('wan', 'cost', 'low')">Low cost</button>
                                <button onclick="checkFeatureAnswer('wan', 'cost', 'high')">High cost</button>
                            </div>
                            <div class="feature-answer" id="wan-cost-answer"></div>
                        </div>
                        
                        <div class="feature-question" data-feature="speed">
                            <strong>Q: How does WAN speed compare to LAN?</strong>
                            <div class="feature-options">
                                <button onclick="checkFeatureAnswer('wan', 'speed', 'faster')">Faster than LAN</button>
                                <button onclick="checkFeatureAnswer('wan', 'speed', 'slower')">Slower than LAN</button>
                            </div>
                            <div class="feature-answer" id="wan-speed-answer"></div>
                        </div>
                    </div>
                </div>
                
                <div class="network-card lan-card lan">
                    <h3>ð¢ LAN - Local Area Network</h3>
                    <div id="lan-questions" class="question-list">
                        <div class="feature-question" data-feature="geography">
                            <strong>Q: What geographical area does a LAN cover?</strong>
                            <div class="feature-options">
                                <button onclick="checkFeatureAnswer('lan', 'geography', 'small')">Small area (building/campus)</button>
                                <button onclick="checkFeatureAnswer('lan', 'geography', 'large')">Large areas (cities)</button>
                            </div>
                            <div class="feature-answer" id="lan-geography-answer"></div>
                        </div>
                        
                        <div class="feature-question" data-feature="ownership">
                            <strong>Q: Who owns the network equipment in a LAN?</strong>
                            <div class="feature-options">
                                <button onclick="checkFeatureAnswer('lan', 'ownership', 'company')">Company/home owner</button>
                                <button onclick="checkFeatureAnswer('lan', 'ownership', 'telecom')">Telecommunications companies</button>
                            </div>
                            <div class="feature-answer" id="lan-ownership-answer"></div>
                        </div>
                        
                        <div class="feature-question" data-feature="addressing">
                            <strong>Q: What addresses do devices use in a LAN?</strong>
                            <div class="feature-options">
                                <button onclick="checkFeatureAnswer('lan', 'addressing', 'mac')">MAC addresses</button>
                                <button onclick="checkFeatureAnswer('lan', 'addressing', 'postal')">Postal addresses</button>
                            </div>
                            <div class="feature-answer" id="lan-addressing-answer"></div>
                        </div>
                        
                        <div class="feature-question" data-feature="example">
                            <strong>Q: Which is an example of a LAN?</strong>
                            <div class="feature-options">
                                <button onclick="checkFeatureAnswer('lan', 'example', 'internet')">The Internet</button>
                                <button onclick="checkFeatureAnswer('lan', 'example', 'school')">School network</button>
                            </div>
                            <div class="feature-answer" id="lan-example-answer"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn-secondary" onclick="resetFeatures()">Reset Questions</button>
            </div>
        </div>

        <div class="section">
            <h2>ð¥ï¸ Interactive Network Visualization</h2>
            <div class="toggle-container">
                <button class="toggle-btn wan active" onclick="showNetwork('wan', event)">Show WAN Example</button>
                <button class="toggle-btn lan" onclick="showNetwork('lan', event)">Show LAN Example</button>
            </div>
            
            <div class="network-visual">
                <div class="visual-container" id="networkVisual">
                    <!-- Dynamic content will be added here -->
                </div>
            </div>
            
            <div class="info-box" id="networkInfo">
                <strong>ð Network Diagram Guide:</strong><br>
                â¢ <strong>Devices:</strong> Click on any device (ð¢ offices, ð routers, ð» computers) to learn about their role<br>
                â¢ <strong>Connections:</strong> Lines show how devices connect - notice the labels showing connection types<br>
                â¢ <strong>Data Packets:</strong> Yellow circles (marked W or L) show data traveling through the network<br>
                â¢ <strong>Try both views:</strong> Compare how WAN and LAN networks are structured differently
            </div>
        </div>

        <div class="quiz-section">
            <h2>ð¯ Test Your Knowledge</h2>
            <div class="score" id="score">Complete all questions and click "Check Answers" to see your score</div>
            
            <div id="quizContainer"></div>
            
            <div class="controls">
                <button class="btn-primary" onclick="checkAnswers()">Check Answers</button>
                <button class="btn-secondary" onclick="resetQuiz()">Reset Quiz</button>
            </div>
        </div>
    </div>

    <!-- Tooltip element -->
    <div class="tooltip" id="tooltip"></div>

    <script>
        // --- Global State Variables ---
        let selectedAnswers = {};
        let currentNetwork = 'wan';
        let animationInterval = null;
        let animationFrames = [];

        // --- Data ---
        const quizData = [
            {
                question: "What does WAN stand for?",
                options: [
                    "Wireless Area Network",
                    "Wide Area Network",
                    "Web Area Network",
                    "World Area Network"
                ],
                correct: 1,
                feedback: "WAN stands for Wide Area Network - a network that spans large geographical areas."
            },
            {
                question: "Which statement best describes a WAN?",
                options: [
                    "A network limited to one building",
                    "A network that spans a large geographical area",
                    "A network that only uses wireless connections",
                    "A network owned by home users"
                ],
                correct: 1,
                feedback: "A WAN is a network that spans a large geographical area, connecting multiple LANs across cities, countries, or continents."
            },
            {
                question: "Who typically owns the communication medium (cables) in a WAN?",
                options: [
                    "Home owners",
                    "Individual companies",
                    "Telecommunications companies like BT",
                    "The government"
                ],
                correct: 2,
                feedback: "In a WAN, the communication medium (cables and infrastructure) is owned by telecommunications companies such as BT, Virgin Media, etc."
            },
            {
                question: "What type of addresses do computers use to communicate in a LAN?",
                options: [
                    "IP addresses only",
                    "MAC addresses",
                    "Email addresses",
                    "Postal addresses"
                ],
                correct: 1,
                feedback: "Computers in a LAN use MAC (Media Access Control) addresses to communicate with each other at the data link layer."
            },
            {
                question: "Which of these is a characteristic of a LAN?",
                options: [
                    "Spans multiple countries",
                    "Restricted to a small geographical area/site",
                    "Always uses satellite connections",
                    "Owned by telecommunications companies"
                ],
                correct: 1,
                feedback: "A LAN is restricted to a small geographical area such as a home, office building, or school campus."
            },
            {
                question: "In a LAN, who owns the hardware (routers, switches, WAPs)?",
                options: [
                    "Telecommunications companies",
                    "Internet service providers",
                    "Company/home owners",
                    "The government"
                ],
                correct: 2,
                feedback: "In a LAN, the networking hardware (routers, switches, wireless access points) is owned by the company or home owners."
            },
            {
                question: "Which network type would a school's internal network be classified as?",
                options: [
                    "WAN",
                    "LAN",
                    "MAN",
                    "PAN"
                ],
                correct: 1,
                feedback: "A school's internal network is a LAN because it's restricted to the school site and the hardware is owned by the school."
            },
            {
                question: "What is the largest example of a WAN?",
                options: [
                    "A home network",
                    "A school network",
                    "The Internet",
                    "A office building network"
                ],
                correct: 2,
                feedback: "The Internet is the largest example of a WAN, connecting networks across the entire world."
            },
            {
                question: "Which network type typically has faster data transfer speeds?",
                options: [
                    "WAN",
                    "LAN",
                    "Both have the same speed",
                    "It depends on the weather"
                ],
                correct: 1,
                feedback: "LANs typically have faster data transfer speeds because they cover shorter distances and use dedicated, privately-owned infrastructure."
            },
            {
                question: "A company has offices in London, Manchester, and Edinburgh connected together. What type of network is this?",
                options: [
                    "LAN",
                    "WAN",
                    "Three separate LANs",
                    "Home network"
                ],
                correct: 1,
                feedback: "This is a WAN because it connects offices across a large geographical area (different cities). Each office likely has its own LAN, connected via WAN."
            }
        ];

        const featureAnswers = {
            wan: {
                geography: {
                    correct: 'large',
                    answer: 'â Correct! WANs span large geographical areas like cities, countries, or even continents.',
                    explanation: 'WANs connect networks that are far apart. For example, a company with offices in London, Paris, and New York would use a WAN to connect them all together.'
                },
                ownership: {
                    correct: 'telecom',
                    answer: 'â Correct! The cables and infrastructure are owned by telecommunications companies.',
                    explanation: 'Companies like BT, Virgin Media, or AT&T own the physical cables. Organizations pay monthly fees to use this infrastructure - typically Â£500-Â£5000 per month depending on bandwidth.'
                },
                cost: {
                    correct: 'high',
                    answer: 'â Correct! WANs have high setup and maintenance costs.',
                    explanation: 'Because you\'re renting infrastructure from telecom companies and covering long distances, costs are significant. A single WAN connection can cost thousands per month.'
                },
                speed: {
                    correct: 'slower',
                    answer: 'â Correct! WANs are generally slower than LANs.',
                    explanation: 'Due to the long distances data must travel and shared infrastructure, WAN speeds (10-100 Mbps) are typically much slower than LAN speeds (1-10 Gbps).'
                }
            },
            lan: {
                geography: {
                    correct: 'small',
                    answer: 'â Correct! LANs are restricted to small geographical areas.',
                    explanation: 'A LAN typically covers a single building or campus. Examples include your school network, home network, or office network.'
                },
                ownership: {
                    correct: 'company',
                    answer: 'â Correct! The network equipment is owned by the company or home owner.',
                    explanation: 'Unlike WANs, all the hardware (switches, routers, cables) is purchased and owned by the organization. This gives complete control over the network.'
                },
                addressing: {
                    correct: 'mac',
                    answer: 'â Correct! Devices in a LAN use MAC addresses to communicate.',
                    explanation: 'MAC (Media Access Control) addresses are unique hardware addresses like 00:1B:44:11:3A:B7. Switches use these to send data to the correct device.'
                },
                example: {
                    correct: 'school',
                    answer: 'â Correct! A school network is a perfect example of a LAN.',
                    explanation: 'Your school owns all the network equipment and it covers just the school buildings. The Internet, on the other hand, is the world\'s largest WAN.'
                }
            }
        };

        // --- Feature Questions ---
        function checkFeatureAnswer(networkType, feature, answer) {
            const correctAnswer = featureAnswers[networkType][feature].correct;
            const isCorrect = answer === correctAnswer;
            const answerDiv = document.getElementById(`${networkType}-${feature}-answer`);
            
            const optionsContainer = answerDiv.previousElementSibling;
            const buttons = optionsContainer.querySelectorAll('button');

            buttons.forEach(btn => {
                btn.disabled = true;
                const btnAnswer = btn.onclick.toString().split("'")[5];
                if (btnAnswer === answer) {
                    btn.classList.add(isCorrect ? 'correct' : 'incorrect');
                }
                if (btnAnswer === correctAnswer && !isCorrect) {
                     btn.classList.add('correct');
                }
            });
            
            answerDiv.classList.add('show', isCorrect ? 'correct' : 'incorrect');
            answerDiv.innerHTML = `
                <strong>${isCorrect ? featureAnswers[networkType][feature].answer : 'â Incorrect. ' + featureAnswers[networkType][feature].answer}</strong>
                <p style="margin-top: 10px; opacity: 0.9;">${featureAnswers[networkType][feature].explanation}</p>
            `;
        }

        function resetFeatures() {
            const featureButtons = document.querySelectorAll('.feature-options button');
            featureButtons.forEach(btn => {
                btn.disabled = false;
                btn.classList.remove('correct', 'incorrect');
            });
            
            const featureAnswers = document.querySelectorAll('.feature-answer');
            featureAnswers.forEach(answer => {
                answer.classList.remove('show', 'correct', 'incorrect');
                answer.innerHTML = '';
            });
        }


        // --- Tooltip ---
        const tooltip = document.getElementById('tooltip');
        function showTooltip(text, x, y) {
            tooltip.textContent = text;
            tooltip.style.left = (x + 15) + 'px';
            tooltip.style.top = (y - 30) + 'px';
            tooltip.classList.add('show');
        }

        function hideTooltip() {
            tooltip.classList.remove('show');
        }


        // --- Network Visualization ---
        function showNetwork(type, event) {
            try {
                currentNetwork = type;
                const buttons = document.querySelectorAll('.toggle-btn');
                buttons.forEach(btn => btn.classList.remove('active'));
                
                if (event && event.currentTarget) {
                    event.currentTarget.classList.add('active');
                } else {
                    const activeBtn = document.querySelector(`.toggle-btn.${type}`);
                    if (activeBtn) activeBtn.classList.add('active');
                }
                
                clearAnimations();
                
                const visual = document.getElementById('networkVisual');
                if (visual) {
                    visual.style.opacity = '0';
                    setTimeout(() => {
                        visual.innerHTML = '';
                        if (type === 'wan') {
                            createWANVisualization();
                        } else {
                            createLANVisualization();
                        }
                        visual.style.opacity = '1';
                    }, 300);
                }
            } catch (error) {
                console.error('Error in showNetwork:', error);
            }
        }

        function clearAnimations() {
            if (animationInterval) {
                clearInterval(animationInterval);
                animationInterval = null;
            }
            animationFrames.forEach(frame => cancelAnimationFrame(frame));
            animationFrames = [];
        }

        function createWANVisualization() {
            try {
                const visual = document.getElementById('networkVisual');
                if (!visual) return;
                
                const info = document.getElementById('networkInfo');
                if (info) {
                    info.innerHTML = `
                        <strong>ð WAN Diagram Explanation:</strong><br>
                        â¢ <strong>Purple Lines = Leased Lines:</strong> These are rented from telecom companies (expensive!)<br>
                        â¢ <strong>Central Router:</strong> The ISP (Internet Service Provider) router that connects all locations<br>
                        â¢ <strong>Office Buildings:</strong> Each has its own LAN internally, connected via WAN<br>
                        â¢ <strong>Data Flow:</strong> All data MUST go through the ISP's infrastructure
                    `;
                }
                
                const title = document.createElement('div');
                title.className = 'label';
                title.style.top = '10px';
                title.style.left = '50%';
                title.style.transform = 'translateX(-50%)';
                title.style.fontSize = '20px';
                title.style.padding = '10px 15px';
                title.style.background = 'rgba(139, 92, 246, 0.8)';
                title.textContent = 'WAN - Connecting Multiple Cities';
                visual.appendChild(title);
                
                const offices = [
                    { name: 'London Office', x: 100, y: 100, icon: 'ð¢', devices: 50 },
                    { name: 'Manchester Office', x: 550, y: 80, icon: 'ð¢', devices: 30 },
                    { name: 'Edinburgh Office', x: 250, y: 350, icon: 'ð¢', devices: 25 }
                ];
                
                const telecomRouter = createDevice('ð', 365, 225, 'device router', 'ISP Router');
                telecomRouter.addEventListener('click', () => {
                    showDeviceInfo('ISP Central Router (Owned by BT/Virgin)', 
                        'ð¡ <strong>Purpose:</strong> Routes data between different cities<br>' +
                        'ð° <strong>Ownership:</strong> Telecommunications company (NOT your company)<br>' +
                        'ð <strong>Connection:</strong> High-speed fiber optic backbone<br>' +
                        'ðµ <strong>Cost to use:</strong> Â£1000-5000 per month per connection');
                });
                visual.appendChild(telecomRouter);

                const ispLabel = createLabel('ð­ ISP Infrastructure', 320, 320, 'rgba(139, 92, 246, 0.9)');
                visual.appendChild(ispLabel);
                
                offices.forEach((office, index) => {
                    const device = createDevice(office.icon, office.x, office.y, 'device', office.name);
                    device.style.animationDelay = `${index * 0.1}s`;
                    device.addEventListener('click', () => {
                        showDeviceInfo(`${office.name} (Branch Office)`, 
                            `ð¢ <strong>Location:</strong> ${office.name.split(' ')[0]} city center<br>` +
                            `ð» <strong>Internal Network:</strong> Has its own LAN with ${office.devices} devices<br>` +
                            `ð <strong>WAN Connection:</strong> Leased line to ISP (50 Mbps)<br>` +
                            `ð° <strong>Monthly WAN Cost:</strong> Â£1,500 for this connection`);
                    });
                    visual.appendChild(device);
                    
                    const officeLabel = createLabel(office.name.split(' ')[0], office.x, office.y + 75);
                    officeLabel.style.animationDelay = `${index * 0.1 + 0.2}s`;
                    visual.appendChild(officeLabel);

                    setTimeout(() => {
                        const connection = createConnection(office.x + 35, office.y + 35, 410, 270, 'wan');
                        if (connection) {
                            connection.style.animationDelay = `${index * 0.1 + 0.3}s`;
                        }
                    }, 100);
                });
                
                setTimeout(animateWANPackets, 1000);
                
            } catch (error) {
                console.error('Error creating WAN visualization:', error);
            }
        }

        function createLANVisualization() {
            try {
                const visual = document.getElementById('networkVisual');
                if (!visual) return;
                
                const info = document.getElementById('networkInfo');
                if (info) {
                    info.innerHTML = `
                        <strong>ð¢ LAN Diagram Explanation:</strong><br>
                        â¢ <strong>Blue Lines = Ethernet/Wi-Fi:</strong> Cables owned by the organization (one-time purchase)<br>
                        â¢ <strong>Central Switch:</strong> Connects all devices using MAC addresses<br>
                        â¢ <strong>All Devices:</strong> In the same building, owned by the organization<br>
                        â¢ <strong>Speed:</strong> Very fast (1-10 Gbps) because it's all local
                    `;
                }
                
                const title = createLabel('LAN - Single Building Network', '50%', 10, 'rgba(6, 182, 212, 0.8)');
                title.style.transform = 'translateX(-50%)';
                title.style.fontSize = '20px';
                title.style.padding = '10px 15px';
                visual.appendChild(title);
                
                const switchDevice = createDevice('â¡', 350, 225, 'device switch', 'Network Switch');
                switchDevice.addEventListener('click', () => {
                    showDeviceInfo('Network Switch (Layer 2 Device)', 
                        'â¡ <strong>Purpose:</strong> Connects all LAN devices together<br>' +
                        'ð¢ <strong>Ownership:</strong> Owned by the organization<br>' +
                        'ð <strong>How it works:</strong> Uses MAC address table to forward data<br>' +
                        'â¡ <strong>Speed:</strong> 1 Gbps per port (very fast!)<br>' +
                        'ð° <strong>Cost:</strong> One-time purchase ~Â£500-2000');
                });
                visual.appendChild(switchDevice);

                const switchLabel = createLabel('â¡ Central Switch', 315, 310, 'rgba(6, 182, 212, 0.9)');
                visual.appendChild(switchLabel);
                
                const devices = [
                    { name: 'Workstation 1', x: 150, y: 100, icon: 'ð»', mac: '00:1B:44:11:3A:B7', ip: '192.168.1.10', connection: 'Cat6 Ethernet' },
                    { name: 'Workstation 2', x: 550, y: 100, icon: 'ð»', mac: '00:1B:44:11:3A:B8', ip: '192.168.1.11', connection: 'Cat6 Ethernet' },
                    { name: 'Network Printer', x: 150, y: 350, icon: 'ð¨ï¸', mac: '00:1B:44:11:3A:B9', ip: '192.168.1.50', connection: 'Wi-Fi 802.11ac' },
                    { name: 'File Server', x: 550, y: 350, icon: 'ð¥ï¸', mac: '00:1B:44:11:3A:BA', ip: '192.168.1.100', connection: 'Cat6 Ethernet' },
                    { name: 'WiFi Router', x: 350, y: 50, icon: 'ð¡', mac: '00:1B:44:11:3A:BB', ip: '192.168.1.1', connection: 'Cat6 Ethernet' }
                ];
                
                devices.forEach((device, index) => {
                    const dev = createDevice(device.icon, device.x, device.y, 'device', device.name);
                    dev.style.animationDelay = `${index * 0.1}s`;
                     dev.addEventListener('mouseenter', (e) => showTooltip(`${device.name} - MAC: ${device.mac}`, e.pageX, e.pageY));
                    dev.addEventListener('click', () => {
                        showDeviceInfo(`${device.name} (LAN Device)`, 
                            `ð» <strong>Device Type:</strong> ${device.name}<br>` +
                            `ð <strong>MAC Address:</strong> ${device.mac}<br>` +
                            `ð <strong>IP Address:</strong> ${device.ip}<br>` +
                            `ð <strong>Connection:</strong> ${device.connection}<br>` +
                            `â¡ <strong>Speed:</strong> ${device.connection.includes('Ethernet') ? '1 Gbps' : '300 Mbps'}`);
                    });
                    visual.appendChild(dev);
                    
                    const devLabel = createLabel(`${device.name}<br><span style="font-size: 9px; opacity: 0.8;">MAC: ${device.mac.slice(-8)}</span>`, device.x - 10, device.y + 75);
                    devLabel.style.fontSize = '11px';
                    devLabel.style.animationDelay = `${index * 0.1 + 0.2}s`;
                    visual.appendChild(devLabel);

                    setTimeout(() => {
                        const connection = createConnection(device.x + 35, device.y + 35, 390, 265, 'lan');
                         if (connection) {
                            connection.style.animationDelay = `${index * 0.1 + 0.3}s`;
                        }
                    }, 100);
                });
                
                setTimeout(animateLANPackets, 1000);
                
            } catch (error) {
                console.error('Error creating LAN visualization:', error);
            }
        }

        function createDevice(icon, x, y, className, title) {
            const dev = document.createElement('div');
            dev.className = className;
            dev.style.left = x + 'px';
            dev.style.top = y + 'px';
            dev.innerHTML = icon;
            dev.title = title;
            dev.style.animation = `fadeInUp 0.5s ease forwards`;
            dev.style.opacity = '0';
            dev.addEventListener('mouseenter', (e) => {
                showTooltip(title, e.pageX, e.pageY);
                dev.classList.add('active');
            });
            dev.addEventListener('mouseleave', () => {
                hideTooltip();
                dev.classList.remove('active');
            });
            return dev;
        }

        function createLabel(text, x, y, bgColor = 'rgba(0,0,0,0.9)') {
            const label = document.createElement('div');
            label.className = 'label';
            label.style.left = x + (typeof x === 'string' ? '' : 'px');
            label.style.top = y + 'px';
            label.style.background = bgColor;
            label.innerHTML = text;
            label.style.animation = `fadeIn 0.5s ease forwards`;
            label.style.opacity = '0';
            return label;
        }

        function createConnection(x1, y1, x2, y2, type) {
            const visual = document.getElementById('networkVisual');
            if (!visual) return null;
            
            const connection = document.createElement('div');
            connection.className = `connection ${type}`;
            
            const dx = x2 - x1;
            const dy = y2 - y1;
            const length = Math.sqrt(dx * dx + dy * dy);
            const angle = Math.atan2(dy, dx) * 180 / Math.PI;
            
            connection.style.left = x1 + 'px';
            connection.style.top = y1 + 'px';
            connection.style.width = length + 'px';
            connection.style.transform = `rotate(${angle}deg)`;
            connection.style.opacity = '0';
            connection.style.animation = 'fadeIn 0.5s ease forwards';

            visual.appendChild(connection);
            return connection;
        }

        function showDeviceInfo(device, info) {
            const infoBox = document.getElementById('networkInfo');
            if (!infoBox) return;
            
            infoBox.innerHTML = `
                <div style="background: rgba(255, 255, 255, 0.1); padding: 10px; border-radius: 8px; margin-bottom: 10px;">
                    <strong style="font-size: 1.1em;">ð ${device}</strong>
                </div>
                ${info}
            `;
            infoBox.style.animation = 'pulse 0.5s ease';
            setTimeout(() => {
                if (infoBox) {
                    infoBox.style.animation = '';
                }
            }, 500);
        }

        function animateWANPackets() {
            clearAnimations();
            const visual = document.getElementById('networkVisual');
            if (!visual || currentNetwork !== 'wan') return;
            
            const routes = [
                { start: { x: 135, y: 135 }, end: { x: 585, y: 115 }, via: { x: 410, y: 270 } },
                { start: { x: 585, y: 115 }, end: { x: 285, y: 385 }, via: { x: 410, y: 270 } },
                { start: { x: 285, y: 385 }, end: { x: 135, y: 135 }, via: { x: 410, y: 270 } }
            ];
            
            let packetCount = 0;
            animationInterval = setInterval(() => {
                if (currentNetwork !== 'wan') {
                    clearAnimations();
                    return;
                }
                const route = routes[packetCount % routes.length];
                const packet = createPacket('W', route.start.x, route.start.y);
                visual.appendChild(packet);
                
                animatePacketPath(packet, [route.start, route.via, route.end]);
                packetCount++;
            }, 2500);
        }

        function animateLANPackets() {
            clearAnimations();
            const visual = document.getElementById('networkVisual');
            if (!visual || currentNetwork !== 'lan') return;

            const devices = [
                { x: 185, y: 135 }, { x: 585, y: 135 }, { x: 185, y: 385 },
                { x: 585, y: 385 }, { x: 385, y: 85 }
            ];
            
            let packetCount = 0;
            animationInterval = setInterval(() => {
                if (currentNetwork !== 'lan') {
                    clearAnimations();
                    return;
                }
                const startNode = devices[packetCount % devices.length];
                const endNode = devices[(packetCount + 2) % devices.length];

                const packet = createPacket('L', startNode.x, startNode.y);
                visual.appendChild(packet);
                
                animatePacketPath(packet, [startNode, { x: 390, y: 265 }, endNode]);
                packetCount++;
            }, 1800);
        }

        function createPacket(type, x, y) {
            const packet = document.createElement('div');
            packet.className = 'data-packet';
            packet.innerHTML = `<strong>${type}</strong>`;
            packet.style.left = x - 15 + 'px';
            packet.style.top = y - 15 + 'px';
            packet.title = `${type} Data Packet`;
            return packet;
        }

        function animatePacketPath(packet, points) {
            let currentPoint = 0;
            let animationFrame = null;
            
            function moveToNext() {
                if (!packet || !packet.parentNode || currentPoint >= points.length - 1) {
                    if (animationFrame) cancelAnimationFrame(animationFrame);
                    if (packet && packet.parentNode) {
                        packet.classList.add('disappearing');
                        setTimeout(() => packet.remove(), 300);
                    }
                    return;
                }
                
                const start = points[currentPoint];
                const end = points[currentPoint + 1];
                const duration = 1200;
                const startTime = performance.now();
                
                function animate(currentTime) {
                    if (!packet || !packet.parentNode) {
                        if (animationFrame) cancelAnimationFrame(animationFrame);
                        return;
                    }
                    
                    const elapsed = currentTime - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    const easeProgress = 1 - Math.pow(1 - progress, 3);
                    
                    const x = start.x + (end.x - start.x) * easeProgress;
                    const y = start.y + (end.y - start.y) * easeProgress;
                    
                    packet.style.left = x - 15 + 'px';
                    packet.style.top = y - 15 + 'px';
                    
                    if (progress < 1) {
                        animationFrame = requestAnimationFrame(animate);
                        animationFrames.push(animationFrame);
                    } else {
                        currentPoint++;
                        moveToNext();
                    }
                }
                animationFrame = requestAnimationFrame(animate);
                animationFrames.push(animationFrame);
            }
            moveToNext();
        }

        // --- Quiz Logic ---
        function initQuiz() {
            const container = document.getElementById('quizContainer');
            if (!container) return;
            container.innerHTML = '';
            
            quizData.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'quiz-question';
                questionDiv.style.animation = `fadeInUp 0.5s ease forwards`;
                questionDiv.style.animationDelay = `${index * 0.1}s`;
                questionDiv.style.opacity = '0';
                
                questionDiv.innerHTML = `
                    <h4>Question ${index + 1}: ${q.question}</h4>
                    <div class="quiz-options">
                        ${q.options.map((option, optIndex) => `
                            <div class="quiz-option" onclick="selectAnswer(${index}, this)">
                                ${option}
                            </div>
                        `).join('')}
                    </div>
                    <div class="feedback" id="feedback-${index}"></div>
                `;
                container.appendChild(questionDiv);
            });
            updateScore();
        }

        function selectAnswer(questionIndex, selectedOptionElement) {
            try {
                const optionsContainer = selectedOptionElement.parentElement;
                const options = optionsContainer.querySelectorAll('.quiz-option');

                let optionIndex = -1;
                options.forEach((opt, idx) => {
                    opt.classList.remove('selected');
                    if(opt === selectedOptionElement) {
                        optionIndex = idx;
                    }
                });
                
                selectedOptionElement.classList.add('selected');
                selectedAnswers[questionIndex] = optionIndex;
            } catch (error) {
                console.error('Error in selectAnswer:', error);
            }
        }

        function checkAnswers() {
            try {
                let correctCount = 0;
                quizData.forEach((q, index) => {
                    const questionDiv = document.querySelectorAll('.quiz-question')[index];
                    const options = questionDiv.querySelectorAll('.quiz-option');
                    const feedback = questionDiv.querySelector('.feedback');
                    
                    options.forEach(opt => {
                        opt.classList.remove('correct', 'incorrect');
                        // Prevent further clicks after checking
                        opt.onclick = null; 
                    });
                    
                    if (selectedAnswers[index] !== undefined) {
                        const isCorrect = selectedAnswers[index] === q.correct;
                        
                        if (isCorrect) {
                            correctCount++;
                            options[selectedAnswers[index]].classList.add('correct');
                        } else {
                            options[selectedAnswers[index]].classList.add('incorrect');
                            options[q.correct].classList.add('correct');
                        }
                        
                        feedback.className = `feedback show ${isCorrect ? 'correct' : 'incorrect'}`;
                        feedback.innerHTML = isCorrect 
                            ? `â <strong>Correct!</strong> ${q.feedback}` 
                            : `â <strong>Incorrect.</strong> ${q.feedback}`;
                    } else {
                        feedback.className = 'feedback show incorrect';
                        feedback.innerHTML = 'â ï¸ <strong>Please select an answer.</strong>';
                    }
                });
                updateScore(correctCount);
            } catch (error) {
                console.error('Error in checkAnswers:', error);
            }
        }

        function updateScore(correct = null) {
            const scoreDiv = document.getElementById('score');
            if (!scoreDiv) return;
            
            if (correct !== null) {
                const percentage = Math.round((correct / quizData.length) * 100);
                let scoreText = `<strong>Score: ${correct}/${quizData.length} (${percentage}%)</strong><br>`;
                
                if (percentage === 100) scoreText += 'ð Perfect! You fully understand WAN and LAN networks!';
                else if (percentage >= 80) scoreText += 'ð Great job! You have a strong understanding.';
                else if (percentage >= 60) scoreText += 'ð Good effort! Review the feedback to improve.';
                else scoreText += 'ð Keep studying! Re-watch the animations and try the quiz again.';
                
                scoreDiv.innerHTML = scoreText;
                scoreDiv.style.animation = 'pulse 0.5s ease';
                 setTimeout(() => scoreDiv.style.animation = '', 500);
            } else {
                scoreDiv.innerHTML = '<strong>Complete all questions and click "Check Answers" to see your score</strong>';
            }
        }

        function resetQuiz() {
            try {
                selectedAnswers = {};
                initQuiz();
                resetFeatures();
                showNetwork('wan', null);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } catch (error) {
                console.error('Error in resetQuiz:', error);
            }
        }

        // --- Initialization and Event Handlers ---
        document.addEventListener('DOMContentLoaded', () => {
            try {
                initQuiz();
                showNetwork('wan', null);
            } catch (error) {
                console.error('Error during initialization:', error);
            }
        });
        
        window.addEventListener('beforeunload', clearAnimations);
        
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                clearAnimations();
            } else {
                showNetwork(currentNetwork, null);
            }
        });
        
        window.addEventListener('error', (e) => {
            console.error('A global error occurred:', e.message);
            clearAnimations(); 
        });
    </script>
</body>
</html>
ï¿½