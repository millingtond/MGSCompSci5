<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python File Handling - GCSE Computer Science</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #5e72e4;
            --secondary-color: #11cdef;
            --success-color: #2dce89;
            --danger-color: #f5365c;
            --warning-color: #fb6340;
            --dark-bg: #172b4d;
            --light-bg: #f4f5f7;
            --text-dark: #32325d;
            --text-light: #f4f5f7;
            --font-size-base: 16px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-size: var(--font-size-base);
            line-height: 1.6;
            color: var(--text-dark);
            background: var(--light-bg);
            transition: all 0.3s ease;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        body.high-contrast {
            background: #000;
            color: #fff;
            --primary-color: #00ff00;
            --secondary-color: #ffff00;
        }

        body.high-contrast .section {
            background: #111;
            border: 2px solid #fff;
        }

        body.dyslexia-font {
            font-family: 'OpenDyslexic', sans-serif;
        }

        body.shame-mode {
            background: #ff0000;
            animation: shame-pulse 2s infinite;
        }

        @keyframes shame-pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, var(--dark-bg) 0%, var(--primary-color) 100%);
            color: var(--text-light);
            padding: 30px 0;
            text-align: center;
            position: relative;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .progress-bar {
            background: rgba(255,255,255,0.2);
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px auto;
            max-width: 600px;
        }

        .progress-fill {
            background: linear-gradient(90deg, var(--success-color), var(--secondary-color));
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            padding: 0 15px;
            color: white;
            font-weight: bold;
        }

        .xp-display {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.1);
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            backdrop-filter: blur(10px);
        }

        .section-nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 12px 24px;
            background: white;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
            font-weight: 500;
        }

        .nav-btn:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(94,114,228,0.3);
        }

        .nav-btn.active {
            background: var(--primary-color);
            color: white;
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .section {
            display: none;
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            margin: 20px 0;
            animation: fadeIn 0.5s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .task {
            background: #f8f9fe;
            padding: 25px;
            border-radius: 12px;
            margin: 25px 0;
            border-left: 4px solid var(--primary-color);
        }

        .code-snippet {
            background: #1e1e2e;
            color: #a8b3cf;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            overflow-x: auto;
            position: relative;
        }

        .code-snippet::before {
            content: 'Python';
            position: absolute;
            top: 5px;
            right: 10px;
            font-size: 12px;
            color: #666;
            background: #2a2a3e;
            padding: 2px 8px;
            border-radius: 4px;
        }

        .file-simulator {
            background: #f0f0f0;
            border: 2px solid #ccc;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            min-height: 200px;
            font-family: monospace;
        }

        .file-header {
            background: #ddd;
            margin: -20px -20px 15px;
            padding: 10px 20px;
            border-radius: 6px 6px 0 0;
            font-weight: bold;
        }

        .file-content {
            white-space: pre-wrap;
            line-height: 1.5;
        }

        .mode-selector {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            justify-content: center;
        }

        .mode-option {
            padding: 15px 30px;
            border: 3px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            background: white;
        }

        .mode-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
        }

        .mode-option.selected {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }

        .mode-option i {
            font-size: 32px;
            display: block;
            margin-bottom: 10px;
        }

        .filing-cabinet {
            width: 200px;
            height: 300px;
            background: #8b7355;
            border: 3px solid #6b5a45;
            border-radius: 5px;
            margin: 20px auto;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .drawer {
            background: #a08060;
            height: 90px;
            margin: 10px;
            border: 2px solid #6b5a45;
            border-radius: 3px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            position: relative;
        }

        .drawer:hover {
            transform: translateX(30px);
            background: #b09070;
        }

        .drawer.open {
            transform: translateX(50px);
            background: var(--success-color);
        }

        .handle {
            position: absolute;
            right: 20px;
            width: 40px;
            height: 10px;
            background: #4a3a2a;
            border-radius: 5px;
        }

        .draggable {
            padding: 12px 20px;
            background: var(--primary-color);
            color: white;
            border-radius: 8px;
            cursor: move;
            transition: all 0.3s ease;
            margin: 5px;
            display: inline-block;
        }

        .draggable:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .drop-zone {
            min-height: 60px;
            border: 3px dashed #ccc;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            background: #fafafa;
            transition: all 0.3s ease;
            text-align: center;
        }

        .drop-zone.drag-over {
            background: #e3f2fd;
            border-color: var(--primary-color);
            transform: scale(1.02);
        }

        .achievement-popup {
            position: fixed;
            top: -150px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--success-color);
            color: white;
            padding: 25px 40px;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            z-index: 1000;
            text-align: center;
            transition: top 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .achievement-popup.show {
            top: 50px;
        }

        .achievement-popup i {
            font-size: 48px;
            margin-bottom: 10px;
            display: block;
            animation: bounce 1s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-danger {
            background: var(--danger-color);
            color: white;
        }

        .btn-warning {
            background: var(--warning-color);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .input-field {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(94,114,228,0.1);
        }

        .feedback {
            padding: 15px 20px;
            border-radius: 8px;
            margin: 15px 0;
            animation: slideIn 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .feedback i {
            font-size: 20px;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .canvas-container {
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            margin: 20px 0;
            background: white;
            position: relative;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        #drawingCanvas {
            display: block;
            cursor: crosshair;
            touch-action: none;
        }

        .canvas-controls {
            display: flex;
            gap: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-top: 1px solid #e0e0e0;
        }

        .mark-scheme {
            background: #e8f5e9;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            border: 2px solid #4caf50;
            display: none;
        }

        .predicted-marks {
            display: flex;
            gap: 10px;
            align-items: center;
            margin: 15px 0;
        }

        .shame-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #ff0000;
            color: white;
            padding: 40px;
            border-radius: 16px;
            font-size: 28px;
            font-weight: bold;
            z-index: 9999;
            display: none;
            animation: shake 0.5s infinite;
            box-shadow: 0 0 50px rgba(255,0,0,0.8);
        }

        @keyframes shake {
            0%, 100% { transform: translate(-50%, -50%) rotate(0deg); }
            25% { transform: translate(-50%, -50%) rotate(-5deg); }
            75% { transform: translate(-50%, -50%) rotate(5deg); }
        }

        .accessibility-controls {
            position: fixed;
            top: 100px;
            right: 20px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            z-index: 999;
        }

        .control-group {
            margin: 15px 0;
        }

        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .particle {
            position: fixed;
            pointer-events: none;
            opacity: 0;
            animation: particle-fall 3s ease-out;
        }

        @keyframes particle-fall {
            0% {
                opacity: 1;
                transform: translateY(0) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translateY(100vh) rotate(720deg);
            }
        }

        .link-button {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 15px 25px;
            background: var(--secondary-color);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 10px 0;
        }

        .link-button:hover {
            background: #0da5c0;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(17,205,239,0.3);
        }

        .info-box {
            background: #e3f2fd;
            border-left: 4px solid var(--primary-color);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .info-box.warning {
            background: #fff3cd;
            border-left-color: var(--warning-color);
        }

        .info-box.danger {
            background: #f8d7da;
            border-left-color: var(--danger-color);
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .section {
                padding: 20px;
            }
            
            .mode-selector {
                flex-direction: column;
            }
            
            .accessibility-controls {
                top: auto;
                bottom: 20px;
                right: 10px;
                left: 10px;
            }
        }

        /* Loading animation */
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Shame Message -->
    <div class="shame-message" id="shameMessage" aria-hidden="true">
        ðŸš« CHEATING DETECTED! NO COPY-PASTE ALLOWED! ðŸš«
    </div>

    <!-- Achievement Popup -->
    <div class="achievement-popup" id="achievementPopup" role="alert" aria-live="polite">
        <i class="fas fa-trophy"></i>
        <h3 id="achievementTitle">Achievement Unlocked!</h3>
        <p id="achievementDesc">Description</p>
    </div>

    <!-- Header -->
    <header>
        <div class="container">
            <h1><i class="fas fa-file-alt"></i> Python File Handling</h1>
            <p>GCSE Computer Science - OCR J277</p>
            <div class="xp-display" aria-label="Experience points">
                <i class="fas fa-star"></i> XP: <span id="xpCount">0</span> | Level: <span id="levelCount">0</span>
            </div>
            <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                <div class="progress-fill" id="progressFill">
                    <span id="progressText">0%</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <!-- Section Navigation -->
        <nav class="section-nav" role="navigation" aria-label="Section navigation">
            <button class="nav-btn active" onclick="navigateToSection(0)" aria-label="Go to starter activity">
                <i class="fas fa-play"></i> Starter
            </button>
            <button class="nav-btn" onclick="navigateToSection(1)" aria-label="Go to introduction">
                <i class="fas fa-book"></i> Introduction
            </button>
            <button class="nav-btn" onclick="navigateToSection(2)" aria-label="Go to opening files">
                <i class="fas fa-folder-open"></i> Opening Files
            </button>
            <button class="nav-btn" onclick="navigateToSection(3)" aria-label="Go to reading files">
                <i class="fas fa-eye"></i> Reading Files
            </button>
            <button class="nav-btn" onclick="navigateToSection(4)" aria-label="Go to writing files">
                <i class="fas fa-pencil-alt"></i> Writing Files
            </button>
            <button class="nav-btn" onclick="navigateToSection(5)" aria-label="Go to real world">
                <i class="fas fa-globe"></i> Real World
            </button>
            <button class="nav-btn" onclick="navigateToSection(6)" aria-label="Go to exam questions">
                <i class="fas fa-graduation-cap"></i> Exam Questions
            </button>
            <button class="nav-btn" onclick="navigateToSection(7)" aria-label="Go to extension">
                <i class="fas fa-rocket"></i> Extension
            </button>
        </nav>

        <!-- Section 0: Starter Activity -->
        <section class="section active" id="section0" aria-label="Starter Activity">
            <h2><i class="fas fa-play-circle"></i> Starter Activity: Data Persistence</h2>
            
            <div class="task">
                <h3>Learning Outcomes</h3>
                <ul>
                    <li>âœ“ Open text files in read, write, and append modes</li>
                    <li>âœ“ Use .readline() to read data from files</li>
                    <li>âœ“ Write data to files using .write()</li>
                    <li>âœ“ Understand the importance of closing files</li>
                    <li>âœ“ Apply file handling in real-world scenarios</li>
                </ul>
            </div>

            <div class="task">
                <h3>Quick Check: Where Does Your Data Go?</h3>
                <p>When you close a Python program, what happens to the variables? Let's explore!</p>
                
                <div class="info-box">
                    <p><strong>Scenario:</strong> You've created a high score in a game stored in a variable:</p>
                    <div class="code-snippet">high_score = 1000</div>
                    <p>What happens when you close the program?</p>
                </div>
                
                <div style="display: flex; gap: 20px; margin: 20px 0; flex-wrap: wrap;">
                    <button class="btn btn-primary" onclick="checkDataPersistence('lost')">
                        <i class="fas fa-times-circle"></i> Data is Lost
                    </button>
                    <button class="btn btn-primary" onclick="checkDataPersistence('saved')">
                        <i class="fas fa-save"></i> Data is Saved
                    </button>
                </div>
                <div id="persistenceFeedback"></div>
            </div>

            <div class="task">
                <h3>Match the Operations</h3>
                <p>Drag each file operation to its correct description:</p>
                
                <div style="display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; margin: 20px 0;">
                    <div class="draggable" draggable="true" data-operation="open">open()</div>
                    <div class="draggable" draggable="true" data-operation="write">.write()</div>
                    <div class="draggable" draggable="true" data-operation="readline">.readline()</div>
                    <div class="draggable" draggable="true" data-operation="close">.close()</div>
                </div>

                <div class="drop-zones">
                    <div class="drop-zone" data-answer="open">
                        <strong>Start working with a file: </strong>
                        <span class="dropped-item"></span>
                    </div>
                    <div class="drop-zone" data-answer="readline">
                        <strong>Get one line from a file: </strong>
                        <span class="dropped-item"></span>
                    </div>
                    <div class="drop-zone" data-answer="write">
                        <strong>Put data into a file: </strong>
                        <span class="dropped-item"></span>
                    </div>
                    <div class="drop-zone" data-answer="close">
                        <strong>Finish working with a file: </strong>
                        <span class="dropped-item"></span>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="checkDragDrop()">
                    <i class="fas fa-check"></i> Check Answers
                </button>
                <button class="btn btn-danger" onclick="resetDragDrop()">
                    <i class="fas fa-redo"></i> Reset
                </button>
                <div id="dragDropFeedback"></div>
            </div>
        </section>

        <!-- Section 1: Introduction to File Handling -->
        <section class="section" id="section1" aria-label="Introduction to File Handling">
            <h2><i class="fas fa-book"></i> Introduction to File Handling</h2>
            
            <div class="task">
                <h3>Why Do We Need Files?</h3>
                <p>Variables in Python are stored in RAM (volatile memory). When your program ends, they disappear!</p>
                <p>Files allow us to store data permanently on the hard drive (non-volatile memory).</p>
                
                <div class="info-box">
                    <i class="fas fa-lightbulb"></i> <strong>Think of it like this:</strong><br>
                    Variables = Writing on a whiteboard (easily erased)<br>
                    Files = Writing in a notebook (permanent record)
                </div>
            </div>

            <div class="task">
                <h3>The Filing Cabinet Analogy</h3>
                <p>File handling is like using a filing cabinet. Click on each drawer to see the process:</p>
                
                <div class="filing-cabinet">
                    <div class="drawer" onclick="openDrawer(this, 'open')">
                        <span>1. OPEN</span>
                        <div class="handle"></div>
                    </div>
                    <div class="drawer" onclick="openDrawer(this, 'readwrite')">
                        <span>2. READ/WRITE</span>
                        <div class="handle"></div>
                    </div>
                    <div class="drawer" onclick="openDrawer(this, 'close')">
                        <span>3. CLOSE</span>
                        <div class="handle"></div>
                    </div>
                </div>
                
                <div id="drawerInfo" style="text-align: center; margin: 20px 0; min-height: 60px;">
                    <p style="color: #666;">Click a drawer to learn more!</p>
                </div>
            </div>

            <div class="task">
                <h3>The File Handling Process</h3>
                <div class="code-snippet">
# The three-step process:
file = open("data.txt", "r")    # Step 1: Open the file
content = file.readline()        # Step 2: Read/Write operations
file.close()                     # Step 3: Close the file (IMPORTANT!)
                </div>
                
                <div class="info-box warning">
                    <i class="fas fa-exclamation-triangle"></i> <strong>Warning:</strong> Always close your files! 
                    Leaving files open can cause data loss and prevent other programs from accessing the file.
                </div>
            </div>
        </section>

        <!-- Section 2: Opening Files -->
        <section class="section" id="section2" aria-label="Opening Files">
            <h2><i class="fas fa-folder-open"></i> Opening Files</h2>
            
            <div class="task">
                <h3>The open() Function</h3>
                <p>To work with a file, we first need to open it using the <code>open()</code> function:</p>
                
                <div class="code-snippet">
file = open(filename, mode)

# Examples:
file = open("scores.txt", "r")    # Open for reading
file = open("diary.txt", "w")     # Open for writing
file = open("log.txt", "a")       # Open for appending
                </div>
            </div>

            <div class="task">
                <h3>File Opening Modes</h3>
                <p>Click on each mode to see what it does:</p>
                
                <div class="mode-selector">
                    <div class="mode-option" onclick="selectMode('r')">
                        <i class="fas fa-eye"></i>
                        <strong>'r' - Read</strong>
                        <small>View only</small>
                    </div>
                    <div class="mode-option" onclick="selectMode('w')">
                        <i class="fas fa-pencil-alt"></i>
                        <strong>'w' - Write</strong>
                        <small>Create/Overwrite</small>
                    </div>
                    <div class="mode-option" onclick="selectMode('a')">
                        <i class="fas fa-plus-circle"></i>
                        <strong>'a' - Append</strong>
                        <small>Add to end</small>
                    </div>
                </div>
                
                <div id="modeExplanation" style="margin: 20px 0;">
                    <div class="info-box">
                        <p>Select a mode above to see how it works!</p>
                    </div>
                </div>
                
                <div class="file-simulator" id="modeSimulator" style="display: none;">
                    <div class="file-header">
                        <i class="fas fa-file-alt"></i> example.txt
                    </div>
                    <div class="file-content" id="simulatorContent">Original content here</div>
                </div>
            </div>

            <div class="task">
                <h3>Practice: Choose the Right Mode</h3>
                <p>What mode would you use for each scenario?</p>
                
                <div style="margin: 20px 0;">
                    <p>1. Reading high scores from a file:</p>
                    <select class="input-field" id="modeQ1" style="width: 200px;">
                        <option value="">Choose mode...</option>
                        <option value="r">'r' - Read</option>
                        <option value="w">'w' - Write</option>
                        <option value="a">'a' - Append</option>
                    </select>
                </div>
                
                <div style="margin: 20px 0;">
                    <p>2. Creating a new configuration file:</p>
                    <select class="input-field" id="modeQ2" style="width: 200px;">
                        <option value="">Choose mode...</option>
                        <option value="r">'r' - Read</option>
                        <option value="w">'w' - Write</option>
                        <option value="a">'a' - Append</option>
                    </select>
                </div>
                
                <div style="margin: 20px 0;">
                    <p>3. Adding a new entry to a log file:</p>
                    <select class="input-field" id="modeQ3" style="width: 200px;">
                        <option value="">Choose mode...</option>
                        <option value="r">'r' - Read</option>
                        <option value="w">'w' - Write</option>
                        <option value="a">'a' - Append</option>
                    </select>
                </div>
                
                <button class="btn btn-primary" onclick="checkModeQuiz()">
                    <i class="fas fa-check"></i> Check Answers
                </button>
                <div id="modeQuizFeedback"></div>
            </div>
        </section>

        <!-- Section 3: Reading from Files -->
        <section class="section" id="section3" aria-label="Reading Files">
            <h2><i class="fas fa-eye"></i> Reading from Files</h2>
            
            <div class="task">
                <h3>The readline() Method</h3>
                <p>The <code>readline()</code> method reads one line at a time from a file:</p>
                
                <div class="code-snippet">
file = open("story.txt", "r")
first_line = file.readline()    # Reads the first line
second_line = file.readline()   # Reads the second line
file.close()
                </div>
                
                <div class="info-box">
                    <i class="fas fa-info-circle"></i> Each call to <code>readline()</code> moves to the next line automatically!
                </div>
            </div>

            <div class="task">
                <h3>Interactive File Reader</h3>
                <p>Click "Read Next Line" to see how readline() works:</p>
                
                <div class="file-simulator">
                    <div class="file-header">
                        <i class="fas fa-file-alt"></i> students.txt
                    </div>
                    <div class="file-content" id="fileReaderContent">
Alice,85
Bob,92
Charlie,78
David,88
Eve,95
                    </div>
                </div>
                
                <div style="margin: 20px 0; text-align: center;">
                    <button class="btn btn-primary" onclick="readNextLine()">
                        <i class="fas fa-arrow-down"></i> Read Next Line
                    </button>
                    <button class="btn btn-danger" onclick="resetFileReader()">
                        <i class="fas fa-redo"></i> Reset
                    </button>
                </div>
                
                <div class="code-snippet" id="readOutput" style="min-height: 60px;">
# Output will appear here
                </div>
            </div>

            <div class="task">
                <h3>Try It Yourself!</h3>
                <p>Practice reading files with real Python code:</p>
                
                <a href="https://projects.raspberrypi.org/en/projects/hello-world/2" target="_blank" class="link-button">
                    <i class="fas fa-external-link-alt"></i>
                    Open Raspberry Pi Python Editor
                </a>
                
                <div class="info-box">
                    <strong>Task:</strong> Create a file called "names.txt" with three names (one per line), 
                    then write code to read and print each name.
                    <div class="code-snippet">
# Hint structure:
file = open("names.txt", "r")
name1 = file.readline()
print(name1)
# Continue for other names...
# Don't forget to close!
                    </div>
                </div>
                
                <h4>Reflection Question</h4>
                <p>Why is it important to read files line by line instead of loading everything at once?</p>
                <textarea class="input-field" id="readingReflection" rows="3" placeholder="Type your answer..." aria-label="Reading reflection"></textarea>
                <button class="btn btn-primary" onclick="checkReadingReflection()">Submit</button>
                <div id="readingReflectionFeedback"></div>
            </div>
        </section>

        <!-- Section 4: Writing to Files -->
        <section class="section" id="section4" aria-label="Writing Files">
            <h2><i class="fas fa-pencil-alt"></i> Writing to Files</h2>
            
            <div class="task">
                <h3>The write() Method</h3>
                <p>Use <code>write()</code> to put data into a file:</p>
                
                <div class="code-snippet">
# Writing mode (creates new or overwrites)
file = open("message.txt", "w")
file.write("Hello World!\n")
file.write("This is line 2\n")
file.close()

# Append mode (adds to end)
file = open("message.txt", "a")
file.write("This is line 3\n")
file.close()
                </div>
                
                <div class="info-box warning">
                    <i class="fas fa-exclamation-triangle"></i> <strong>Important:</strong> 
                    Mode "w" will DELETE all existing content! Use "a" to add without deleting.
                </div>
            </div>

            <div class="task">
                <h3>Interactive Notepad</h3>
                <p>Try writing to a virtual file:</p>
                
                <div style="margin: 20px 0;">
                    <input type="text" class="input-field" id="notepadInput" placeholder="Type something to write..." aria-label="Notepad input">
                    <div style="display: flex; gap: 10px; margin: 15px 0;">
                        <button class="btn btn-warning" onclick="writeToFile('w')">
                            <i class="fas fa-file"></i> Write Mode (w)
                        </button>
                        <button class="btn btn-success" onclick="writeToFile('a')">
                            <i class="fas fa-plus"></i> Append Mode (a)
                        </button>
                        <button class="btn btn-danger" onclick="clearNotepad()">
                            <i class="fas fa-trash"></i> Clear File
                        </button>
                    </div>
                </div>
                
                <div class="file-simulator">
                    <div class="file-header">
                        <i class="fas fa-file-alt"></i> notes.txt
                    </div>
                    <div class="file-content" id="notepadContent">[Empty file]</div>
                </div>
            </div>

            <div class="task">
                <h3>Practice Writing</h3>
                <p>Complete this code to write a shopping list to a file:</p>
                
                <div class="code-snippet">
file = <input type="text" class="input-field" id="writeBlank1" style="width: 200px; display: inline;" placeholder="?" aria-label="Write blank 1">
file.<input type="text" class="input-field" id="writeBlank2" style="width: 100px; display: inline;" placeholder="?" aria-label="Write blank 2">("Milk\n")
file.write("Bread\n")
file.write("Eggs\n")
file.<input type="text" class="input-field" id="writeBlank3" style="width: 100px; display: inline;" placeholder="?" aria-label="Write blank 3">
                </div>
                
                <button class="btn btn-primary" onclick="checkWriteBlanks()">Check Code</button>
                <div id="writeBlanksFeedback"></div>
            </div>
        </section>

        <!-- Section 5: Real-World Applications -->
        <section class="section" id="section5" aria-label="Real World Applications">
            <h2><i class="fas fa-globe"></i> Real-World Applications</h2>
            
            <div class="task">
                <h3>High Score System</h3>
                <p>Games use files to save high scores between sessions:</p>
                
                <div class="code-snippet">
# Reading high scores
file = open("highscores.txt", "r")
top_score = file.readline()
file.close()
print("High Score:", top_score)

# Updating high score
file = open("highscores.txt", "w")
file.write("1500\n")
file.close()
                </div>
                
                <div style="margin: 20px 0;">
                    <h4>Try the High Score Manager:</h4>
                    <input type="number" class="input-field" id="scoreInput" placeholder="Enter score..." style="width: 200px;" aria-label="Score input">
                    <button class="btn btn-success" onclick="saveHighScore()">Save Score</button>
                    <button class="btn btn-primary" onclick="loadHighScore()">Load High Score</button>
                    <div id="scoreDisplay" style="margin: 15px 0; font-size: 20px; font-weight: bold;"></div>
                </div>
            </div>

            <div class="task">
                <h3>Student Records</h3>
                <p>Schools use files to store student data:</p>
                
                <div class="file-simulator">
                    <div class="file-header">
                        <i class="fas fa-graduation-cap"></i> student_records.txt
                    </div>
                    <div class="file-content">
John Smith,Year 10,85%
Emma Jones,Year 10,92%
Michael Brown,Year 11,78%
Sarah Davis,Year 11,88%
                    </div>
                </div>
            </div>

            <div class="task">
                <h3>Other Applications</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                    <div class="info-box">
                        <i class="fas fa-cog"></i> <strong>Configuration Files</strong><br>
                        Store program settings
                    </div>
                    <div class="info-box">
                        <i class="fas fa-history"></i> <strong>Log Files</strong><br>
                        Track events and errors
                    </div>
                    <div class="info-box">
                        <i class="fas fa-save"></i> <strong>Save Games</strong><br>
                        Store game progress
                    </div>
                    <div class="info-box">
                        <i class="fas fa-database"></i> <strong>Data Storage</strong><br>
                        Simple databases
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 6: Practice Exam Questions -->
        <section class="section" id="section6" aria-label="Exam Questions">
            <h2><i class="fas fa-graduation-cap"></i> Practice Exam Questions</h2>
            
            <div class="task">
                <h3>Question 1 (3 marks)</h3>
                <p>A program needs to read usernames from a file called "users.txt".</p>
                
                <p>(a) Write the Python code to open the file for reading. [1 mark]</p>
                <textarea class="input-field" id="q1a" rows="2" placeholder="Write your code here..." aria-label="Question 1a answer"></textarea>
                
                <p>(b) Write the code to read the first username from the file. [1 mark]</p>
                <textarea class="input-field" id="q1b" rows="2" placeholder="Write your code here..." aria-label="Question 1b answer"></textarea>
                
                <p>(c) Explain why it is important to close the file after reading. [1 mark]</p>
                <textarea class="input-field" id="q1c" rows="3" placeholder="Write your explanation here..." aria-label="Question 1c answer"></textarea>
                
                <div class="predicted-marks">
                    <label>Predicted marks: </label>
                    <input type="number" min="0" max="3" id="q1marks" class="input-field" style="width: 60px;" aria-label="Question 1 predicted marks">
                    <span>/ 3</span>
                </div>
                
                <button class="btn btn-primary" onclick="showMarkScheme(1)">Show Mark Scheme</button>
                <button class="btn btn-success" onclick="showCanvas(1)">Show Working Canvas</button>
                
                <div class="mark-scheme" id="markScheme1">
                    <h4>Mark Scheme:</h4>
                    <p>(a) <code>file = open("users.txt", "r")</code> [1 mark]</p>
                    <p>(b) <code>username = file.readline()</code> [1 mark]</p>
                    <p>(c) Award 1 mark for mentioning: prevents data loss / frees up resources / allows other programs to access / prevents file corruption</p>
                </div>
                
                <div class="canvas-container" id="canvasContainer1" style="display: none;">
                    <canvas id="drawingCanvas1" width="600" height="200"></canvas>
                    <div class="canvas-controls">
                        <button class="btn btn-danger" onclick="clearCanvas(1)">Clear Canvas</button>
                        <button class="btn btn-primary" onclick="hideCanvas(1)">Hide Canvas</button>
                    </div>
                </div>
            </div>

            <div class="task">
                <h3>Question 2 (4 marks)</h3>
                <p>A teacher wants to save test results to a file. Each student's name and score should be on a new line.</p>
                
                <p>(a) State which mode should be used if the teacher wants to add new results without deleting existing ones. [1 mark]</p>
                <textarea class="input-field" id="q2a" rows="1" placeholder="Write the mode..." aria-label="Question 2a answer"></textarea>
                
                <p>(b) Write code to add "Alice,85" to a file called "results.txt". Include opening and closing the file. [3 marks]</p>
                <textarea class="input-field" id="q2b" rows="4" placeholder="Write your complete code here..." aria-label="Question 2b answer"></textarea>
                
                <div class="predicted-marks">
                    <label>Predicted marks: </label>
                    <input type="number" min="0" max="4" id="q2marks" class="input-field" style="width: 60px;" aria-label="Question 2 predicted marks">
                    <span>/ 4</span>
                </div>
                
                <button class="btn btn-primary" onclick="showMarkScheme(2)">Show Mark Scheme</button>
                <button class="btn btn-success" onclick="showCanvas(2)">Show Working Canvas</button>
                
                <div class="mark-scheme" id="markScheme2">
                    <h4>Mark Scheme:</h4>
                    <p>(a) Append mode / "a" [1 mark]</p>
                    <p>(b) Award marks for:</p>
                    <ul>
                        <li>Opening file correctly with append mode: <code>file = open("results.txt", "a")</code> [1 mark]</li>
                        <li>Writing data with newline: <code>file.write("Alice,85\n")</code> [1 mark]</li>
                        <li>Closing file: <code>file.close()</code> [1 mark]</li>
                    </ul>
                </div>
                
                <div class="canvas-container" id="canvasContainer2" style="display: none;">
                    <canvas id="drawingCanvas2" width="600" height="200"></canvas>
                    <div class="canvas-controls">
                        <button class="btn btn-danger" onclick="clearCanvas(2)">Clear Canvas</button>
                        <button class="btn btn-primary" onclick="hideCanvas(2)">Hide Canvas</button>
                    </div>
                </div>
            </div>

            <div class="task">
                <h3>Question 3 (5 marks)</h3>
                <p>Write a program that:</p>
                <ol>
                    <li>Opens a file called "diary.txt" in write mode</li>
                    <li>Asks the user to input today's diary entry</li>
                    <li>Writes the entry to the file</li>
                    <li>Closes the file</li>
                    <li>Opens the file in read mode and displays the content</li>
                </ol>
                
                <textarea class="input-field" id="q3" rows="10" placeholder="Write your complete program here..." aria-label="Question 3 answer"></textarea>
                
                <div class="predicted-marks">
                    <label>Predicted marks: </label>
                    <input type="number" min="0" max="5" id="q3marks" class="input-field" style="width: 60px;" aria-label="Question 3 predicted marks">
                    <span>/ 5</span>
                </div>
                
                <button class="btn btn-primary" onclick="showMarkScheme(3)">Show Mark Scheme</button>
                <button class="btn btn-success" onclick="showCanvas(3)">Show Working Canvas</button>
                
                <div class="mark-scheme" id="markScheme3">
                    <h4>Mark Scheme:</h4>
                    <p>Award marks for:</p>
                    <ul>
                        <li>Opening file in write mode correctly [1 mark]</li>
                        <li>Getting user input [1 mark]</li>
                        <li>Writing to file and closing [1 mark]</li>
                        <li>Opening file in read mode [1 mark]</li>
                        <li>Reading and displaying content [1 mark]</li>
                    </ul>
                    <p>Example solution:</p>
                    <pre>file = open("diary.txt", "w")
entry = input("Enter today's diary entry: ")
file.write(entry)
file.close()

file = open("diary.txt", "r")
content = file.readline()
print(content)
file.close()</pre>
                </div>
                
                <div class="canvas-container" id="canvasContainer3" style="display: none;">
                    <canvas id="drawingCanvas3" width="600" height="200"></canvas>
                    <div class="canvas-controls">
                        <button class="btn btn-danger" onclick="clearCanvas(3)">Clear Canvas</button>
                        <button class="btn btn-primary" onclick="hideCanvas(3)">Hide Canvas</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 7: Extension Activities -->
        <section class="section" id="section7" aria-label="Extension Activities">
            <h2><i class="fas fa-rocket"></i> Extension Activities</h2>
            
            <div class="task">
                <h3>Beyond the Specification</h3>
                <p>Ready to explore more advanced file handling concepts?</p>
            </div>

            <div class="task">
                <h3>Challenge 1: CSV Files</h3>
                <p>CSV (Comma Separated Values) files are used to store tabular data. How would you read a CSV file?</p>
                
                <div class="code-snippet">
# Example CSV content:
# Name,Age,Grade
# Alice,16,A
# Bob,15,B

# How would you split each line by commas?
                </div>
                
                <textarea class="input-field" id="extension1" rows="6" placeholder="Write code to read and process a CSV file..." aria-label="Extension 1 answer"></textarea>
                <button class="btn btn-primary" onclick="checkExtension1()">Check Solution</button>
                <div id="extension1Feedback"></div>
            </div>

            <div class="task">
                <h3>Challenge 2: Error Handling</h3>
                <p>What happens if you try to open a file that doesn't exist? Research try/except blocks!</p>
                
                <textarea class="input-field" id="extension2" rows="6" placeholder="Write code that safely handles a missing file..." aria-label="Extension 2 answer"></textarea>
                <button class="btn btn-primary" onclick="checkExtension2()">Check Solution</button>
                <div id="extension2Feedback"></div>
            </div>

            <div class="task">
                <h3>Challenge 3: File Statistics</h3>
                <p>Write a program that counts the number of lines in a text file:</p>
                
                <textarea class="input-field" id="extension3" rows="8" placeholder="Write your line counting program..." aria-label="Extension 3 answer"></textarea>
                <button class="btn btn-primary" onclick="checkExtension3()">Check Solution</button>
                <div id="extension3Feedback"></div>
            </div>

            <div class="task">
                <h3>Key Takeaways ðŸŽ¯</h3>
                <div class="feedback correct" style="display: block;">
                    <ul>
                        <li>Files provide permanent data storage (non-volatile)</li>
                        <li>Always follow: Open â†’ Read/Write â†’ Close</li>
                        <li>Three modes: 'r' (read), 'w' (write/overwrite), 'a' (append)</li>
                        <li>Use .readline() to read one line at a time</li>
                        <li>Use .write() to put data into files</li>
                        <li>ALWAYS close files with .close()</li>
                        <li>Mode 'w' deletes existing content - be careful!</li>
                    </ul>
                </div>
            </div>

            <div class="task">
                <h3>Common Mistakes to Avoid âš ï¸</h3>
                <div class="feedback incorrect" style="display: block;">
                    <ul>
                        <li><strong>Forgetting to close files:</strong> Always use .close() when done</li>
                        <li><strong>Using wrong mode:</strong> 'w' overwrites, 'a' appends</li>
                        <li><strong>Missing newlines:</strong> Remember to add \n when writing</li>
                        <li><strong>File not found:</strong> Check file exists before reading</li>
                        <li><strong>Incorrect path:</strong> Use correct file location/name</li>
                    </ul>
                </div>
            </div>

            <div class="task">
                <h3>Video Resources ðŸ“º</h3>
                <div style="background: #f0f0f0; padding: 30px; border-radius: 12px; text-align: center;">
                    <p><i class="fas fa-video" style="font-size: 48px; color: var(--primary-color);"></i></p>
                    <p>Video content will be added here</p>
                    <p style="font-size: 14px; color: #666;">Check back later for video tutorials on file handling!</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Accessibility Controls -->
    <div class="accessibility-controls" role="region" aria-label="Accessibility controls">
        <h3>Accessibility</h3>
        <div class="control-group">
            <label for="fontSizeControl">Font Size:</label>
            <input type="range" id="fontSizeControl" min="12" max="24" value="16" aria-label="Font size slider">
            <span id="fontSizeValue">16px</span>
        </div>
        <div class="control-group">
            <label>
                <input type="checkbox" id="highContrastToggle" aria-label="High contrast mode">
                High Contrast
            </label>
        </div>
        <div class="control-group">
            <label>
                <input type="checkbox" id="dyslexiaFontToggle" aria-label="Dyslexia friendly font">
                Dyslexia Font
            </label>
        </div>
    </div>

    <!-- Load OpenDyslexic font -->
    <link href="https://fonts.cdnfonts.com/css/opendyslexic" rel="stylesheet">
    
    <script src="gcse-prog-filehandling.js"></script>
</body>
</html>