<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Number Systems - Interactive Worksheet</title>
    <style>
        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --danger-color: #e74c3c;
            --warning-color: #f39c12;
            --bg-color: #ecf0f1;
            --text-color: #2c3e50;
            --card-bg: #ffffff;
            --shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        body {
            font-family: Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        /* High Contrast Mode */
        body.high-contrast {
            --bg-color: #000000;
            --text-color: #ffffff;
            --card-bg: #1a1a1a;
            --primary-color: #ffff00;
            --secondary-color: #00ff00;
        }

        /* Dyslexia Font */
        body.dyslexia-font {
            font-family: 'Comic Sans MS', 'OpenDyslexic', sans-serif;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            background: var(--primary-color);
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 20px;
            position: relative;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        /* Progress Bar */
        .progress-container {
            background: rgba(255,255,255,0.3);
            border-radius: 20px;
            height: 30px;
            margin: 20px 0;
            position: relative;
        }

        .progress-bar {
            background: var(--secondary-color);
            height: 100%;
            border-radius: 20px;
            width: 0%;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        /* XP and Level Display */
        .stats-display {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
        }

        /* Navigation */
        .nav-container {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
            gap: 10px;
        }

        .nav-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .nav-btn.active {
            background: var(--secondary-color);
        }

        /* Sections */
        .section {
            display: none;
            background: var(--card-bg);
            padding: 30px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            animation: fadeIn 0.5s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Task Styles */
        .task {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid var(--primary-color);
        }

        /* Input Styles */
        input[type="text"], input[type="number"], select {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            width: 100%;
            max-width: 300px;
            margin: 5px 0;
        }

        input:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        /* Button Styles */
        .btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .btn.success {
            background: var(--secondary-color);
        }

        .btn.danger {
            background: var(--danger-color);
        }

        .btn.warning {
            background: var(--warning-color);
        }

        /* Drag and Drop Styles */
        .drag-container {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
            justify-content: center;
        }

        .draggable {
            background: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: grab;
            transition: all 0.3s ease;
            user-select: none;
        }

        .draggable:active {
            cursor: grabbing;
        }

        .draggable.dragging {
            opacity: 0.5;
        }

        .drop-zone {
            border: 2px dashed #ddd;
            padding: 20px;
            min-height: 60px;
            border-radius: 5px;
            background: #f8f9fa;
            min-width: 150px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .drop-zone.drag-over {
            background: #e3f2fd;
            border-color: var(--primary-color);
        }

        .drop-zone.correct {
            background: #c8e6c9;
            border-color: var(--secondary-color);
        }

        .drop-zone.incorrect {
            background: #ffcdd2;
            border-color: var(--danger-color);
        }

        /* Quiz Styles */
        .quiz-option {
            display: block;
            width: 100%;
            text-align: left;
            padding: 15px;
            margin: 10px 0;
            background: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            background: #e3f2fd;
            border-color: var(--primary-color);
        }

        .quiz-option.selected {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .quiz-option.correct {
            background: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        .quiz-option.incorrect {
            background: var(--danger-color);
            color: white;
            border-color: var(--danger-color);
        }

        /* Canvas Styles */
        .canvas-container {
            border: 2px solid #ddd;
            border-radius: 5px;
            margin: 20px 0;
            position: relative;
            background: white;
        }

        canvas {
            display: block;
            cursor: crosshair;
            touch-action: none;
        }

        /* Achievement Popup */
        .achievement-popup {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--secondary-color);
            color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            transform: translateX(400px);
            transition: transform 0.5s ease;
            z-index: 1000;
            max-width: 300px;
        }

        .achievement-popup.show {
            transform: translateX(0);
        }

        .achievement-popup h3 {
            margin-bottom: 10px;
        }

        /* Feedback Button */
        .feedback-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--warning-color);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            z-index: 999;
            font-size: 20px;
            transition: all 0.3s ease;
        }

        .feedback-btn:hover {
            transform: scale(1.1);
        }

        /* Feedback Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1001;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
            animation: modalFadeIn 0.3s ease;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        /* Accessibility Controls */
        .accessibility-controls {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--card-bg);
            padding: 15px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            z-index: 998;
        }

        .accessibility-controls button {
            display: block;
            margin: 5px 0;
            padding: 8px 15px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }

        /* Shame Message */
        .shame-message {
            background: var(--danger-color);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            display: none;
            margin: 20px 0;
            animation: shake 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .stats-display {
                position: static;
                margin-top: 10px;
            }
            
            .drag-container {
                flex-direction: column;
            }
            
            .accessibility-controls {
                position: static;
                margin-bottom: 20px;
            }
        }

        /* Loading Spinner */
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Binary Display */
        .binary-display {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .bit-box {
            width: 60px;
            height: 60px;
            border: 2px solid var(--primary-color);
            border-radius: 5px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .bit-box:hover {
            transform: scale(1.05);
        }

        .bit-box.active {
            background: var(--primary-color);
            color: white;
        }

        .bit-value {
            font-size: 24px;
            font-weight: bold;
        }

        .bit-heading {
            font-size: 12px;
            color: #666;
        }

        /* Mark Scheme */
        .mark-scheme {
            background: #e8f5e9;
            border: 2px solid var(--secondary-color);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            display: none;
        }

        .mark-scheme.show {
            display: block;
        }
    </style>
</head>
<body>
    <!-- Accessibility Controls -->
    <div class="accessibility-controls" role="navigation" aria-label="Accessibility controls">
        <button onclick="toggleHighContrast()" aria-label="Toggle high contrast mode">High Contrast</button>
        <button onclick="toggleDyslexiaFont()" aria-label="Toggle dyslexia-friendly font">Dyslexia Font</button>
        <button onclick="changeFontSize(1)" aria-label="Increase font size">Font Size +</button>
        <button onclick="changeFontSize(-1)" aria-label="Decrease font size">Font Size -</button>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>Number Systems: Binary & Hexadecimal</h1>
            <p>GCSE Computer Science - OCR J277</p>
            <div class="stats-display" aria-live="polite">
                <span id="xp-display">XP: 0</span> | 
                <span id="level-display">Level: 0</span>
            </div>
            <div class="progress-container" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                <div class="progress-bar" id="progress-bar">0%</div>
            </div>
        </div>

        <!-- Navigation -->
        <nav class="nav-container" role="navigation" aria-label="Section navigation">
            <button class="nav-btn active" onclick="showSection(0)" aria-label="Go to starter activity">Starter</button>
            <button class="nav-btn" onclick="showSection(1)" aria-label="Go to denary system">Denary</button>
            <button class="nav-btn" onclick="showSection(2)" aria-label="Go to binary basics">Binary</button>
            <button class="nav-btn" onclick="showSection(3)" aria-label="Go to binary to denary">Bin→Den</button>
            <button class="nav-btn" onclick="showSection(4)" aria-label="Go to denary to binary">Den→Bin</button>
            <button class="nav-btn" onclick="showSection(5)" aria-label="Go to hexadecimal">Hex</button>
            <button class="nav-btn" onclick="showSection(6)" aria-label="Go to hex conversions">Hex Conv</button>
            <button class="nav-btn" onclick="showSection(7)" aria-label="Go to summary">Summary</button>
            <button class="nav-btn" onclick="showSection(8)" aria-label="Go to exam questions">Exam Qs</button>
            <button class="nav-btn" onclick="showSection(9)" aria-label="Go to extension">Extension</button>
            <button class="nav-btn" onclick="showSection(10)" aria-label="Go to resources">Resources</button>
        </nav>

        <!-- Sections -->
        <!-- Section 0: Starter Activity -->
        <section class="section active" id="section-0">
            <h2>Starter Activity: Test Your Knowledge</h2>
            <p>Let's see what you already know about number systems!</p>
            
            <div class="task">
                <h3>Question 1: What base does our everyday number system use?</h3>
                <div id="starter-q1">
                    <button class="quiz-option" onclick="checkStarterAnswer(this, 'q1', false)">Base 2</button>
                    <button class="quiz-option" onclick="checkStarterAnswer(this, 'q1', false)">Base 8</button>
                    <button class="quiz-option" onclick="checkStarterAnswer(this, 'q1', true)">Base 10</button>
                    <button class="quiz-option" onclick="checkStarterAnswer(this, 'q1', false)">Base 16</button>
                </div>
            </div>

            <div class="task">
                <h3>Question 2: Which of these represents digital data?</h3>
                <div id="starter-q2">
                    <button class="quiz-option" onclick="checkStarterAnswer(this, 'q2', false)">A sound wave</button>
                    <button class="quiz-option" onclick="checkStarterAnswer(this, 'q2', true)">Binary 1s and 0s</button>
                    <button class="quiz-option" onclick="checkStarterAnswer(this, 'q2', false)">Temperature changes</button>
                    <button class="quiz-option" onclick="checkStarterAnswer(this, 'q2', false)">Light intensity</button>
                </div>
            </div>

            <div class="task">
                <h3>Question 3: How many different digits does hexadecimal use?</h3>
                <input type="number" id="starter-q3" placeholder="Enter a number">
                <button class="btn" onclick="checkStarterQ3()">Check Answer</button>
                <div id="starter-q3-feedback"></div>
            </div>

            <button class="btn danger" onclick="resetSection(0)">Reset Section</button>
            <button class="btn success" onclick="completeStarter()" style="float: right;">Continue to Lesson →</button>
        </section>

        <!-- Section 1: Denary System -->
        <section class="section" id="section-1">
            <h2>The Denary System</h2>
            
            <div class="task">
                <h3>Understanding Base 10</h3>
                <p>The denary (decimal) system is the number system we use every day. It uses 10 different digits: 0, 1, 2, 3, 4, 5, 6, 7, 8, and 9.</p>
                
                <div class="binary-display">
                    <div class="bit-box">
                        <div class="bit-heading">1000s</div>
                        <div class="bit-value">1</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">100s</div>
                        <div class="bit-value">2</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">10s</div>
                        <div class="bit-value">3</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">1s</div>
                        <div class="bit-value">4</div>
                    </div>
                </div>
                
                <p>The number above shows 1234 in denary. Each position represents a power of 10.</p>
            </div>

            <div class="task">
                <h3>Interactive Exercise: Build a Denary Number</h3>
                <p>Click the boxes to change the digits and see how the total changes:</p>
                
                <div class="binary-display" id="denary-builder">
                    <div class="bit-box" onclick="changeDenaryDigit(this, 0)">
                        <div class="bit-heading">1000s</div>
                        <div class="bit-value">0</div>
                    </div>
                    <div class="bit-box" onclick="changeDenaryDigit(this, 1)">
                        <div class="bit-heading">100s</div>
                        <div class="bit-value">0</div>
                    </div>
                    <div class="bit-box" onclick="changeDenaryDigit(this, 2)">
                        <div class="bit-heading">10s</div>
                        <div class="bit-value">0</div>
                    </div>
                    <div class="bit-box" onclick="changeDenaryDigit(this, 3)">
                        <div class="bit-heading">1s</div>
                        <div class="bit-value">0</div>
                    </div>
                </div>
                
                <p>Total Value: <strong id="denary-total">0</strong></p>
            </div>

            <div class="task">
                <h3>Quick Check</h3>
                <p>What is the value of the digit 7 in the number 3745?</p>
                <select id="denary-check">
                    <option value="">Select an answer...</option>
                    <option value="7">7</option>
                    <option value="70">70</option>
                    <option value="700">700</option>
                    <option value="7000">7000</option>
                </select>
                <button class="btn" onclick="checkDenaryAnswer()">Check</button>
                <div id="denary-feedback"></div>
            </div>

            <button class="btn danger" onclick="resetSection(1)">Reset Section</button>
            <button class="btn success" onclick="showSection(2)" style="float: right;">Next Section →</button>
        </section>

        <!-- Section 2: Binary Basics -->
        <section class="section" id="section-2">
            <h2>Binary System Basics</h2>
            
            <div class="task">
                <h3>What is Binary?</h3>
                <p>Binary is a base-2 number system that uses only two digits: 0 and 1. Each digit is called a "bit" (binary digit).</p>
                
                <h4>Key Concepts:</h4>
                <ul>
                    <li><strong>Digital Data:</strong> Discrete data with only two values (0 and 1)</li>
                    <li><strong>Analogue Data:</strong> Continuous data like sound waves</li>
                    <li><strong>Bits:</strong> The smallest unit of data in computing</li>
                </ul>
            </div>

            <div class="task">
                <h3>Binary Place Values</h3>
                <p>Just like denary uses powers of 10, binary uses powers of 2:</p>
                
                <div class="binary-display">
                    <div class="bit-box">
                        <div class="bit-heading">128</div>
                        <div class="bit-value">2⁷</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">64</div>
                        <div class="bit-value">2⁶</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">32</div>
                        <div class="bit-value">2⁵</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">16</div>
                        <div class="bit-value">2⁴</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">8</div>
                        <div class="bit-value">2³</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">4</div>
                        <div class="bit-value">2²</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">2</div>
                        <div class="bit-value">2¹</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">1</div>
                        <div class="bit-value">2⁰</div>
                    </div>
                </div>
            </div>

            <div class="task">
                <h3>Interactive Binary Counter</h3>
                <p>Click the bits to toggle between 0 and 1. Watch how the denary value changes!</p>
                
                <div class="binary-display" id="binary-counter">
                    <div class="bit-box" onclick="toggleBit(this, 7)">
                        <div class="bit-heading">128</div>
                        <div class="bit-value">0</div>
                    </div>
                    <div class="bit-box" onclick="toggleBit(this, 6)">
                        <div class="bit-heading">64</div>
                        <div class="bit-value">0</div>
                    </div>
                    <div class="bit-box" onclick="toggleBit(this, 5)">
                        <div class="bit-heading">32</div>
                        <div class="bit-value">0</div>
                    </div>
                    <div class="bit-box" onclick="toggleBit(this, 4)">
                        <div class="bit-heading">16</div>
                        <div class="bit-value">0</div>
                    </div>
                    <div class="bit-box" onclick="toggleBit(this, 3)">
                        <div class="bit-heading">8</div>
                        <div class="bit-value">0</div>
                    </div>
                    <div class="bit-box" onclick="toggleBit(this, 2)">
                        <div class="bit-heading">4</div>
                        <div class="bit-value">0</div>
                    </div>
                    <div class="bit-box" onclick="toggleBit(this, 1)">
                        <div class="bit-heading">2</div>
                        <div class="bit-value">0</div>
                    </div>
                    <div class="bit-box" onclick="toggleBit(this, 0)">
                        <div class="bit-heading">1</div>
                        <div class="bit-value">0</div>
                    </div>
                </div>
                
                <p>Binary: <strong id="binary-display-value">00000000</strong></p>
                <p>Denary: <strong id="binary-denary-value">0</strong></p>
            </div>

            <div class="task">
                <h3>Match the Concepts</h3>
                <p>Drag the terms to their correct definitions:</p>
                
                <div class="drag-container">
                    <div>
                        <h4>Terms:</h4>
                        <div class="draggable" draggable="true" data-answer="digital">Digital Data</div>
                        <div class="draggable" draggable="true" data-answer="analogue">Analogue Data</div>
                        <div class="draggable" draggable="true" data-answer="bit">Bit</div>
                        <div class="draggable" draggable="true" data-answer="binary">Binary</div>
                    </div>
                    
                    <div>
                        <h4>Definitions:</h4>
                        <div class="drop-zone" data-accepts="digital">Discrete data with only two values</div>
                        <div class="drop-zone" data-accepts="analogue">Continuous, non-discrete data</div>
                        <div class="drop-zone" data-accepts="bit">A single binary digit (0 or 1)</div>
                        <div class="drop-zone" data-accepts="binary">Base-2 number system</div>
                    </div>
                </div>
            </div>

            <button class="btn danger" onclick="resetSection(2)">Reset Section</button>
            <button class="btn success" onclick="showSection(3)" style="float: right;">Next Section →</button>
        </section>

        <!-- Section 3: Binary to Denary Conversion -->
        <section class="section" id="section-3">
            <h2>Binary to Denary Conversion</h2>
            
            <div class="task">
                <h3>How to Convert Binary to Denary</h3>
                <p>To convert binary to denary, add up the place values where there's a 1.</p>
                
                <h4>Step-by-Step Example: Convert 10110101 to denary</h4>
                <div class="binary-display">
                    <div class="bit-box active">
                        <div class="bit-heading">128</div>
                        <div class="bit-value">1</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">64</div>
                        <div class="bit-value">0</div>
                    </div>
                    <div class="bit-box active">
                        <div class="bit-heading">32</div>
                        <div class="bit-value">1</div>
                    </div>
                    <div class="bit-box active">
                        <div class="bit-heading">16</div>
                        <div class="bit-value">1</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">8</div>
                        <div class="bit-value">0</div>
                    </div>
                    <div class="bit-box active">
                        <div class="bit-heading">4</div>
                        <div class="bit-value">1</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">2</div>
                        <div class="bit-value">0</div>
                    </div>
                    <div class="bit-box active">
                        <div class="bit-heading">1</div>
                        <div class="bit-value">1</div>
                    </div>
                </div>
                
                <p>Calculation: 128 + 32 + 16 + 4 + 1 = <strong>181</strong></p>
            </div>

            <div class="task">
                <h3>Working Space</h3>
                <p>Use this canvas for your calculations:</p>
                <div class="canvas-container">
                    <canvas id="calc-canvas-1" width="600" height="300"></canvas>
                </div>
                <button class="btn warning" onclick="clearCanvas('calc-canvas-1')">Clear Canvas</button>
            </div>

            <div class="task">
                <h3>Practice: Convert Binary to Denary</h3>
                <p>Convert these binary numbers to denary:</p>
                
                <div style="margin: 20px 0;">
                    <p><strong>1. 01001011</strong></p>
                    <input type="number" id="bin2den-1" placeholder="Enter denary value">
                    <button class="btn" onclick="checkBin2Den(1, 75)">Check</button>
                    <div id="bin2den-feedback-1"></div>
                </div>
                
                <div style="margin: 20px 0;">
                    <p><strong>2. 11010110</strong></p>
                    <input type="number" id="bin2den-2" placeholder="Enter denary value">
                    <button class="btn" onclick="checkBin2Den(2, 214)">Check</button>
                    <div id="bin2den-feedback-2"></div>
                </div>
                
                <div style="margin: 20px 0;">
                    <p><strong>3. 10000001</strong></p>
                    <input type="number" id="bin2den-3" placeholder="Enter denary value">
                    <button class="btn" onclick="checkBin2Den(3, 129)">Check</button>
                    <div id="bin2den-feedback-3"></div>
                </div>

                <div style="margin: 20px 0;">
                    <p><strong>4. 00111100</strong></p>
                    <input type="number" id="bin2den-4" placeholder="Enter denary value">
                    <button class="btn" onclick="checkBin2Den(4, 60)">Check</button>
                    <div id="bin2den-feedback-4"></div>
                </div>

                <div style="margin: 20px 0;">
                    <p><strong>5. 11111110</strong></p>
                    <input type="number" id="bin2den-5" placeholder="Enter denary value">
                    <button class="btn" onclick="checkBin2Den(5, 254)">Check</button>
                    <div id="bin2den-feedback-5"></div>
                </div>
            </div>

            <button class="btn danger" onclick="resetSection(3)">Reset Section</button>
            <button class="btn success" onclick="showSection(4)" style="float: right;">Next Section →</button>
        </section>

        <!-- Section 4: Denary to Binary Conversion -->
        <section class="section" id="section-4">
            <h2>Denary to Binary Conversion</h2>
            
            <div class="task">
                <h3>Subtraction Method</h3>
                <p>To convert denary to binary, subtract the largest power of 2 that fits, then repeat:</p>
                
                <h4>Example: Convert 45 to binary</h4>
                <ol>
                    <li>45 - 32 = 13 (32 fits, so 1 in the 32 column)</li>
                    <li>13 - 8 = 5 (8 fits, so 1 in the 8 column)</li>
                    <li>5 - 4 = 1 (4 fits, so 1 in the 4 column)</li>
                    <li>1 - 1 = 0 (1 fits, so 1 in the 1 column)</li>
                </ol>
                <div class="binary-display">
                    <div class="bit-box">
                        <div class="bit-heading">128</div>
                        <div class="bit-value">0</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">64</div>
                        <div class="bit-value">0</div>
                    </div>
                    <div class="bit-box active">
                        <div class="bit-heading">32</div>
                        <div class="bit-value">1</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">16</div>
                        <div class="bit-value">0</div>
                    </div>
                    <div class="bit-box active">
                        <div class="bit-heading">8</div>
                        <div class="bit-value">1</div>
                    </div>
                    <div class="bit-box active">
                        <div class="bit-heading">4</div>
                        <div class="bit-value">1</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">2</div>
                        <div class="bit-value">0</div>
                    </div>
                    <div class="bit-box active">
                        <div class="bit-heading">1</div>
                        <div class="bit-value">1</div>
                    </div>
                </div>
                <p>Result: <strong>00101101</strong></p>
            </div>

            <div class="task">
                <h3>Working Space</h3>
                <div class="canvas-container">
                    <canvas id="calc-canvas-2" width="600" height="300"></canvas>
                </div>
                <button class="btn warning" onclick="clearCanvas('calc-canvas-2')">Clear Canvas</button>
            </div>

            <div class="task">
                <h3>Practice: Convert Denary to Binary</h3>
                
                <div style="margin: 20px 0;">
                    <p><strong>1. Convert 92 to binary:</strong></p>
                    <input type="text" id="den2bin-1" placeholder="Enter binary (8 digits)">
                    <button class="btn" onclick="checkDen2Bin(1, '01011100')">Check</button>
                    <div id="den2bin-feedback-1"></div>
                </div>
                
                <div style="margin: 20px 0;">
                    <p><strong>2. Convert 163 to binary:</strong></p>
                    <input type="text" id="den2bin-2" placeholder="Enter binary (8 digits)">
                    <button class="btn" onclick="checkDen2Bin(2, '10100011')">Check</button>
                    <div id="den2bin-feedback-2"></div>
                </div>
                
                <div style="margin: 20px 0;">
                    <p><strong>3. Convert 255 to binary:</strong></p>
                    <input type="text" id="den2bin-3" placeholder="Enter binary (8 digits)">
                    <button class="btn" onclick="checkDen2Bin(3, '11111111')">Check</button>
                    <div id="den2bin-feedback-3"></div>
                </div>

                <div style="margin: 20px 0;">
                    <p><strong>4. Convert 37 to binary:</strong></p>
                    <input type="text" id="den2bin-4" placeholder="Enter binary (8 digits)">
                    <button class="btn" onclick="checkDen2Bin(4, '00100101')">Check</button>
                    <div id="den2bin-feedback-4"></div>
                </div>

                <div style="margin: 20px 0;">
                    <p><strong>5. Convert 200 to binary:</strong></p>
                    <input type="text" id="den2bin-5" placeholder="Enter binary (8 digits)">
                    <button class="btn" onclick="checkDen2Bin(5, '11001000')">Check</button>
                    <div id="den2bin-feedback-5"></div>
                </div>
            </div>

            <button class="btn danger" onclick="resetSection(4)">Reset Section</button>
            <button class="btn success" onclick="showSection(5)" style="float: right;">Next Section →</button>
        </section>

        <!-- Section 5: Hexadecimal System -->
        <section class="section" id="section-5">
            <h2>Hexadecimal System</h2>
            
            <div class="task">
                <h3>What is Hexadecimal?</h3>
                <p>Hexadecimal (hex) is a base-16 number system. It uses 16 different digits:</p>
                <ul>
                    <li>0-9 (values 0-9)</li>
                    <li>A-F (values 10-15)</li>
                </ul>
                
                <h4>Important: Each hex digit represents 4 binary bits!</h4>
            </div>

            <div class="task">
                <h3>Hex Digit Values</h3>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; max-width: 400px; margin: 20px auto;">
                    <div class="bit-box">
                        <div class="bit-heading">Hex</div>
                        <div class="bit-value">0</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">Den</div>
                        <div class="bit-value">0</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">Hex</div>
                        <div class="bit-value">8</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">Den</div>
                        <div class="bit-value">8</div>
                    </div>
                    
                    <div class="bit-box">
                        <div class="bit-heading">Hex</div>
                        <div class="bit-value">1</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">Den</div>
                        <div class="bit-value">1</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">Hex</div>
                        <div class="bit-value">9</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">Den</div>
                        <div class="bit-value">9</div>
                    </div>
                    
                    <div class="bit-box">
                        <div class="bit-heading">Hex</div>
                        <div class="bit-value">A</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">Den</div>
                        <div class="bit-value">10</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">Hex</div>
                        <div class="bit-value">B</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">Den</div>
                        <div class="bit-value">11</div>
                    </div>
                    
                    <div class="bit-box">
                        <div class="bit-heading">Hex</div>
                        <div class="bit-value">C</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">Den</div>
                        <div class="bit-value">12</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">Hex</div>
                        <div class="bit-value">D</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">Den</div>
                        <div class="bit-value">13</div>
                    </div>
                    
                    <div class="bit-box">
                        <div class="bit-heading">Hex</div>
                        <div class="bit-value">E</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">Den</div>
                        <div class="bit-value">14</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">Hex</div>
                        <div class="bit-value">F</div>
                    </div>
                    <div class="bit-box">
                        <div class="bit-heading">Den</div>
                        <div class="bit-value">15</div>
                    </div>
                </div>
            </div>

            <div class="task">
                <h3>Hex Matching Game</h3>
                <p>Match the hex digits to their denary values:</p>
                
                <div class="drag-container">
                    <div>
                        <h4>Hex Digits:</h4>
                        <div class="draggable" draggable="true" data-answer="A">A</div>
                        <div class="draggable" draggable="true" data-answer="D">D</div>
                        <div class="draggable" draggable="true" data-answer="F">F</div>
                        <div class="draggable" draggable="true" data-answer="C">C</div>
                    </div>
                    
                    <div>
                        <h4>Denary Values:</h4>
                        <div class="drop-zone" data-accepts="A">10</div>
                        <div class="drop-zone" data-accepts="D">13</div>
                        <div class="drop-zone" data-accepts="F">15</div>
                        <div class="drop-zone" data-accepts="C">12</div>
                    </div>
                </div>
            </div>

            <div class="task">
                <h3>Quick Quiz</h3>
                <p>How many binary bits does one hexadecimal digit represent?</p>
                <input type="number" id="hex-bits" placeholder="Enter number">
                <button class="btn" onclick="checkHexBits()">Check</button>
                <div id="hex-bits-feedback"></div>
            </div>

            <button class="btn danger" onclick="resetSection(5)">Reset Section</button>
            <button class="btn success" onclick="showSection(6)" style="float: right;">Next Section →</button>
        </section>

        <!-- Section 6: Hex Conversions -->
        <section class="section" id="section-6">
            <h2>Hexadecimal Conversions</h2>
            
            <div class="task">
                <h3>Binary to Hex Conversion</h3>
                <p>Group binary digits into sets of 4, then convert each group:</p>
                
                <h4>Example: Convert 10110101 to hex</h4>
                <ol>
                    <li>Group into 4s: 1011 | 0101</li>
                    <li>Convert each group:
                        <ul>
                            <li>1011 = 11 = B</li>
                            <li>0101 = 5 = 5</li>
                        </ul>
                    </li>
                    <li>Result: <strong>B5</strong></li>
                </ol>
            </div>

            <div class="task">
                <h3>Hex to Denary Conversion</h3>
                <p>Multiply each digit by its place value (powers of 16):</p>
                
                <h4>Example: Convert 3F to denary</h4>
                <p>3 × 16¹ + F × 16⁰ = 3 × 16 + 15 × 1 = 48 + 15 = <strong>63</strong></p>
            </div>

            <div class="task">
                <h3>Working Space</h3>
                <div class="canvas-container">
                    <canvas id="calc-canvas-3" width="600" height="300"></canvas>
                </div>
                <button class="btn warning" onclick="clearCanvas('calc-canvas-3')">Clear Canvas</button>
            </div>

            <div class="task">
                <h3>Practice All Conversions</h3>
                
                <h4>Binary to Hex:</h4>
                <div style="margin: 20px 0;">
                    <p><strong>1. Convert binary 11001010 to hex:</strong></p>
                    <input type="text" id="bin2hex-1" placeholder="Enter hex (2 digits)">
                    <button class="btn" onclick="checkBin2Hex(1, 'CA')">Check</button>
                    <div id="bin2hex-feedback-1"></div>
                </div>

                <div style="margin: 20px 0;">
                    <p><strong>2. Convert binary 01011111 to hex:</strong></p>
                    <input type="text" id="bin2hex-2" placeholder="Enter hex (2 digits)">
                    <button class="btn" onclick="checkBin2Hex(2, '5F')">Check</button>
                    <div id="bin2hex-feedback-2"></div>
                </div>

                <div style="margin: 20px 0;">
                    <p><strong>3. Convert binary 11100111 to hex:</strong></p>
                    <input type="text" id="bin2hex-3" placeholder="Enter hex (2 digits)">
                    <button class="btn" onclick="checkBin2Hex(3, 'E7')">Check</button>
                    <div id="bin2hex-feedback-3"></div>
                </div>
                
                <h4>Hex to Denary:</h4>
                <div style="margin: 20px 0;">
                    <p><strong>1. Convert hex 7E to denary:</strong></p>
                    <input type="number" id="hex2den-1" placeholder="Enter denary value">
                    <button class="btn" onclick="checkHex2Den(1, 126)">Check</button>
                    <div id="hex2den-feedback-1"></div>
                </div>

                <div style="margin: 20px 0;">
                    <p><strong>2. Convert hex B9 to denary:</strong></p>
                    <input type="number" id="hex2den-2" placeholder="Enter denary value">
                    <button class="btn" onclick="checkHex2Den(2, 185)">Check</button>
                    <div id="hex2den-feedback-2"></div>
                </div>

                <div style="margin: 20px 0;">
                    <p><strong>3. Convert hex F0 to denary:</strong></p>
                    <input type="number" id="hex2den-3" placeholder="Enter denary value">
                    <button class="btn" onclick="checkHex2Den(3, 240)">Check</button>
                    <div id="hex2den-feedback-3"></div>
                </div>
                
                <h4>Hex to Binary:</h4>
                <div style="margin: 20px 0;">
                    <p><strong>1. Convert hex A3 to binary:</strong></p>
                    <input type="text" id="hex2bin-1" placeholder="Enter binary (8 digits)">
                    <button class="btn" onclick="checkHex2Bin(1, '10100011')">Check</button>
                    <div id="hex2bin-feedback-1"></div>
                </div>

                <div style="margin: 20px 0;">
                    <p><strong>2. Convert hex 4D to binary:</strong></p>
                    <input type="text" id="hex2bin-2" placeholder="Enter binary (8 digits)">
                    <button class="btn" onclick="checkHex2Bin(2, '01001101')">Check</button>
                    <div id="hex2bin-feedback-2"></div>
                </div>

                <div style="margin: 20px 0;">
                    <p><strong>3. Convert hex 8F to binary:</strong></p>
                    <input type="text" id="hex2bin-3" placeholder="Enter binary (8 digits)">
                    <button class="btn" onclick="checkHex2Bin(3, '10001111')">Check</button>
                    <div id="hex2bin-feedback-3"></div>
                </div>
                
                <h4>Denary to Hex:</h4>
                <div style="margin: 20px 0;">
                    <p><strong>1. Convert denary 200 to hex:</strong></p>
                    <input type="text" id="den2hex-1" placeholder="Enter hex">
                    <button class="btn" onclick="checkDen2Hex(1, 'C8')">Check</button>
                    <div id="den2hex-feedback-1"></div>
                </div>

                <div style="margin: 20px 0;">
                    <p><strong>2. Convert denary 173 to hex:</strong></p>
                    <input type="text" id="den2hex-2" placeholder="Enter hex">
                    <button class="btn" onclick="checkDen2Hex(2, 'AD')">Check</button>
                    <div id="den2hex-feedback-2"></div>
                </div>

                <div style="margin: 20px 0;">
                    <p><strong>3. Convert denary 95 to hex:</strong></p>
                    <input type="text" id="den2hex-3" placeholder="Enter hex">
                    <button class="btn" onclick="checkDen2Hex(3, '5F')">Check</button>
                    <div id="den2hex-feedback-3"></div>
                </div>
            </div>

            <button class="btn danger" onclick="resetSection(6)">Reset Section</button>
            <button class="btn success" onclick="showSection(7)" style="float: right;">Next Section →</button>
        </section>

        <!-- Section 7: Summary -->
        <section class="section" id="section-7">
            <h2>Summary & Assessment</h2>
            
            <div class="task">
                <h3>Key Takeaways</h3>
                <ul>
                    <li><strong>Denary:</strong> Base-10 system using digits 0-9</li>
                    <li><strong>Binary:</strong> Base-2 system using only 0 and 1</li>
                    <li><strong>Hexadecimal:</strong> Base-16 system using 0-9 and A-F</li>
                    <li><strong>Digital Data:</strong> Discrete data with distinct values</li>
                    <li><strong>Analogue Data:</strong> Continuous data like sound waves</li>
                    <li>Each hex digit represents 4 binary bits</li>
                    <li>Binary place values are powers of 2 (128, 64, 32, 16, 8, 4, 2, 1)</li>
                </ul>
            </div>

            <div class="task">
                <h3>Final Assessment</h3>
                <p>Complete these questions to check your understanding:</p>
                
                <div style="margin: 20px 0;">
                    <h4>Question 1: What is the denary value of binary 11111111?</h4>
                    <button class="quiz-option" onclick="checkSummaryAnswer(this, 1, false)">127</button>
                    <button class="quiz-option" onclick="checkSummaryAnswer(this, 1, false)">256</button>
                    <button class="quiz-option" onclick="checkSummaryAnswer(this, 1, true)">255</button>
                    <button class="quiz-option" onclick="checkSummaryAnswer(this, 1, false)">128</button>
                </div>
                
                <div style="margin: 20px 0;">
                    <h4>Question 2: Which number system is used by computers internally?</h4>
                    <button class="quiz-option" onclick="checkSummaryAnswer(this, 2, false)">Denary</button>
                    <button class="quiz-option" onclick="checkSummaryAnswer(this, 2, true)">Binary</button>
                    <button class="quiz-option" onclick="checkSummaryAnswer(this, 2, false)">Hexadecimal</button>
                    <button class="quiz-option" onclick="checkSummaryAnswer(this, 2, false)">Octal</button>
                </div>
                
                <div style="margin: 20px 0;">
                    <h4>Question 3: What is hex FF in denary?</h4>
                    <input type="number" id="summary-q3" placeholder="Enter denary value">
                    <button class="btn" onclick="checkSummaryQ3()">Check</button>
                    <div id="summary-q3-feedback"></div>
                </div>
                
                <div style="margin: 20px 0;">
                    <h4>Question 4: How many hex digits are needed to represent 8 binary bits?</h4>
                    <button class="quiz-option" onclick="checkSummaryAnswer(this, 4, false)">1</button>
                    <button class="quiz-option" onclick="checkSummaryAnswer(this, 4, true)">2</button>
                    <button class="quiz-option" onclick="checkSummaryAnswer(this, 4, false)">4</button>
                    <button class="quiz-option" onclick="checkSummaryAnswer(this, 4, false)">8</button>
                </div>
                
                <div style="margin: 20px 0;">
                    <h4>Question 5: Convert 10101010 to denary:</h4>
                    <input type="number" id="summary-q5" placeholder="Enter denary value">
                    <button class="btn" onclick="checkSummaryQ5()">Check</button>
                    <div id="summary-q5-feedback"></div>
                </div>
                
                <div style="margin: 20px 0;">
                    <h4>Question 6: Which of these is an example of analogue data?</h4>
                    <button class="quiz-option" onclick="checkSummaryAnswer(this, 6, false)">Text file</button>
                    <button class="quiz-option" onclick="checkSummaryAnswer(this, 6, true)">Temperature reading</button>
                    <button class="quiz-option" onclick="checkSummaryAnswer(this, 6, false)">Digital photo</button>
                    <button class="quiz-option" onclick="checkSummaryAnswer(this, 6, false)">Binary code</button>
                </div>
                
                <div style="margin: 20px 0;">
                    <h4>Question 7: What does the hex digit 'E' represent in denary?</h4>
                    <input type="number" id="summary-q7" placeholder="Enter value">
                    <button class="btn" onclick="checkSummaryQ7()">Check</button>
                    <div id="summary-q7-feedback"></div>
                </div>
                
                <div style="margin: 20px 0;">
                    <h4>Question 8: True or False: Binary is more efficient than hex for humans to read.</h4>
                    <button class="quiz-option" onclick="checkSummaryAnswer(this, 8, false)">True</button>
                    <button class="quiz-option" onclick="checkSummaryAnswer(this, 8, true)">False</button>
                </div>
            </div>

            <div class="task">
                <h3>Your Score</h3>
                <p id="summary-score">Complete all questions to see your score!</p>
            </div>

            <button class="btn danger" onclick="resetSection(7)">Reset Section</button>
            <button class="btn success" onclick="showSection(8)" style="float: right;">Next Section →</button>
        </section>

        <!-- Section 8: Practice Exam Questions -->
        <section class="section" id="section-8">
            <h2>Practice Exam Questions</h2>
            
            <div class="task">
                <h3>GCSE-Style Questions</h3>
                <p>These questions are similar to what you might see in your exam. Complete each question before viewing the mark scheme.</p>
                
                <h3>Working Space</h3>
                <p>Use this canvas for calculations and working out:</p>
                <div class="canvas-container">
                    <canvas id="calc-canvas-exam" width="600" height="400"></canvas>
                </div>
                <button class="btn warning" onclick="clearCanvas('calc-canvas-exam')">Clear Canvas</button>
                
                <div style="margin: 30px 0; padding: 20px; background: #f0f4f8; border-radius: 10px;">
                    <h4>Question 1 [4 marks]</h4>
                    <p>A computer stores the binary number 10110011.</p>
                    <p>(a) Convert this binary number to denary. Show your working. [2 marks]</p>
                    <textarea id="exam-q1a" rows="4" style="width: 100%; margin: 10px 0;" placeholder="Show your working here..."></textarea>
                    
                    <p>(b) Convert the same binary number to hexadecimal. [2 marks]</p>
                    <textarea id="exam-q1b" rows="2" style="width: 100%; margin: 10px 0;" placeholder="Your answer..."></textarea>
                    
                    <div style="margin-top: 20px;">
                        <label>Predicted marks for Q1: </label>
                        <input type="number" id="exam-q1-marks" min="0" max="4" style="width: 60px;">
                        <button class="btn" onclick="showMarkScheme('q1')">View Mark Scheme</button>
                    </div>
                    
                    <div class="mark-scheme" id="mark-scheme-q1">
                        <h5>Mark Scheme - Question 1</h5>
                        <p><strong>(a) [2 marks]</strong></p>
                        <ul>
                            <li>1 mark for correct method shown (128 + 32 + 16 + 2 + 1)</li>
                            <li>1 mark for correct answer: 179</li>
                        </ul>
                        <p><strong>(b) [2 marks]</strong></p>
                        <ul>
                            <li>1 mark for grouping into 1011 0011</li>
                            <li>1 mark for correct answer: B3</li>
                        </ul>
                    </div>
                </div>
                
                <div style="margin: 30px 0; padding: 20px; background: #f0f4f8; border-radius: 10px;">
                    <h4>Question 2 [3 marks]</h4>
                    <p>Explain the difference between analogue and digital data. Give one example of each.</p>
                    <textarea id="exam-q2" rows="6" style="width: 100%; margin: 10px 0;" placeholder="Your answer..."></textarea>
                    
                    <div style="margin-top: 20px;">
                        <label>Predicted marks for Q2: </label>
                        <input type="number" id="exam-q2-marks" min="0" max="3" style="width: 60px;">
                        <button class="btn" onclick="showMarkScheme('q2')">View Mark Scheme</button>
                    </div>
                    
                    <div class="mark-scheme" id="mark-scheme-q2">
                        <h5>Mark Scheme - Question 2</h5>
                        <ul>
                            <li>1 mark: Digital data is discrete/has distinct values (e.g., 0 and 1)</li>
                            <li>1 mark: Analogue data is continuous/can have any value in a range</li>
                            <li>1 mark: Valid examples (e.g., Digital: text file, photo; Analogue: sound wave, temperature)</li>
                        </ul>
                    </div>
                </div>
                
                <div style="margin: 30px 0; padding: 20px; background: #f0f4f8; border-radius: 10px;">
                    <h4>Question 3 [5 marks]</h4>
                    <p>A colour is represented in hexadecimal as #3A7F2B.</p>
                    <p>(a) State how many bits are used to represent this colour code. [1 mark]</p>
                    <textarea id="exam-q3a" rows="1" style="width: 100%; margin: 10px 0;" placeholder="Your answer..."></textarea>
                    
                    <p>(b) Convert the red component (3A) to denary. Show your working. [2 marks]</p>
                    <textarea id="exam-q3b" rows="3" style="width: 100%; margin: 10px 0;" placeholder="Show your working..."></textarea>
                    
                    <p>(c) Explain why hexadecimal is often used to represent colours in web design instead of binary. [2 marks]</p>
                    <textarea id="exam-q3c" rows="4" style="width: 100%; margin: 10px 0;" placeholder="Your explanation..."></textarea>
                    
                    <div style="margin-top: 20px;">
                        <label>Predicted marks for Q3: </label>
                        <input type="number" id="exam-q3-marks" min="0" max="5" style="width: 60px;">
                        <button class="btn" onclick="showMarkScheme('q3')">View Mark Scheme</button>
                    </div>
                    
                    <div class="mark-scheme" id="mark-scheme-q3">
                        <h5>Mark Scheme - Question 3</h5>
                        <p><strong>(a) [1 mark]</strong> 24 bits (6 hex digits × 4 bits each)</p>
                        <p><strong>(b) [2 marks]</strong></p>
                        <ul>
                            <li>1 mark: Working shown (3 × 16 + 10 × 1)</li>
                            <li>1 mark: Correct answer: 58</li>
                        </ul>
                        <p><strong>(c) [2 marks]</strong> Any two from:</p>
                        <ul>
                            <li>More compact/shorter to write</li>
                            <li>Easier for humans to read and remember</li>
                            <li>Less prone to errors when typing</li>
                            <li>Each hex digit represents exactly 4 bits</li>
                        </ul>
                    </div>
                </div>
            </div>

            <button class="btn danger" onclick="resetSection(8)">Reset Section</button>
            <button class="btn success" onclick="showSection(9)" style="float: right;">Next Section →</button>
        </section>

        <!-- Section 9: Extension Activities -->
        <section class="section" id="section-9">
            <h2>Extension Activities</h2>
            
            <div class="task">
                <h3>Challenge 1: Large Number Conversions</h3>
                <p>Convert these larger numbers between different bases:</p>
                
                <div style="margin: 20px 0;">
                    <p><strong>Convert denary 1023 to binary (10 bits):</strong></p>
                    <input type="text" id="ext-1" placeholder="Enter binary">
                    <button class="btn" onclick="checkExtension1()">Check</button>
                    <div id="ext-1-feedback"></div>
                </div>
                
                <div style="margin: 20px 0;">
                    <p><strong>Convert hex 1FF to denary:</strong></p>
                    <input type="number" id="ext-2" placeholder="Enter denary">
                    <button class="btn" onclick="checkExtension2()">Check</button>
                    <div id="ext-2-feedback"></div>
                </div>
            </div>

            <div class="task">
                <h3>Challenge 2: Real-World Application</h3>
                <p>RGB colours use hexadecimal values. Research and explain why web developers prefer hex codes like #FF5733 over other formats.</p>
                <textarea id="ext-rgb" rows="6" style="width: 100%; margin: 10px 0;" placeholder="Your research and explanation..."></textarea>
                <button class="btn" onclick="submitExtensionAnswer()">Submit</button>
            </div>

            <div class="task">
                <h3>Challenge 3: Binary Arithmetic</h3>
                <p>Research how to add binary numbers. Then calculate: 10110101 + 01011010</p>
                <div class="canvas-container">
                    <canvas id="calc-canvas-4" width="600" height="300"></canvas>
                </div>
                <button class="btn warning" onclick="clearCanvas('calc-canvas-4')">Clear Canvas</button>
                
                <div style="margin-top: 20px;">
                    <input type="text" id="ext-binary-add" placeholder="Enter result in binary">
                    <button class="btn" onclick="checkBinaryAddition()">Check</button>
                    <div id="ext-add-feedback"></div>
                </div>
            </div>

            <div class="task">
                <h3>Common Mistakes to Avoid</h3>
                <ul>
                    <li><strong>Forgetting leading zeros:</strong> Binary numbers should be written with all 8 bits</li>
                    <li><strong>Confusing hex letters:</strong> Remember A=10, B=11, C=12, D=13, E=14, F=15</li>
                    <li><strong>Place value errors:</strong> Binary uses powers of 2, not powers of 10</li>
                    <li><strong>Not grouping correctly:</strong> When converting binary to hex, group from right to left</li>
                </ul>
            </div>

            <button class="btn danger" onclick="resetSection(9)">Reset Section</button>
            <button class="btn success" onclick="showSection(10)" style="float: right;">Next Section →</button>
        </section>

        <!-- Section 10: Resources -->
        <section class="section" id="section-10">
            <h2>Additional Resources</h2>
            
            <div class="task">
                <h3>Interactive Binary Game</h3>
                <p>Practice your conversion skills with this interactive game:</p>
                <a href="Conversiongame2.0.html" class="btn success" target="_blank">Play Binary Conversion Game</a>
            </div>

            <div class="task">
                <h3>Video Resources</h3>
                <p>Watch these videos to reinforce your learning:</p>
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <p><em>Videos will be added here by your teacher</em></p>
                    <ul>
                        <li>Binary Number System Explained</li>
                        <li>Converting Between Number Systems</li>
                        <li>Hexadecimal in Computer Science</li>
                        <li>Real-World Applications of Binary</li>
                    </ul>
                </div>
            </div>

            <div class="task">
                <h3>Quick Reference Guide</h3>
                <h4>Binary to Denary:</h4>
                <p>Add up place values where there's a 1</p>
                
                <h4>Denary to Binary:</h4>
                <p>Divide by 2 repeatedly, read remainders backwards</p>
                
                <h4>Binary to Hex:</h4>
                <p>Group into 4s, convert each group</p>
                
                <h4>Hex to Binary:</h4>
                <p>Convert each hex digit to 4 binary bits</p>
                
                <h4>Hex to Denary:</h4>
                <p>Multiply by powers of 16</p>
                
                <h4>Denary to Hex:</h4>
                <p>Divide by 16 repeatedly, use A-F for 10-15</p>
            </div>

            <div class="task">
                <h3>Congratulations!</h3>
                <p>You've completed the Number Systems worksheet! Check your XP and level at the top of the page.</p>
                <p>Remember to review any sections you found challenging and practice the conversions regularly.</p>
            </div>

            <button class="btn danger" onclick="resetSection(10)">Reset Section</button>
        </section>
    </div>

    <!-- Achievement Popup -->
    <div class="achievement-popup" id="achievement-popup">
        <h3>Achievement Unlocked!</h3>
        <p id="achievement-text"></p>
        <p id="achievement-xp"></p>
    </div>

    <!-- Feedback Button -->
    <button class="feedback-btn" onclick="openFeedback()" aria-label="Send feedback">💬</button>

    <!-- Feedback Modal -->
    <div class="modal" id="feedback-modal">
        <div class="modal-content">
            <h3>Send Feedback</h3>
            <p>Found a bug or have a suggestion? Let us know!</p>
            <textarea id="feedback-text" rows="6" style="width: 100%; margin: 10px 0;" placeholder="Describe the issue or suggestion..."></textarea>
            <div style="text-align: right;">
                <button class="btn danger" onclick="closeFeedback()">Cancel</button>
                <button class="btn success" onclick="sendFeedback()">Send</button>
            </div>
        </div>
    </div>

    <!-- Shame Message -->
    <div class="shame-message" id="shame-message">
        🚫 Pasting is disabled! Complete the work yourself to earn XP and learn properly. 🚫
    </div>

    <script>
        // Global Variables
        let currentSection = 0;
        let xp = 0;
        let level = 0;
        let achievements = new Set();
        let sectionProgress = new Array(11).fill(false);
        let fontSize = 16;
        let summaryAnswers = new Array(8).fill(false);
        let binaryBits = [0, 0, 0, 0, 0, 0, 0, 0];
        let denaryDigits = [0, 0, 0, 0];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setupDragAndDrop();
            setupCanvas('calc-canvas-1');
            setupCanvas('calc-canvas-2');
            setupCanvas('calc-canvas-3');
            setupCanvas('calc-canvas-4');
            setupCanvas('calc-canvas-exam');
            disablePaste();
            updateDisplay();
        });

        // Navigation
        function showSection(index) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            
            document.getElementById('section-' + index).classList.add('active');
            document.getElementsByClassName('nav-btn')[index].classList.add('active');
            
            currentSection = index;
            updateProgress();
        }

        // XP and Achievements System
        function addXP(amount, reason) {
            xp += amount;
            updateLevel();
            updateDisplay();
            
            // Check for achievements
            checkAchievements();
        }

        function updateLevel() {
            let oldLevel = level;
            if (xp >= 1000) level = 5;
            else if (xp >= 700) level = 4;
            else if (xp >= 400) level = 3;
            else if (xp >= 200) level = 2;
            else if (xp >= 100) level = 1;
            else level = 0;
            
            if (level > oldLevel && level > 0) {
                showAchievement("Level Up!", "You reached Level " + level + "!");
            }
        }

        function checkAchievements() {
            // First correct answer
            if (xp > 0 && !achievements.has('first')) {
                achievements.add('first');
                showAchievement("First Steps", "Completed your first task! +20 XP");
                xp += 20;
            }
            
            // Complete starter
            if (sectionProgress[0] && !achievements.has('starter')) {
                achievements.add('starter');
                showAchievement("Quick Starter", "Completed the starter activity! +30 XP");
                xp += 30;
            }
            
            // Binary master
            if (sectionProgress[2] && sectionProgress[3] && sectionProgress[4] && !achievements.has('binary')) {
                achievements.add('binary');
                showAchievement("Binary Master", "Mastered all binary conversions! +50 XP");
                xp += 50;
            }
            
            // Hex expert
            if (sectionProgress[5] && sectionProgress[6] && !achievements.has('hex')) {
                achievements.add('hex');
                showAchievement("Hex Expert", "Conquered hexadecimal! +50 XP");
                xp += 50;
            }
            
            // Perfect summary
            let perfectSummary = summaryAnswers.every(a => a === true);
            if (perfectSummary && !achievements.has('perfect')) {
                achievements.add('perfect');
                showAchievement("Perfectionist", "100% on the summary! +100 XP");
                xp += 100;
            }
        }

        function showAchievement(title, text) {
            let popup = document.getElementById('achievement-popup');
            document.getElementById('achievement-text').textContent = text;
            
            popup.classList.add('show');
            
            setTimeout(function() {
                popup.classList.remove('show');
            }, 3000);
        }

        function updateDisplay() {
            document.getElementById('xp-display').textContent = 'XP: ' + xp;
            document.getElementById('level-display').textContent = 'Level: ' + level;
        }

        function updateProgress() {
            let completed = sectionProgress.filter(p => p === true).length;
            let percentage = Math.round((completed / 11) * 100);
            
            let progressBar = document.getElementById('progress-bar');
            progressBar.style.width = percentage + '%';
            progressBar.textContent = percentage + '%';
            progressBar.parentElement.setAttribute('aria-valuenow', percentage);
        }

        // Starter Activity Functions
        function checkStarterAnswer(button, question, isCorrect) {
            let options = button.parentElement.querySelectorAll('.quiz-option');
            options.forEach(opt => opt.disabled = true);
            
            if (isCorrect) {
                button.classList.add('correct');
                addXP(20, 'starter-' + question);
            } else {
                button.classList.add('incorrect');
                // Show correct answer
                options.forEach(opt => {
                    if (question === 'q1' && opt.textContent === 'Base 10') opt.classList.add('correct');
                    if (question === 'q2' && opt.textContent === 'Binary 1s and 0s') opt.classList.add('correct');
                });
            }
        }

        function checkStarterQ3() {
            let input = document.getElementById('starter-q3');
            let feedback = document.getElementById('starter-q3-feedback');
            let value = parseInt(input.value);
            
            if (value === 16) {
                feedback.innerHTML = '<span style="color: green;">Correct! Hexadecimal uses 16 different digits.</span>';
                addXP(20, 'starter-q3');
                input.disabled = true;
                sectionProgress[0] = true;
                updateProgress();
                checkAchievements();
            } else {
                feedback.innerHTML = '<span style="color: red;">Not quite. Think about 0-9 and A-F.</span>';
            }
        }

        function completeStarter() {
            if (!sectionProgress[0]) {
                sectionProgress[0] = true;
                updateProgress();
                checkAchievements();
            }
            showSection(1);
        }

        // Denary Section Functions
        function changeDenaryDigit(box, position) {
            let digit = box.querySelector('.bit-value');
            let current = parseInt(digit.textContent);
            current = (current + 1) % 10;
            digit.textContent = current;
            denaryDigits[position] = current;
            
            updateDenaryTotal();
        }

        function updateDenaryTotal() {
            let total = denaryDigits[0] * 1000 + denaryDigits[1] * 100 + 
                       denaryDigits[2] * 10 + denaryDigits[3] * 1;
            document.getElementById('denary-total').textContent = total;
            
            if (total === 1234 && !achievements.has('denary1234')) {
                achievements.add('denary1234');
                showAchievement("Pattern Spotter", "Made 1234! +10 XP");
                xp += 10;
            }
        }

        function checkDenaryAnswer() {
            let select = document.getElementById('denary-check');
            let feedback = document.getElementById('denary-feedback');
            
            if (select.value === '700') {
                feedback.innerHTML = '<span style="color: green;">Correct! The 7 is in the hundreds place.</span>';
                addXP(25, 'denary-place');
                select.disabled = true;
                sectionProgress[1] = true;
                updateProgress();
            } else if (select.value !== '') {
                feedback.innerHTML = '<span style="color: red;">Not quite. Which place is the 7 in?</span>';
            }
        }

        // Binary Section Functions
        function toggleBit(box, position) {
            let bit = box.querySelector('.bit-value');
            let current = parseInt(bit.textContent);
            current = 1 - current;
            bit.textContent = current;
            binaryBits[7 - position] = current;
            
            if (current === 1) {
                box.classList.add('active');
            } else {
                box.classList.remove('active');
            }
            
            updateBinaryDisplay();
        }

        function updateBinaryDisplay() {
            let binaryString = binaryBits.join('');
            let denaryValue = parseInt(binaryString, 2);
            
            document.getElementById('binary-display-value').textContent = binaryString;
            document.getElementById('binary-denary-value').textContent = denaryValue;
            
            // Easter egg
            if (denaryValue === 42 && !achievements.has('answer')) {
                achievements.add('answer');
                showAchievement("The Answer", "Found the answer to everything! +42 XP");
                xp += 42;
            }
        }

        // Binary to Denary Functions
        function checkBin2Den(question, answer) {
            let input = document.getElementById('bin2den-' + question);
            let feedback = document.getElementById('bin2den-feedback-' + question);
            let value = parseInt(input.value);
            
            if (value === answer) {
                feedback.innerHTML = '<span style="color: green;">Correct! Well done.</span>';
                addXP(30, 'bin2den-' + question);
                input.disabled = true;
                
                if (question === 5) {
                    sectionProgress[3] = true;
                    updateProgress();
                }
            } else {
                feedback.innerHTML = '<span style="color: red;">Not quite. Try again.</span>';
            }
        }

        // Denary to Binary Functions
        function checkDen2Bin(question, answer) {
            let input = document.getElementById('den2bin-' + question);
            let feedback = document.getElementById('den2bin-feedback-' + question);
            let value = input.value.replace(/\s/g, '');
            
            if (value === answer) {
                feedback.innerHTML = '<span style="color: green;">Correct!</span>';
                addXP(35, 'den2bin-' + question);
                input.disabled = true;
                
                if (question === 5) {
                    sectionProgress[4] = true;
                    updateProgress();
                }
            } else {
                feedback.innerHTML = '<span style="color: red;">Not quite. Remember to include all 8 bits.</span>';
            }
        }

        // Hexadecimal Functions
        function checkHexBits() {
            let input = document.getElementById('hex-bits');
            let feedback = document.getElementById('hex-bits-feedback');
            let value = parseInt(input.value);
            
            if (value === 4) {
                feedback.innerHTML = '<span style="color: green;">Correct! Each hex digit represents 4 binary bits.</span>';
                addXP(25, 'hex-bits');
                input.disabled = true;
                sectionProgress[5] = true;
                updateProgress();
            } else {
                feedback.innerHTML = '<span style="color: red;">Not quite. Think about how many bits are in a nibble.</span>';
            }
        }

        // Hex Conversion Functions
        function checkBin2Hex(question, answer) {
            let input = document.getElementById('bin2hex-' + question);
            let feedback = document.getElementById('bin2hex-feedback-' + question);
            let value = input.value.toUpperCase();
            
            if (value === answer) {
                feedback.innerHTML = '<span style="color: green;">Correct!</span>';
                addXP(40, 'bin2hex-' + question);
                input.disabled = true;
            } else {
                feedback.innerHTML = '<span style="color: red;">Not quite. Group the binary into sets of 4.</span>';
            }
        }

        function checkHex2Den(question, answer) {
            let input = document.getElementById('hex2den-' + question);
            let feedback = document.getElementById('hex2den-feedback-' + question);
            let value = parseInt(input.value);
            
            if (value === answer) {
                feedback.innerHTML = '<span style="color: green;">Correct!</span>';
                addXP(40, 'hex2den-' + question);
                input.disabled = true;
            } else {
                feedback.innerHTML = '<span style="color: red;">Not quite. Remember to multiply by powers of 16.</span>';
            }
        }

        function checkHex2Bin(question, answer) {
            let input = document.getElementById('hex2bin-' + question);
            let feedback = document.getElementById('hex2bin-feedback-' + question);
            let value = input.value.replace(/\s/g, '');
            
            if (value === answer) {
                feedback.innerHTML = '<span style="color: green;">Correct!</span>';
                addXP(40, 'hex2bin-' + question);
                input.disabled = true;
            } else {
                feedback.innerHTML = '<span style="color: red;">Not quite. Convert each hex digit separately.</span>';
            }
        }

        function checkDen2Hex(question, answer) {
            let input = document.getElementById('den2hex-' + question);
            let feedback = document.getElementById('den2hex-feedback-' + question);
            let value = input.value.toUpperCase();
            
            if (value === answer) {
                feedback.innerHTML = '<span style="color: green;">Correct!</span>';
                addXP(40, 'den2hex-' + question);
                input.disabled = true;
                
                if (question === 3) {
                    sectionProgress[6] = true;
                    updateProgress();
                }
            } else {
                feedback.innerHTML = '<span style="color: red;">Not quite. Remember to use A-F for values 10-15.</span>';
            }
        }

        // Summary Functions
        function checkSummaryAnswer(button, question, isCorrect) {
            let options = button.parentElement.querySelectorAll('.quiz-option');
            options.forEach(opt => opt.disabled = true);
            
            if (isCorrect) {
                button.classList.add('correct');
                summaryAnswers[question - 1] = true;
                addXP(15, 'summary-q' + question);
            } else {
                button.classList.add('incorrect');
                summaryAnswers[question - 1] = false;
                // Show correct answer
                if (question === 1) {
                    options.forEach(opt => {
                        if (opt.textContent === '255') opt.classList.add('correct');
                    });
                }
                // Add similar logic for other questions
            }
            
            updateSummaryScore();
        }

        function checkSummaryQ3() {
            let input = document.getElementById('summary-q3');
            let feedback = document.getElementById('summary-q3-feedback');
            let value = parseInt(input.value);
            
            if (value === 255) {
                feedback.innerHTML = '<span style="color: green;">Correct! FF = 15×16 + 15×1 = 255</span>';
                summaryAnswers[2] = true;
                addXP(15, 'summary-q3');
                input.disabled = true;
            } else {
                feedback.innerHTML = '<span style="color: red;">Not quite. F=15, so FF = 15×16 + 15</span>';
                summaryAnswers[2] = false;
            }
            
            updateSummaryScore();
        }

        function checkSummaryQ5() {
            let input = document.getElementById('summary-q5');
            let feedback = document.getElementById('summary-q5-feedback');
            let value = parseInt(input.value);
            
            if (value === 170) {
                feedback.innerHTML = '<span style="color: green;">Correct!</span>';
                summaryAnswers[4] = true;
                addXP(15, 'summary-q5');
                input.disabled = true;
            } else {
                feedback.innerHTML = '<span style="color: red;">Not quite. Add: 128+32+8+2</span>';
                summaryAnswers[4] = false;
            }
            
            updateSummaryScore();
        }

        function checkSummaryQ7() {
            let input = document.getElementById('summary-q7');
            let feedback = document.getElementById('summary-q7-feedback');
            let value = parseInt(input.value);
            
            if (value === 14) {
                feedback.innerHTML = '<span style="color: green;">Correct!</span>';
                summaryAnswers[6] = true;
                addXP(15, 'summary-q7');
                input.disabled = true;
            } else {
                feedback.innerHTML = '<span style="color: red;">Not quite. E comes after D (13).</span>';
                summaryAnswers[6] = false;
            }
            
            updateSummaryScore();
        }

        function updateSummaryScore() {
            let correct = summaryAnswers.filter(a => a === true).length;
            let total = 8;
            let percentage = Math.round((correct / total) * 100);
            
            document.getElementById('summary-score').innerHTML = 
                'You scored <strong>' + correct + '/' + total + '</strong> (' + percentage + '%)';
            
            if (correct === total) {
                sectionProgress[7] = true;
                updateProgress();
                checkAchievements();
            }
        }

        // Exam Question Functions
        function showMarkScheme(question) {
            let marksInput = document.getElementById('exam-' + question + '-marks');
            let markScheme = document.getElementById('mark-scheme-' + question);
            
            // Check if enough work has been done
            if (question === 'q1') {
                let q1a = document.getElementById('exam-q1a').value;
                let q1b = document.getElementById('exam-q1b').value;
                if (q1a.length < 20 || q1b.length < 2) {
                    alert('Please complete your answer before viewing the mark scheme.');
                    return;
                }
            } else if (question === 'q2') {
                let q2 = document.getElementById('exam-q2').value;
                if (q2.length < 50) {
                    alert('Please write a more detailed answer before viewing the mark scheme.');
                    return;
                }
            } else if (question === 'q3') {
                let q3a = document.getElementById('exam-q3a').value;
                let q3b = document.getElementById('exam-q3b').value;
                let q3c = document.getElementById('exam-q3c').value;
                if (q3a.length < 1 || q3b.length < 10 || q3c.length < 30) {
                    alert('Please complete all parts before viewing the mark scheme.');
                    return;
                }
            }
            
            // Check if marks predicted
            if (!marksInput.value) {
                alert('Please predict your marks first.');
                return;
            }
            
            markScheme.classList.add('show');
            addXP(20, 'exam-' + question);
            
            if (!achievements.has('examiner')) {
                achievements.add('examiner');
                showAchievement("Self Assessor", "Completed an exam question! +30 XP");
                xp += 30;
            }
        }

        // Extension Functions
        function checkExtension1() {
            let input = document.getElementById('ext-1');
            let feedback = document.getElementById('ext-1-feedback');
            let value = input.value.replace(/\s/g, '');
            
            if (value === '1111111111') {
                feedback.innerHTML = '<span style="color: green;">Excellent! 1023 = 1111111111 in binary.</span>';
                addXP(50, 'extension-1');
                input.disabled = true;
            } else {
                feedback.innerHTML = '<span style="color: red;">Not quite. 1023 is one less than 1024 (2^10).</span>';
            }
        }

        function checkExtension2() {
            let input = document.getElementById('ext-2');
            let feedback = document.getElementById('ext-2-feedback');
            let value = parseInt(input.value);
            
            if (value === 511) {
                feedback.innerHTML = '<span style="color: green;">Correct! 1×256 + 15×16 + 15×1 = 511</span>';
                addXP(50, 'extension-2');
                input.disabled = true;
            } else {
                feedback.innerHTML = '<span style="color: red;">Not quite. Remember 1FF has three digits.</span>';
            }
        }

        function submitExtensionAnswer() {
            let answer = document.getElementById('ext-rgb').value;
            if (answer.length > 100) {
                addXP(30, 'extension-rgb');
                showAchievement("Researcher", "Great research on RGB colors! +30 XP");
            } else {
                alert('Please provide a more detailed explanation.');
            }
        }

        function checkBinaryAddition() {
            let input = document.getElementById('ext-binary-add');
            let feedback = document.getElementById('ext-add-feedback');
            let value = input.value.replace(/\s/g, '');
            
            // 10110101 + 01011010 = 100001111
            if (value === '100001111') {
                feedback.innerHTML = '<span style="color: green;">Outstanding! You\'ve mastered binary addition!</span>';
                addXP(75, 'binary-addition');
                input.disabled = true;
                
                if (!achievements.has('mathematician')) {
                    achievements.add('mathematician');
                    showAchievement("Binary Mathematician", "Performed binary arithmetic! +50 XP");
                    xp += 50;
                }
            } else {
                feedback.innerHTML = '<span style="color: red;">Not quite. Remember to carry when you get 1+1.</span>';
            }
        }

        // Drag and Drop Functions
        function setupDragAndDrop() {
            let draggables = document.querySelectorAll('.draggable');
            let dropZones = document.querySelectorAll('.drop-zone');
            
            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', dragStart);
                draggable.addEventListener('dragend', dragEnd);
            });
            
            dropZones.forEach(zone => {
                zone.addEventListener('dragover', dragOver);
                zone.addEventListener('drop', dragDrop);
                zone.addEventListener('dragleave', dragLeave);
            });
        }

        function dragStart(e) {
            e.dataTransfer.setData('text', e.target.getAttribute('data-answer'));
            e.target.classList.add('dragging');
        }

        function dragEnd(e) {
            e.target.classList.remove('dragging');
        }

        function dragOver(e) {
            e.preventDefault();
            e.currentTarget.classList.add('drag-over');
        }

        function dragLeave(e) {
            e.currentTarget.classList.remove('drag-over');
        }

        function dragDrop(e) {
            e.preventDefault();
            let answer = e.dataTransfer.getData('text');
            let accepts = e.currentTarget.getAttribute('data-accepts');
            
            e.currentTarget.classList.remove('drag-over');
            
            if (answer === accepts) {
                e.currentTarget.classList.add('correct');
                e.currentTarget.textContent = answer;
                addXP(20, 'drag-drop-' + accepts);
                
                // Find and remove the dragged element
                let dragged = document.querySelector('.draggable[data-answer="' + answer + '"]');
                if (dragged) dragged.style.display = 'none';
                
                // Check if section complete
                let section = e.currentTarget.closest('.section');
                let remaining = section.querySelectorAll('.drop-zone:not(.correct)').length;
                if (remaining === 0 && section.id === 'section-2') {
                    sectionProgress[2] = true;
                    updateProgress();
                }
            } else {
                e.currentTarget.classList.add('incorrect');
                setTimeout(() => {
                    e.currentTarget.classList.remove('incorrect');
                }, 1000);
            }
        }

        // Canvas Functions
        function setupCanvas(canvasId) {
            let canvas = document.getElementById(canvasId);
            if (!canvas) return;
            
            let ctx = canvas.getContext('2d');
            let isDrawing = false;
            let lastX = 0;
            let lastY = 0;
            
            function getCoordinates(e) {
                let rect = canvas.getBoundingClientRect();
                let x, y;
                
                if (e.touches) {
                    x = e.touches[0].clientX - rect.left;
                    y = e.touches[0].clientY - rect.top;
                } else {
                    x = e.clientX - rect.left;
                    y = e.clientY - rect.top;
                }
                
                // Scale coordinates to canvas size
                x = x * (canvas.width / rect.width);
                y = y * (canvas.height / rect.height);
                
                return {x: x, y: y};
            }
            
            function startDrawing(e) {
                isDrawing = true;
                let coords = getCoordinates(e);
                lastX = coords.x;
                lastY = coords.y;
                e.preventDefault();
            }
            
            function draw(e) {
                if (!isDrawing) return;
                
                let coords = getCoordinates(e);
                
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(coords.x, coords.y);
                ctx.strokeStyle = '#3498db';
                ctx.lineWidth = 2;
                ctx.lineCap = 'round';
                ctx.stroke();
                
                lastX = coords.x;
                lastY = coords.y;
                e.preventDefault();
            }
            
            function stopDrawing(e) {
                isDrawing = false;
                e.preventDefault();
            }
            
            // Mouse events
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            // Touch events
            canvas.addEventListener('touchstart', startDrawing);
            canvas.addEventListener('touchmove', draw);
            canvas.addEventListener('touchend', stopDrawing);
            canvas.addEventListener('touchcancel', stopDrawing);
        }

        function clearCanvas(canvasId) {
            let canvas = document.getElementById(canvasId);
            let ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        // Accessibility Functions
        function toggleHighContrast() {
            document.body.classList.toggle('high-contrast');
        }

        function toggleDyslexiaFont() {
            document.body.classList.toggle('dyslexia-font');
        }

        function changeFontSize(delta) {
            fontSize += delta;
            fontSize = Math.max(12, Math.min(24, fontSize));
            document.body.style.fontSize = fontSize + 'px';
        }

        // Feedback System
        function openFeedback() {
            document.getElementById('feedback-modal').style.display = 'flex';
        }

        function closeFeedback() {
            document.getElementById('feedback-modal').style.display = 'none';
            document.getElementById('feedback-text').value = '';
        }

        function sendFeedback() {
            let feedback = document.getElementById('feedback-text').value;
            if (feedback.length < 10) {
                alert('Please provide more detailed feedback.');
                return;
            }
            
            let sectionName = document.querySelector('.section.active h2').textContent;
            let sectionId = document.querySelector('.section.active').id;
            
            // Construct email
            let subject = 'Number Systems Worksheet Feedback - ' + sectionName;
            let body = 'Section: ' + sectionName + ' (' + sectionId + ')\n\n';
            body += 'Feedback:\n' + feedback + '\n\n';
            body += 'User Stats: Level ' + level + ', XP: ' + xp;
            
            // Create mailto link
            let mailto = 'mailto:millingtond@mgs.org?subject=' + encodeURIComponent(subject) + 
                        '&body=' + encodeURIComponent(body);
            
            window.location.href = mailto;
            
            closeFeedback();
            showAchievement("Feedback Hero", "Thanks for helping improve the worksheet! +25 XP");
            xp += 25;
            updateDisplay();
        }

        // Anti-paste System
        function disablePaste() {
            document.addEventListener('paste', function(e) {
                e.preventDefault();
                document.getElementById('shame-message').style.display = 'block';
                setTimeout(() => {
                    document.getElementById('shame-message').style.display = 'none';
                }, 3000);
                return false;
            });
        }

        // Reset Functions
        function resetSection(sectionIndex) {
            let section = document.getElementById('section-' + sectionIndex);
            
            // Reset all inputs
            section.querySelectorAll('input').forEach(input => {
                input.value = '';
                input.disabled = false;
            });
            
            // Reset all selects
            section.querySelectorAll('select').forEach(select => {
                select.selectedIndex = 0;
                select.disabled = false;
            });
            
            // Reset quiz options
            section.querySelectorAll('.quiz-option').forEach(option => {
                option.classList.remove('correct', 'incorrect', 'selected');
                option.disabled = false;
            });
            
            // Reset drag and drop
            section.querySelectorAll('.drop-zone').forEach(zone => {
                zone.classList.remove('correct', 'incorrect');
                zone.textContent = zone.getAttribute('data-accepts');
            });
            
            section.querySelectorAll('.draggable').forEach(draggable => {
                draggable.style.display = 'block';
            });
            
            // Reset specific section data
            if (sectionIndex === 2) {
                binaryBits = [0, 0, 0, 0, 0, 0, 0, 0];
                updateBinaryDisplay();
                document.querySelectorAll('#binary-counter .bit-box').forEach(box => {
                    box.classList.remove('active');
                    box.querySelector('.bit-value').textContent = '0';
                });
            }
            
            if (sectionIndex === 1) {
                denaryDigits = [0, 0, 0, 0];
                updateDenaryTotal();
                document.querySelectorAll('#denary-builder .bit-value').forEach(val => {
                    val.textContent = '0';
                });
            }
            
            if (sectionIndex === 7) {
                summaryAnswers = new Array(8).fill(false);
                updateSummaryScore();
            }
            
            // Clear canvases
            let canvases = section.querySelectorAll('canvas');
            canvases.forEach(canvas => {
                let ctx = canvas.getContext('2d');
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            });
            
            // Clear feedback
            section.querySelectorAll('[id*="feedback"]').forEach(feedback => {
                feedback.innerHTML = '';
            });
            
            // Clear mark schemes
            section.querySelectorAll('.mark-scheme').forEach(scheme => {
                scheme.classList.remove('show');
            });
            
            setupDragAndDrop();
        }

        // Handle window resize for canvases
        window.addEventListener('resize', function() {
            // Canvases will maintain aspect ratio automatically
        });

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                if (e.key === 'ArrowRight' && currentSection < 10) {
                    showSection(currentSection + 1);
                } else if (e.key === 'ArrowLeft' && currentSection > 0) {
                    showSection(currentSection - 1);
                }
            }
        });
    </script>
</body>
</html>