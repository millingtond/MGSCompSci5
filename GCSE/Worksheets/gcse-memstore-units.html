<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Representation: Bits, Bytes, and File Sizes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .section {
            background: white;
            padding: 30px;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: none;
        }

        .section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .nav-dots {
            display: flex;
            gap: 10px;
        }

        .nav-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ddd;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-dot.active {
            background: #667eea;
            transform: scale(1.2);
        }

        .nav-dot:hover {
            background: #764ba2;
        }

        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        button:hover {
            background: #764ba2;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .task {
            background: #f8f9fa;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .drag-container {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .draggable {
            background: #667eea;
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: move;
            transition: all 0.3s ease;
            user-select: none;
        }

        .draggable:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .draggable.dragging {
            opacity: 0.5;
        }

        .drop-zone {
            min-height: 50px;
            border: 2px dashed #ddd;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            background: #fafafa;
            transition: all 0.3s ease;
        }

        .drop-zone.drag-over {
            background: #e8eaf6;
            border-color: #667eea;
            transform: scale(1.02);
        }

        .drop-zone.correct {
            background: #e8f5e9;
            border-color: #4caf50;
        }

        .drop-zone.incorrect {
            background: #ffebee;
            border-color: #f44336;
        }

        input[type="text"], input[type="number"], select {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            width: 100%;
            max-width: 300px;
            transition: border-color 0.3s ease;
        }

        input[type="text"]:focus, input[type="number"]:focus {
            border-color: #667eea;
            outline: none;
        }

        .feedback {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            display: none;
        }

        .feedback.show {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .feedback.correct {
            background: #e8f5e9;
            color: #2e7d32;
            border: 1px solid #4caf50;
        }

        .feedback.incorrect {
            background: #ffebee;
            color: #c62828;
            border: 1px solid #f44336;
        }

        .feedback.hint {
            background: #fff3e0;
            color: #e65100;
            border: 1px solid #ff9800;
        }

        .xp-bar {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .xp-progress {
            width: 200px;
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 5px;
        }

        .xp-fill {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #8bc34a);
            width: 0%;
            transition: width 0.5s ease;
        }

        .achievement-popup {
            position: fixed;
            top: 100px;
            right: 20px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            display: none;
            z-index: 1001;
            animation: achievementSlide 0.5s ease;
        }

        @keyframes achievementSlide {
            from { transform: translateX(400px); }
            to { transform: translateX(0); }
        }

        .achievement-popup.show {
            display: block;
        }

        .canvas-container {
            border: 2px solid #ddd;
            border-radius: 5px;
            margin: 20px 0;
            background: white;
            position: relative;
        }

        #drawingCanvas {
            cursor: crosshair;
            display: block;
            touch-action: none;
        }

        .accessibility-controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 999;
        }

        .high-contrast {
            background: #000 !important;
            color: #fff !important;
        }

        .high-contrast .section,
        .high-contrast .navigation,
        .high-contrast .xp-bar,
        .high-contrast .accessibility-controls {
            background: #222 !important;
            color: #fff !important;
        }

        .high-contrast button {
            background: #fff !important;
            color: #000 !important;
        }

        .dyslexic-font {
            font-family: 'OpenDyslexic', Arial, sans-serif !important;
        }

        .quiz-option {
            display: block;
            width: 100%;
            text-align: left;
            margin: 10px 0;
            padding: 15px;
            background: #f5f5f5;
            border: 2px solid transparent;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            background: #e8eaf6;
            border-color: #667eea;
            transform: translateX(5px);
        }

        .quiz-option.selected {
            background: #e8eaf6;
            border-color: #667eea;
        }

        .binary-display {
            font-family: 'Courier New', monospace;
            font-size: 24px;
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: #263238;
            color: #4caf50;
            border-radius: 5px;
            letter-spacing: 5px;
        }

        .bit-toggle {
            display: inline-block;
            width: 40px;
            height: 40px;
            line-height: 40px;
            text-align: center;
            margin: 0 5px;
            background: #37474f;
            color: #4caf50;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }

        .bit-toggle:hover {
            background: #455a64;
            transform: scale(1.1);
        }

        .bit-toggle.on {
            background: #4caf50;
            color: white;
            box-shadow: 0 0 10px #4caf50;
        }

        .mark-scheme {
            background: #f5f5f5;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            border: 2px solid #ddd;
            display: none;
        }

        .mark-scheme.show {
            display: block;
        }

        .reset-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ff5722;
            padding: 8px 15px;
            font-size: 14px;
        }

        .reset-button:hover {
            background: #e64a19;
        }

        .feedback-button {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: #607d8b;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 998;
        }

        .feedback-button:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }

        .feedback-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .feedback-modal.show {
            display: flex;
        }

        .feedback-form {
            background: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }

        textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            resize: vertical;
            min-height: 100px;
        }

        .learning-outcome {
            background: #e3f2fd;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid #2196f3;
        }

        .shame-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #d32f2f;
            color: white;
            padding: 20px 40px;
            border-radius: 10px;
            font-size: 24px;
            font-weight: bold;
            display: none;
            z-index: 9999;
            animation: shake 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translate(-50%, -50%) rotate(0deg); }
            25% { transform: translate(-50%, -50%) rotate(-5deg); }
            75% { transform: translate(-50%, -50%) rotate(5deg); }
        }

        .extension-section {
            background: #f3e5f5;
            border-left: 4px solid #9c27b0;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .drag-container {
                flex-direction: column;
            }
            
            .xp-bar {
                position: static;
                margin-bottom: 20px;
            }
            
            .accessibility-controls {
                position: static;
                margin-top: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Data Representation: Bits, Bytes, and File Sizes</h1>
            <p>GCSE Computer Science - OCR J277</p>
        </div>

        <div class="xp-bar" role="status" aria-live="polite">
            <div>Level: <span id="level">0</span> | XP: <span id="xp">0</span>/100</div>
            <div class="xp-progress">
                <div class="xp-fill" id="xpFill"></div>
            </div>
        </div>

        <div class="navigation">
            <button id="prevBtn" onclick="changeSection(-1)" aria-label="Previous section">‚Üê Previous</button>
            <div class="nav-dots" role="tablist">
                <span class="nav-dot active" onclick="goToSection(0)" role="tab" aria-label="Section 1"></span>
                <span class="nav-dot" onclick="goToSection(1)" role="tab" aria-label="Section 2"></span>
                <span class="nav-dot" onclick="goToSection(2)" role="tab" aria-label="Section 3"></span>
                <span class="nav-dot" onclick="goToSection(3)" role="tab" aria-label="Section 4"></span>
                <span class="nav-dot" onclick="goToSection(4)" role="tab" aria-label="Section 5"></span>
                <span class="nav-dot" onclick="goToSection(5)" role="tab" aria-label="Section 6"></span>
                <span class="nav-dot" onclick="goToSection(6)" role="tab" aria-label="Section 7"></span>
                <span class="nav-dot" onclick="goToSection(7)" role="tab" aria-label="Section 8"></span>
                <span class="nav-dot" onclick="goToSection(8)" role="tab" aria-label="Section 9"></span>
            </div>
            <button id="nextBtn" onclick="changeSection(1)" aria-label="Next section">Next ‚Üí</button>
        </div>

        <!-- Section 0: Starter Activity -->
        <div class="section active" id="section0">
            <button class="reset-button" onclick="resetSection(0)">Reset</button>
            <h2>Starter Activity: Understanding Binary</h2>
            <div class="learning-outcome">
                <strong>Learning Outcome:</strong> Understand how binary digits (bits) work and why computers use them.
            </div>
            
            <div class="task">
                <h3>Interactive Binary Counter</h3>
                <p>Click on each bit to toggle between 0 and 1. Watch how the decimal value changes!</p>
                
                <div class="binary-display">
                    <span class="bit-toggle" id="bit7" onclick="toggleBit(7)">0</span>
                    <span class="bit-toggle" id="bit6" onclick="toggleBit(6)">0</span>
                    <span class="bit-toggle" id="bit5" onclick="toggleBit(5)">0</span>
                    <span class="bit-toggle" id="bit4" onclick="toggleBit(4)">0</span>
                    <span class="bit-toggle" id="bit3" onclick="toggleBit(3)">0</span>
                    <span class="bit-toggle" id="bit2" onclick="toggleBit(2)">0</span>
                    <span class="bit-toggle" id="bit1" onclick="toggleBit(1)">0</span>
                    <span class="bit-toggle" id="bit0" onclick="toggleBit(0)">0</span>
                </div>
                
                <div style="text-align: center; font-size: 24px; margin: 20px 0;">
                    Decimal Value: <span id="decimalValue" style="color: #667eea; font-weight: bold;">0</span>
                </div>
                
                <p style="text-align: center; margin-top: 10px;">
                    <small>Each position represents: 128, 64, 32, 16, 8, 4, 2, 1</small>
                </p>
            </div>

            <div class="task">
                <h3>Quick Check: Previous Knowledge</h3>
                <p>How many different values can be represented with 8 bits?</p>
                <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;">
                    <button class="quiz-option" onclick="checkStarterAnswer(this, '128')">128</button>
                    <button class="quiz-option" onclick="checkStarterAnswer(this, '256')">256</button>
                    <button class="quiz-option" onclick="checkStarterAnswer(this, '512')">512</button>
                    <button class="quiz-option" onclick="checkStarterAnswer(this, '1024')">1024</button>
                </div>
                <div class="feedback" id="starterFeedback"></div>
            </div>
        </div>

        <!-- Section 1: Understanding Binary Units -->
        <div class="section" id="section1">
            <button class="reset-button" onclick="resetSection(1)">Reset</button>
            <h2>Section 1: Understanding Binary Units</h2>
            <div class="learning-outcome">
                <strong>Learning Outcome:</strong> Define and differentiate between binary units from bit to petabyte.
            </div>

            <div class="task">
                <h3>Match the Units</h3>
                <p>Drag each unit to its correct definition:</p>
                
                <div class="drag-container">
                    <div class="draggable" draggable="true" data-answer="bit">bit</div>
                    <div class="draggable" draggable="true" data-answer="nibble">nibble</div>
                    <div class="draggable" draggable="true" data-answer="byte">Byte</div>
                    <div class="draggable" draggable="true" data-answer="kilobyte">Kilobyte</div>
                    <div class="draggable" draggable="true" data-answer="megabyte">Megabyte</div>
                </div>

                <div style="margin-top: 20px;">
                    <p><strong>A single binary digit (0 or 1):</strong></p>
                    <div class="drop-zone" data-correct="bit"></div>
                    
                    <p><strong>4 binary digits (half a byte):</strong></p>
                    <div class="drop-zone" data-correct="nibble"></div>
                    
                    <p><strong>8 binary digits (can hold 256 values):</strong></p>
                    <div class="drop-zone" data-correct="byte"></div>
                    
                    <p><strong>1000 bytes:</strong></p>
                    <div class="drop-zone" data-correct="kilobyte"></div>
                    
                    <p><strong>1000 kilobytes (1 million bytes):</strong></p>
                    <div class="drop-zone" data-correct="megabyte"></div>
                </div>
                
                <button onclick="checkDragAndDrop()" style="margin-top: 20px;">Check Answers</button>
                <div class="feedback" id="dragFeedback"></div>
            </div>

            <div class="task">
                <h3>Memory Trick Activity</h3>
                <p>Complete the memory trick for remembering file size order:</p>
                <div style="line-height: 2;">
                    <strong>B</strong>ut - <select id="mem1" style="width: 150px;">
                        <option value="">Choose...</option>
                        <option value="bytes">Bytes</option>
                        <option value="bits">Bits</option>
                        <option value="binary">Binary</option>
                    </select><br>
                    <strong>N</strong>ow - <select id="mem2" style="width: 150px;">
                        <option value="">Choose...</option>
                        <option value="numbers">Numbers</option>
                        <option value="nibbles">Nibbles</option>
                        <option value="nodes">Nodes</option>
                    </select><br>
                    <strong>B</strong>urger - <select id="mem3" style="width: 150px;">
                        <option value="">Choose...</option>
                        <option value="bits">Bits</option>
                        <option value="bytes">Bytes</option>
                        <option value="binary">Binary</option>
                    </select><br>
                    <strong>K</strong>ing - <select id="mem4" style="width: 150px;">
                        <option value="">Choose...</option>
                        <option value="kilobytes">Kilobytes</option>
                        <option value="kilobits">Kilobits</option>
                        <option value="keys">Keys</option>
                    </select><br>
                    <strong>M</strong>akes - <select id="mem5" style="width: 150px;">
                        <option value="">Choose...</option>
                        <option value="memory">Memory</option>
                        <option value="megabytes">Megabytes</option>
                        <option value="megabits">Megabits</option>
                    </select>
                </div>
                <button onclick="checkMemoryTrick()" style="margin-top: 20px;">Check Memory Trick</button>
                <div class="feedback" id="memoryFeedback"></div>
            </div>
        </div>

        <!-- Section 2: Why Binary? -->
        <div class="section" id="section2">
            <button class="reset-button" onclick="resetSection(2)">Reset</button>
            <h2>Section 2: Why Binary?</h2>
            <div class="learning-outcome">
                <strong>Learning Outcome:</strong> Explain why computers use binary format for data storage.
            </div>

            <div class="task">
                <h3>Circuit Simulation</h3>
                <p>Click the switches to see how binary represents electrical states:</p>
                
                <div style="text-align: center; margin: 20px 0;">
                    <svg width="400" height="200" id="circuitSvg" style="border: 1px solid #ddd; border-radius: 5px;">
                        <rect x="50" y="80" width="60" height="40" fill="#666" rx="5" id="switch1" style="cursor: pointer;"/>
                        <text x="80" y="105" text-anchor="middle" fill="white" style="pointer-events: none;">OFF</text>
                        
                        <rect x="150" y="80" width="60" height="40" fill="#666" rx="5" id="switch2" style="cursor: pointer;"/>
                        <text x="180" y="105" text-anchor="middle" fill="white" style="pointer-events: none;">OFF</text>
                        
                        <rect x="250" y="80" width="60" height="40" fill="#666" rx="5" id="switch3" style="cursor: pointer;"/>
                        <text x="280" y="105" text-anchor="middle" fill="white" style="pointer-events: none;">OFF</text>
                        
                        <text x="80" y="150" text-anchor="middle" font-size="24" id="bit1">0</text>
                        <text x="180" y="150" text-anchor="middle" font-size="24" id="bit2">0</text>
                        <text x="280" y="150" text-anchor="middle" font-size="24" id="bit3">0</text>
                        
                        <text x="200" y="40" text-anchor="middle" font-size="18" font-weight="bold">Electrical Circuit</text>
                    </svg>
                </div>
                
                <p style="text-align: center;">Binary Value: <span id="circuitBinary" style="font-family: monospace; font-size: 20px;">000</span></p>
            </div>

            <div class="task">
                <h3>Understanding Binary Advantages</h3>
                <p>Fill in the blanks to complete the explanation of why computers use binary:</p>
                
                <p>Circuits only need to check for <select id="blank1" style="width: 120px;">
                    <option value="">Choose...</option>
                    <option value="three">three</option>
                    <option value="two">two</option>
                    <option value="four">four</option>
                    <option value="ten">ten</option>
                </select> states.</p>
                
                <p>This represents electricity <select id="blank2" style="width: 150px;">
                    <option value="">Choose...</option>
                    <option value="flowing slowly">flowing slowly</option>
                    <option value="flowing or not flowing">flowing or not flowing</option>
                    <option value="flowing backwards">flowing backwards</option>
                    <option value="flowing quickly">flowing quickly</option>
                </select>.</p>
                
                <p>These states can be described as on or off, or <select id="blank3" style="width: 120px;">
                    <option value="">Choose...</option>
                    <option value="2 and 3">2 and 3</option>
                    <option value="A and B">A and B</option>
                    <option value="1 and 0">1 and 0</option>
                    <option value="yes and no">yes and no</option>
                </select>.</p>
                
                <p>This results in more <select id="blank4" style="width: 150px;">
                    <option value="">Choose...</option>
                    <option value="expensive">expensive</option>
                    <option value="reliable">reliable</option>
                    <option value="complicated">complicated</option>
                    <option value="colorful">colorful</option>
                </select> circuits.</p>
                
                <button onclick="checkBinaryBlanks()" style="margin-top: 20px;">Check Answers</button>
                <div class="feedback" id="binaryBlanksFeedback"></div>
            </div>
        </div>

        <!-- Section 3: Unit Conversions -->
        <div class="section" id="section3">
            <button class="reset-button" onclick="resetSection(3)">Reset</button>
            <h2>Section 3: Unit Conversions</h2>
            <div class="learning-outcome">
                <strong>Learning Outcome:</strong> Convert between different units of data storage.
            </div>

            <div class="task">
                <h3>Conversion Practice</h3>
                <p>Complete these conversions:</p>
                
                <div style="margin: 20px 0;">
                    <p>1. How many bits in 8 bytes? <input type="number" id="conv1" style="width: 100px;"> bits</p>
                    <p>2. How many KB in 0.5MB? <input type="number" id="conv2" style="width: 100px;"> KB</p>
                    <p>3. How many GB in 2TB? <input type="number" id="conv3" style="width: 100px;"> GB</p>
                    <p>4. How many bits in 1KB? <input type="number" id="conv4" style="width: 100px;"> bits</p>
                </div>
                
                <button onclick="checkConversions()">Check Conversions</button>
                <div class="feedback" id="conversionFeedback"></div>
            </div>

            <div class="task">
                <h3>Calculation Workspace</h3>
                <p>Use this canvas to work out your calculations:</p>
                
                <div class="canvas-container">
                    <canvas id="drawingCanvas" width="600" height="300"></canvas>
                    <button onclick="clearCanvas()" style="position: absolute; top: 10px; right: 10px;">Clear Canvas</button>
                </div>
            </div>
        </div>

        <!-- Section 4: File Size Calculations -->
        <div class="section" id="section4">
            <button class="reset-button" onclick="resetSection(4)">Reset</button>
            <h2>Section 4: File Size Calculations</h2>
            <div class="learning-outcome">
                <strong>Learning Outcome:</strong> Calculate file sizes for images, sound, and text files.
            </div>

            <div class="task">
                <h3>Image File Size Calculator</h3>
                <p>Calculate the file size of an image step by step:</p>
                
                <div style="background: #f5f5f5; padding: 20px; border-radius: 5px; margin: 20px 0;">
                    <p><strong>Image specifications:</strong></p>
                    <p>Width: <input type="number" id="imgWidth" value="800" style="width: 100px;"> pixels</p>
                    <p>Height: <input type="number" id="imgHeight" value="600" style="width: 100px;"> pixels</p>
                    <p>Color depth: <select id="colorDepth" style="width: 150px;">
                        <option value="1">1 bit (2 colors)</option>
                        <option value="8">8 bits (256 colors)</option>
                        <option value="24" selected>24 bits (16.7M colors)</option>
                        <option value="32">32 bits (with transparency)</option>
                    </select></p>
                    
                    <button onclick="calculateImageSize()" style="margin-top: 10px;">Calculate Size</button>
                    
                    <div id="imageCalcSteps" style="margin-top: 20px; display: none;">
                        <p><strong>Step 1:</strong> Total pixels = <span id="totalPixels"></span></p>
                        <p><strong>Step 2:</strong> Bits per pixel = <span id="bitsPerPixel"></span></p>
                        <p><strong>Step 3:</strong> Total bits = <span id="totalBits"></span></p>
                        <p><strong>Step 4:</strong> File size = <span id="imageFileSize"></span></p>
                    </div>
                </div>
            </div>

            <div class="task">
                <h3>Sound File Size Practice</h3>
                <p>A sound file has:</p>
                <ul>
                    <li>Sample rate: 44,100 Hz</li>
                    <li>Resolution: 16 bits</li>
                    <li>Duration: 3 seconds</li>
                </ul>
                <p>What is the file size in bits?</p>
                <input type="text" id="soundAnswer" placeholder="Enter your answer">
                <button onclick="checkSoundAnswer()">Check Answer</button>
                <div class="feedback" id="soundFeedback"></div>
            </div>

            <div class="task">
                <h3>Text File Size</h3>
                <p>If each character uses 8 bits, how many bits would a text file with 1000 characters use?</p>
                <input type="number" id="textAnswer" style="width: 150px;">
                <button onclick="checkTextAnswer()">Check Answer</button>
                <div class="feedback" id="textFeedback"></div>
            </div>
        </div>

        <!-- Section 5: Practice Exam Questions -->
        <div class="section" id="section5">
            <button class="reset-button" onclick="resetSection(5)">Reset</button>
            <h2>Section 5: Practice Exam Questions</h2>
            <div class="learning-outcome">
                <strong>Learning Outcome:</strong> Apply knowledge to exam-style questions.
            </div>

            <div class="task">
                <h3>Question 1 (3 marks)</h3>
                <p>A computer stores a black and white image with dimensions 1024 √ó 768 pixels. Each pixel uses 1 bit.</p>
                <p>Calculate the file size in KB. Show your working.</p>
                
                <div class="canvas-container" style="margin: 20px 0;">
                    <canvas id="examCanvas1" width="600" height="200"></canvas>
                    <button onclick="clearExamCanvas(1)" style="position: absolute; top: 10px; right: 10px;">Clear</button>
                </div>
                
                <textarea id="exam1Answer" placeholder="Write your answer here..." style="margin: 10px 0;"></textarea>
                
                <p>Predicted marks: <input type="number" id="exam1Marks" min="0" max="3" style="width: 60px;"> / 3</p>
                
                <button onclick="showMarkScheme(1)">Show Mark Scheme</button>
                
                <div class="mark-scheme" id="markScheme1">
                    <h4>Mark Scheme:</h4>
                    <ul>
                        <li>1 mark: Calculating total pixels (1024 √ó 768 = 786,432)</li>
                        <li>1 mark: Converting to bytes (786,432 √∑ 8 = 98,304 bytes)</li>
                        <li>1 mark: Converting to KB (98,304 √∑ 1000 = 98.304 KB or 96 KB if using 1024)</li>
                    </ul>
                </div>
            </div>

            <div class="task">
                <h3>Question 2 (4 marks)</h3>
                <p>Explain why computers use binary to represent data. Include at least two advantages.</p>
                
                <textarea id="exam2Answer" placeholder="Write your answer here..." style="margin: 10px 0; min-height: 150px;"></textarea>
                
                <p>Predicted marks: <input type="number" id="exam2Marks" min="0" max="4" style="width: 60px;"> / 4</p>
                
                <button onclick="showMarkScheme(2)">Show Mark Scheme</button>
                
                <div class="mark-scheme" id="markScheme2">
                    <h4>Mark Scheme:</h4>
                    <ul>
                        <li>1 mark: Mentioning two states (on/off, 1/0)</li>
                        <li>1 mark: Electrical circuits explanation</li>
                        <li>1 mark: Reliability advantage</li>
                        <li>1 mark: Simplicity of checking two states</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Section 6: Summary Quiz -->
        <div class="section" id="section6">
            <button class="reset-button" onclick="resetSection(6)">Reset</button>
            <h2>Summary Quiz</h2>
            <p>Test your understanding with these questions:</p>

            <div class="task">
                <h3>Question 1</h3>
                <p>How many bits are in a nibble?</p>
                <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q1', '2')">2</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q1', '4')">4</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q1', '8')">8</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q1', '16')">16</button>
                </div>
            </div>

            <div class="task">
                <h3>Question 2</h3>
                <p>What is the correct abbreviation for Megabyte?</p>
                <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q2', 'Mb')">Mb</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q2', 'MB')">MB</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q2', 'mb')">mb</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q2', 'mB')">mB</button>
                </div>
            </div>

            <div class="task">
                <h3>Question 3</h3>
                <p>How many different values can be stored in a byte?</p>
                <input type="number" id="summaryQ3" style="width: 100px;">
            </div>

            <div class="task">
                <h3>Question 4</h3>
                <p>True or False: Computers use binary because it's easier for humans to understand.</p>
                <div style="display: flex; gap: 20px;">
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q4', 'true')">True</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q4', 'false')">False</button>
                </div>
            </div>

            <div class="task">
                <h3>Question 5</h3>
                <p>How many gigabytes are in 5 terabytes?</p>
                <input type="number" id="summaryQ5" style="width: 100px;">
            </div>

            <div class="task">
                <h3>Question 6</h3>
                <p>Which formula is used to calculate image file size?</p>
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q6', 'a')">Width + Height √ó Color Depth</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q6', 'b')">Width √ó Height √ó Color Depth</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q6', 'c')">Width √ó Height √∑ Color Depth</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q6', 'd')">Width + Height + Color Depth</button>
                </div>
            </div>

            <div class="task">
                <h3>Question 7</h3>
                <p>What comes after Terabyte in the file size order?</p>
                <input type="text" id="summaryQ7" placeholder="Type your answer">
            </div>

            <div class="task">
                <h3>Question 8</h3>
                <p>How many bits are needed to represent the number 255 in binary?</p>
                <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q8', '7')">7 bits</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q8', '8')">8 bits</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q8', '9')">9 bits</button>
                    <button class="quiz-option" onclick="selectQuizAnswer(this, 'q8', '10')">10 bits</button>
                </div>
            </div>

            <button onclick="checkSummaryQuiz()" style="margin-top: 30px; font-size: 18px;">Submit Quiz</button>
            <div class="feedback" id="summaryFeedback"></div>
        </div>

        <!-- Section 7: Extension Activities -->
        <div class="section extension-section" id="section7">
            <button class="reset-button" onclick="resetSection(7)">Reset</button>
            <h2>Extension Activities</h2>
            <p>Challenge yourself with these advanced topics!</p>

            <div class="task">
                <h3>Binary Addition</h3>
                <p>Try adding these binary numbers:</p>
                <div style="font-family: monospace; font-size: 20px; text-align: center;">
                    <p>  1011</p>
                    <p>+ 1101</p>
                    <p>------</p>
                    <input type="text" id="binaryAddAnswer" style="width: 100px; font-family: monospace; font-size: 20px; text-align: center;">
                </div>
                <button onclick="checkBinaryAddition()">Check Answer</button>
                <div class="feedback" id="binaryAddFeedback"></div>
            </div>

            <div class="task">
                <h3>Hexadecimal Challenge</h3>
                <p>Convert the hexadecimal number <strong>FF</strong> to decimal:</p>
                <input type="number" id="hexAnswer" style="width: 100px;">
                <button onclick="checkHexAnswer()">Check Answer</button>
                <div class="feedback" id="hexFeedback"></div>
            </div>

            <div class="task">
                <h3>Research Task</h3>
                <p>Research and explain: What is the difference between KB (kilobyte) and KiB (kibibyte)?</p>
                <textarea id="researchAnswer" placeholder="Write your research findings here..." style="min-height: 100px;"></textarea>
                <button onclick="saveResearch()">Save Research</button>
                <div class="feedback" id="researchFeedback"></div>
            </div>
        </div>

        <!-- Section 8: Videos -->
        <div class="section" id="section8">
            <h2>Educational Videos</h2>
            <div class="task" style="text-align: center; padding: 40px;">
                <p style="font-size: 18px; color: #666;">
                    <i>Video content will be added here</i>
                </p>
                <p style="margin-top: 20px;">Recommended topics:</p>
                <ul style="text-align: left; display: inline-block;">
                    <li>Binary number system explained</li>
                    <li>How computer memory works</li>
                    <li>File compression techniques</li>
                    <li>Real-world applications of binary</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="achievement-popup" id="achievementPopup">
        <h3>Achievement Unlocked!</h3>
        <p id="achievementText"></p>
    </div>

    <div class="accessibility-controls">
        <button onclick="toggleHighContrast()" aria-label="Toggle high contrast mode">High Contrast</button>
        <button onclick="toggleDyslexicFont()" aria-label="Toggle dyslexic-friendly font">Dyslexic Font</button>
        <button onclick="changeFontSize(1)" aria-label="Increase font size">A+</button>
        <button onclick="changeFontSize(-1)" aria-label="Decrease font size">A-</button>
    </div>

    <button class="feedback-button" onclick="openFeedbackModal()" aria-label="Send feedback">
        <span style="font-size: 24px;">üí¨</span>
    </button>

    <div class="feedback-modal" id="feedbackModal">
        <div class="feedback-form">
            <h3>Send Feedback</h3>
            <p>Found a bug or have a suggestion? Let us know!</p>
            <textarea id="feedbackText" placeholder="Describe the issue or suggestion..."></textarea>
            <div style="margin-top: 20px; display: flex; gap: 10px;">
                <button onclick="sendFeedback()">Send</button>
                <button onclick="closeFeedbackModal()" style="background: #666;">Cancel</button>
            </div>
        </div>
    </div>

    <div class="shame-message" id="shameMessage">
        üö´ No pasting allowed! üö´
    </div>

    <script>
        // Global variables
        let currentSection = 0;
        let xp = 0;
        let level = 0;
        let completedTasks = new Set();
        let quizAnswers = {};
        let binaryBits = [0, 0, 0, 0, 0, 0, 0, 0];
        let canvasDrawing = false;
        let lastX = 0;
        let lastY = 0;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeDragAndDrop();
            initializeCanvas('drawingCanvas');
            initializeCanvas('examCanvas1');
            initializeCircuitSimulation();
            preventPaste();
            updateXPDisplay();
        });

        // Section navigation
        function changeSection(direction) {
            const sections = document.querySelectorAll('.section');
            const totalSections = sections.length;
            
            sections[currentSection].classList.remove('active');
            currentSection = Math.max(0, Math.min(currentSection + direction, totalSections - 1));
            sections[currentSection].classList.add('active');
            
            updateNavigation();
        }

        function goToSection(index) {
            const sections = document.querySelectorAll('.section');
            sections[currentSection].classList.remove('active');
            currentSection = index;
            sections[currentSection].classList.add('active');
            updateNavigation();
        }

        function updateNavigation() {
            const dots = document.querySelectorAll('.nav-dot');
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentSection);
            });
            
            document.getElementById('prevBtn').disabled = currentSection === 0;
            document.getElementById('nextBtn').disabled = currentSection === document.querySelectorAll('.section').length - 1;
        }

        // XP and Achievement System
        function addXP(points, taskId) {
            if (completedTasks.has(taskId)) return;
            
            completedTasks.add(taskId);
            xp += points;
            
            if (xp >= 100) {
                level++;
                xp = xp % 100;
                
                if (level <= 5) {
                    showAchievement('Level Up!', 'You reached Level ' + level + '!');
                }
            }
            
            updateXPDisplay();
            
            // Check for special achievements
            if (completedTasks.size === 5) {
                showAchievement('Getting Started!', 'Completed 5 tasks!');
            }
            if (completedTasks.size === 10) {
                showAchievement('Half Way There!', 'Completed 10 tasks!');
            }
        }

        function updateXPDisplay() {
            document.getElementById('xp').textContent = xp;
            document.getElementById('level').textContent = level;
            document.getElementById('xpFill').style.width = xp + '%';
        }

        function showAchievement(title, description) {
            const popup = document.getElementById('achievementPopup');
            document.getElementById('achievementText').textContent = description;
            popup.classList.add('show');
            
            setTimeout(() => {
                popup.classList.remove('show');
            }, 3000);
        }

        // Binary Toggle (Starter Activity)
        function toggleBit(position) {
            const bit = document.getElementById('bit' + position);
            binaryBits[position] = binaryBits[position] === 0 ? 1 : 0;
            bit.textContent = binaryBits[position];
            bit.classList.toggle('on', binaryBits[position] === 1);
            
            updateDecimalValue();
        }

        function updateDecimalValue() {
            let decimal = 0;
            for (let i = 0; i < 8; i++) {
                decimal += binaryBits[i] * Math.pow(2, 7 - i);
            }
            document.getElementById('decimalValue').textContent = decimal;
            
            if (!completedTasks.has('binary-toggle') && decimal === 255) {
                addXP(10, 'binary-toggle');
                showAchievement('Binary Master!', 'You made 11111111!');
            }
        }

        function checkStarterAnswer(button, answer) {
            const buttons = button.parentElement.querySelectorAll('.quiz-option');
            buttons.forEach(btn => btn.classList.remove('selected'));
            button.classList.add('selected');
            
            const feedback = document.getElementById('starterFeedback');
            if (answer === '256') {
                feedback.textContent = 'Correct! 8 bits can represent 2^8 = 256 different values (0-255).';
                feedback.className = 'feedback correct show';
                addXP(15, 'starter-quiz');
            } else {
                feedback.textContent = 'Not quite. Remember: each bit has 2 possibilities, so 8 bits = 2^8.';
                feedback.className = 'feedback incorrect show';
            }
        }

        // Drag and Drop functionality
        function initializeDragAndDrop() {
            const draggables = document.querySelectorAll('.draggable');
            const dropZones = document.querySelectorAll('.drop-zone');
            
            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', handleDragStart);
                draggable.addEventListener('dragend', handleDragEnd);
            });
            
            dropZones.forEach(zone => {
                zone.addEventListener('dragover', handleDragOver);
                zone.addEventListener('drop', handleDrop);
                zone.addEventListener('dragleave', handleDragLeave);
            });
        }

        function handleDragStart(e) {
            e.target.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/html', e.target.innerHTML);
            e.dataTransfer.setData('answer', e.target.dataset.answer);
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
        }

        function handleDragOver(e) {
            if (e.preventDefault) {
                e.preventDefault();
            }
            e.dataTransfer.dropEffect = 'move';
            e.target.classList.add('drag-over');
            return false;
        }

        function handleDragLeave(e) {
            e.target.classList.remove('drag-over');
        }

        function handleDrop(e) {
            if (e.stopPropagation) {
                e.stopPropagation();
            }
            e.preventDefault();
            
            const answer = e.dataTransfer.getData('answer');
            e.target.innerHTML = e.dataTransfer.getData('text/html');
            e.target.dataset.dropped = answer;
            e.target.classList.remove('drag-over');
            
            return false;
        }

        function checkDragAndDrop() {
            const dropZones = document.querySelectorAll('.drop-zone');
            let correct = 0;
            
            dropZones.forEach(zone => {
                if (zone.dataset.dropped === zone.dataset.correct) {
                    zone.classList.add('correct');
                    zone.classList.remove('incorrect');
                    correct++;
                } else if (zone.dataset.dropped) {
                    zone.classList.add('incorrect');
                    zone.classList.remove('correct');
                }
            });
            
            const feedback = document.getElementById('dragFeedback');
            if (correct === dropZones.length) {
                feedback.textContent = 'Perfect! All units matched correctly!';
                feedback.className = 'feedback correct show';
                addXP(20, 'drag-drop-units');
            } else {
                feedback.textContent = correct + ' out of ' + dropZones.length + ' correct. Try again!';
                feedback.className = 'feedback incorrect show';
            }
        }

        // Memory Trick Check
        function checkMemoryTrick() {
            const answers = {
                mem1: 'bits',
                mem2: 'nibbles',
                mem3: 'bytes',
                mem4: 'kilobytes',
                mem5: 'megabytes'
            };
            
            let correct = 0;
            for (let key in answers) {
                if (document.getElementById(key).value === answers[key]) {
                    correct++;
                }
            }
            
            const feedback = document.getElementById('memoryFeedback');
            if (correct === 5) {
                feedback.textContent = 'Excellent! You\'ve memorized the order perfectly!';
                feedback.className = 'feedback correct show';
                addXP(15, 'memory-trick');
            } else {
                feedback.textContent = correct + ' out of 5 correct. Remember: But Now Burger King Makes...';
                feedback.className = 'feedback incorrect show';
            }
        }

        // Circuit Simulation
        function initializeCircuitSimulation() {
            const switches = ['switch1', 'switch2', 'switch3'];
            const bits = [0, 0, 0];
            
            switches.forEach((switchId, index) => {
                document.getElementById(switchId).addEventListener('click', function() {
                    bits[index] = bits[index] === 0 ? 1 : 0;
                    
                    const switchElement = document.getElementById(switchId);
                    const textElement = switchElement.nextElementSibling;
                    
                    if (bits[index] === 1) {
                        switchElement.setAttribute('fill', '#4caf50');
                        textElement.textContent = 'ON';
                    } else {
                        switchElement.setAttribute('fill', '#666');
                        textElement.textContent = 'OFF';
                    }
                    
                    document.getElementById('bit' + (index + 1)).textContent = bits[index];
                    document.getElementById('circuitBinary').textContent = bits.join('');
                    
                    if (!completedTasks.has('circuit-sim') && bits.join('') === '111') {
                        addXP(10, 'circuit-sim');
                    }
                });
            });
        }

        // Binary Understanding Check
        function checkBinaryBlanks() {
            const correct = {
                blank1: 'two',
                blank2: 'flowing or not flowing',
                blank3: '1 and 0',
                blank4: 'reliable'
            };
            
            let score = 0;
            for (let key in correct) {
                if (document.getElementById(key).value === correct[key]) {
                    score++;
                }
            }
            
            const feedback = document.getElementById('binaryBlanksFeedback');
            if (score === 4) {
                feedback.textContent = 'Perfect! You understand why computers use binary.';
                feedback.className = 'feedback correct show';
                addXP(20, 'binary-understanding');
            } else {
                feedback.textContent = score + ' out of 4 correct. Think about electrical circuits and reliability.';
                feedback.className = 'feedback incorrect show';
            }
        }

        // Unit Conversions Check
        function checkConversions() {
            const answers = {
                conv1: 64,
                conv2: 500,
                conv3: 2000,
                conv4: 8000
            };
            
            let correct = 0;
            for (let key in answers) {
                const userAnswer = parseInt(document.getElementById(key).value);
                if (userAnswer === answers[key]) {
                    correct++;
                }
            }
            
            const feedback = document.getElementById('conversionFeedback');
            if (correct === 4) {
                feedback.textContent = 'Excellent conversion skills! All answers correct!';
                feedback.className = 'feedback correct show';
                addXP(25, 'unit-conversions');
            } else {
                feedback.textContent = correct + ' out of 4 correct. Remember: 8 bits = 1 byte, 1000 bytes = 1KB';
                feedback.className = 'feedback incorrect show';
            }
        }

        // Canvas functionality
        function initializeCanvas(canvasId) {
            const canvas = document.getElementById(canvasId);
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            
            // Mouse events
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            // Touch events
            canvas.addEventListener('touchstart', handleTouch);
            canvas.addEventListener('touchmove', handleTouch);
            canvas.addEventListener('touchend', stopDrawing);
            
            function startDrawing(e) {
                canvasDrawing = true;
                const rect = canvas.getBoundingClientRect();
                lastX = e.clientX - rect.left;
                lastY = e.clientY - rect.top;
            }
            
            function draw(e) {
                if (!canvasDrawing) return;
                
                const rect = canvas.getBoundingClientRect();
                const currentX = e.clientX - rect.left;
                const currentY = e.clientY - rect.top;
                
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(currentX, currentY);
                ctx.strokeStyle = '#667eea';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                lastX = currentX;
                lastY = currentY;
            }
            
            function handleTouch(e) {
                e.preventDefault();
                const touch = e.touches[0];
                const mouseEvent = new MouseEvent(e.type === 'touchstart' ? 'mousedown' : e.type === 'touchmove' ? 'mousemove' : 'mouseup', {
                    clientX: touch.clientX,
                    clientY: touch.clientY
                });
                canvas.dispatchEvent(mouseEvent);
            }
            
            function stopDrawing() {
                canvasDrawing = false;
            }
        }

        function clearCanvas() {
            const canvas = document.getElementById('drawingCanvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        function clearExamCanvas(num) {
            const canvas = document.getElementById('examCanvas' + num);
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        // Image Size Calculator
        function calculateImageSize() {
            const width = parseInt(document.getElementById('imgWidth').value);
            const height = parseInt(document.getElementById('imgHeight').value);
            const depth = parseInt(document.getElementById('colorDepth').value);
            
            const totalPixels = width * height;
            const totalBits = totalPixels * depth;
            const totalBytes = totalBits / 8;
            const totalKB = totalBytes / 1000;
            const totalMB = totalKB / 1000;
            
            document.getElementById('totalPixels').textContent = totalPixels.toLocaleString();
            document.getElementById('bitsPerPixel').textContent = depth;
            document.getElementById('totalBits').textContent = totalBits.toLocaleString();
            
            let sizeText = totalBytes.toLocaleString() + ' bytes';
            if (totalKB > 1) {
                sizeText += ' = ' + totalKB.toFixed(2) + ' KB';
            }
            if (totalMB > 1) {
                sizeText += ' = ' + totalMB.toFixed(2) + ' MB';
            }
            
            document.getElementById('imageFileSize').textContent = sizeText;
            document.getElementById('imageCalcSteps').style.display = 'block';
            
            addXP(15, 'image-calculator');
        }

        // Sound File Check
        function checkSoundAnswer() {
            const answer = document.getElementById('soundAnswer').value.replace(/,/g, '').trim();
            const correct = 44100 * 16 * 3;
            
            const feedback = document.getElementById('soundFeedback');
            if (parseInt(answer) === correct) {
                feedback.textContent = 'Correct! 44,100 √ó 16 √ó 3 = 2,116,800 bits';
                feedback.className = 'feedback correct show';
                addXP(20, 'sound-calculation');
            } else {
                feedback.textContent = 'Not quite. Use the formula: sample rate √ó resolution √ó seconds';
                feedback.className = 'feedback hint show';
            }
        }

        // Text File Check
        function checkTextAnswer() {
            const answer = parseInt(document.getElementById('textAnswer').value);
            const correct = 8000;
            
            const feedback = document.getElementById('textFeedback');
            if (answer === correct) {
                feedback.textContent = 'Correct! 1000 characters √ó 8 bits = 8000 bits';
                feedback.className = 'feedback correct show';
                addXP(15, 'text-calculation');
            } else {
                feedback.textContent = 'Try again. Each character uses 8 bits.';
                feedback.className = 'feedback incorrect show';
            }
        }

        // Mark Scheme functionality
        function showMarkScheme(questionNum) {
            const answerField = document.getElementById('exam' + questionNum + 'Answer');
            const answerLength = answerField.value.trim().length;
            
            if (answerLength < 50) {
                alert('Please write a more detailed answer before viewing the mark scheme.');
                return;
            }
            
            const markScheme = document.getElementById('markScheme' + questionNum);
            markScheme.classList.add('show');
            
            const marks = parseInt(document.getElementById('exam' + questionNum + 'Marks').value) || 0;
            addXP(marks * 5, 'exam-q' + questionNum);
        }

        // Summary Quiz
        function selectQuizAnswer(button, question, answer) {
            quizAnswers[question] = answer;
            
            const buttons = button.parentElement.querySelectorAll('.quiz-option');
            buttons.forEach(btn => btn.classList.remove('selected'));
            button.classList.add('selected');
        }

        function checkSummaryQuiz() {
            const correctAnswers = {
                q1: '4',
                q2: 'MB',
                q3: 256,
                q4: 'false',
                q5: 5000,
                q6: 'b',
                q7: ['petabyte', 'Petabyte', 'PB'],
                q8: '8'
            };
            
            let score = 0;
            
            // Check multiple choice answers
            for (let q in quizAnswers) {
                if (quizAnswers[q] === correctAnswers[q]) {
                    score++;
                }
            }
            
            // Check text inputs
            if (parseInt(document.getElementById('summaryQ3').value) === correctAnswers.q3) score++;
            if (parseInt(document.getElementById('summaryQ5').value) === correctAnswers.q5) score++;
            
            const q7Answer = document.getElementById('summaryQ7').value.trim();
            if (correctAnswers.q7.includes(q7Answer)) score++;
            
            const feedback = document.getElementById('summaryFeedback');
            const percentage = Math.round((score / 8) * 100);
            
            feedback.innerHTML = '<h3>Quiz Results: ' + score + '/8 (' + percentage + '%)</h3>';
            
            if (percentage >= 80) {
                feedback.innerHTML += '<p>Excellent work! You have a strong understanding of data representation.</p>';
                feedback.className = 'feedback correct show';
                addXP(30, 'summary-quiz');
                if (percentage === 100) {
                    showAchievement('Perfect Score!', 'You got 100% on the summary quiz!');
                }
            } else if (percentage >= 60) {
                feedback.innerHTML += '<p>Good effort! Review the topics you found challenging.</p>';
                feedback.className = 'feedback hint show';
                addXP(20, 'summary-quiz');
            } else {
                feedback.innerHTML += '<p>Keep practicing! Review the lesson materials and try again.</p>';
                feedback.className = 'feedback incorrect show';
                addXP(10, 'summary-quiz');
            }
        }

        // Extension Activities
        function checkBinaryAddition() {
            const answer = document.getElementById('binaryAddAnswer').value.trim();
            const feedback = document.getElementById('binaryAddFeedback');
            
            // 1011 + 1101 = 11000
            if (answer === '11000') {
                feedback.textContent = 'Excellent! You understand binary addition with carry bits.';
                feedback.className = 'feedback correct show';
                addXP(25, 'binary-addition');
            } else {
                feedback.textContent = 'Not quite. Remember to carry the 1 when you get 1+1.';
                feedback.className = 'feedback hint show';
            }
        }

        function checkHexAnswer() {
            const answer = parseInt(document.getElementById('hexAnswer').value);
            const feedback = document.getElementById('hexFeedback');
            
            if (answer === 255) {
                feedback.textContent = 'Correct! FF in hexadecimal = 15√ó16 + 15 = 255 in decimal.';
                feedback.className = 'feedback correct show';
                addXP(20, 'hex-conversion');
            } else {
                feedback.textContent = 'Try again. F = 15 in decimal, so FF = ?';
                feedback.className = 'feedback hint show';
            }
        }

        function saveResearch() {
            const research = document.getElementById('researchAnswer').value.trim();
            const feedback = document.getElementById('researchFeedback');
            
            if (research.length < 50) {
                feedback.textContent = 'Please write a more detailed explanation.';
                feedback.className = 'feedback hint show';
                return;
            }
            
            const keywords = ['1024', 'binary', 'decimal', '1000', 'power of 2'];
            let keywordCount = 0;
            keywords.forEach(keyword => {
                if (research.toLowerCase().includes(keyword)) keywordCount++;
            });
            
            if (keywordCount >= 2) {
                feedback.textContent = 'Great research! You understand the difference between decimal and binary prefixes.';
                feedback.className = 'feedback correct show';
                addXP(30, 'research-task');
            } else {
                feedback.textContent = 'Good start! Consider mentioning the difference between powers of 10 and powers of 2.';
                feedback.className = 'feedback hint show';
                addXP(15, 'research-task');
            }
        }

        // Accessibility functions
        function toggleHighContrast() {
            document.body.classList.toggle('high-contrast');
        }

        function toggleDyslexicFont() {
            document.body.classList.toggle('dyslexic-font');
        }

        function changeFontSize(change) {
            const currentSize = parseInt(window.getComputedStyle(document.body).fontSize);
            document.body.style.fontSize = (currentSize + change) + 'px';
        }

        // Feedback system
        function openFeedbackModal() {
            document.getElementById('feedbackModal').classList.add('show');
        }

        function closeFeedbackModal() {
            document.getElementById('feedbackModal').classList.remove('show');
            document.getElementById('feedbackText').value = '';
        }

        function sendFeedback() {
            const feedback = document.getElementById('feedbackText').value.trim();
            if (!feedback) {
                alert('Please enter your feedback before sending.');
                return;
            }
            
            const sectionTitle = document.querySelector('.section.active h2').textContent;
            const sectionHTML = document.querySelector('.section.active').innerHTML.substring(0, 500) + '...';
            
            // In a real implementation, this would send an email
            // For now, we'll just show a confirmation
            const emailBody = 'Feedback from: ' + sectionTitle + '\n\n' +
                            'Message: ' + feedback + '\n\n' +
                            'Section HTML Preview: ' + sectionHTML;
            
            console.log('Email to millingtond@mgs.org:', emailBody);
            
            alert('Thank you for your feedback! It has been sent to the teacher.');
            closeFeedbackModal();
            addXP(5, 'feedback-sent');
        }

        // Prevent paste
        function preventPaste() {
            document.addEventListener('paste', function(e) {
                e.preventDefault();
                const shameMsg = document.getElementById('shameMessage');
                shameMsg.style.display = 'block';
                setTimeout(() => {
                    shameMsg.style.display = 'none';
                }, 2000);
                return false;
            });
        }

        // Reset section
        function resetSection(sectionNum) {
            const section = document.getElementById('section' + sectionNum);
            
            // Reset inputs
            section.querySelectorAll('input').forEach(input => {
                if (input.type === 'text' || input.type === 'number') {
                    input.value = '';
                }
            });
            
            // Reset selects
            section.querySelectorAll('select').forEach(select => {
                select.selectedIndex = 0;
            });
            
            // Reset textareas
            section.querySelectorAll('textarea').forEach(textarea => {
                textarea.value = '';
            });
            
            // Reset quiz selections
            section.querySelectorAll('.quiz-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Reset drag and drop
            section.querySelectorAll('.drop-zone').forEach(zone => {
                zone.innerHTML = '';
                zone.classList.remove('correct', 'incorrect');
                delete zone.dataset.dropped;
            });
            
            // Hide feedbacks
            section.querySelectorAll('.feedback').forEach(feedback => {
                feedback.classList.remove('show');
            });
            
            // Hide mark schemes
            section.querySelectorAll('.mark-scheme').forEach(scheme => {
                scheme.classList.remove('show');
            });
            
            // Clear canvases
            if (sectionNum === 3) clearCanvas();
            if (sectionNum === 5) clearExamCanvas(1);
            
            // Reset specific section states
            if (sectionNum === 0) {
                binaryBits = [0, 0, 0, 0, 0, 0, 0, 0];
                for (let i = 0; i < 8; i++) {
                    const bit = document.getElementById('bit' + i);
                    bit.textContent = '0';
                    bit.classList.remove('on');
                }
                updateDecimalValue();
            }
            
            if (sectionNum === 2) {
                // Reset circuit simulation
                ['switch1', 'switch2', 'switch3'].forEach((switchId, index) => {
                    document.getElementById(switchId).setAttribute('fill', '#666');
                    document.getElementById(switchId).nextElementSibling.textContent = 'OFF';
                    document.getElementById('bit' + (index + 1)).textContent = '0';
                });
                document.getElementById('circuitBinary').textContent = '000';
            }
            
            if (sectionNum === 4) {
                document.getElementById('imageCalcSteps').style.display = 'none';
            }
        }

        // Mobile support
        if ('ontouchstart' in window) {
            document.body.classList.add('touch-device');
        }

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowLeft') {
                changeSection(-1);
            } else if (e.key === 'ArrowRight') {
                changeSection(1);
            }
        });
    </script>
</body>
</html>