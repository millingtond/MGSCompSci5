<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sorting Algorithms - GCSE Computer Science</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <style>
        :root {
            --primary-color: #9333EA;
            --secondary-color: #3B82F6;
            --success-color: #10B981;
            --error-color: #EF4444;
            --warning-color: #F59E0B;
            --bg-color: #F9FAFB;
            --text-color: #111827;
            --card-bg: #FFFFFF;
            --border-color: #E5E7EB;
            --font-size: 16px;
        }

        .high-contrast {
            --primary-color: #FFFF00;
            --secondary-color: #00FFFF;
            --bg-color: #000000;
            --text-color: #FFFFFF;
            --card-bg: #1A1A1A;
            --border-color: #FFFFFF;
        }

        .dyslexia-font {
            font-family: 'OpenDyslexic', sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-size: var(--font-size);
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        .shame-mode body {
            background-color: #FEE2E2 !important;
        }

        .shame-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #DC2626;
            color: white;
            padding: 20px;
            border-radius: 10px;
            font-size: 24px;
            font-weight: bold;
            z-index: 10000;
            animation: pulse 2s infinite;
            display: none;
        }

        @keyframes pulse {
            0% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.1); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 30px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 10px,
                rgba(255,255,255,0.1) 10px,
                rgba(255,255,255,0.1) 20px
            );
            animation: slide 20s linear infinite;
        }

        @keyframes slide {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        .header-content {
            position: relative;
            z-index: 1;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .xp-bar {
            background: rgba(255,255,255,0.2);
            border-radius: 20px;
            height: 30px;
            margin: 20px auto;
            max-width: 400px;
            position: relative;
            overflow: hidden;
        }

        .xp-fill {
            background: linear-gradient(90deg, #10B981, #34D399);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 20px;
        }

        .xp-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .level-badge {
            display: inline-block;
            background: gold;
            color: #333;
            padding: 5px 15px;
            border-radius: 20px;
            margin-top: 10px;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .nav-controls {
            background: var(--card-bg);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        .nav-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .nav-button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .section-indicators {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .section-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--border-color);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .section-dot.active {
            background: var(--primary-color);
            transform: scale(1.2);
        }

        .section-dot.completed {
            background: var(--success-color);
        }

        .section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: relative;
        }

        .card h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .card h3 {
            color: var(--secondary-color);
            margin: 20px 0 10px;
            font-size: 1.4rem;
        }

        .task-box {
            background: #F3F4F6;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .task-box:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
        }

        .button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(147, 51, 234, 0.3);
        }

        .button.secondary {
            background: var(--secondary-color);
        }

        .button.success {
            background: var(--success-color);
        }

        .button.error {
            background: var(--error-color);
        }

        input[type="text"], input[type="number"], textarea, select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: var(--card-bg);
            color: var(--text-color);
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(147, 51, 234, 0.1);
        }

        .drag-container {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .drag-item {
            background: var(--primary-color);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            cursor: move;
            transition: all 0.3s ease;
            user-select: none;
            font-weight: 500;
        }

        .drag-item:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .drag-item.dragging {
            opacity: 0.5;
        }

        .drop-zone {
            min-height: 100px;
            border: 3px dashed var(--border-color);
            border-radius: 10px;
            padding: 30px;
            margin: 10px 0;
            transition: all 0.3s ease;
            background: rgba(0,0,0,0.02);
        }

        .drop-zone.drag-over {
            border-color: var(--primary-color);
            background: rgba(147, 51, 234, 0.1);
            transform: scale(1.02);
        }

        .drop-zone:empty::after {
            content: 'Drag items here';
            color: #9CA3AF;
            font-style: italic;
        }

        .sort-visualizer {
            background: #1F2937;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            position: relative;
        }

        .array-bars {
            display: flex;
            align-items: flex-end;
            justify-content: center;
            height: 200px;
            gap: 5px;
            margin: 20px 0;
        }

        .bar {
            background: var(--secondary-color);
            width: 40px;
            transition: all 0.3s ease;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            color: white;
            font-weight: bold;
            padding-bottom: 5px;
            position: relative;
        }

        .bar.comparing {
            background: var(--warning-color);
            transform: scale(1.1);
        }

        .bar.sorted {
            background: var(--success-color);
        }

        .bar.pivot {
            background: var(--error-color);
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 10px;
            color: white;
        }

        .speed-control span {
            min-width: 60px;
            text-align: center;
        }

        .canvas-container {
            position: relative;
            margin: 20px 0;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            overflow: hidden;
            display: none;
        }

        canvas {
            display: block;
            background: white;
            cursor: crosshair;
            touch-action: none;
        }

        .canvas-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
        }

        .achievement-popup {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #333;
            padding: 20px 30px;
            border-radius: 15px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            z-index: 1000;
            animation: slideIn 0.5s ease, slideOut 0.5s ease 3s forwards;
        }

        @keyframes slideIn {
            from { transform: translateX(400px); }
            to { transform: translateX(0); }
        }

        @keyframes slideOut {
            from { transform: translateX(0); }
            to { transform: translateX(400px); }
        }

        .particle {
            position: fixed;
            pointer-events: none;
            animation: particle 1s ease-out forwards;
        }

        @keyframes particle {
            0% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) scale(0);
                opacity: 0;
            }
        }

        .feedback {
            margin-top: 10px;
            padding: 15px;
            border-radius: 8px;
            display: none;
        }

        .feedback.correct {
            background: #D1FAE5;
            color: #065F46;
            border: 1px solid #6EE7B7;
        }

        .feedback.incorrect {
            background: #FEE2E2;
            color: #991B1B;
            border: 1px solid #FCA5A5;
        }

        .accessibility-controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--card-bg);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            z-index: 100;
        }

        .control-group {
            margin: 10px 0;
        }

        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .quiz-option {
            display: block;
            width: 100%;
            text-align: left;
            padding: 15px;
            margin: 10px 0;
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            border-color: var(--primary-color);
            transform: translateX(5px);
        }

        .quiz-option.selected {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .mark-scheme {
            background: #EFF6FF;
            border: 2px solid #3B82F6;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
        }

        .predicted-marks {
            display: flex;
            gap: 10px;
            align-items: center;
            margin: 15px 0;
        }

        pre {
            background: #2d2d2d;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            color: #f8f8f2;
            margin: 15px 0;
        }

        code {
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
        }

        pre.visual-example {
            background: transparent !important;
            color: var(--text-color) !important;
            padding: 0 !important;
            margin: 0 !important;
        }

        /* Override Prism theme for better integration */
        pre[class*="language-"] {
            margin: 15px 0;
            background: #2d2d2d;
            font-size: 14px;
            line-height: 1.5;
        }
        
        code[class*="language-"] {
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            text-shadow: none;
        }
        
        .token.comment {
            color: #8292a2;
        }
        
        .token.keyword {
            color: #c792ea;
        }
        
        .token.function {
            color: #82aaff;
        }
        
        .token.string {
            color: #c3e88d;
        }
        
        .token.number {
            color: #f78c6c;
        }

        .complexity-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .complexity-table th,
        .complexity-table td {
            border: 2px solid var(--border-color);
            padding: 12px;
            text-align: center;
        }

        .complexity-table th {
            background: var(--primary-color);
            color: white;
            font-weight: bold;
        }

        .complexity-table tr:nth-child(even) {
            background: rgba(0,0,0,0.02);
        }

        .exam-note {
            background: #FEF3C7;
            border: 2px solid #F59E0B;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            color: var(--text-color);
        }

        pre.visual-example {
            background: transparent !important;
            color: var(--text-color) !important;
            padding: 0 !important;
            margin: 0 !important;
        }

        #mergeStepDisplay {
            max-height: 200px;
            overflow-y: auto;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
            font-size: 14px;
        }

        #mergeStepDisplay::-webkit-scrollbar {
            width: 8px;
        }

        #mergeStepDisplay::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
        }

        #mergeStepDisplay::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
        }

        /* Mobile styles */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .card {
                padding: 20px;
            }
            
            .bar {
                width: 30px;
                font-size: 12px;
            }
            
            .drag-container {
                flex-direction: column;
            }
        }

        /* Mobile gesture support */
        @media (pointer: coarse) {
            .drag-item {
                padding: 20px 30px;
            }
            
            .button {
                padding: 15px 30px;
            }
        }

        /* Print styles */
        @media print {
            .nav-controls, .accessibility-controls {
                display: none;
            }
            
            .section {
                display: block !important;
                page-break-after: always;
            }
        }

        /* Loading animation */
        .loader {
            border: 3px solid var(--border-color);
            border-top: 3px solid var(--primary-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Tooltips */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }

        .tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            white-space: nowrap;
            font-size: 14px;
            z-index: 10;
        }

        /* Skip to content link for accessibility */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--primary-color);
            color: white;
            padding: 8px;
            text-decoration: none;
            border-radius: 0 0 5px 0;
        }

        .skip-link:focus {
            top: 0;
        }

        .algorithm-steps {
            background: #F8F9FA;
            border-left: 4px solid var(--primary-color);
            padding: 20px;
            margin: 20px 0;
        }

        .step-item {
            margin: 10px 0;
            padding-left: 20px;
            position: relative;
        }

        .step-item::before {
            content: '‚ñ∂';
            position: absolute;
            left: 0;
            color: var(--primary-color);
        }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <div class="shame-message" id="shameMessage">
        üö´ COPYING AND PASTING IS NOT ALLOWED! üö´<br>
        Nice try, but real learning requires real effort!
    </div>

    <header>
        <div class="header-content">
            <h1>Sorting Algorithms</h1>
            <p>GCSE Computer Science - OCR J277</p>
            <div class="xp-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                <div class="xp-fill" id="xpFill"></div>
                <span class="xp-text" id="xpText">0 / 100 XP</span>
            </div>
            <div class="level-badge" id="levelBadge">Level 1 - Beginner</div>
        </div>
    </header>

    <div class="container" id="main-content">
        <nav class="nav-controls" role="navigation" aria-label="Lesson navigation">
            <div class="nav-buttons">
                <button class="nav-button" id="prevBtn" onclick="navigateSection(-1)" disabled aria-label="Previous section">
                    ‚Üê Previous
                </button>
                <button class="nav-button" id="nextBtn" onclick="navigateSection(1)" aria-label="Next section">
                    Next ‚Üí
                </button>
            </div>
            <div class="section-indicators" role="tablist">
                <!-- Section indicators will be generated dynamically -->
            </div>
        </nav>

        <!-- Section 0: Welcome & Objectives -->
        <section class="section active" id="section-0" role="tabpanel">
            <div class="card">
                <h2>Welcome to Sorting Algorithms! üéØ</h2>
                <p>In this interactive lesson, you'll master three fundamental sorting algorithms that are essential for organizing data efficiently.</p>
                
                <h3>Learning Objectives</h3>
                <ul>
                    <li>‚úì Understand how Bubble Sort works and trace through examples</li>
                    <li>‚úì Understand how Insertion Sort works and its advantages</li>
                    <li>‚úì Understand how Merge Sort works and why it's efficient</li>
                    <li>‚úì Compare the efficiency of different sorting algorithms</li>
                    <li>‚úì Apply sorting algorithms to real-world scenarios</li>
                    <li>‚úì Identify common mistakes and how to avoid them</li>
                </ul>

                <div class="task-box">
                    <h3>How This Lesson Works</h3>
                    <p>üéÆ Complete interactive tasks to earn XP points</p>
                    <p>üèÜ Unlock achievements as you progress</p>
                    <p>üìä Watch algorithms in action with visualizations</p>
                    <p>üìù Practice exam-style questions</p>
                    <p>üöÄ Challenge yourself with extension activities</p>
                </div>

                <button class="button success" onclick="completeIntro()">Let's Begin!</button>
            </div>
        </section>

        <!-- Section 1: Starter Activity -->
        <section class="section" id="section-1" role="tabpanel">
            <div class="card">
                <h2>Starter Activity: Sorting in Real Life üé≤</h2>
                <p>Before we dive into sorting algorithms, let's think about how we sort things in everyday life!</p>

                <div class="task-box">
                    <h3>Quick Challenge</h3>
                    <p>You have a hand of playing cards: 7‚ô†, 3‚ô•, K‚ô¶, 5‚ô£, 9‚ô•</p>
                    <p><strong>How would you arrange them in order from lowest to highest?</strong></p>
                    <p><em>Describe your approach in your own words:</em></p>
                    
                    <textarea id="starterApproach" rows="3" placeholder="Describe how you would sort these cards..."></textarea>
                    <button class="button" onclick="checkStarterApproach()">Submit Answer</button>
                    
                    <div id="starterFeedback" class="feedback"></div>
                </div>

                <div class="task-box" id="starterTask2" style="display: none;">
                    <h3>Sort the Numbers</h3>
                    <p>Let's practice sorting! Drag these numbers from the top area into the drop zone below, arranging them in ascending order (smallest to largest):</p>
                    
                    <div class="drag-container" id="starterNumbers">
                        <div class="drag-item" draggable="true" data-value="42">42</div>
                        <div class="drag-item" draggable="true" data-value="17">17</div>
                        <div class="drag-item" draggable="true" data-value="89">89</div>
                        <div class="drag-item" draggable="true" data-value="3">3</div>
                        <div class="drag-item" draggable="true" data-value="65">65</div>
                    </div>
                    
                    <p style="margin-top: 20px;"><strong>‚Üì Drag all numbers here in order (3, 17, 42, 65, 89) ‚Üì</strong></p>
                    
                    <div class="drop-zone" id="starterDropZone">
                        Drop the numbers here in order (smallest to largest)
                    </div>
                    
                    <button class="button" onclick="checkStarterSort()">Check Order</button>
                    <button class="button secondary" onclick="resetStarterSort()">Reset</button>
                    
                    <div id="starterSortFeedback" class="feedback"></div>
                </div>
            </div>
        </section>

        <!-- Section 2: Bubble Sort -->
        <section class="section" id="section-2" role="tabpanel">
            <div class="card">
                <h2>Bubble Sort Algorithm ü´ß</h2>
                
                <div class="task-box">
                    <h3>What is Bubble Sort?</h3>
                    <p><strong>Definition:</strong> A sorting algorithm that passes over the list many times, swapping adjacent items if they are in the wrong order.</p>
                    
                    <h4>Key Characteristics:</h4>
                    <ul>
                        <li>‚úì Simple to understand and implement</li>
                        <li>‚úì Works by comparing adjacent elements</li>
                        <li>‚úó Not very efficient for large lists</li>
                        <li>‚úó Makes many unnecessary comparisons</li>
                    </ul>
                </div>

                <div class="algorithm-steps">
                    <h3>How Bubble Sort Works</h3>
                    <div class="step-item">Compare the first two elements and swap if necessary</div>
                    <div class="step-item">Move to the next pair and repeat the comparison</div>
                    <div class="step-item">After one pass, the largest element "bubbles up" to the end</div>
                    <div class="step-item">Repeat for remaining elements, ignoring sorted ones</div>
                    <div class="step-item">Continue until the entire list is sorted</div>
                </div>

                <div class="task-box">
                    <h3>Interactive Bubble Sort Visualizer</h3>
                    <div class="sort-visualizer">
                        <div class="array-bars" id="bubbleBars"></div>
                        <div class="controls">
                            <button class="button success" onclick="startBubbleSort()">Start Sort</button>
                            <button class="button secondary" onclick="pauseBubbleSort()">Pause</button>
                            <button class="button error" onclick="resetBubbleSort()">Reset</button>
                            <div class="speed-control">
                                <label>Speed: 
                                    <input type="range" id="bubbleSpeed" min="1" max="10" value="5">
                                    <span id="bubbleSpeedValue">Medium</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="task-box">
                    <h3>Practice: Trace Through Bubble Sort</h3>
                    <p>In the exam, you might need to trace through bubble sort step by step.</p>
                    <p>Given the array: [5, 3, 8, 1]</p>
                    <p>After the first complete pass of bubble sort, what will the array look like?</p>
                    
                    <input type="text" id="bubbleTraceAnswer" placeholder="Enter array as: 1, 2, 3, 4">
                    <button class="button" onclick="checkBubbleTrace()">Check Answer</button>
                    
                    <div id="bubbleTraceFeedback" class="feedback"></div>
                </div>

                <div class="task-box">
                    <h3>Algorithm Recognition</h3>
                    <div class="exam-note">
                        <p><strong>‚ö†Ô∏è Exam Note:</strong> You don't need to write code for bubble sort in the exam, but you must understand how it works and be able to recognize it.</p>
                    </div>
                    
                    <h4>Bubble Sort - Python Implementation:</h4>
                    <pre><code class="language-python">def bubble_sort(arr):
    n = len(arr)
    for i in range(n):
        for j in range(0, n-i-1):
            if arr[j] > arr[j+1]:
                arr[j], arr[j+1] = arr[j+1], arr[j]
    return arr</code></pre>
                    
                    <h4>Bubble Sort - OCR Reference Language:</h4>
                    <pre><code class="language-pascal">PROCEDURE bubbleSort(array)
    n = LENGTH(array)
    FOR i = 0 TO n-1
        FOR j = 0 TO n-i-2
            IF array[j] > array[j+1] THEN
                SWAP array[j], array[j+1]
            END IF
        END FOR
    END FOR
END PROCEDURE</code></pre>
                </div>
            </div>
        </section>

        <!-- Section 3: Insertion Sort -->
        <section class="section" id="section-3" role="tabpanel">
            <div class="card">
                <h2>Insertion Sort Algorithm üé¥</h2>
                
                <div class="task-box">
                    <h3>What is Insertion Sort?</h3>
                    <p><strong>Definition:</strong> A sorting algorithm which checks each element and inserts it into the correct place each time.</p>
                    
                    <h4>Key Characteristics:</h4>
                    <ul>
                        <li>‚úì Works like sorting playing cards in your hand</li>
                        <li>‚úì Efficient for small datasets</li>
                        <li>‚úì Better than Bubble Sort</li>
                        <li>‚úì Works well on nearly sorted data</li>
                    </ul>
                </div>

                <div class="algorithm-steps">
                    <h3>How Insertion Sort Works</h3>
                    <div class="step-item">Consider first element as sorted</div>
                    <div class="step-item">Take the second element and compare with first</div>
                    <div class="step-item">Insert it in the correct position</div>
                    <div class="step-item">Take third element and find its correct position in sorted portion</div>
                    <div class="step-item">Continue until all elements are sorted</div>
                </div>

                <div class="task-box">
                    <h3>Interactive Insertion Sort Visualizer</h3>
                    <div class="sort-visualizer">
                        <div class="array-bars" id="insertionBars"></div>
                        <div class="controls">
                            <button class="button success" onclick="startInsertionSort()">Start Sort</button>
                            <button class="button secondary" onclick="pauseInsertionSort()">Pause</button>
                            <button class="button error" onclick="resetInsertionSort()">Reset</button>
                            <div class="speed-control">
                                <label>Speed: 
                                    <input type="range" id="insertionSpeed" min="1" max="10" value="5">
                                    <span id="insertionSpeedValue">Medium</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="task-box">
                    <h3>Understanding Insertion Sort</h3>
                    <div class="exam-note">
                        <p><strong>‚ö†Ô∏è Exam Note:</strong> You won't need to write code for this in the exam, but you must understand how insertion sort works and be able to recognize it.</p>
                    </div>
                    
                    <p>Watch how insertion sort builds up a sorted list one element at a time:</p>
                    
                    <div style="background: #F3F4F6; padding: 20px; border-radius: 10px; margin: 20px 0;">
                        <p><strong>Starting array: [7‚ô•, 3‚ô£, J‚ô¶, 5‚ô†, A‚ô•]</strong></p>
                        
                        <div style="margin: 10px 0;">
                            <strong>Step 1:</strong> [<span style="color: green;">7‚ô•</span>] | 3‚ô£, J‚ô¶, 5‚ô†, A‚ô•<br>
                            <em>First element is considered sorted</em>
                        </div>
                        
                        <div style="margin: 10px 0;">
                            <strong>Step 2:</strong> [<span style="color: green;">3‚ô£, 7‚ô•</span>] | J‚ô¶, 5‚ô†, A‚ô•<br>
                            <em>Insert 3‚ô£ before 7‚ô•</em>
                        </div>
                        
                        <div style="margin: 10px 0;">
                            <strong>Step 3:</strong> [<span style="color: green;">3‚ô£, 7‚ô•, J‚ô¶</span>] | 5‚ô†, A‚ô•<br>
                            <em>Insert J‚ô¶ (value 11) at the end</em>
                        </div>
                        
                        <div style="margin: 10px 0;">
                            <strong>Step 4:</strong> [<span style="color: green;">3‚ô£, 5‚ô†, 7‚ô•, J‚ô¶</span>] | A‚ô•<br>
                            <em>Insert 5‚ô† between 3‚ô£ and 7‚ô•</em>
                        </div>
                        
                        <div style="margin: 10px 0;">
                            <strong>Step 5:</strong> [<span style="color: green;">A‚ô•, 3‚ô£, 5‚ô†, 7‚ô•, J‚ô¶</span>]<br>
                            <em>Insert A‚ô• (value 1) at the beginning</em>
                        </div>
                    </div>
                    
                    <p><strong>Practice Question:</strong> Given the array [6, 2, 9, 4], what would it look like after inserting the third element (9)?</p>
                    <input type="text" id="insertionPractice" placeholder="Enter as: 2, 6, 9">
                    <button class="button" onclick="checkInsertionPractice()">Check Answer</button>
                    <div id="insertionPracticeFeedback" class="feedback"></div>
                </div>

                <div class="task-box">
                    <h3>Algorithm Recognition</h3>
                    <div class="exam-note">
                        <p><strong>‚ö†Ô∏è Exam Note:</strong> You don't need to write code for insertion sort in the exam, but you must understand how it works and be able to recognize it.</p>
                    </div>
                    
                    <h4>Insertion Sort - Python Implementation:</h4>
                    <pre><code class="language-python">def insertion_sort(arr):
    for i in range(1, len(arr)):
        key = arr[i]
        j = i - 1
        while j >= 0 and arr[j] > key:
            arr[j + 1] = arr[j]
            j -= 1
        arr[j + 1] = key
    return arr</code></pre>
                    
                    <h4>Insertion Sort - OCR Reference Language:</h4>
                    <pre><code class="language-pascal">PROCEDURE insertionSort(array)
    FOR i = 1 TO LENGTH(array) - 1
        key = array[i]
        j = i - 1
        WHILE j >= 0 AND array[j] > key
            array[j + 1] = array[j]
            j = j - 1
        END WHILE
        array[j + 1] = key
    END FOR
END PROCEDURE</code></pre>
                </div>
            </div>
        </section>

        <!-- Section 4: Merge Sort -->
        <section class="section" id="section-4" role="tabpanel">
            <div class="card">
                <h2>Merge Sort Algorithm üîÄ</h2>
                
                <div class="task-box">
                    <h3>What is Merge Sort?</h3>
                    <p><strong>Definition:</strong> A very efficient sorting algorithm that repeatedly breaks down a list into smaller lists, then repeatedly merges them back together in order.</p>
                    
                    <div class="exam-note">
                        <p><strong>‚ö†Ô∏è Exam Note:</strong> Unlike bubble and insertion sort, you may need to understand merge sort implementation for the GCSE exam. Pay close attention to how it divides and merges!</p>
                    </div>
                    
                    <h4>Key Characteristics:</h4>
                    <ul>
                        <li>‚úì Very efficient for large datasets</li>
                        <li>‚úì Uses divide-and-conquer approach</li>
                        <li>‚úì Consistent performance (always O(n log n))</li>
                        <li>‚úó Requires additional memory space</li>
                        <li>‚úó More complex to understand</li>
                    </ul>
                </div>

                <div class="algorithm-steps">
                    <h3>How Merge Sort Works</h3>
                    <div class="step-item">Divide the list into two halves</div>
                    <div class="step-item">Keep dividing until each sublist has one element</div>
                    <div class="step-item">Merge sublists in pairs, comparing elements</div>
                    <div class="step-item">Arrange merged elements in sorted order</div>
                    <div class="step-item">Continue merging until one sorted list remains</div>
                    
                    <div style="background: #F3F4F6; padding: 15px; margin-top: 20px; border-radius: 8px;">
                        <h4>Visual Example: [7, 3, 9, 1]</h4>
                        <pre class="visual-example">
        [7, 3, 9, 1]           (Original)
       /            \
    [7, 3]        [9, 1]        (Split)
    /    \        /    \
  [7]    [3]    [9]    [1]      (Individual elements)
    \    /        \    /
    [3, 7]        [1, 9]        (Merge & sort)
       \            /
        [1, 3, 7, 9]            (Final sorted array)
        </pre>
                    </div>
                </div>

                <div class="task-box">
                    <h3>Interactive Merge Sort Visualizer</h3>
                    <p>Watch how merge sort divides the array into individual elements, then merges them back in sorted order:</p>
                    
                    <div class="sort-visualizer">
                        <div id="mergeSortSteps" style="color: white; margin-bottom: 20px; min-height: 150px;">
                            <div id="mergeStepDisplay" style="font-family: monospace; line-height: 1.8;">Click "Start Sort" to see the step-by-step process...</div>
                        </div>
                        <div class="array-bars" id="mergeBars"></div>
                        <div class="controls">
                            <button class="button success" onclick="startMergeSort()">Start Sort</button>
                            <button class="button secondary" onclick="pauseMergeSort()">Pause</button>
                            <button class="button error" onclick="resetMergeSort()">Reset</button>
                            <div class="speed-control">
                                <label>Speed: 
                                    <input type="range" id="mergeSpeed" min="1" max="10" value="5">
                                    <span id="mergeSpeedValue">Medium</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="task-box">
                    <h3>Merge Sort Tree Diagram</h3>
                    <p>Complete the merge sort tree for the array [8, 3, 5, 1]:</p>
                    <div class="exam-note">
                        <p><strong>‚ö†Ô∏è Format Instructions:</strong> Use commas with NO spaces (e.g., "8,3" not "8, 3"). Individual elements should be just the number (e.g., "8" not "[8]").</p>
                    </div>
                    
                    <div style="text-align: center; margin: 20px 0;">
                        <p><strong>Original:</strong> [8, 3, 5, 1]</p>
                        <p>‚Üô ‚Üò</p>
                        <p>
                            <input type="text" id="mergeLeft1" placeholder="Left half" style="width: 100px;">
                            <input type="text" id="mergeRight1" placeholder="Right half" style="width: 100px;">
                        </p>
                        <p>‚Üô ‚Üò &nbsp;&nbsp;&nbsp; ‚Üô ‚Üò</p>
                        <p>
                            <input type="text" id="mergeLL" placeholder="?" style="width: 40px;">
                            <input type="text" id="mergeLR" placeholder="?" style="width: 40px;">
                            &nbsp;&nbsp;
                            <input type="text" id="mergeRL" placeholder="?" style="width: 40px;">
                            <input type="text" id="mergeRR" placeholder="?" style="width: 40px;">
                        </p>
                        <p>‚Üò ‚Üô &nbsp;&nbsp;&nbsp; ‚Üò ‚Üô</p>
                        <p>
                            <input type="text" id="mergeSortedLeft" placeholder="Sorted left" style="width: 100px;">
                            <input type="text" id="mergeSortedRight" placeholder="Sorted right" style="width: 100px;">
                        </p>
                        <p>‚Üò ‚Üô</p>
                        <p><strong>Final:</strong> <input type="text" id="mergeFinal" placeholder="Final sorted" style="width: 150px;"></p>
                    </div>
                    
                    <button class="button" onclick="checkMergeTree()">Check Tree</button>
                    <div id="mergeTreeFeedback" class="feedback"></div>
                </div>

                <div class="task-box">
                    <h3>Algorithm Recognition</h3>
                    <div class="exam-note">
                        <p><strong>‚ö†Ô∏è Exam Note:</strong> Unlike bubble and insertion sort, you may need to understand merge sort implementation for the exam. Study the code carefully!</p>
                    </div>
                    
                    <h4>Merge Sort - Simplified Python:</h4>
                    <pre><code class="language-python">def merge_sort(arr):
    if len(arr) <= 1:
        return arr
    
    mid = len(arr) // 2
    left = merge_sort(arr[:mid])
    right = merge_sort(arr[mid:])
    
    return merge(left, right)

def merge(left, right):
    result = []
    i = j = 0
    
    while i < len(left) and j < len(right):
        if left[i] <= right[j]:
            result.append(left[i])
            i += 1
        else:
            result.append(right[j])
            j += 1
    
    result.extend(left[i:])
    result.extend(right[j:])
    return result</code></pre>
                </div>
            </div>
        </section>

        <!-- Section 5: Comparing Algorithms -->
        <section class="section" id="section-5" role="tabpanel">
            <div class="card">
                <h2>Comparing Sorting Algorithms üìä</h2>
                
                <div class="task-box">
                    <h3>Algorithm Efficiency Comparison</h3>
                    <table class="complexity-table">
                        <tr>
                            <th>Algorithm</th>
                            <th>Best Case</th>
                            <th>Average Case</th>
                            <th>Worst Case</th>
                            <th>Space</th>
                        </tr>
                        <tr>
                            <td>Bubble Sort</td>
                            <td>O(n)</td>
                            <td>O(n¬≤)</td>
                            <td>O(n¬≤)</td>
                            <td>O(1)</td>
                        </tr>
                        <tr>
                            <td>Insertion Sort</td>
                            <td>O(n)</td>
                            <td>O(n¬≤)</td>
                            <td>O(n¬≤)</td>
                            <td>O(1)</td>
                        </tr>
                        <tr>
                            <td>Merge Sort</td>
                            <td>O(n log n)</td>
                            <td>O(n log n)</td>
                            <td>O(n log n)</td>
                            <td>O(n)</td>
                        </tr>
                    </table>
                </div>

                <div class="task-box">
                    <h3>Algorithm Race! üèÅ</h3>
                    <p>Watch different algorithms sort the same array and see which finishes first!</p>
                    
                    <div id="raceContainer" style="margin: 20px 0;">
                        <div style="margin: 10px 0;">
                            <strong>Bubble Sort:</strong>
                            <div style="background: #EEE; height: 30px; position: relative; border-radius: 5px;">
                                <div id="bubbleProgress" style="background: #EF4444; height: 100%; width: 0%; border-radius: 5px; transition: width 0.3s;"></div>
                            </div>
                        </div>
                        <div style="margin: 10px 0;">
                            <strong>Insertion Sort:</strong>
                            <div style="background: #EEE; height: 30px; position: relative; border-radius: 5px;">
                                <div id="insertionProgress" style="background: #F59E0B; height: 100%; width: 0%; border-radius: 5px; transition: width 0.3s;"></div>
                            </div>
                        </div>
                        <div style="margin: 10px 0;">
                            <strong>Merge Sort:</strong>
                            <div style="background: #EEE; height: 30px; position: relative; border-radius: 5px;">
                                <div id="mergeProgress" style="background: #10B981; height: 100%; width: 0%; border-radius: 5px; transition: width 0.3s;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <label>Array size: 
                        <select id="raceSizeSelect">
                            <option value="10">10 elements</option>
                            <option value="20">20 elements</option>
                            <option value="50">50 elements</option>
                        </select>
                    </label>
                    <button class="button success" onclick="startAlgorithmRace()">Start Race!</button>
                    <button class="button secondary" onclick="resetRace()">Reset</button>
                    
                    <div id="raceResults" style="margin-top: 20px;"></div>
                </div>

                <div class="task-box">
                    <h3>Choose the Right Algorithm</h3>
                    <p>Match each scenario to the best sorting algorithm:</p>
                    
                    <div class="drag-container">
                        <div class="drag-item" draggable="true" data-algorithm="bubble">Small list, simplicity important</div>
                        <div class="drag-item" draggable="true" data-algorithm="insertion">Cards in hand, nearly sorted</div>
                        <div class="drag-item" draggable="true" data-algorithm="merge">Large database, consistent speed</div>
                        <div class="drag-item" draggable="true" data-algorithm="insertion">Adding items to sorted list</div>
                    </div>
                    
                    <div style="display: flex; gap: 20px; margin-top: 20px;">
                        <div style="flex: 1;">
                            <h4>Bubble Sort</h4>
                            <div class="drop-zone" id="bubbleDropZone" data-algorithm="bubble"></div>
                        </div>
                        <div style="flex: 1;">
                            <h4>Insertion Sort</h4>
                            <div class="drop-zone" id="insertionDropZone" data-algorithm="insertion"></div>
                        </div>
                        <div style="flex: 1;">
                            <h4>Merge Sort</h4>
                            <div class="drop-zone" id="mergeDropZone" data-algorithm="merge"></div>
                        </div>
                    </div>
                    
                    <button class="button" onclick="checkAlgorithmMatch()">Check Answers</button>
                    <button class="button secondary" onclick="resetAlgorithmMatch()">Reset</button>
                    
                    <div id="matchFeedback" class="feedback"></div>
                </div>
            </div>
        </section>

        <!-- Section 6: Real-World Context -->
        <section class="section" id="section-6" role="tabpanel">
            <div class="card">
                <h2>Real-World Applications üåç</h2>
                
                <div class="task-box">
                    <h3>Where Are Sorting Algorithms Used?</h3>
                    
                    <h4>Everyday Examples:</h4>
                    <ul>
                        <li>üì± Contact lists in phones (alphabetical order)</li>
                        <li>üõí Online shopping (price low to high)</li>
                        <li>üéÆ Game leaderboards (highest scores first)</li>
                        <li>üìß Email inbox (newest first)</li>
                        <li>üéµ Music playlists (by artist, date, etc.)</li>
                    </ul>
                    
                    <h4>Professional Applications:</h4>
                    <ul>
                        <li>üíæ Database management systems</li>
                        <li>üìä Data analysis and visualization</li>
                        <li>üîç Search engine results ranking</li>
                        <li>üí≥ Financial transaction processing</li>
                        <li>üè• Medical record organization</li>
                    </ul>
                </div>

                <div class="task-box">
                    <h3>Scenario Analysis</h3>
                    <p>A school needs to sort 1000 student records by surname for printing certificates.</p>
                    
                    <p><strong>Question 1:</strong> Which sorting algorithm would be most appropriate and why?</p>
                    <textarea id="scenarioAnswer1" rows="3" placeholder="Explain your choice..."></textarea>
                    
                    <p style="margin-top: 15px;"><strong>Question 2:</strong> What if the records were already mostly sorted (just a few new students added)?</p>
                    <textarea id="scenarioAnswer2" rows="3" placeholder="Would your choice change? Why?"></textarea>
                    
                    <button class="button" onclick="checkScenarioAnswers()">Check Answers</button>
                    <div id="scenarioFeedback" class="feedback"></div>
                </div>

                <div class="task-box">
                    <h3>Design Your Own Sorting Challenge</h3>
                    <p>Think of a real-world situation where sorting is needed:</p>
                    
                    <textarea id="userChallenge" rows="3" placeholder="Describe your sorting challenge..."></textarea>
                    
                    <p>Which algorithm would work best?</p>
                    <select id="userAlgorithmChoice">
                        <option value="">Choose an algorithm...</option>
                        <option value="bubble">Bubble Sort</option>
                        <option value="insertion">Insertion Sort</option>
                        <option value="merge">Merge Sort</option>
                    </select>
                    
                    <p>Explain your reasoning:</p>
                    <textarea id="userReasoning" rows="3" placeholder="Why is this the best choice?"></textarea>
                    
                    <button class="button" onclick="submitUserChallenge()">Submit Challenge</button>
                    <div id="challengeFeedback" class="feedback"></div>
                </div>
            </div>
        </section>

        <!-- Section 7: Common Mistakes -->
        <section class="section" id="section-7" role="tabpanel">
            <div class="card">
                <h2>Common Mistakes to Avoid ‚ö†Ô∏è</h2>
                
                <div class="task-box">
                    <h3>Spot the Error!</h3>
                    
                    <div style="margin: 20px 0;">
                        <h4>Mistake 1: Bubble Sort Implementation</h4>
                        <pre><code class="language-pascal">PROCEDURE bubbleSort(array)
    n = LENGTH(array)
    FOR i = 0 TO n
        FOR j = 0 TO n    // ERROR HERE!
            IF array[j] > array[j+1] THEN
                SWAP array[j], array[j+1]
            END IF
        END FOR
    END FOR
END PROCEDURE</code></pre>
                        
                        <p>What's the error?</p>
                        <button class="quiz-option" onclick="checkMistake1(this, 'A')">
                            A) The outer loop runs too many times
                        </button>
                        <button class="quiz-option" onclick="checkMistake1(this, 'B')">
                            B) Inner loop will cause index out of bounds
                        </button>
                        <button class="quiz-option" onclick="checkMistake1(this, 'C')">
                            C) The comparison is wrong
                        </button>
                        
                        <div id="mistake1Feedback" class="feedback"></div>
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <h4>Mistake 2: Understanding Efficiency</h4>
                        <p>"Bubble sort is always the worst sorting algorithm."</p>
                        <p><strong>Why is this statement not entirely accurate?</strong></p>
                        
                        <textarea id="mistake2Answer" rows="3" placeholder="Explain when bubble sort might be acceptable..."></textarea>
                        <button class="button" onclick="checkMistake2()">Check Answer</button>
                        
                        <div id="mistake2Feedback" class="feedback"></div>
                    </div>
                </div>

                <div class="task-box">
                    <h3>Key Points to Remember</h3>
                    <ul>
                        <li>üî¥ Array indices start at 0, not 1</li>
                        <li>üî¥ Be careful with loop boundaries to avoid index errors</li>
                        <li>üî¥ Merge sort needs extra memory space</li>
                        <li>üî¥ Don't forget to decrement the comparison range in bubble sort</li>
                        <li>üî¥ Insertion sort works best on nearly sorted data</li>
                        <li>üî¥ Algorithm choice depends on your specific needs</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Section 8: Practice Exam Questions -->
        <section class="section" id="section-8" role="tabpanel">
            <div class="card">
                <h2>Practice Exam Questions üìù</h2>
                <p>These questions are in the style of OCR J277 exam questions.</p>
                
                <div class="task-box">
                    <h3>Question 1 (4 marks)</h3>
                    <p>Describe how the bubble sort algorithm sorts a list of numbers into ascending order.</p>
                    
                    <textarea id="examQ1" rows="6" placeholder="Write your answer here..."></textarea>
                    
                    <div class="predicted-marks">
                        <label>Predicted marks: 
                            <input type="number" id="examQ1Marks" min="0" max="4" placeholder="0-4">
                        </label>
                        <button class="button" onclick="checkExamQ1()">Show Mark Scheme</button>
                    </div>
                    
                    <div id="examQ1Feedback" class="feedback"></div>
                    
                    <div id="examQ1MarkScheme" class="mark-scheme">
                        <h4>Mark Scheme:</h4>
                        <ul>
                            <li>1 mark: Compares adjacent elements/pairs</li>
                            <li>1 mark: Swaps if in wrong order</li>
                            <li>1 mark: Repeats passes through the list</li>
                            <li>1 mark: Largest element moves to end after each pass / stops when no swaps made</li>
                        </ul>
                    </div>
                </div>

                <div class="task-box">
                    <h3>Question 2 (5 marks)</h3>
                    <p>The array [5, 2, 8, 1, 9] needs to be sorted using insertion sort.</p>
                    <p>Show the array after each element has been inserted into its correct position.</p>
                    
                    <textarea id="examQ2" rows="8" placeholder="Show each step..."></textarea>
                    <button class="button secondary" onclick="showDrawingCanvas('examQ2Canvas')">üìù Show Workings</button>
                    
                    <div class="canvas-container" id="examQ2CanvasContainer">
                        <canvas id="examQ2Canvas" width="600" height="300"></canvas>
                        <div class="canvas-controls">
                            <button class="button secondary" onclick="clearCanvas('examQ2Canvas')">Clear</button>
                            <button class="button error" onclick="hideCanvas('examQ2Canvas')">Close</button>
                        </div>
                    </div>
                    
                    <div class="predicted-marks">
                        <label>Predicted marks: 
                            <input type="number" id="examQ2Marks" min="0" max="5" placeholder="0-5">
                        </label>
                        <button class="button" onclick="checkExamQ2()">Show Mark Scheme</button>
                    </div>
                    
                    <div id="examQ2Feedback" class="feedback"></div>
                    
                    <div id="examQ2MarkScheme" class="mark-scheme">
                        <h4>Mark Scheme:</h4>
                        <ul>
                            <li>1 mark: Start: [5, 2, 8, 1, 9]</li>
                            <li>1 mark: After inserting 2: [2, 5, 8, 1, 9]</li>
                            <li>1 mark: After inserting 8: [2, 5, 8, 1, 9]</li>
                            <li>1 mark: After inserting 1: [1, 2, 5, 8, 9]</li>
                            <li>1 mark: Final: [1, 2, 5, 8, 9]</li>
                        </ul>
                    </div>
                </div>

                <div class="task-box">
                    <h3>Question 3 (3 marks)</h3>
                    <p>Explain why merge sort is more efficient than bubble sort for large datasets.</p>
                    
                    <textarea id="examQ3" rows="4" placeholder="Write your answer here..."></textarea>
                    
                    <div class="predicted-marks">
                        <label>Predicted marks: 
                            <input type="number" id="examQ3Marks" min="0" max="3" placeholder="0-3">
                        </label>
                        <button class="button" onclick="checkExamQ3()">Show Mark Scheme</button>
                    </div>
                    
                    <div id="examQ3Feedback" class="feedback"></div>
                    
                    <div id="examQ3MarkScheme" class="mark-scheme">
                        <h4>Mark Scheme:</h4>
                        <ul>
                            <li>1 mark: Merge sort has O(n log n) complexity vs O(n¬≤) for bubble sort</li>
                            <li>1 mark: Merge sort divides problem into smaller parts (divide and conquer)</li>
                            <li>1 mark: For large n, n log n grows much slower than n¬≤</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 9: Extension Activities -->
        <section class="section" id="section-9" role="tabpanel">
            <div class="card">
                <h2>Extension Activities üöÄ</h2>
                <p>Ready to go beyond the specification? These challenges will deepen your understanding!</p>
                
                <div class="task-box">
                    <h3>Challenge 1: Quick Sort Investigation</h3>
                    <p>Research Quick Sort - another efficient sorting algorithm not in your specification.</p>
                    <p>How does it compare to Merge Sort?</p>
                    
                    <textarea id="quickSortAnswer" rows="4" placeholder="Describe Quick Sort and compare to Merge Sort..."></textarea>
                    <button class="button" onclick="checkQuickSort()">Submit Research</button>
                    <div id="quickSortFeedback" class="feedback"></div>
                </div>

                <div class="task-box">
                    <h3>Challenge 2: Stability in Sorting</h3>
                    <p>A sorting algorithm is "stable" if it maintains the relative order of equal elements.</p>
                    <p>Which of our three algorithms are stable? Explain why this matters.</p>
                    
                    <textarea id="stabilityAnswer" rows="4" placeholder="Discuss stability in sorting algorithms..."></textarea>
                    <button class="button" onclick="checkStability()">Submit Answer</button>
                    <div id="stabilityFeedback" class="feedback"></div>
                </div>

                <div class="task-box">
                    <h3>Challenge 3: Optimization Challenge</h3>
                    <p>Can you think of a way to optimize bubble sort to stop early if the list becomes sorted?</p>
                    
                    <textarea id="optimizationAnswer" rows="5" placeholder="Describe your optimization..."></textarea>
                    <button class="button" onclick="checkOptimization()">Submit Optimization</button>
                    <div id="optimizationFeedback" class="feedback"></div>
                </div>
            </div>
        </section>

        <!-- Section 10: Video Resources -->
        <section class="section" id="section-10" role="tabpanel">
            <div class="card">
                <h2>Video Resources üé•</h2>
                <p>Additional video explanations will be added here to reinforce your learning.</p>
                
                <div class="task-box">
                    <h3>Recommended Videos</h3>
                    <p><em>Videos will be embedded here. Topics will include:</em></p>
                    <ul>
                        <li>üìπ Bubble Sort Dance Demo</li>
                        <li>üìπ Insertion Sort with Playing Cards</li>
                        <li>üìπ Merge Sort Visualization</li>
                        <li>üìπ Comparing Algorithm Efficiency</li>
                        <li>üìπ Exam Technique for Sorting Questions</li>
                    </ul>
                    
                    <div style="background: #F3F4F6; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: center;">
                        <p style="color: #6B7280;">Video placeholder - Content coming soon!</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 11: Summary -->
        <section class="section" id="section-11" role="tabpanel">
            <div class="card">
                <h2>Summary & Key Takeaways üéØ</h2>
                
                <div class="task-box">
                    <h3>What You've Learned</h3>
                    <ul>
                        <li>‚úÖ Bubble Sort: Simple but inefficient, good for learning</li>
                        <li>‚úÖ Insertion Sort: Better than bubble, great for nearly sorted data</li>
                        <li>‚úÖ Merge Sort: Very efficient, uses divide-and-conquer</li>
                        <li>‚úÖ Time complexity matters for large datasets</li>
                        <li>‚úÖ Different algorithms suit different situations</li>
                        <li>‚úÖ Trade-offs exist between simplicity and efficiency</li>
                    </ul>
                </div>

                <div class="task-box">
                    <h3>Your Achievements</h3>
                    <div id="achievementSummary"></div>
                </div>

                <div class="task-box">
                    <h3>Quick Reference</h3>
                    <table class="complexity-table">
                        <tr>
                            <th>Algorithm</th>
                            <th>Best For</th>
                            <th>Avoid When</th>
                        </tr>
                        <tr>
                            <td>Bubble Sort</td>
                            <td>Teaching, tiny datasets</td>
                            <td>Large datasets, performance matters</td>
                        </tr>
                        <tr>
                            <td>Insertion Sort</td>
                            <td>Small datasets, nearly sorted data</td>
                            <td>Large random datasets</td>
                        </tr>
                        <tr>
                            <td>Merge Sort</td>
                            <td>Large datasets, consistent performance</td>
                            <td>Memory is very limited</td>
                        </tr>
                    </table>
                </div>

                <div class="task-box">
                    <h3>Next Steps</h3>
                    <p>Congratulations on completing this lesson! Consider:</p>
                    <ul>
                        <li>üìä Practice tracing through these algorithms by hand</li>
                        <li>üíª Try implementing them in Python (for fun!)</li>
                        <li>üìö Explore other sorting algorithms like Quick Sort</li>
                        <li>üéØ Complete past paper questions on sorting</li>
                        <li>üîç Think about sorting in apps you use daily</li>
                    </ul>
                </div>

                <button class="button success" onclick="generateCertificate()">üèÜ Generate Completion Certificate</button>
            </div>
        </section>
    </div>

    <div class="accessibility-controls" role="complementary" aria-label="Accessibility controls">
        <h4>Accessibility</h4>
        <div class="control-group">
            <label>
                <input type="checkbox" id="highContrastToggle" onchange="toggleHighContrast()">
                High Contrast
            </label>
        </div>
        <div class="control-group">
            <label>
                <input type="checkbox" id="dyslexiaFontToggle" onchange="toggleDyslexiaFont()">
                Dyslexia Font
            </label>
        </div>
        <div class="control-group">
            <label>Font Size:
                <input type="range" id="fontSizeSlider" min="12" max="24" value="16" onchange="changeFontSize(this.value)">
            </label>
        </div>
    </div>

    <script src="gcse-algo-sorting.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-pascal.min.js"></script>
</body>
</html>