<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Internet and WWW - GCSE Computer Science</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: #f5f5f5;
            color: #333;
            line-height: 1.6;
            position: relative;
            min-height: 100vh;
        }
        
        /* Accessibility Controls */
        .accessibility-controls {
            position: fixed;
            top: 10px;
            right: 10px;
            background: white;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 1000;
        }
        
        .accessibility-controls button {
            margin: 0 5px;
            padding: 5px 10px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .accessibility-controls button:hover {
            background: #0056b3;
        }
        
        /* High Contrast Mode */
        body.high-contrast {
            background: #000;
            color: #fff;
        }
        
        body.high-contrast .section {
            background: #111;
            border: 2px solid #fff;
        }
        
        body.high-contrast button {
            background: #fff;
            color: #000;
            border: 2px solid #fff;
        }
        
        /* Dyslexia Font */
        body.dyslexia-font {
            font-family: 'OpenDyslexic', 'Comic Sans MS', cursive;
        }
        
        /* Navigation Bar */
        .navbar {
            background: #2c3e50;
            color: white;
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 999;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .navbar-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav-links {
            display: flex;
            gap: 20px;
            list-style: none;
        }
        
        .nav-links a {
            color: white;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background 0.3s;
        }
        
        .nav-links a:hover,
        .nav-links a.active {
            background: #34495e;
        }
        
        /* XP and Level Display */
        .xp-display {
            background: #f39c12;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
        }
        
        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Sections */
        .section {
            background: white;
            padding: 30px;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: none;
            animation: fadeIn 0.5s ease-in;
        }
        
        .section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Headings */
        h1 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 2.5em;
        }
        
        h2 {
            color: #34495e;
            margin-bottom: 15px;
            font-size: 2em;
        }
        
        h3 {
            color: #34495e;
            margin-bottom: 10px;
            font-size: 1.5em;
        }
        
        /* Buttons */
        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
            margin: 5px;
        }
        
        button:hover {
            background: #2980b9;
        }
        
        button:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
        }
        
        .reset-btn {
            background: #e74c3c;
        }
        
        .reset-btn:hover {
            background: #c0392b;
        }
        
        .hint-btn {
            background: #f39c12;
        }
        
        .hint-btn:hover {
            background: #e67e22;
        }
        
        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        /* Input Fields */
        input[type="text"],
        input[type="number"],
        textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            margin: 5px 0;
        }
        
        input[type="text"]:focus,
        textarea:focus {
            outline: none;
            border-color: #3498db;
        }
        
        /* Drag and Drop */
        .drag-container {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            gap: 20px;
        }
        
        .drag-items,
        .drop-zones {
            flex: 1;
        }
        
        .draggable {
            background: #3498db;
            color: white;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            cursor: move;
            transition: transform 0.2s;
        }
        
        .draggable:hover {
            transform: scale(1.05);
        }
        
        .draggable.dragging {
            opacity: 0.5;
        }
        
        .drop-zone {
            min-height: 50px;
            border: 2px dashed #bdc3c7;
            border-radius: 5px;
            padding: 10px;
            margin: 5px 0;
            background: #ecf0f1;
            transition: all 0.3s;
        }
        
        .drop-zone.drag-over {
            background: #d5dbdb;
            border-color: #34495e;
        }
        
        .drop-zone.correct {
            background: #d4edda;
            border-color: #28a745;
        }
        
        .drop-zone.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
        }
        
        /* Quiz Questions */
        .quiz-question {
            background: #f8f9fa;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }
        
        .quiz-options {
            margin: 15px 0;
        }
        
        .quiz-option {
            display: block;
            margin: 8px 0;
            cursor: pointer;
        }
        
        .quiz-option input[type="radio"] {
            margin-right: 10px;
        }
        
        /* Achievement Popup */
        .achievement-popup {
            position: fixed;
            top: 100px;
            right: 20px;
            background: #2ecc71;
            color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transform: translateX(400px);
            transition: transform 0.5s ease-out;
            z-index: 1001;
        }
        
        .achievement-popup.show {
            transform: translateX(0);
        }
        
        .achievement-popup h4 {
            margin-bottom: 5px;
            font-size: 1.2em;
        }
        
        .achievement-popup .xp-gain {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        /* Feedback Button */
        .feedback-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #95a5a6;
            color: white;
            padding: 10px 15px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 14px;
            z-index: 998;
            transition: background 0.3s;
        }
        
        .feedback-btn:hover {
            background: #7f8c8d;
        }
        
        /* Feedback Modal */
        .feedback-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1002;
            justify-content: center;
            align-items: center;
        }
        
        .feedback-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
        }
        
        .feedback-content h3 {
            margin-bottom: 20px;
        }
        
        .feedback-content textarea {
            width: 100%;
            height: 150px;
            margin-bottom: 15px;
        }
        
        /* Drawing Canvas */
        .canvas-container {
            border: 2px solid #ddd;
            border-radius: 5px;
            margin: 20px 0;
            position: relative;
            background: white;
        }
        
        #drawingCanvas {
            display: block;
            cursor: crosshair;
            touch-action: none;
        }
        
        .canvas-controls {
            margin: 10px 0;
        }
        
        /* DNS Simulation */
        .dns-simulation {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .dns-step {
            padding: 15px;
            margin: 10px 0;
            background: white;
            border-radius: 5px;
            border-left: 4px solid #3498db;
            opacity: 0.3;
            transition: all 0.5s;
        }
        
        .dns-step.active {
            opacity: 1;
            border-left-color: #2ecc71;
            transform: translateX(10px);
        }
        
        /* Cloud Benefits/Drawbacks */
        .benefits-drawbacks {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .benefit-box,
        .drawback-box {
            padding: 20px;
            border-radius: 10px;
            min-height: 200px;
        }
        
        .benefit-box {
            background: #d4edda;
            border: 2px solid #28a745;
        }
        
        .drawback-box {
            background: #f8d7da;
            border: 2px solid #dc3545;
        }
        
        /* Writing Scorer */
        #writingScorer {
            border: 2px solid #ddd;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        #scoreCircle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 8px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
            font-size: 2em;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        #scoreCircle.good {
            border-color: #28a745;
            color: #28a745;
        }
        
        #scoreCircle.medium {
            border-color: #ffc107;
            color: #ffc107;
        }
        
        #scoreCircle.poor {
            border-color: #dc3545;
            color: #dc3545;
        }
        
        #successList li {
            color: #28a745;
            margin: 5px 0;
        }
        
        #improvementList li {
            color: #dc3545;
            margin: 5px 0;
        }
        
        /* Shame Message */
        .shame-message {
            background: #dc3545;
            color: white;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            display: none;
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        /* Mobile Responsive */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            .drag-container {
                flex-direction: column;
            }
            
            .benefits-drawbacks {
                grid-template-columns: 1fr;
            }
            
            h1 { font-size: 1.8em; }
            h2 { font-size: 1.5em; }
            h3 { font-size: 1.2em; }
        }
        
        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(0,0,0,.1);
            border-radius: 50%;
            border-top-color: #3498db;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            transition: width 0.5s ease;
        }
        
        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        /* Success Animation */
        @keyframes success-pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .success-animation {
            animation: success-pulse 0.5s ease;
        }
    </style>
</head>
<body>
    <!-- Accessibility Controls -->
    <div class="accessibility-controls">
        <button onclick="toggleHighContrast()">High Contrast</button>
        <button onclick="toggleDyslexiaFont()">Dyslexia Font</button>
        <button onclick="changeFontSize(1)">A+</button>
        <button onclick="changeFontSize(-1)">A-</button>
    </div>
    
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="navbar-content">
            <h3>The Internet and WWW</h3>
            <ul class="nav-links">
                <li><a href="#" onclick="showSection(0)" class="active">Welcome</a></li>
                <li><a href="#" onclick="showSection(1)">Starter</a></li>
                <li><a href="#" onclick="showSection(2)">Internet vs WWW</a></li>
                <li><a href="#" onclick="showSection(3)">URLs</a></li>
                <li><a href="#" onclick="showSection(4)">DNS</a></li>
                <li><a href="#" onclick="showSection(5)">Browser Access</a></li>
                <li><a href="#" onclick="showSection(6)">Hosting</a></li>
                <li><a href="#" onclick="showSection(7)">Cloud</a></li>
                <li><a href="#" onclick="showSection(8)">Exam Practice</a></li>
                <li><a href="#" onclick="showSection(9)">Summary</a></li>
                <li><a href="#" onclick="showSection(10)">Extension</a></li>
                <li><a href="#" onclick="showSection(11)">Videos</a></li>
            </ul>
            <div class="xp-display">
                Level <span id="currentLevel">1</span> | XP: <span id="currentXP">0</span>
            </div>
        </div>
    </nav>
    
    <!-- Main Container -->
    <div class="container">
        <!-- Section 0: Welcome -->
        <div class="section active" id="section-0">
            <h1>Welcome to The Internet and WWW</h1>
            <div class="progress-bar">
                <div class="progress-fill" style="width: 0%"></div>
            </div>
            
            <h2>Learning Outcomes</h2>
            <ul>
                <li>Distinguish between the Internet and the World Wide Web</li>
                <li>Explain the components and structure of URLs</li>
                <li>Describe how the Domain Name System (DNS) works</li>
                <li>Sequence the steps of how a browser accesses a webpage</li>
                <li>Define web hosting and web servers</li>
                <li>Evaluate the benefits and drawbacks of cloud computing</li>
            </ul>
            
            <h3>How to Navigate</h3>
            <p>Use the navigation bar above or the Previous/Next buttons at the bottom of each page. Complete activities to earn XP and unlock achievements!</p>
            
            <div class="nav-buttons">
                <button disabled>Previous</button>
                <button onclick="showSection(1)">Start Learning →</button>
            </div>
        </div>
        
        <!-- Section 1: Starter Activity -->
        <div class="section" id="section-1">
            <h1>Starter Activity: What Do You Know?</h1>
            <p>Let's assess your current knowledge about the Internet and the Web!</p>
            
            <div class="quiz-question">
                <h3>Question 1: What is the Internet?</h3>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="starter-q1" value="a">
                        A collection of web pages
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="starter-q1" value="b">
                        A single computer system
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="starter-q1" value="c">
                        A global network of interconnected networks
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="starter-q1" value="d">
                        A web browser application
                    </label>
                </div>
            </div>
            
            <div class="quiz-question">
                <h3>Question 2: What does URL stand for?</h3>
                <input type="text" id="url-acronym" placeholder="Enter your answer...">
            </div>
            
            <div class="quiz-question">
                <h3>Question 3: True or False - The Internet and the World Wide Web are the same thing.</h3>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="starter-q3" value="true">
                        True
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="starter-q3" value="false">
                        False
                    </label>
                </div>
            </div>
            
            <button onclick="checkStarterQuiz()">Check Answers</button>
            <button class="reset-btn" onclick="resetStarterQuiz()">Reset</button>
            
            <div id="starter-feedback" style="margin-top: 20px;"></div>
            
            <div class="nav-buttons">
                <button onclick="showSection(0)">← Previous</button>
                <button onclick="showSection(2)">Next →</button>
            </div>
        </div>
        
        <!-- Section 2: Internet vs WWW -->
        <div class="section" id="section-2">
            <h1>The Internet vs The World Wide Web</h1>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                <div style="background: #e3f2fd; padding: 20px; border-radius: 10px;">
                    <h3>The Internet</h3>
                    <p>A global network of interconnected networks. Think of it as the infrastructure - the cables, routers, and connections that allow computers to communicate.</p>
                </div>
                <div style="background: #fff3e0; padding: 20px; border-radius: 10px;">
                    <h3>The World Wide Web (WWW)</h3>
                    <p>A collection of resources (like web pages) accessible over the Internet. It's one of many services that runs on the Internet.</p>
                </div>
            </div>
            
            <h2>Drag and Drop Activity</h2>
            <p>Drag each item to the correct category:</p>
            
            <div class="drag-container">
                <div class="drag-items">
                    <div class="draggable" draggable="true" data-answer="internet">Network cables</div>
                    <div class="draggable" draggable="true" data-answer="www">HTML pages</div>
                    <div class="draggable" draggable="true" data-answer="internet">Routers</div>
                    <div class="draggable" draggable="true" data-answer="www">Hyperlinks</div>
                    <div class="draggable" draggable="true" data-answer="internet">IP addresses</div>
                    <div class="draggable" draggable="true" data-answer="www">Web browsers</div>
                </div>
                <div class="drop-zones">
                    <h3>Internet Infrastructure</h3>
                    <div class="drop-zone" data-category="internet"></div>
                    <h3>World Wide Web</h3>
                    <div class="drop-zone" data-category="www"></div>
                </div>
            </div>
            
            <button onclick="checkDragDrop()">Check Answers</button>
            <button class="reset-btn" onclick="resetDragDrop()">Reset</button>
            <button class="hint-btn" onclick="showHint('dragdrop')">Hint (-5 XP)</button>
            
            <div id="dragdrop-feedback" style="margin-top: 20px;"></div>
            
            <div class="nav-buttons">
                <button onclick="showSection(1)">← Previous</button>
                <button onclick="showSection(3)">Next →</button>
            </div>
        </div>
        
        <!-- Section 3: URLs and Domain Names -->
        <div class="section" id="section-3">
            <h1>URLs and Domain Names</h1>
            
            <p>A <strong>URL (Uniform Resource Locator)</strong> is a web address that identifies where documents can be found on the Internet.</p>
            
            <h2>Interactive URL Builder</h2>
            <p>Build a complete URL by filling in the components:</p>
            
            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0;">
                <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
                    <select id="protocol-select">
                        <option value="">Select protocol...</option>
                        <option value="http://">http://</option>
                        <option value="https://">https://</option>
                        <option value="ftp://">ftp://</option>
                    </select>
                    <input type="text" id="domain-input" placeholder="domain name" style="width: 200px;">
                    <select id="tld-select">
                        <option value="">Select TLD...</option>
                        <option value=".com">.com</option>
                        <option value=".org">.org</option>
                        <option value=".co.uk">.co.uk</option>
                        <option value=".edu">.edu</option>
                    </select>
                    <input type="text" id="path-input" placeholder="/path (optional)" style="width: 150px;">
                </div>
                <div style="margin-top: 15px;">
                    <strong>Your URL:</strong> <span id="built-url" style="color: #3498db;">Not complete yet...</span>
                </div>
            </div>
            
            <button onclick="checkURLBuilder()">Validate URL</button>
            <button class="reset-btn" onclick="resetURLBuilder()">Reset</button>
            
            <h2>Fill in the Blanks</h2>
            <p>Complete the sentences by selecting the correct terms:</p>
            
            <div class="quiz-question">
                <p>A URL combines the 
                    <select id="fill1">
                        <option value="">Choose...</option>
                        <option value="browser">browser</option>
                        <option value="protocol">protocol</option>
                        <option value="server">server</option>
                        <option value="cable">cable</option>
                    </select>
                    (e.g., http://) and the 
                    <select id="fill2">
                        <option value="">Choose...</option>
                        <option value="IP address">IP address</option>
                        <option value="domain name">domain name</option>
                        <option value="web page">web page</option>
                        <option value="router">router</option>
                    </select>
                    to form a complete web address.
                </p>
            </div>
            
            <button onclick="checkFillBlanks()">Check Answers</button>
            
            <div id="url-feedback" style="margin-top: 20px;"></div>
            
            <div class="nav-buttons">
                <button onclick="showSection(2)">← Previous</button>
                <button onclick="showSection(4)">Next →</button>
            </div>
        </div>
        
        <!-- Section 4: DNS System -->
        <div class="section" id="section-4">
            <h1>Domain Name System (DNS)</h1>
            
            <p>The <strong>Domain Name System (DNS)</strong> looks up a URL to find the IP address of the requested website.</p>
            
            <h2>DNS Lookup Simulation</h2>
            <p>Click 'Start Simulation' to see how DNS works step by step:</p>
            
            <div class="dns-simulation">
                <div class="dns-step" id="dns-step-1">
                    <h4>Step 1: User enters URL</h4>
                    <p>You type 'www.example.com' into your browser</p>
                </div>
                <div class="dns-step" id="dns-step-2">
                    <h4>Step 2: Browser checks cache</h4>
                    <p>Browser checks if it already knows the IP address</p>
                </div>
                <div class="dns-step" id="dns-step-3">
                    <h4>Step 3: Query DNS server</h4>
                    <p>If not cached, browser asks DNS server for the IP address</p>
                </div>
                <div class="dns-step" id="dns-step-4">
                    <h4>Step 4: DNS lookup</h4>
                    <p>DNS server finds that www.example.com = 93.184.216.34</p>
                </div>
                <div class="dns-step" id="dns-step-5">
                    <h4>Step 5: Return IP address</h4>
                    <p>DNS server sends the IP address back to the browser</p>
                </div>
                <div class="dns-step" id="dns-step-6">
                    <h4>Step 6: Connect to server</h4>
                    <p>Browser can now connect directly to 93.184.216.34</p>
                </div>
            </div>
            
            <button onclick="startDNSSimulation()">Start Simulation</button>
            <button class="reset-btn" onclick="resetDNSSimulation()">Reset</button>
            
            <h2>Sequencing Activity</h2>
            <p>Put these DNS lookup steps in the correct order:</p>
            
            <div id="dns-sequence" style="margin: 20px 0;">
                <div class="draggable" draggable="true" data-order="3">DNS server searches for IP address</div>
                <div class="draggable" draggable="true" data-order="1">User types URL in browser</div>
                <div class="draggable" draggable="true" data-order="4">IP address returned to browser</div>
                <div class="draggable" draggable="true" data-order="2">Browser sends URL to DNS server</div>
            </div>
            
            <button onclick="checkDNSSequence()">Check Order</button>
            
            <div id="dns-feedback" style="margin-top: 20px;"></div>
            
            <div class="nav-buttons">
                <button onclick="showSection(3)">← Previous</button>
                <button onclick="showSection(5)">Next →</button>
            </div>
        </div>
        
        <!-- Section 5: How Browsers Access Webpages -->
        <div class="section" id="section-5">
            <h1>How a Browser Accesses a Webpage</h1>
            
            <p>Let's explore the complete process of how your browser fetches and displays a webpage.</p>
            
            <h2>Interactive Process Animation</h2>
            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0;">
                <div id="browser-animation" style="min-height: 300px;">
                    <!-- Animation will be controlled by JavaScript -->
                    <div class="dns-step" id="browser-step-1">
                        <h4>1. Browser sends URL to DNS server</h4>
                        <p>The journey begins when you enter a web address</p>
                    </div>
                    <div class="dns-step" id="browser-step-2">
                        <h4>2. DNS finds the IP address</h4>
                        <p>DNS server looks up the domain name</p>
                    </div>
                    <div class="dns-step" id="browser-step-3">
                        <h4>3. IP address sent back to browser</h4>
                        <p>Browser now knows where to find the website</p>
                    </div>
                    <div class="dns-step" id="browser-step-4">
                        <h4>4. Browser requests the webpage</h4>
                        <p>HTTP request sent to the web server</p>
                    </div>
                    <div class="dns-step" id="browser-step-5">
                        <h4>5. Web server sends files</h4>
                        <p>HTML, CSS, JavaScript, and images are transmitted</p>
                    </div>
                    <div class="dns-step" id="browser-step-6">
                        <h4>6. Browser renders the page</h4>
                        <p>Files are processed and displayed on your screen</p>
                    </div>
                </div>
            </div>
            
            <button onclick="startBrowserAnimation()">Start Animation</button>
            <button class="reset-btn" onclick="resetBrowserAnimation()">Reset</button>
            
            <h2>Sequencing Challenge</h2>
            <p>Can you remember all 6 steps? Put them in order:</p>
            
            <div id="browser-sequence" class="drop-zone" style="min-height: 200px;">
                <!-- Items will be added by JavaScript -->
            </div>
            
            <button onclick="checkBrowserSequence()">Check Sequence</button>
            <button class="hint-btn" onclick="showHint('browser')">Hint (-5 XP)</button>
            
            <div id="browser-feedback" style="margin-top: 20px;"></div>
            
            <div class="nav-buttons">
                <button onclick="showSection(4)">← Previous</button>
                <button onclick="showSection(6)">Next →</button>
            </div>
        </div>
        
        <!-- Section 6: Web Hosting and Servers -->
        <div class="section" id="section-6">
            <h1>Web Hosting and Servers</h1>
            
            <div style="background: #e8f5e9; padding: 20px; border-radius: 10px; margin: 20px 0;">
                <h3>Key Definitions</h3>
                <p><strong>Hosting:</strong> Storing and sharing a website on a web server.</p>
                <p><strong>Web Server:</strong> The computer that runs a website and makes it available on the WWW.</p>
            </div>
            
            <h2>Categorization Activity</h2>
            <p>Categorize these items as either related to Web Hosting or Web Servers:</p>
            
            <div class="drag-container">
                <div class="drag-items">
                    <div class="draggable" draggable="true" data-answer="hosting">Domain registration</div>
                    <div class="draggable" draggable="true" data-answer="server">Apache software</div>
                    <div class="draggable" draggable="true" data-answer="hosting">Monthly fees</div>
                    <div class="draggable" draggable="true" data-answer="server">Processing HTTP requests</div>
                    <div class="draggable" draggable="true" data-answer="hosting">Storage space</div>
                    <div class="draggable" draggable="true" data-answer="server">Serving web pages</div>
                </div>
                <div class="drop-zones">
                    <h3>Web Hosting</h3>
                    <div class="drop-zone" data-category="hosting"></div>
                    <h3>Web Server</h3>
                    <div class="drop-zone" data-category="server"></div>
                </div>
            </div>
            
            <button onclick="checkHostingCategories()">Check Answers</button>
            <button class="reset-btn" onclick="resetHostingCategories()">Reset</button>
            
            <h2>Multiple Choice Questions</h2>
            
            <div class="quiz-question">
                <h3>Which of the following best describes a web server?</h3>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="server-q1" value="a">
                        A type of web browser
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="server-q1" value="b">
                        A computer that stores and delivers web pages
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="server-q1" value="c">
                        An internet service provider
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="server-q1" value="d">
                        A type of network cable
                    </label>
                </div>
            </div>
            
            <button onclick="checkServerQuiz()">Check Answer</button>
            
            <div id="hosting-feedback" style="margin-top: 20px;"></div>
            
            <div class="nav-buttons">
                <button onclick="showSection(5)">← Previous</button>
                <button onclick="showSection(7)">Next →</button>
            </div>
        </div>
        
        <!-- Section 7: The Cloud -->
        <div class="section" id="section-7">
            <h1>The Cloud</h1>
            
            <p><strong>The Cloud:</strong> A collection of computing services provided over the internet, including data storage, backup, and web hosting.</p>
            
            <h2>Benefits vs Drawbacks Analysis</h2>
            <p>Drag each item to the correct category:</p>
            
            <div class="benefits-drawbacks">
                <div class="benefit-box">
                    <h3>Benefits ✓</h3>
                    <div class="drop-zone" data-category="benefit" style="min-height: 150px;"></div>
                </div>
                <div class="drawback-box">
                    <h3>Drawbacks ✗</h3>
                    <div class="drop-zone" data-category="drawback" style="min-height: 150px;"></div>
                </div>
            </div>
            
            <div class="drag-items" style="margin: 20px 0;">
                <div class="draggable" draggable="true" data-answer="benefit">Access data from anywhere</div>
                <div class="draggable" draggable="true" data-answer="drawback">Requires internet access</div>
                <div class="draggable" draggable="true" data-answer="benefit">Frees up local storage</div>
                <div class="draggable" draggable="true" data-answer="drawback">Connection may be slow</div>
                <div class="draggable" draggable="true" data-answer="benefit">Security managed by provider</div>
                <div class="draggable" draggable="true" data-answer="drawback">Security out of user control</div>
                <div class="draggable" draggable="true" data-answer="benefit">Storage on demand</div>
                <div class="draggable" draggable="true" data-answer="drawback">Monthly fees</div>
            </div>
            
            <button onclick="checkCloudCategories()">Check Answers</button>
            <button class="reset-btn" onclick="resetCloudCategories()">Reset</button>
            
            <h2>Real-World Scenarios</h2>
            <p>For each scenario, decide if cloud computing would be beneficial:</p>
            
            <div class="quiz-question">
                <h3>Scenario 1: A photographer needs to backup thousands of photos</h3>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="scenario1" value="yes">
                        Yes - Cloud would be beneficial
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="scenario1" value="no">
                        No - Cloud would not be suitable
                    </label>
                </div>
                <p>Explain your reasoning:</p>
                <textarea id="scenario1-explain" rows="3" placeholder="Type your explanation..."></textarea>
            </div>
            
            <button onclick="checkScenarios()">Check Answers</button>
            
            <div id="cloud-feedback" style="margin-top: 20px;"></div>
            
            <div class="nav-buttons">
                <button onclick="showSection(6)">← Previous</button>
                <button onclick="showSection(8)">Next →</button>
            </div>
        </div>
        
        <!-- Section 8: Practice Exam Questions -->
        <div class="section" id="section-8">
            <h1>Practice Exam Questions</h1>
            
            <p>Test your knowledge with these exam-style questions. Remember to write in full sentences!</p>
            
            <div class="quiz-question">
                <h3>Question 1 (3 marks)</h3>
                <p>Explain the difference between the Internet and the World Wide Web.</p>
                <textarea id="exam-q1" rows="5" placeholder="Write your answer here..."></textarea>
                <button onclick="checkExamQuestion(1)">Check Answer (3 marks)</button>
                <div id="examq1-feedback" style="margin-top: 10px;"></div>
            </div>
            
            <div class="quiz-question">
                <h3>Question 2 (6 marks)</h3>
                <p>Describe how a web browser accesses a webpage when a user enters a URL. Include all steps in the process.</p>
                
                <div id="writingScorer">
                    <textarea id="studentAnswer" rows="8" placeholder="Write your answer here..."></textarea>
                    <input type="hidden" id="keywords" value="DNS,IP address,browser,server,request,files,HTML,render">
                    <button id="analyzeBtn" onclick="analyzeWriting()">Analyze My Writing</button>
                    
                    <div id="resultsDashboard" style="display: none;">
                        <h3>Your Writing Feedback</h3>
                        <div>
                            <p>Overall Score:</p>
                            <div id="scoreCircle">
                                <span id="scoreValue">0</span>
                            </div>
                        </div>
                        <div>
                            <h4>Successes:</h4>
                            <ul id="successList"></ul>
                            <h4>Areas for Improvement:</h4>
                            <ul id="improvementList"></ul>
                        </div>
                    </div>
                </div>
                
                <h4>Mark Scheme (click to reveal after attempting):</h4>
                <details id="markscheme-q2">
                    <summary>Show Mark Scheme</summary>
                    <ul>
                        <li>Browser sends URL to DNS server (1 mark)</li>
                        <li>DNS finds corresponding IP address (1 mark)</li>
                        <li>IP address sent back to browser (1 mark)</li>
                        <li>Browser sends request to web server (1 mark)</li>
                        <li>Web server sends website files back (1 mark)</li>
                        <li>Browser renders files to display webpage (1 mark)</li>
                    </ul>
                </details>
            </div>
            
            <div class="quiz-question">
                <h3>Question 3 (4 marks)</h3>
                <p>State two benefits and two drawbacks of using cloud storage.</p>
                <div class="canvas-container">
                    <canvas id="drawingCanvas" width="600" height="300"></canvas>
                    <div class="canvas-controls">
                        <button onclick="clearCanvas()">Clear Canvas</button>
                    </div>
                </div>
                <p>Or type your answer:</p>
                <textarea id="exam-q3" rows="4" placeholder="Benefits: 1. ... 2. ... Drawbacks: 1. ... 2. ..."></textarea>
                <button onclick="checkExamQuestion(3)">Check Answer (4 marks)</button>
                <div id="examq3-feedback" style="margin-top: 10px;"></div>
            </div>
            
            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0;">
                <h3>Predicted Marks</h3>
                <p>Enter your predicted mark for this section: <input type="number" id="predicted-marks" min="0" max="13" style="width: 60px;"> / 13</p>
                <button onclick="savePredictedMarks()">Save Prediction</button>
            </div>
            
            <div class="nav-buttons">
                <button onclick="showSection(7)">← Previous</button>
                <button onclick="showSection(9)">Next →</button>
            </div>
        </div>
        
        <!-- Section 9: Summary Quiz -->
        <div class="section" id="section-9">
            <h1>Summary Quiz</h1>
            
            <p>Test your understanding of everything you've learned!</p>
            
            <div class="quiz-question">
                <h3>1. What does DNS stand for?</h3>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="summary-q1" value="a">
                        Domain Network System
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q1" value="b">
                        Digital Name Service
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q1" value="c">
                        Domain Name System
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q1" value="d">
                        Data Network Server
                    </label>
                </div>
            </div>
            
            <div class="quiz-question">
                <h3>2. Which protocol is commonly used for secure web connections?</h3>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="summary-q2" value="a">
                        HTTP
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q2" value="b">
                        FTP
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q2" value="c">
                        HTTPS
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q2" value="d">
                        SMTP
                    </label>
                </div>
            </div>
            
            <div class="quiz-question">
                <h3>3. A web server is best described as:</h3>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="summary-q3" value="a">
                        Software that browses websites
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q3" value="b">
                        A computer that stores and delivers web pages
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q3" value="c">
                        A type of internet connection
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q3" value="d">
                        A web design tool
                    </label>
                </div>
            </div>
            
            <div class="quiz-question">
                <h3>4. True or False: The Internet is a service that runs on the World Wide Web.</h3>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="summary-q4" value="true">
                        True
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q4" value="false">
                        False
                    </label>
                </div>
            </div>
            
            <div class="quiz-question">
                <h3>5. Which of these is NOT a benefit of cloud storage?</h3>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="summary-q5" value="a">
                        Access from anywhere
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q5" value="b">
                        Works without internet
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q5" value="c">
                        Frees up local storage
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q5" value="d">
                        Storage on demand
                    </label>
                </div>
            </div>
            
            <div class="quiz-question">
                <h3>6. In a URL, what comes immediately after the protocol?</h3>
                <input type="text" id="summary-q6" placeholder="Your answer...">
            </div>
            
            <div class="quiz-question">
                <h3>7. Which step comes FIRST when a browser accesses a webpage?</h3>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="summary-q7" value="a">
                        Web server sends files
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q7" value="b">
                        Browser renders the page
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q7" value="c">
                        Browser sends URL to DNS
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="summary-q7" value="d">
                        IP address is returned
                    </label>
                </div>
            </div>
            
            <div class="quiz-question">
                <h3>8. What type of address does DNS convert a domain name into?</h3>
                <input type="text" id="summary-q8" placeholder="Your answer...">
            </div>
            
            <button onclick="checkSummaryQuiz()">Submit Quiz</button>
            <button class="reset-btn" onclick="resetSummaryQuiz()">Reset Quiz</button>
            
            <div id="summary-results" style="margin-top: 20px;"></div>
            
            <div class="nav-buttons">
                <button onclick="showSection(8)">← Previous</button>
                <button onclick="showSection(10)">Next →</button>
            </div>
        </div>
        
        <!-- Section 10: Extension Activities -->
        <div class="section" id="section-10">
            <h1>Extension Activities</h1>
            
            <p>Ready to go beyond the specification? Try these advanced challenges!</p>
            
            <div class="quiz-question">
                <h3>Extension 1: IPv4 vs IPv6</h3>
                <p>Research and explain the difference between IPv4 and IPv6 addresses. Why is IPv6 necessary?</p>
                <textarea rows="4" placeholder="Your research findings..."></textarea>
                <button onclick="saveExtension(1)">Save Response</button>
            </div>
            
            <div class="quiz-question">
                <h3>Extension 2: CDN (Content Delivery Networks)</h3>
                <p>How do CDNs improve website performance? Give a real-world example.</p>
                <textarea rows="4" placeholder="Your explanation..."></textarea>
                <button onclick="saveExtension(2)">Save Response</button>
            </div>
            
            <div class="quiz-question">
                <h3>Extension 3: Create Your Own</h3>
                <p>Design a simple diagram showing how HTTPS encryption works:</p>
                <div class="canvas-container">
                    <canvas id="extensionCanvas" width="600" height="400"></canvas>
                    <div class="canvas-controls">
                        <button onclick="clearExtensionCanvas()">Clear Canvas</button>
                    </div>
                </div>
            </div>
            
            <h2>Common Mistakes to Avoid</h2>
            <ul style="background: #fff3e0; padding: 20px; border-radius: 10px;">
                <li>❌ Confusing the Internet with the World Wide Web</li>
                <li>❌ Thinking DNS stores web pages (it only stores IP addresses)</li>
                <li>❌ Forgetting that browsers cache DNS lookups</li>
                <li>❌ Not understanding that multiple websites can share one server</li>
                <li>❌ Assuming cloud storage is always more secure than local storage</li>
            </ul>
            
            <div class="nav-buttons">
                <button onclick="showSection(9)">← Previous</button>
                <button onclick="showSection(11)">Next →</button>
            </div>
        </div>
        
        <!-- Section 11: Videos and Resources -->
        <div class="section" id="section-11">
            <h1>Videos and Additional Resources</h1>
            
            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0;">
                <h3>📹 Video Placeholder</h3>
                <p>Your teacher may add helpful videos here to reinforce the concepts covered in this lesson.</p>
                <div style="border: 2px dashed #ddd; padding: 40px; text-align: center; margin: 10px 0;">
                    <p>Video 1: How the Internet Works</p>
                </div>
                <div style="border: 2px dashed #ddd; padding: 40px; text-align: center; margin: 10px 0;">
                    <p>Video 2: DNS Explained</p>
                </div>
                <div style="border: 2px dashed #ddd; padding: 40px; text-align: center; margin: 10px 0;">
                    <p>Video 3: Cloud Computing Basics</p>
                </div>
            </div>
            
            <h2>Additional Resources</h2>
            <ul>
                <li>🔗 W3Schools - Web Technology Tutorials</li>
                <li>🔗 Mozilla Developer Network - Web Docs</li>
                <li>🔗 Cloudflare Learning - How the Internet Works</li>
            </ul>
            
            <h2>Your Progress Summary</h2>
            <div style="background: #e8f5e9; padding: 20px; border-radius: 10px;">
                <p><strong>Total XP Earned:</strong> <span id="final-xp">0</span></p>
                <p><strong>Level Achieved:</strong> <span id="final-level">1</span></p>
                <p><strong>Achievements Unlocked:</strong> <span id="achievement-count">0</span></p>
            </div>
            
            <div class="nav-buttons">
                <button onclick="showSection(10)">← Previous</button>
                <button onclick="window.print()">Print Worksheet</button>
            </div>
        </div>
    </div>
    
    <!-- Achievement Popup -->
    <div class="achievement-popup" id="achievementPopup">
        <h4 id="achievementTitle">Achievement Unlocked!</h4>
        <p id="achievementDesc">Description</p>
        <p class="xp-gain" id="achievementXP">+10 XP</p>
    </div>
    
    <!-- Feedback Button -->
    <button class="feedback-btn" onclick="openFeedback()">Feedback 💭</button>
    
    <!-- Feedback Modal -->
    <div class="feedback-modal" id="feedbackModal">
        <div class="feedback-content">
            <h3>Send Feedback</h3>
            <p>Found a bug or have a suggestion? Let us know!</p>
            <textarea id="feedbackText" placeholder="Describe the issue or suggestion..."></textarea>
            <button onclick="sendFeedback()">Send</button>
            <button onclick="closeFeedback()">Cancel</button>
        </div>
    </div>
    
    <!-- Shame Message for Paste Attempts -->
    <div class="shame-message" id="shameMessage">
        ⚠️ Paste detected! Please type your own answers to learn effectively.
    </div>

    <script>
        // Global Variables
        let currentSection = 0;
        let userXP = 0;
        let userLevel = 1;
        let achievements = new Set();
        let hintsUsed = new Set();
        let completedTasks = new Set();
        
        // XP Requirements per level
        const xpPerLevel = [0, 100, 250, 450, 700, 1000];
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeDragDrop();
            initializeCanvas();
            initializeAccessibility();
            preventPaste();
            updateProgress();
        });
        
        // Navigation
        function showSection(index) {
            const sections = document.querySelectorAll('.section');
            const navLinks = document.querySelectorAll('.nav-links a');
            
            sections.forEach(section => section.classList.remove('active'));
            navLinks.forEach(link => link.classList.remove('active'));
            
            sections[index].classList.add('active');
            navLinks[index]?.classList.add('active');
            currentSection = index;
            
            updateProgress();
            window.scrollTo(0, 0);
        }
        
        // Progress Bar
        function updateProgress() {
            const totalSections = 12;
            const progress = ((currentSection + 1) / totalSections) * 100;
            const progressFill = document.querySelector('.progress-fill');
            if (progressFill) {
                progressFill.style.width = progress + '%';
            }
        }
        
        // XP and Achievements System
        function addXP(amount, taskId) {
            if (completedTasks.has(taskId)) return;
            
            completedTasks.add(taskId);
            userXP += amount;
            
            // Check for level up
            while (userLevel < 5 && userXP >= xpPerLevel[userLevel]) {
                userLevel++;
                showAchievement('Level Up!', 'You reached Level ' + userLevel + '!', 50);
            }
            
            updateXPDisplay();
        }
        
        function updateXPDisplay() {
            document.getElementById('currentXP').textContent = userXP;
            document.getElementById('currentLevel').textContent = userLevel;
        }
        
        function showAchievement(title, description, xp) {
            const popup = document.getElementById('achievementPopup');
            document.getElementById('achievementTitle').textContent = title;
            document.getElementById('achievementDesc').textContent = description;
            document.getElementById('achievementXP').textContent = '+' + xp + ' XP';
            
            popup.classList.add('show');
            achievements.add(title);
            
            setTimeout(() => {
                popup.classList.remove('show');
            }, 3000);
        }
        
        // Starter Quiz
        function checkStarterQuiz() {
            let correct = 0;
            const feedback = document.getElementById('starter-feedback');
            
            // Question 1
            const q1 = document.querySelector('input[name="starter-q1"]:checked');
            if (q1 && q1.value === 'c') correct++;
            
            // Question 2
            const q2 = document.getElementById('url-acronym').value.toLowerCase();
            if (q2.includes('uniform') && q2.includes('resource') && q2.includes('locator')) correct++;
            
            // Question 3
            const q3 = document.querySelector('input[name="starter-q3"]:checked');
            if (q3 && q3.value === 'false') correct++;
            
            const score = (correct / 3) * 100;
            feedback.innerHTML = '<p>You got ' + correct + ' out of 3 correct (' + Math.round(score) + '%)</p>';
            
            if (correct === 3) {
                feedback.innerHTML += '<p style="color: green;">Excellent! You have a strong foundation!</p>';
                addXP(30, 'starter-quiz');
            } else if (correct >= 2) {
                feedback.innerHTML += '<p style="color: orange;">Good start! Let\'s build on your knowledge.</p>';
                addXP(20, 'starter-quiz');
            } else {
                feedback.innerHTML += '<p style="color: blue;">No worries! This lesson will help you understand these concepts.</p>';
                addXP(10, 'starter-quiz');
            }
            
            if (correct === 3 && !achievements.has('Perfect Start')) {
                showAchievement('Perfect Start', 'Got all starter questions correct!', 20);
            }
        }
        
        function resetStarterQuiz() {
            document.querySelectorAll('input[name^="starter-"]').forEach(input => {
                if (input.type === 'radio') input.checked = false;
                else input.value = '';
            });
            document.getElementById('starter-feedback').innerHTML = '';
        }
        
        // Drag and Drop Functionality
        function initializeDragDrop() {
            const draggables = document.querySelectorAll('.draggable');
            const dropZones = document.querySelectorAll('.drop-zone');
            
            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', handleDragStart);
                draggable.addEventListener('dragend', handleDragEnd);
                
                // Touch support
                draggable.addEventListener('touchstart', handleTouchStart, {passive: false});
                draggable.addEventListener('touchmove', handleTouchMove, {passive: false});
                draggable.addEventListener('touchend', handleTouchEnd);
            });
            
            dropZones.forEach(zone => {
                zone.addEventListener('dragover', handleDragOver);
                zone.addEventListener('drop', handleDrop);
                zone.addEventListener('dragleave', handleDragLeave);
            });
        }
        
        let draggedElement = null;
        
        function handleDragStart(e) {
            draggedElement = this;
            this.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/html', this.innerHTML);
        }
        
        function handleDragEnd(e) {
            this.classList.remove('dragging');
            draggedElement = null;
        }
        
        function handleDragOver(e) {
            if (e.preventDefault) {
                e.preventDefault();
            }
            e.dataTransfer.dropEffect = 'move';
            this.classList.add('drag-over');
            return false;
        }
        
        function handleDragLeave(e) {
            this.classList.remove('drag-over');
        }
        
        function handleDrop(e) {
            if (e.stopPropagation) {
                e.stopPropagation();
            }
            e.preventDefault();
            
            this.classList.remove('drag-over');
            
            if (draggedElement && this.classList.contains('drop-zone')) {
                this.appendChild(draggedElement);
            }
            
            return false;
        }
        
        // Touch support for drag and drop
        let touchItem = null;
        let touchOffset = {x: 0, y: 0};
        
        function handleTouchStart(e) {
            touchItem = this;
            const touch = e.touches[0];
            const rect = this.getBoundingClientRect();
            touchOffset.x = touch.clientX - rect.left;
            touchOffset.y = touch.clientY - rect.top;
            this.style.position = 'fixed';
            this.style.zIndex = '1000';
            e.preventDefault();
        }
        
        function handleTouchMove(e) {
            if (!touchItem) return;
            const touch = e.touches[0];
            touchItem.style.left = (touch.clientX - touchOffset.x) + 'px';
            touchItem.style.top = (touch.clientY - touchOffset.y) + 'px';
            e.preventDefault();
        }
        
        function handleTouchEnd(e) {
            if (!touchItem) return;
            
            const touch = e.changedTouches[0];
            const elementBelow = document.elementFromPoint(touch.clientX, touch.clientY);
            
            touchItem.style.position = '';
            touchItem.style.zIndex = '';
            touchItem.style.left = '';
            touchItem.style.top = '';
            
            if (elementBelow && elementBelow.classList.contains('drop-zone')) {
                elementBelow.appendChild(touchItem);
            }
            
            touchItem = null;
        }
        
        // Check Drag and Drop
        function checkDragDrop() {
            const internetZone = document.querySelector('.drop-zone[data-category="internet"]');
            const wwwZone = document.querySelector('.drop-zone[data-category="www"]');
            
            let correct = 0;
            let total = 0;
            
            internetZone.querySelectorAll('.draggable').forEach(item => {
                total++;
                if (item.getAttribute('data-answer') === 'internet') {
                    correct++;
                    item.style.backgroundColor = '#27ae60';
                } else {
                    item.style.backgroundColor = '#e74c3c';
                }
            });
            
            wwwZone.querySelectorAll('.draggable').forEach(item => {
                total++;
                if (item.getAttribute('data-answer') === 'www') {
                    correct++;
                    item.style.backgroundColor = '#27ae60';
                } else {
                    item.style.backgroundColor = '#e74c3c';
                }
            });
            
            const feedback = document.getElementById('dragdrop-feedback');
            if (correct === total && total === 6) {
                feedback.innerHTML = '<p style="color: green;">Perfect! You understand the difference!</p>';
                addXP(40, 'dragdrop-internet-www');
                if (!achievements.has('Sorting Master')) {
                    showAchievement('Sorting Master', 'Correctly categorized all items!', 25);
                }
            } else {
                feedback.innerHTML = '<p style="color: orange;">You got ' + correct + ' out of ' + total + ' correct. Green = correct, Red = incorrect.</p>';
                addXP(20, 'dragdrop-internet-www-partial');
            }
        }
        
        function resetDragDrop() {
            const dragItems = document.querySelector('.drag-items');
            document.querySelectorAll('.drop-zone .draggable').forEach(item => {
                item.style.backgroundColor = '#3498db';
                dragItems.appendChild(item);
            });
            document.getElementById('dragdrop-feedback').innerHTML = '';
        }
        
        function showHint(section) {
            if (hintsUsed.has(section)) return;
            
            hintsUsed.add(section);
            userXP = Math.max(0, userXP - 5);
            updateXPDisplay();
            
            let hint = '';
            switch(section) {
                case 'dragdrop':
                    hint = 'Think about physical infrastructure vs. content and services.';
                    break;
                case 'browser':
                    hint = 'Remember: DNS lookup happens before connecting to the server.';
                    break;
            }
            
            alert('Hint: ' + hint);
        }
        
        // URL Builder
        function checkURLBuilder() {
            const protocol = document.getElementById('protocol-select').value;
            const domain = document.getElementById('domain-input').value;
            const tld = document.getElementById('tld-select').value;
            const path = document.getElementById('path-input').value;
            
            if (protocol && domain && tld) {
                const fullURL = protocol + domain + tld + path;
                document.getElementById('built-url').textContent = fullURL;
                
                if (domain.length > 2 && /^[a-zA-Z0-9-]+$/.test(domain)) {
                    alert('Valid URL created: ' + fullURL);
                    addXP(25, 'url-builder');
                } else {
                    alert('Domain name should contain only letters, numbers, and hyphens.');
                }
            } else {
                alert('Please complete all required parts of the URL.');
            }
        }
        
        function resetURLBuilder() {
            document.getElementById('protocol-select').value = '';
            document.getElementById('domain-input').value = '';
            document.getElementById('tld-select').value = '';
            document.getElementById('path-input').value = '';
            document.getElementById('built-url').textContent = 'Not complete yet...';
        }
        
        // Fill in the Blanks
        function checkFillBlanks() {
            const fill1 = document.getElementById('fill1').value;
            const fill2 = document.getElementById('fill2').value;
            
            let feedback = '';
            let correct = 0;
            
            if (fill1 === 'protocol') {
                correct++;
            } else {
                feedback += 'First blank: think about http:// or https:// - what are these called?<br>';
            }
            
            if (fill2 === 'domain name') {
                correct++;
            } else {
                feedback += 'Second blank: what do we call addresses like "google.com"?<br>';
            }
            
            const feedbackDiv = document.getElementById('url-feedback');
            if (correct === 2) {
                feedbackDiv.innerHTML = '<p style="color: green;">Excellent! You understand URL components!</p>';
                addXP(20, 'fill-blanks-url');
            } else {
                feedbackDiv.innerHTML = '<p style="color: orange;">' + feedback + '</p>';
            }
        }
        
        // DNS Simulation
        let dnsStep = 0;
        let dnsInterval;
        
        function startDNSSimulation() {
            dnsStep = 0;
            clearInterval(dnsInterval);
            
            document.querySelectorAll('.dns-step').forEach(step => {
                step.classList.remove('active');
            });
            
            dnsInterval = setInterval(() => {
                if (dnsStep < 6) {
                    document.getElementById('dns-step-' + (dnsStep + 1)).classList.add('active');
                    dnsStep++;
                } else {
                    clearInterval(dnsInterval);
                    addXP(30, 'dns-simulation');
                    if (!achievements.has('DNS Explorer')) {
                        showAchievement('DNS Explorer', 'Completed the DNS simulation!', 20);
                    }
                }
            }, 1500);
        }
        
        function resetDNSSimulation() {
            clearInterval(dnsInterval);
            document.querySelectorAll('.dns-step').forEach(step => {
                step.classList.remove('active');
            });
            dnsStep = 0;
        }
        
        // DNS Sequence Check
        function checkDNSSequence() {
            const items = document.querySelectorAll('#dns-sequence .draggable');
            let correct = true;
            let currentOrder = 0;
            
            items.forEach(item => {
                const expectedOrder = parseInt(item.getAttribute('data-order'));
                currentOrder++;
                if (currentOrder !== expectedOrder) {
                    correct = false;
                }
            });
            
            const feedback = document.getElementById('dns-feedback');
            if (correct) {
                feedback.innerHTML = '<p style="color: green;">Perfect sequence! You understand the DNS process!</p>';
                addXP(35, 'dns-sequence');
            } else {
                feedback.innerHTML = '<p style="color: orange;">Not quite right. Remember: User → Browser → DNS → IP → Connection</p>';
            }
        }
        
        // Browser Animation
        let browserStep = 0;
        let browserInterval;
        
        function startBrowserAnimation() {
            browserStep = 0;
            clearInterval(browserInterval);
            
            document.querySelectorAll('#browser-animation .dns-step').forEach(step => {
                step.classList.remove('active');
            });
            
            browserInterval = setInterval(() => {
                if (browserStep < 6) {
                    document.getElementById('browser-step-' + (browserStep + 1)).classList.add('active');
                    browserStep++;
                } else {
                    clearInterval(browserInterval);
                    addXP(35, 'browser-animation');
                    setupBrowserSequence();
                }
            }, 2000);
        }
        
        function resetBrowserAnimation() {
            clearInterval(browserInterval);
            document.querySelectorAll('#browser-animation .dns-step').forEach(step => {
                step.classList.remove('active');
            });
            browserStep = 0;
        }
        
        function setupBrowserSequence() {
            const container = document.getElementById('browser-sequence');
            const steps = [
                'Browser sends URL to DNS server',
                'DNS finds the IP address',
                'IP address sent back to browser',
                'Browser requests the webpage',
                'Web server sends files',
                'Browser renders the page'
            ];
            
            // Shuffle the steps
            const shuffled = steps.sort(() => Math.random() - 0.5);
            
            container.innerHTML = '';
            shuffled.forEach((step, index) => {
                const div = document.createElement('div');
                div.className = 'draggable';
                div.draggable = true;
                div.textContent = step;
                div.setAttribute('data-correct-order', steps.indexOf(step));
                container.appendChild(div);
            });
            
            initializeDragDrop();
        }
        
        function checkBrowserSequence() {
            const items = document.querySelectorAll('#browser-sequence .draggable');
            let correct = true;
            
            items.forEach((item, index) => {
                const expectedOrder = parseInt(item.getAttribute('data-correct-order'));
                if (index !== expectedOrder) {
                    correct = false;
                }
            });
            
            const feedback = document.getElementById('browser-feedback');
            if (correct) {
                feedback.innerHTML = '<p style="color: green;">Excellent! You mastered the browser access process!</p>';
                addXP(40, 'browser-sequence');
            } else {
                feedback.innerHTML = '<p style="color: orange;">Not quite. Review the animation and try again!</p>';
            }
        }
        
        // Hosting Categories
        function checkHostingCategories() {
            let correct = 0;
            let total = 0;
            
            document.querySelectorAll('.drop-zone[data-category="hosting"] .draggable').forEach(item => {
                total++;
                if (item.getAttribute('data-answer') === 'hosting') {
                    correct++;
                    item.style.backgroundColor = '#27ae60';
                } else {
                    item.style.backgroundColor = '#e74c3c';
                }
            });
            
            document.querySelectorAll('.drop-zone[data-category="server"] .draggable').forEach(item => {
                total++;
                if (item.getAttribute('data-answer') === 'server') {
                    correct++;
                    item.style.backgroundColor = '#27ae60';
                } else {
                    item.style.backgroundColor = '#e74c3c';
                }
            });
            
            const feedback = document.getElementById('hosting-feedback');
            if (correct === total && total > 0) {
                feedback.innerHTML = '<p style="color: green;">Perfect categorization!</p>';
                addXP(30, 'hosting-categories');
            } else {
                feedback.innerHTML = '<p style="color: orange;">You got ' + correct + ' out of ' + total + ' correct.</p>';
            }
        }
        
        function resetHostingCategories() {
            const dragItems = document.querySelector('#section-6 .drag-items');
            document.querySelectorAll('#section-6 .drop-zone .draggable').forEach(item => {
                item.style.backgroundColor = '#3498db';
                dragItems.appendChild(item);
            });
            document.getElementById('hosting-feedback').innerHTML = '';
        }
        
        function checkServerQuiz() {
            const answer = document.querySelector('input[name="server-q1"]:checked');
            const feedback = document.getElementById('hosting-feedback');
            
            if (answer && answer.value === 'b') {
                feedback.innerHTML = '<p style="color: green;">Correct! A web server stores and delivers web pages.</p>';
                addXP(15, 'server-quiz');
            } else {
                feedback.innerHTML = '<p style="color: orange;">Not quite. Think about what stores and sends web pages to browsers.</p>';
            }
        }
        
        // Cloud Categories
        function checkCloudCategories() {
            let correct = 0;
            let total = 0;
            
            document.querySelectorAll('.drop-zone[data-category="benefit"] .draggable').forEach(item => {
                total++;
                if (item.getAttribute('data-answer') === 'benefit') {
                    correct++;
                    item.style.backgroundColor = '#27ae60';
                } else {
                    item.style.backgroundColor = '#e74c3c';
                }
            });
            
            document.querySelectorAll('.drop-zone[data-category="drawback"] .draggable').forEach(item => {
                total++;
                if (item.getAttribute('data-answer') === 'drawback') {
                    correct++;
                    item.style.backgroundColor = '#27ae60';
                } else {
                    item.style.backgroundColor = '#e74c3c';
                }
            });
            
            const feedback = document.getElementById('cloud-feedback');
            if (correct === total && total === 8) {
                feedback.innerHTML = '<p style="color: green;">Excellent! You understand cloud computing pros and cons!</p>';
                addXP(40, 'cloud-categories');
            } else {
                feedback.innerHTML = '<p style="color: orange;">You got ' + correct + ' out of ' + total + ' correct.</p>';
            }
        }
        
        function resetCloudCategories() {
            const dragItems = document.querySelector('#section-7 .drag-items');
            document.querySelectorAll('#section-7 .drop-zone .draggable').forEach(item => {
                item.style.backgroundColor = '#3498db';
                dragItems.appendChild(item);
            });
            document.getElementById('cloud-feedback').innerHTML = '';
        }
        
        function checkScenarios() {
            const scenario1 = document.querySelector('input[name="scenario1"]:checked');
            const explanation = document.getElementById('scenario1-explain').value;
            
            let xpAwarded = 0;
            const feedback = document.getElementById('cloud-feedback');
            
            if (scenario1 && scenario1.value === 'yes') {
                xpAwarded += 10;
                feedback.innerHTML = '<p style="color: green;">Correct choice!</p>';
            }
            
            // Check explanation for keywords
            const keywords = ['backup', 'storage', 'access', 'anywhere', 'space'];
            let keywordsFound = 0;
            
            keywords.forEach(keyword => {
                if (explanation.toLowerCase().includes(keyword)) {
                    keywordsFound++;
                }
            });
            
            if (explanation.length > 50) {
                xpAwarded += keywordsFound * 5;
                feedback.innerHTML += '<p>Good explanation using ' + keywordsFound + ' relevant concepts!</p>';
            }
            
            if (xpAwarded > 0) {
                addXP(xpAwarded, 'cloud-scenario');
            }
        }
        
        // Exam Questions
        function checkExamQuestion(questionNum) {
            if (questionNum === 1) {
                const answer = document.getElementById('exam-q1').value;
                const feedback = document.getElementById('examq1-feedback');
                
                const keywords = ['internet', 'network', 'infrastructure', 'www', 'web pages', 'resources'];
                let points = 0;
                
                keywords.forEach(keyword => {
                    if (answer.toLowerCase().includes(keyword)) {
                        points += 0.5;
                    }
                });
                
                points = Math.min(3, points);
                feedback.innerHTML = '<p>Estimated marks: ' + points + '/3</p>';
                
                if (answer.length > 100) {
                    addXP(30, 'exam-q1');
                }
            } else if (questionNum === 3) {
                const answer = document.getElementById('exam-q3').value;
                const feedback = document.getElementById('examq3-feedback');
                
                const benefits = ['anywhere', 'storage', 'security', 'demand'];
                const drawbacks = ['internet', 'slow', 'control', 'fees'];
                let points = 0;
                
                benefits.forEach(word => {
                    if (answer.toLowerCase().includes(word)) points += 0.5;
                });
                
                drawbacks.forEach(word => {
                    if (answer.toLowerCase().includes(word)) points += 0.5;
                });
                
                points = Math.min(4, points);
                feedback.innerHTML = '<p>Estimated marks: ' + points + '/4</p>';
                
                if (points >= 3) {
                    addXP(35, 'exam-q3');
                }
            }
        }
        
        // Writing Scorer Functions
        function analyzeWriting() {
            const text = document.getElementById('studentAnswer').value;
            const keywords = document.getElementById('keywords').value.split(',');
            
            let score = 100;
            let successes = [];
            let improvements = [];
            
            if (text.trim() === '') {
                alert('Please enter some text.');
                return;
            }
            
            // Check for minimum length
            if (text.length < 100) {
                const markScheme = document.getElementById('markscheme-q2');
                markScheme.style.display = 'none';
                alert('Please write a more detailed answer before checking.');
                return;
            }
            
            const cleanedText = text.trim().replace(/\s+/g, ' ');
            const sentences = cleanedText.match(/[^.!?]+[.!?]+/g) || [];
            
            // First letter capital
            if (cleanedText.charAt(0) === cleanedText.charAt(0).toUpperCase() && isNaN(cleanedText.charAt(0))) {
                successes.push('✔️ Started with a capital letter.');
            } else {
                score -= 15;
                improvements.push('❌ Your answer should begin with a capital letter.');
            }
            
            // Check sentences
            sentences.forEach(sentence => {
                const trimmed = sentence.trim();
                
                // Sentence capitalization
                if (trimmed.charAt(0) !== trimmed.charAt(0).toUpperCase()) {
                    score -= 5;
                    improvements.push('❌ A sentence beginning with "' + trimmed.substring(0, 15) + '..." needs a capital letter.');
                }
                
                // Punctuation
                const lastChar = trimmed.charAt(trimmed.length - 1);
                if (!['.', '!', '?'].includes(lastChar)) {
                    score -= 10;
                    improvements.push('❌ The sentence "' + trimmed.substring(0, 15) + '..." is missing end punctuation.');
                }
                
                // Sentence length
                const words = trimmed.split(' ').length;
                if (words < 4) {
                    score -= 10;
                    improvements.push('❌ The sentence "' + trimmed + '" seems too short. Ensure you write in full sentences.');
                }
            });
            
            // Check for "I think"
            if (/i think/i.test(cleanedText)) {
                improvements.push('💡 For formal answers, try to avoid "I think..." to sound more confident.');
            }
            
            // Check keywords
            let matchedKeywords = [];
            keywords.forEach(keyword => {
                if (cleanedText.toLowerCase().includes(keyword.trim().toLowerCase())) {
                    matchedKeywords.push(keyword.trim());
                }
            });
            
            if (matchedKeywords.length > 0) {
                successes.push('✔️ You included key terms like: ' + matchedKeywords.join(', '));
            }
            
            // Additional checks
            if (sentences.length >= 6) {
                successes.push('✔️ Good answer length with multiple sentences.');
            }
            
            if (matchedKeywords.length >= 4) {
                successes.push('✔️ Excellent use of technical vocabulary.');
                addXP(50, 'writing-scorer');
            }
            
            // Display results
            score = Math.max(0, score);
            
            const scoreCircle = document.getElementById('scoreCircle');
            const scoreValue = document.getElementById('scoreValue');
            const successList = document.getElementById('successList');
            const improvementList = document.getElementById('improvementList');
            const resultsDashboard = document.getElementById('resultsDashboard');
            
            scoreValue.textContent = score;
            
            // Update circle color
            scoreCircle.classList.remove('good', 'medium', 'poor');
            if (score > 75) {
                scoreCircle.classList.add('good');
            } else if (score > 50) {
                scoreCircle.classList.add('medium');
            } else {
                scoreCircle.classList.add('poor');
            }
            
            // Populate lists
            successList.innerHTML = '';
            improvementList.innerHTML = '';
            
            successes.forEach(success => {
                const li = document.createElement('li');
                li.textContent = success;
                successList.appendChild(li);
            });
            
            if (improvements.length === 0) {
                const li = document.createElement('li');
                li.textContent = 'Great work! No major issues found.';
                improvementList.appendChild(li);
            } else {
                improvements.forEach(improvement => {
                    const li = document.createElement('li');
                    li.textContent = improvement;
                    improvementList.appendChild(li);
                });
            }
            
            resultsDashboard.style.display = 'block';
            
            // Allow mark scheme viewing now
            document.getElementById('markscheme-q2').style.display = 'block';
        }
        
        // Summary Quiz
        function checkSummaryQuiz() {
            let correct = 0;
            const totalQuestions = 8;
            
            // Question 1
            const q1 = document.querySelector('input[name="summary-q1"]:checked');
            if (q1 && q1.value === 'c') correct++;
            
            // Question 2
            const q2 = document.querySelector('input[name="summary-q2"]:checked');
            if (q2 && q2.value === 'c') correct++;
            
            // Question 3
            const q3 = document.querySelector('input[name="summary-q3"]:checked');
            if (q3 && q3.value === 'b') correct++;
            
            // Question 4
            const q4 = document.querySelector('input[name="summary-q4"]:checked');
            if (q4 && q4.value === 'false') correct++;
            
            // Question 5
            const q5 = document.querySelector('input[name="summary-q5"]:checked');
            if (q5 && q5.value === 'b') correct++;
            
            // Question 6
            const q6 = document.getElementById('summary-q6').value.toLowerCase();
            if (q6.includes('domain') || q6.includes('://')) correct++;
            
            // Question 7
            const q7 = document.querySelector('input[name="summary-q7"]:checked');
            if (q7 && q7.value === 'c') correct++;
            
            // Question 8
            const q8 = document.getElementById('summary-q8').value.toLowerCase();
            if (q8.includes('ip')) correct++;
            
            const percentage = Math.round((correct / totalQuestions) * 100);
            const results = document.getElementById('summary-results');
            
            results.innerHTML = '<h3>Quiz Results</h3>';
            results.innerHTML += '<p>You scored ' + correct + ' out of ' + totalQuestions + ' (' + percentage + '%)</p>';
            
            if (percentage === 100) {
                results.innerHTML += '<p style="color: green;">Outstanding! Perfect score!</p>';
                addXP(100, 'summary-quiz-perfect');
                showAchievement('Quiz Master', 'Perfect score on the summary quiz!', 50);
            } else if (percentage >= 75) {
                results.innerHTML += '<p style="color: green;">Excellent work! You have a strong understanding.</p>';
                addXP(70, 'summary-quiz-good');
            } else if (percentage >= 50) {
                results.innerHTML += '<p style="color: orange;">Good effort! Review the topics you found challenging.</p>';
                addXP(40, 'summary-quiz-pass');
            } else {
                results.innerHTML += '<p style="color: red;">Keep studying! Review the lesson and try again.</p>';
                addXP(20, 'summary-quiz-attempt');
            }
        }
        
        function resetSummaryQuiz() {
            document.querySelectorAll('input[name^="summary-"]').forEach(input => {
                if (input.type === 'radio') input.checked = false;
                else input.value = '';
            });
            document.getElementById('summary-results').innerHTML = '';
        }
        
        // Drawing Canvas
        function initializeCanvas() {
            const canvas = document.getElementById('drawingCanvas');
            const ctx = canvas.getContext('2d');
            let isDrawing = false;
            
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            // Touch support
            canvas.addEventListener('touchstart', handleTouch);
            canvas.addEventListener('touchmove', handleTouch);
            canvas.addEventListener('touchend', stopDrawing);
            
            function startDrawing(e) {
                isDrawing = true;
                const rect = canvas.getBoundingClientRect();
                ctx.beginPath();
                ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
            }
            
            function draw(e) {
                if (!isDrawing) return;
                const rect = canvas.getBoundingClientRect();
                ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
                ctx.stroke();
            }
            
            function stopDrawing() {
                isDrawing = false;
            }
            
            function handleTouch(e) {
                e.preventDefault();
                const touch = e.touches[0];
                const mouseEvent = new MouseEvent(e.type === 'touchstart' ? 'mousedown' : 
                                                 e.type === 'touchmove' ? 'mousemove' : 'mouseup', {
                    clientX: touch.clientX,
                    clientY: touch.clientY
                });
                canvas.dispatchEvent(mouseEvent);
            }
            
            // Extension canvas
            const extCanvas = document.getElementById('extensionCanvas');
            if (extCanvas) {
                const extCtx = extCanvas.getContext('2d');
                extCanvas.addEventListener('mousedown', function(e) {
                    const rect = extCanvas.getBoundingClientRect();
                    extCtx.beginPath();
                    extCtx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
                    
                    function extDraw(e) {
                        extCtx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
                        extCtx.stroke();
                    }
                    
                    extCanvas.addEventListener('mousemove', extDraw);
                    
                    extCanvas.addEventListener('mouseup', function() {
                        extCanvas.removeEventListener('mousemove', extDraw);
                    });
                });
            }
        }
        
        function clearCanvas() {
            const canvas = document.getElementById('drawingCanvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
        
        function clearExtensionCanvas() {
            const canvas = document.getElementById('extensionCanvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
        
        // Extension Activities
        function saveExtension(num) {
            const textarea = event.target.previousElementSibling;
            if (textarea.value.length > 50) {
                addXP(30, 'extension-' + num);
                alert('Response saved! Great research work!');
                if (!achievements.has('Going Beyond')) {
                    showAchievement('Going Beyond', 'Completed an extension activity!', 30);
                }
            } else {
                alert('Please write a more detailed response.');
            }
        }
        
        // Predicted Marks
        function savePredictedMarks() {
            const predicted = document.getElementById('predicted-marks').value;
            if (predicted) {
                localStorage.setItem('predicted-marks-internet', predicted);
                alert('Predicted marks saved: ' + predicted + '/13');
                addXP(10, 'predicted-marks');
            }
        }
        
        // Accessibility Features
        function initializeAccessibility() {
            // Check for saved preferences
            if (localStorage.getItem('high-contrast') === 'true') {
                document.body.classList.add('high-contrast');
            }
            if (localStorage.getItem('dyslexia-font') === 'true') {
                document.body.classList.add('dyslexia-font');
            }
            
            const savedFontSize = localStorage.getItem('font-size');
            if (savedFontSize) {
                document.body.style.fontSize = savedFontSize + 'px';
            }
        }
        
        function toggleHighContrast() {
            document.body.classList.toggle('high-contrast');
            localStorage.setItem('high-contrast', document.body.classList.contains('high-contrast'));
        }
        
        function toggleDyslexiaFont() {
            document.body.classList.toggle('dyslexia-font');
            localStorage.setItem('dyslexia-font', document.body.classList.contains('dyslexia-font'));
        }
        
        function changeFontSize(delta) {
            const currentSize = parseInt(window.getComputedStyle(document.body).fontSize);
            const newSize = Math.max(12, Math.min(24, currentSize + delta));
            document.body.style.fontSize = newSize + 'px';
            localStorage.setItem('font-size', newSize);
        }
        
        // Feedback System
        function openFeedback() {
            document.getElementById('feedbackModal').style.display = 'flex';
        }
        
        function closeFeedback() {
            document.getElementById('feedbackModal').style.display = 'none';
            document.getElementById('feedbackText').value = '';
        }
        
        function sendFeedback() {
            const feedback = document.getElementById('feedbackText').value;
            if (feedback.trim()) {
                const sectionTitle = document.querySelector('.section.active h1').textContent;
                const pageNum = currentSection;
                
                // In a real implementation, this would send an email
                // For now, we'll simulate it
                const subject = 'Feedback: Internet & WWW Worksheet - ' + sectionTitle;
                const body = 'Page: ' + pageNum + ' (' + sectionTitle + ')\n\n' + feedback;
                
                // Create mailto link
                const mailtoLink = 'mailto:millingtond@mgs.org?subject=' + encodeURIComponent(subject) + 
                                  '&body=' + encodeURIComponent(body);
                
                window.location.href = mailtoLink;
                
                closeFeedback();
                alert('Thank you for your feedback!');
                addXP(5, 'feedback-sent');
            }
        }
        
        // Prevent Paste
        function preventPaste() {
            document.addEventListener('paste', function(e) {
                e.preventDefault();
                const shameMsg = document.getElementById('shameMessage');
                shameMsg.style.display = 'block';
                shameMsg.style.animation = 'shake 0.5s';
                
                setTimeout(() => {
                    shameMsg.style.display = 'none';
                }, 3000);
                
                return false;
            });
            
            // Also prevent context menu on textareas
            document.addEventListener('contextmenu', function(e) {
                if (e.target.tagName === 'TEXTAREA' || e.target.tagName === 'INPUT') {
                    e.preventDefault();
                    return false;
                }
            });
        }
        
        // Update final summary when reaching videos section
        window.addEventListener('load', function() {
            const observer = new MutationObserver(function(mutations) {
                if (document.getElementById('section-11').classList.contains('active')) {
                    document.getElementById('final-xp').textContent = userXP;
                    document.getElementById('final-level').textContent = userLevel;
                    document.getElementById('achievement-count').textContent = achievements.size;
                }
            });
            
            observer.observe(document.getElementById('section-11'), {
                attributes: true,
                attributeFilter: ['class']
            });
        });
        
        // Keyboard Navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowLeft' && currentSection > 0) {
                showSection(currentSection - 1);
            } else if (e.key === 'ArrowRight' && currentSection < 11) {
                showSection(currentSection + 1);
            }
        });
        
        // Initialize everything
        showSection(0);
        updateXPDisplay();
    </script>
</body>
</html>