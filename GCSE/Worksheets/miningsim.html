<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rare Earth Mining: The Hidden Cost of Technology</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0a0a;
            color: #333;
            overflow-x: hidden;
        }
        
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0a0a0a;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s;
        }
        
        .loading-screen h1 {
            color: #00ff41;
            font-size: 2.5em;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(0, 255, 65, 0.5);
        }
        
        .loader {
            width: 60px;
            height: 60px;
            border: 3px solid #1a1a1a;
            border-top: 3px solid #00ff41;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            display: none;
        }
        
        .header {
            text-align: center;
            padding: 40px 0;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            border-radius: 20px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 255, 65, 0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }
        
        .header h1 {
            color: #00ff41;
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 0 0 30px rgba(0, 255, 65, 0.5);
            position: relative;
            z-index: 1;
        }
        
        .header p {
            color: #888;
            font-size: 1.2em;
            position: relative;
            z-index: 1;
        }
        
        .stats-bar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #1e1e1e 0%, #2a2a2a 100%);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid #333;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 65, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .stat-card:hover::before {
            left: 100%;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            border-color: #00ff41;
            box-shadow: 0 10px 30px rgba(0, 255, 65, 0.2);
        }
        
        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #00ff41;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #888;
            font-size: 0.9em;
        }
        
        .simulation-container {
            background: #0f0f0f;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }
        
        .simulation-canvas {
            background: linear-gradient(to bottom, #87CEEB 0%, #98D8C8 30%, #8B7355 30%, #654321 100%);
            border-radius: 15px;
            height: 500px;
            position: relative;
            overflow: hidden;
            margin-bottom: 20px;
        }
        
        .sky {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 30%;
            transition: background 2s;
        }
        
        .sky.polluted {
            background: linear-gradient(to bottom, #666 0%, #888 100%);
        }
        
        .sun {
            position: absolute;
            top: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: #FFD700;
            border-radius: 50%;
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.5);
            transition: all 2s;
        }
        
        .sun.dim {
            background: #CCC;
            box-shadow: 0 0 20px rgba(200, 200, 200, 0.3);
        }
        
        .cloud {
            position: absolute;
            background: white;
            border-radius: 100px;
            opacity: 0.8;
            animation: drift 20s infinite linear;
        }
        
        .cloud::before {
            content: '';
            position: absolute;
            background: white;
            border-radius: 100px;
            top: -15px;
            left: 10px;
            width: 50px;
            height: 50px;
        }
        
        .cloud::after {
            content: '';
            position: absolute;
            background: white;
            border-radius: 100px;
            top: -10px;
            right: 10px;
            width: 40px;
            height: 40px;
        }
        
        @keyframes drift {
            from { transform: translateX(-100px); }
            to { transform: translateX(calc(100vw + 100px)); }
        }
        
        .mountain {
            position: absolute;
            bottom: 150px;
            width: 0;
            height: 0;
            border-left: 150px solid transparent;
            border-right: 150px solid transparent;
            border-bottom: 200px solid #654321;
            z-index: 1;
        }
        
        .mine-pit {
            position: absolute;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 150px;
            background: radial-gradient(ellipse at center, #222 0%, #444 100%);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            box-shadow: inset 0 10px 30px rgba(0, 0, 0, 0.8);
            transition: all 0.5s;
        }
        
        .mine-pit.active {
            animation: mining-shake 0.1s infinite;
            box-shadow: inset 0 10px 30px rgba(0, 0, 0, 0.8), 0 0 50px rgba(255, 0, 0, 0.3);
        }
        
        @keyframes mining-shake {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-2px); }
        }
        
        .equipment {
            position: absolute;
            bottom: 200px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 80px;
            background: #FFD700;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            transition: all 0.3s;
        }
        
        .equipment.active {
            animation: equipment-work 1s infinite;
        }
        
        @keyframes equipment-work {
            0%, 100% { transform: translateX(-50%) rotate(0deg); }
            25% { transform: translateX(-50%) rotate(-5deg); }
            75% { transform: translateX(-50%) rotate(5deg); }
        }
        
        .tree {
            position: absolute;
            bottom: 150px;
            cursor: pointer;
            transition: all 0.5s;
        }
        
        .tree-trunk {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 15px;
            height: 30px;
            background: #8B4513;
            border-radius: 0 0 5px 5px;
        }
        
        .tree-leaves {
            position: absolute;
            bottom: 25px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 80px;
            background: radial-gradient(ellipse at center, #228B22 0%, #006400 100%);
            border-radius: 50% 50% 45% 45%;
            box-shadow: 0 5px 20px rgba(34, 139, 34, 0.3);
            transition: all 0.5s;
        }
        
        .tree.dying .tree-leaves {
            background: radial-gradient(ellipse at center, #D2691E 0%, #8B4513 100%);
            transform: translateX(-50%) scale(0.8);
        }
        
        .tree.dead .tree-leaves {
            background: #333;
            transform: translateX(-50%) scale(0.6) translateY(20px);
            border-radius: 50%;
        }
        
        .water {
            position: absolute;
            bottom: 0;
            right: 50px;
            width: 200px;
            height: 100px;
            background: linear-gradient(to bottom, rgba(30, 144, 255, 0.6) 0%, rgba(0, 0, 139, 0.8) 100%);
            border-radius: 50% 50% 0 0;
            overflow: hidden;
            transition: all 1s;
        }
        
        .water.polluted {
            background: linear-gradient(to bottom, rgba(139, 69, 19, 0.8) 0%, rgba(0, 0, 0, 0.9) 100%);
        }
        
        .water::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 200%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            animation: water-shine 3s infinite;
        }
        
        @keyframes water-shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .particle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #666;
            border-radius: 50%;
            pointer-events: none;
        }
        
        .dust {
            background: #8B7355;
            animation: dust-float 3s infinite linear;
        }
        
        .smoke {
            background: #333;
            animation: smoke-rise 4s infinite linear;
        }
        
        .toxic {
            background: #00ff41;
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.5);
            animation: toxic-spread 5s infinite linear;
        }
        
        @keyframes dust-float {
            0% {
                transform: translateX(0) translateY(0);
                opacity: 0;
            }
            20% {
                opacity: 0.8;
            }
            100% {
                transform: translateX(100px) translateY(-200px);
                opacity: 0;
            }
        }
        
        @keyframes smoke-rise {
            0% {
                transform: translateY(0) scale(0.5);
                opacity: 0;
            }
            20% {
                opacity: 0.6;
            }
            100% {
                transform: translateY(-300px) scale(2);
                opacity: 0;
            }
        }
        
        @keyframes toxic-spread {
            0% {
                transform: translate(0, 0) scale(0.5);
                opacity: 0;
            }
            50% {
                opacity: 0.8;
            }
            100% {
                transform: translate(150px, 50px) scale(1.5);
                opacity: 0;
            }
        }
        
        .control-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .control-btn {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            border: 2px solid #333;
            color: #00ff41;
            padding: 15px 20px;
            border-radius: 10px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }
        
        .control-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(0, 255, 65, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }
        
        .control-btn:hover::before {
            width: 100%;
            height: 100%;
        }
        
        .control-btn:hover {
            border-color: #00ff41;
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 255, 65, 0.3);
        }
        
        .control-btn:active {
            transform: translateY(0);
        }
        
        .control-btn:disabled {
            background: #1a1a1a;
            border-color: #222;
            color: #444;
            cursor: not-allowed;
        }
        
        .info-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .tab {
            background: #1a1a1a;
            border: 2px solid #333;
            color: #888;
            padding: 12px 24px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        .tab.active {
            background: linear-gradient(135deg, #00ff41 0%, #00cc33 100%);
            color: #000;
            border-color: #00ff41;
            box-shadow: 0 5px 20px rgba(0, 255, 65, 0.3);
        }
        
        .tab:hover:not(.active) {
            border-color: #00ff41;
            color: #00ff41;
        }
        
        .tab-content {
            display: none;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            padding: 30px;
            border-radius: 15px;
            border: 1px solid #333;
            margin-bottom: 30px;
            animation: fadeIn 0.5s;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .materials-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .material-card {
            background: #0f0f0f;
            border: 1px solid #333;
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .material-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, #00ff41, #00cc33);
            transform: translateX(-100%);
            transition: transform 0.3s;
        }
        
        .material-card:hover::before {
            transform: translateX(0);
        }
        
        .material-card:hover {
            transform: translateY(-5px);
            border-color: #00ff41;
            box-shadow: 0 10px 30px rgba(0, 255, 65, 0.2);
        }
        
        .material-symbol {
            font-size: 2.5em;
            font-weight: bold;
            color: #00ff41;
            margin-bottom: 10px;
        }
        
        .material-name {
            font-size: 1.2em;
            color: #fff;
            margin-bottom: 5px;
        }
        
        .material-use {
            color: #888;
            font-size: 0.9em;
            margin-bottom: 10px;
        }
        
        .material-impact {
            background: rgba(255, 0, 0, 0.1);
            border-left: 3px solid #ff4444;
            padding: 10px;
            margin-top: 10px;
            border-radius: 5px;
            font-size: 0.85em;
            color: #ff8888;
        }
        
        .process-timeline {
            position: relative;
            padding: 20px 0;
            margin: 30px 0;
        }
        
        .timeline-line {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: #333;
            transform: translateY(-50%);
        }
        
        .timeline-progress {
            position: absolute;
            top: 50%;
            left: 0;
            height: 2px;
            background: linear-gradient(90deg, #00ff41, #00cc33);
            transform: translateY(-50%);
            width: 0%;
            transition: width 1s;
        }
        
        .timeline-steps {
            display: flex;
            justify-content: space-between;
            position: relative;
            z-index: 1;
        }
        
        .timeline-step {
            text-align: center;
            flex: 1;
        }
        
        .step-circle {
            width: 40px;
            height: 40px;
            background: #1a1a1a;
            border: 3px solid #333;
            border-radius: 50%;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .step-circle.active {
            background: #00ff41;
            border-color: #00ff41;
            color: #000;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.5);
        }
        
        .step-label {
            color: #666;
            font-size: 0.9em;
            transition: color 0.3s;
        }
        
        .step-label.active {
            color: #00ff41;
        }
        
        .impact-meters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .meter {
            background: #0f0f0f;
            border: 1px solid #333;
            border-radius: 10px;
            padding: 20px;
        }
        
        .meter-label {
            color: #888;
            font-size: 0.9em;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .meter-icon {
            font-size: 1.5em;
        }
        
        .meter-bar {
            height: 10px;
            background: #1a1a1a;
            border-radius: 5px;
            overflow: hidden;
            position: relative;
        }
        
        .meter-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff41, #ff4444);
            width: 0%;
            transition: width 1s;
            position: relative;
        }
        
        .meter-value {
            color: #fff;
            font-weight: bold;
            margin-top: 5px;
            text-align: right;
        }
        
        .quiz-container {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            border-radius: 20px;
            padding: 40px;
            margin-top: 40px;
            border: 1px solid #333;
        }
        
        .quiz-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .quiz-header h2 {
            color: #00ff41;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .quiz-progress {
            height: 8px;
            background: #0f0f0f;
            border-radius: 4px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .quiz-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff41, #00cc33);
            width: 0%;
            transition: width 0.5s;
        }
        
        .question-card {
            background: #0f0f0f;
            border: 1px solid #333;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            display: none;
            animation: slideIn 0.5s;
        }
        
        .question-card.active {
            display: block;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .question-number {
            color: #00ff41;
            font-size: 0.9em;
            margin-bottom: 10px;
        }
        
        .question-text {
            color: #fff;
            font-size: 1.3em;
            margin-bottom: 20px;
            line-height: 1.5;
        }
        
        .answer-option {
            background: #1a1a1a;
            border: 2px solid #333;
            border-radius: 10px;
            padding: 15px 20px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .answer-option:hover {
            border-color: #00ff41;
            transform: translateX(5px);
        }
        
        .answer-option.selected {
            background: rgba(0, 255, 65, 0.1);
            border-color: #00ff41;
        }
        
        .answer-option.correct {
            background: rgba(0, 255, 65, 0.2);
            border-color: #00ff41;
        }
        
        .answer-option.incorrect {
            background: rgba(255, 0, 0, 0.2);
            border-color: #ff4444;
        }
        
        .answer-radio {
            width: 20px;
            height: 20px;
            border: 2px solid #666;
            border-radius: 50%;
            position: relative;
            transition: all 0.3s;
        }
        
        .answer-option.selected .answer-radio {
            border-color: #00ff41;
        }
        
        .answer-radio::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 10px;
            height: 10px;
            background: #00ff41;
            border-radius: 50%;
            transform: translate(-50%, -50%) scale(0);
            transition: transform 0.3s;
        }
        
        .answer-option.selected .answer-radio::after {
            transform: translate(-50%, -50%) scale(1);
        }
        
        .quiz-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        .quiz-btn {
            background: linear-gradient(135deg, #00ff41 0%, #00cc33 100%);
            border: none;
            color: #000;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
        }
        
        .quiz-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 255, 65, 0.3);
        }
        
        .quiz-btn:disabled {
            background: #333;
            color: #666;
            cursor: not-allowed;
            transform: none;
        }
        
        .quiz-results {
            display: none;
            text-align: center;
            padding: 40px;
            animation: fadeIn 0.5s;
        }
        
        .results-score {
            font-size: 4em;
            color: #00ff41;
            margin-bottom: 20px;
            text-shadow: 0 0 30px rgba(0, 255, 65, 0.5);
        }
        
        .results-message {
            font-size: 1.3em;
            color: #888;
            margin-bottom: 30px;
        }
        
        .achievement {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            border: 2px solid #00ff41;
            border-radius: 15px;
            padding: 20px;
            margin: 20px auto;
            max-width: 400px;
            animation: achievementPop 0.5s;
        }
        
        @keyframes achievementPop {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .achievement-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }
        
        .achievement-title {
            color: #00ff41;
            font-size: 1.2em;
            margin-bottom: 5px;
        }
        
        .achievement-desc {
            color: #888;
            font-size: 0.9em;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            border: 2px solid #00ff41;
            border-radius: 10px;
            padding: 20px;
            color: #fff;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
            transform: translateX(400px);
            transition: transform 0.3s;
            z-index: 1000;
            max-width: 300px;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification-title {
            color: #00ff41;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .notification-message {
            color: #888;
            font-size: 0.9em;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .simulation-canvas {
                height: 400px;
            }
            
            .control-panel {
                grid-template-columns: 1fr 1fr;
            }
            
            .quiz-header h2 {
                font-size: 1.8em;
            }
            
            .question-text {
                font-size: 1.1em;
            }
        }
    </style>
</head>
<body>
    <div class="loading-screen" id="loadingScreen">
        <h1>RARE EARTH MINING</h1>
        <div class="loader"></div>
    </div>
    
    <div class="main-container" id="mainContainer">
        <div class="header">
            <h1>⚡ The Hidden Cost of Technology ⚡</h1>
            <p>Understanding Rare Earth Mining & Environmental Impact</p>
        </div>
        
        <div class="stats-bar">
            <div class="stat-card">
                <div class="stat-value" id="yearStat">2024</div>
                <div class="stat-label">Current Year</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="demandStat">280,000</div>
                <div class="stat-label">Tonnes Mined Annually</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="wasteRatio">1:2000</div>
                <div class="stat-label">Ore to Waste Ratio</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="recycleRate">1%</div>
                <div class="stat-label">Global Recycling Rate</div>
            </div>
        </div>
        
        <div class="simulation-container">
            <div class="simulation-canvas" id="simulationCanvas">
                <div class="sky" id="sky">
                    <div class="sun" id="sun"></div>
                    <div class="cloud" style="width: 80px; height: 40px; top: 50px; left: 100px;"></div>
                    <div class="cloud" style="width: 60px; height: 30px; top: 80px; left: 300px; animation-delay: -5s;"></div>
                </div>
                <div class="mountain" style="left: -50px;"></div>
                <div class="mountain" style="right: -50px; border-bottom-color: #554433;"></div>
                <div class="mine-pit" id="minePit"></div>
                <div class="equipment" id="equipment">🚜</div>
                <div class="water" id="water"></div>
            </div>
            
            <div class="control-panel">
                <button class="control-btn" onclick="startMining()" id="startBtn">🔨 Start Mining</button>
                <button class="control-btn" onclick="pauseMining()" id="pauseBtn" disabled>⏸️ Pause</button>
                <button class="control-btn" onclick="increaseMining()" id="increaseBtn" disabled>⚡ Increase Rate</button>
                <button class="control-btn" onclick="resetSimulation()">🔄 Reset</button>
            </div>
            
            <div class="impact-meters">
                <div class="meter">
                    <div class="meter-label">
                        <span class="meter-icon">🌫️</span>
                        Air Quality
                    </div>
                    <div class="meter-bar">
                        <div class="meter-fill" id="airMeter"></div>
                    </div>
                    <div class="meter-value" id="airValue">100%</div>
                </div>
                <div class="meter">
                    <div class="meter-label">
                        <span class="meter-icon">💧</span>
                        Water Purity
                    </div>
                    <div class="meter-bar">
                        <div class="meter-fill" id="waterMeter"></div>
                    </div>
                    <div class="meter-value" id="waterValue">100%</div>
                </div>
                <div class="meter">
                    <div class="meter-label">
                        <span class="meter-icon">🌳</span>
                        Ecosystem Health
                    </div>
                    <div class="meter-bar">
                        <div class="meter-fill" id="ecoMeter"></div>
                    </div>
                    <div class="meter-value" id="ecoValue">100%</div>
                </div>
                <div class="meter">
                    <div class="meter-label">
                        <span class="meter-icon">☢️</span>
                        Radiation Level
                    </div>
                    <div class="meter-bar">
                        <div class="meter-fill" id="radMeter"></div>
                    </div>
                    <div class="meter-value" id="radValue">0%</div>
                </div>
            </div>
        </div>
        
        <div class="info-tabs">
            <div class="tab active" onclick="showTab('materials')">📱 Materials</div>
            <div class="tab" onclick="showTab('process')">⚙️ Mining Process</div>
            <div class="tab" onclick="showTab('impact')">🌍 Environmental Impact</div>
            <div class="tab" onclick="showTab('solutions')">💡 Solutions</div>
        </div>
        
        <div class="tab-content active" id="materials-content">
            <h2>Rare Earth Elements in Your Devices</h2>
            <p>Your smartphone contains over 70 different elements. Here are the key rare earth materials:</p>
            
            <div class="materials-grid">
                <div class="material-card" onclick="showMaterialDetail('neodymium')">
                    <div class="material-symbol">Nd</div>
                    <div class="material-name">Neodymium</div>
                    <div class="material-use">Speakers, Vibration Motor, Camera</div>
                    <div class="material-impact">Mining produces 2,000 tonnes of toxic waste per tonne extracted</div>
                </div>
                
                <div class="material-card" onclick="showMaterialDetail('dysprosium')">
                    <div class="material-symbol">Dy</div>
                    <div class="material-name">Dysprosium</div>
                    <div class="material-use">Electric Motors, Hard Drives</div>
                    <div class="material-impact">Extraction releases radioactive thorium and uranium</div>
                </div>
                
                <div class="material-card" onclick="showMaterialDetail('terbium')">
                    <div class="material-symbol">Tb</div>
                    <div class="material-name">Terbium</div>
                    <div class="material-use">Display Phosphors, LED Backlights</div>
                    <div class="material-impact">Processing uses sulfuric acid that contaminates water</div>
                </div>
                
                <div class="material-card" onclick="showMaterialDetail('europium')">
                    <div class="material-symbol">Eu</div>
                    <div class="material-name">Europium</div>
                    <div class="material-use">Screen Colors (Red & Blue)</div>
                    <div class="material-impact">Creates toxic tailings ponds lasting decades</div>
                </div>
                
                <div class="material-card" onclick="showMaterialDetail('yttrium')">
                    <div class="material-symbol">Y</div>
                    <div class="material-name">Yttrium</div>
                    <div class="material-use">Display Phosphors, Camera Lens</div>
                    <div class="material-impact">Mining destroys 1 hectare of land per 100kg produced</div>
                </div>
                
                <div class="material-card" onclick="showMaterialDetail('lanthanum')">
                    <div class="material-symbol">La</div>
                    <div class="material-name">Lanthanum</div>
                    <div class="material-use">Camera Lens, Battery Electrodes</div>
                    <div class="material-impact">Refining emits toxic fluorine compounds</div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="process-content">
            <h2>The Mining Process</h2>
            <div class="process-timeline">
                <div class="timeline-line"></div>
                <div class="timeline-progress" id="timelineProgress"></div>
                <div class="timeline-steps">
                    <div class="timeline-step">
                        <div class="step-circle" id="step1">1</div>
                        <div class="step-label" id="label1">Exploration</div>
                    </div>
                    <div class="timeline-step">
                        <div class="step-circle" id="step2">2</div>
                        <div class="step-label" id="label2">Extraction</div>
                    </div>
                    <div class="timeline-step">
                        <div class="step-circle" id="step3">3</div>
                        <div class="step-label" id="label3">Crushing</div>
                    </div>
                    <div class="timeline-step">
                        <div class="step-circle" id="step4">4</div>
                        <div class="step-label" id="label4">Chemical Processing</div>
                    </div>
                    <div class="timeline-step">
                        <div class="step-circle" id="step5">5</div>
                        <div class="step-label" id="label5">Separation</div>
                    </div>
                    <div class="timeline-step">
                        <div class="step-circle" id="step6">6</div>
                        <div class="step-label" id="label6">Waste Disposal</div>
                    </div>
                </div>
            </div>
            
            <div style="background: #0f0f0f; padding: 20px; border-radius: 10px; margin-top: 20px;">
                <h3>Process Details:</h3>
                <ol style="color: #888; line-height: 1.8;">
                    <li><strong style="color: #00ff41;">Exploration:</strong> Geological surveys identify ore deposits, often in ecologically sensitive areas</li>
                    <li><strong style="color: #00ff41;">Extraction:</strong> Open-pit or underground mining removes millions of tonnes of rock</li>
                    <li><strong style="color: #00ff41;">Crushing:</strong> Ore is crushed into fine powder, creating harmful dust particles</li>
                    <li><strong style="color: #00ff41;">Chemical Processing:</strong> Acids dissolve minerals, producing toxic waste streams</li>
                    <li><strong style="color: #00ff41;">Separation:</strong> Elements are separated using solvents and high temperatures</li>
                    <li><strong style="color: #00ff41;">Waste Disposal:</strong> Radioactive tailings stored in massive ponds</li>
                </ol>
                
                <div style="background: rgba(255, 0, 0, 0.1); border-left: 3px solid #ff4444; padding: 15px; margin-top: 20px; border-radius: 5px;">
                    <strong style="color: #ff8888;">⚠️ Key Fact:</strong> For every tonne of rare earth produced, up to 2,000 tonnes of toxic waste is generated, including radioactive materials.
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="impact-content">
            <h2>Environmental & Social Impact</h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
                <div style="background: #0f0f0f; padding: 20px; border-radius: 10px; border: 1px solid #333;">
                    <h3 style="color: #00ff41; margin-bottom: 15px;">🌊 Water Contamination</h3>
                    <ul style="color: #888; line-height: 1.8;">
                        <li>Acid mine drainage pollutes rivers for decades</li>
                        <li>Heavy metals poison drinking water sources</li>
                        <li>Fish populations decline by up to 95%</li>
                        <li>Groundwater contamination spreads 10km+ from sites</li>
                    </ul>
                </div>
                
                <div style="background: #0f0f0f; padding: 20px; border-radius: 10px; border: 1px solid #333;">
                    <h3 style="color: #00ff41; margin-bottom: 15px;">🌫️ Air Pollution</h3>
                    <ul style="color: #888; line-height: 1.8;">
                        <li>Sulfur dioxide emissions cause acid rain</li>
                        <li>Particulate matter increases respiratory diseases</li>
                        <li>Fluorine gas damages vegetation</li>
                        <li>Greenhouse gas emissions: 23kg CO2 per kg REE</li>
                    </ul>
                </div>
                
                <div style="background: #0f0f0f; padding: 20px; border-radius: 10px; border: 1px solid #333;">
                    <h3 style="color: #00ff41; margin-bottom: 15px;">☢️ Radioactive Waste</h3>
                    <ul style="color: #888; line-height: 1.8;">
                        <li>Thorium and uranium released during processing</li>
                        <li>Radiation levels 30x above safe limits</li>
                        <li>Cancer rates increase in nearby communities</li>
                        <li>Contamination persists for thousands of years</li>
                    </ul>
                </div>
                
                <div style="background: #0f0f0f; padding: 20px; border-radius: 10px; border: 1px solid #333;">
                    <h3 style="color: #00ff41; margin-bottom: 15px;">👥 Social Impact</h3>
                    <ul style="color: #888; line-height: 1.8;">
                        <li>Villages relocated, destroying communities</li>
                        <li>Agricultural land becomes unusable</li>
                        <li>Health problems affect 70% of local population</li>
                        <li>Traditional livelihoods permanently lost</li>
                    </ul>
                </div>
            </div>
            
            <div style="background: linear-gradient(135deg, rgba(255, 0, 0, 0.1) 0%, rgba(255, 100, 0, 0.1) 100%); padding: 30px; border-radius: 10px; margin-top: 30px; text-align: center;">
                <h3 style="color: #ff8888; font-size: 1.5em; margin-bottom: 10px;">The Baotou Lake Disaster</h3>
                <p style="color: #ccc; line-height: 1.6;">In Inner Mongolia, China, the world's largest rare earth processing facility has created a 10 square kilometer toxic lake. This "lake" contains 180 million tonnes of radioactive waste, heavy metals, and acids. The surrounding area is now uninhabitable, earning it the name "Hell on Earth".</p>
            </div>
        </div>
        
        <div class="tab-content" id="solutions-content">
            <h2>Sustainable Solutions</h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; margin-top: 20px;">
                <div style="background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 100%); padding: 25px; border-radius: 15px; border: 2px solid #00ff41;">
                    <h3 style="color: #00ff41; margin-bottom: 15px;">♻️ Device Recycling</h3>
                    <p style="color: #888; line-height: 1.6;">Currently only 1% of rare earths are recycled. Proper e-waste recycling could recover 95% of these materials. One tonne of old phones contains 100x more gold than one tonne of gold ore!</p>
                    <ul style="color: #ccc; margin-top: 10px;">
                        <li>Return old devices to certified recyclers</li>
                        <li>Support right-to-repair legislation</li>
                        <li>Choose modular, repairable devices</li>
                    </ul>
                </div>
                
                <div style="background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 100%); padding: 25px; border-radius: 15px; border: 2px solid #00ff41;">
                    <h3 style="color: #00ff41; margin-bottom: 15px;">🔬 Alternative Materials</h3>
                    <p style="color: #888; line-height: 1.6;">Scientists are developing alternatives to rare earth materials using abundant elements. Iron-nitrogen magnets could replace neodymium in many applications.</p>
                    <ul style="color: #ccc; margin-top: 10px;">
                        <li>Quantum dot displays without rare earths</li>
                        <li>Ceramic capacitors replacing tantalum</li>
                        <li>Organic LED technology advancement</li>
                    </ul>
                </div>
                
                <div style="background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 100%); padding: 25px; border-radius: 15px; border: 2px solid #00ff41;">
                    <h3 style="color: #00ff41; margin-bottom: 15px;">🏭 Cleaner Mining</h3>
                    <p style="color: #888; line-height: 1.6;">New extraction methods can reduce environmental impact by 80%. Bioleaching uses bacteria instead of acids, and closed-loop systems prevent waste release.</p>
                    <ul style="color: #ccc; margin-top: 10px;">
                        <li>In-situ leaching minimizes surface damage</li>
                        <li>Ionic liquid extraction eliminates acids</li>
                        <li>Automated monitoring prevents spills</li>
                    </ul>
                </div>
                
                <div style="background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 100%); padding: 25px; border-radius: 15px; border: 2px solid #00ff41;">
                    <h3 style="color: #00ff41; margin-bottom: 15px;">📱 Consumer Actions</h3>
                    <p style="color: #888; line-height: 1.6;">Your choices matter! The average person upgrades their phone every 2 years, but devices can last 5+ years with proper care.</p>
                    <ul style="color: #ccc; margin-top: 10px;">
                        <li>Keep devices longer - resist upgrade culture</li>
                        <li>Buy refurbished instead of new</li>
                        <li>Support sustainable tech companies</li>
                    </ul>
                </div>
            </div>
            
            <div style="background: linear-gradient(135deg, rgba(0, 255, 65, 0.1) 0%, rgba(0, 200, 50, 0.1) 100%); padding: 30px; border-radius: 10px; margin-top: 30px; text-align: center;">
                <h3 style="color: #00ff41; font-size: 1.5em; margin-bottom: 10px;">🌍 The Circular Economy Vision</h3>
                <p style="color: #ccc; line-height: 1.6;">By 2030, the EU aims to make all electronic devices repairable and recyclable. If achieved globally, this could reduce rare earth mining by 70% and create millions of green jobs. Every recycled device is a step toward this sustainable future!</p>
            </div>
        </div>
        
        <div class="quiz-container">
            <div class="quiz-header">
                <h2>Test Your Knowledge</h2>
                <p style="color: #888;">Challenge yourself with questions about rare earth mining and environmental impact</p>
            </div>
            
            <div class="quiz-progress">
                <div class="quiz-progress-fill" id="quizProgress"></div>
            </div>
            
            <div id="quizContent">
                <!-- Questions will be dynamically inserted here -->
            </div>
            
            <div class="quiz-navigation">
                <button class="quiz-btn" onclick="previousQuestion()" id="prevBtn" style="background: #333;">Previous</button>
                <button class="quiz-btn" onclick="nextQuestion()" id="nextBtn">Next</button>
            </div>
            
            <div class="quiz-results" id="quizResults">
                <div class="results-score" id="finalScore">0%</div>
                <div class="results-message" id="resultsMessage"></div>
                <div class="achievement" id="achievement">
                    <div class="achievement-icon">🏆</div>
                    <div class="achievement-title">Environmental Champion!</div>
                    <div class="achievement-desc">You've mastered the knowledge needed to make a difference</div>
                </div>
                <button class="quiz-btn" onclick="restartQuiz()">Try Again</button>
            </div>
        </div>
    </div>
    
    <div class="notification" id="notification">
        <div class="notification-title" id="notifTitle">Achievement Unlocked!</div>
        <div class="notification-message" id="notifMessage">You've learned something new</div>
    </div>
    
    <script>
        // Global variables
        let miningActive = false;
        let miningRate = 1;
        let airQuality = 100;
        let waterPurity = 100;
        let ecosystemHealth = 100;
        let radiationLevel = 0;
        let currentQuestion = 0;
        let quizAnswers = [];
        let trees = [];
        let particles = [];
        let miningInterval;
        let particleInterval;
        let processStep = 0;
        
        // Quiz questions
        const quizQuestions = [
            {
                question: "How much toxic waste is typically produced for every tonne of rare earth elements extracted?",
                options: [
                    "100 tonnes",
                    "500 tonnes",
                    "1,000 tonnes",
                    "2,000 tonnes"
                ],
                correct: 3,
                explanation: "The extraction process is extremely inefficient, producing up to 2,000 tonnes of toxic waste per tonne of rare earth elements."
            },
            {
                question: "What percentage of rare earth elements are currently recycled globally?",
                options: [
                    "Less than 1%",
                    "About 10%",
                    "Around 25%",
                    "Over 50%"
                ],
                correct: 0,
                explanation: "Despite their value and scarcity, less than 1% of rare earth elements are recycled from old electronics."
            },
            {
                question: "Which component in a smartphone typically contains neodymium?",
                options: [
                    "The battery",
                    "The screen glass",
                    "The speaker and vibration motor",
                    "The plastic case"
                ],
                correct: 2,
                explanation: "Neodymium is used to create powerful permanent magnets found in speakers, vibration motors, and camera autofocus systems."
            },
            {
                question: "What radioactive elements are commonly released during rare earth mining?",
                options: [
                    "Plutonium and neptunium",
                    "Thorium and uranium",
                    "Radium and polonium",
                    "Cesium and strontium"
                ],
                correct: 1,
                explanation: "Thorium and uranium are naturally present in rare earth ores and are released during processing, creating radioactive waste."
            },
            {
                question: "How far can groundwater contamination spread from a rare earth mining site?",
                options: [
                    "Up to 1 kilometer",
                    "Up to 5 kilometers",
                    "Up to 10 kilometers or more",
                    "Only within the mine boundary"
                ],
                correct: 2,
                explanation: "Heavy metals and acids can contaminate groundwater over 10 kilometers from mining sites, affecting entire watersheds."
            },
            {
                question: "What is the main environmental advantage of 'urban mining' (recycling electronics)?",
                options: [
                    "It's cheaper than traditional mining",
                    "It requires no energy",
                    "It produces no waste",
                    "It avoids new environmental damage"
                ],
                correct: 3,
                explanation: "Urban mining recovers materials from existing devices, avoiding the environmental destruction caused by new mining operations."
            },
            {
                question: "Which country currently produces about 70% of the world's rare earth elements?",
                options: [
                    "United States",
                    "Australia",
                    "China",
                    "Brazil"
                ],
                correct: 2,
                explanation: "China dominates global rare earth production, though this concentration raises both environmental and supply chain concerns."
            },
            {
                question: "How much CO2 is typically emitted per kilogram of rare earth elements produced?",
                options: [
                    "2.3 kg CO2",
                    "23 kg CO2",
                    "230 kg CO2",
                    "2,300 kg CO2"
                ],
                correct: 1,
                explanation: "The energy-intensive processing of rare earth elements produces about 23 kg of CO2 per kilogram of refined material."
            },
            {
                question: "What is the most effective way individuals can reduce demand for rare earth mining?",
                options: [
                    "Never use electronic devices",
                    "Only buy the most expensive devices",
                    "Keep devices longer and recycle properly",
                    "Switch to paper-based systems"
                ],
                correct: 2,
                explanation: "Extending device lifespan and proper recycling significantly reduces the need for new rare earth extraction."
            },
            {
                question: "What emerging technology could reduce dependence on rare earth magnets?",
                options: [
                    "Wooden magnets",
                    "Iron-nitrogen magnets",
                    "Plastic magnets",
                    "Water-based magnets"
                ],
                correct: 1,
                explanation: "Scientists are developing iron-nitrogen magnets that could replace neodymium magnets in many applications using abundant materials."
            }
        ];
        
        // Initialize simulation
        function init() {
            setTimeout(() => {
                document.getElementById('loadingScreen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('loadingScreen').style.display = 'none';
                    document.getElementById('mainContainer').style.display = 'block';
                }, 500);
            }, 1500);
            
            createTrees();
            initQuiz();
            animateStats();
        }
        
        // Create trees in the simulation
        function createTrees() {
            const canvas = document.getElementById('simulationCanvas');
            const positions = [
                {left: 50, type: 'large'},
                {left: 120, type: 'small'},
                {left: 180, type: 'large'},
                {left: 600, type: 'small'},
                {left: 680, type: 'large'},
                {left: 750, type: 'small'}
            ];
            
            positions.forEach((pos, index) => {
                const tree = document.createElement('div');
                tree.className = 'tree';
                tree.style.left = pos.left + 'px';
                tree.innerHTML = `
                    <div class="tree-trunk"></div>
                    <div class="tree-leaves" style="${pos.type === 'small' ? 'width: 40px; height: 50px;' : ''}"></div>
                `;
                tree.onclick = () => showNotification('Tree Info', 'Trees absorb CO2 and provide habitat. Mining destroys entire forests.');
                canvas.appendChild(tree);
                trees.push(tree);
            });
        }
        
        // Animate statistics
        function animateStats() {
            animateValue('demandStat', 0, 280000, 2000);
            
            setInterval(() => {
                const demand = parseInt(document.getElementById('demandStat').textContent.replace(/,/g, ''));
                const newDemand = demand + Math.floor(Math.random() * 100);
                document.getElementById('demandStat').textContent = newDemand.toLocaleString();
            }, 5000);
        }
        
        // Animate number counting
        function animateValue(id, start, end, duration) {
            const element = document.getElementById(id);
            const range = end - start;
            const increment = range / (duration / 10);
            let current = start;
            
            const timer = setInterval(() => {
                current += increment;
                if (current >= end) {
                    current = end;
                    clearInterval(timer);
                }
                element.textContent = Math.floor(current).toLocaleString();
            }, 10);
        }
        
        // Mining simulation functions
        function startMining() {
            if (miningActive) return;
            
            miningActive = true;
            document.getElementById('startBtn').disabled = true;
            document.getElementById('pauseBtn').disabled = false;
            document.getElementById('increaseBtn').disabled = false;
            
            document.getElementById('minePit').classList.add('active');
            document.getElementById('equipment').classList.add('active');
            
            showNotification('Mining Started', 'Watch the environmental impact accumulate in real-time');
            
            miningInterval = setInterval(updateMining, 100);
            particleInterval = setInterval(createParticles, 200);
            
            // Start process timeline
            animateProcess();
        }
        
        function pauseMining() {
            miningActive = false;
            document.getElementById('startBtn').disabled = false;
            document.getElementById('pauseBtn').disabled = true;
            
            document.getElementById('minePit').classList.remove('active');
            document.getElementById('equipment').classList.remove('active');
            
            clearInterval(miningInterval);
            clearInterval(particleInterval);
        }
        
        function increaseMining() {
            miningRate = Math.min(miningRate + 0.5, 3);
            showNotification('Mining Intensified', `Mining rate increased to ${miningRate}x speed`);
            
            if (miningRate >= 3) {
                document.getElementById('increaseBtn').disabled = true;
            }
        }
        
        function updateMining() {
            // Update environmental metrics
            airQuality = Math.max(0, airQuality - 0.1 * miningRate);
            waterPurity = Math.max(0, waterPurity - 0.08 * miningRate);
            ecosystemHealth = Math.max(0, ecosystemHealth - 0.12 * miningRate);
            radiationLevel = Math.min(100, radiationLevel + 0.05 * miningRate);
            
            // Update meters
            updateMeter('airMeter', 'airValue', 100 - airQuality, airQuality);
            updateMeter('waterMeter', 'waterValue', 100 - waterPurity, waterPurity);
            updateMeter('ecoMeter', 'ecoValue', 100 - ecosystemHealth, ecosystemHealth);
            updateMeter('radMeter', 'radValue', radiationLevel, radiationLevel);
            
            // Environmental effects
            if (airQuality < 70) {
                document.getElementById('sky').classList.add('polluted');
                document.getElementById('sun').classList.add('dim');
            }
            
            if (waterPurity < 50) {
                document.getElementById('water').classList.add('polluted');
            }
            
            // Kill trees based on ecosystem health
            trees.forEach((tree, index) => {
                if (ecosystemHealth < 80 - (index * 15)) {
                    if (!tree.classList.contains('dying') && !tree.classList.contains('dead')) {
                        tree.classList.add('dying');
                        setTimeout(() => tree.classList.add('dead'), 2000);
                    }
                }
            });
            
            // Check for critical levels
            if (airQuality <= 0 || waterPurity <= 0 || ecosystemHealth <= 0 || radiationLevel >= 100) {
                pauseMining();
                showNotification('Environmental Disaster!', 'The ecosystem has been irreversibly damaged');
                setTimeout(() => {
                    if (confirm('The environment has been destroyed. Would you like to see what could have been done differently?')) {
                        showTab('solutions');
                    }
                }, 1000);
            }
        }
        
        function updateMeter(meterId, valueId, fillPercent, displayValue) {
            const fill = document.getElementById(meterId);
            const value = document.getElementById(valueId);
            
            fill.style.width = fillPercent + '%';
            
            // Color gradient based on value
            if (meterId === 'radMeter') {
                value.textContent = Math.round(displayValue) + '%';
                if (fillPercent > 50) {
                    fill.style.background = 'linear-gradient(90deg, #ff4444, #ff0000)';
                }
            } else {
                value.textContent = Math.round(displayValue) + '%';
                if (displayValue < 30) {
                    fill.style.background = 'linear-gradient(90deg, #ff4444, #ff0000)';
                } else if (displayValue < 60) {
                    fill.style.background = 'linear-gradient(90deg, #ffaa00, #ff4444)';
                }
            }
        }
        
        function createParticles() {
            if (!miningActive) return;
            
            const canvas = document.getElementById('simulationCanvas');
            const types = ['dust', 'smoke', 'toxic'];
            
            for (let i = 0; i < miningRate; i++) {
                const particle = document.createElement('div');
                particle.className = `particle ${types[Math.floor(Math.random() * types.length)]}`;
                
                // Position around mine
                const angle = Math.random() * Math.PI;
                const distance = Math.random() * 50 + 100;
                particle.style.left = (canvas.offsetWidth / 2 + Math.cos(angle) * distance) + 'px';
                particle.style.bottom = (150 + Math.sin(angle) * 30) + 'px';
                
                canvas.appendChild(particle);
                particles.push(particle);
                
                // Remove particle after animation
                setTimeout(() => {
                    particle.remove();
                    particles = particles.filter(p => p !== particle);
                }, 5000);
            }
        }
        
        function resetSimulation() {
            pauseMining();
            
            // Reset all values
            airQuality = 100;
            waterPurity = 100;
            ecosystemHealth = 100;
            radiationLevel = 0;
            miningRate = 1;
            processStep = 0;
            
            // Reset UI
            document.getElementById('startBtn').disabled = false;
            document.getElementById('increaseBtn').disabled = false;
            document.getElementById('sky').classList.remove('polluted');
            document.getElementById('sun').classList.remove('dim');
            document.getElementById('water').classList.remove('polluted');
            
            // Reset trees
            trees.forEach(tree => {
                tree.classList.remove('dying', 'dead');
            });
            
            // Remove all particles
            particles.forEach(p => p.remove());
            particles = [];
            
            // Reset meters
            updateMeter('airMeter', 'airValue', 0, 100);
            updateMeter('waterMeter', 'waterValue', 0, 100);
            updateMeter('ecoMeter', 'ecoValue', 0, 100);
            updateMeter('radMeter', 'radValue', 0, 0);
            
            // Reset timeline
            document.getElementById('timelineProgress').style.width = '0%';
            for (let i = 1; i <= 6; i++) {
                document.getElementById(`step${i}`).classList.remove('active');
                document.getElementById(`label${i}`).classList.remove('active');
            }
            
            showNotification('Simulation Reset', 'Environment restored to pristine condition');
        }
        
        // Process timeline animation
        function animateProcess() {
            if (!miningActive) return;
            
            processStep++;
            if (processStep > 6) processStep = 1;
            
            // Update timeline
            document.getElementById('timelineProgress').style.width = (processStep / 6 * 100) + '%';
            
            // Update steps
            for (let i = 1; i <= 6; i++) {
                if (i <= processStep) {
                    document.getElementById(`step${i}`).classList.add('active');
                    document.getElementById(`label${i}`).classList.add('active');
                } else {
                    document.getElementById(`step${i}`).classList.remove('active');
                    document.getElementById(`label${i}`).classList.remove('active');
                }
            }
            
            // Show process notification
            const processNames = [
                'Geological surveys beginning',
                'Heavy machinery extracting ore',
                'Crushing ore into fine powder',
                'Applying chemical treatments',
                'Separating rare earth elements',
                'Disposing of toxic waste'
            ];
            
            if (processStep <= 6) {
                showNotification(`Stage ${processStep}`, processNames[processStep - 1]);
            }
            
            if (miningActive) {
                setTimeout(animateProcess, 3000);
            }
        }
        
        // Tab functionality
        function showTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${tabName}-content`).classList.add('active');
        }
        
        // Material detail popup
        function showMaterialDetail(material) {
            const details = {
                neodymium: {
                    name: 'Neodymium (Nd)',
                    atomicNumber: 60,
                    uses: 'Creates the world\'s strongest permanent magnets. Essential for miniaturization of electronics.',
                    extraction: 'Requires processing 50 tonnes of ore to extract 1kg. Uses acids that contaminate soil for decades.',
                    alternatives: 'Iron-nitrogen magnets under development. 30% weaker but use abundant materials.',
                    recycling: 'Can be recovered from old hard drives and speakers with 95% efficiency.'
                },
                dysprosium: {
                    name: 'Dysprosium (Dy)',
                    atomicNumber: 66,
                    uses: 'Makes magnets heat-resistant. Critical for electric vehicle motors and wind turbines.',
                    extraction: 'Co-occurs with radioactive elements. Processing releases thorium into environment.',
                    alternatives: 'Researchers exploring nanostructured materials that work without dysprosium.',
                    recycling: 'Difficult but possible. Japan recovers from air conditioner motors.'
                },
                terbium: {
                    name: 'Terbium (Tb)',
                    atomicNumber: 65,
                    uses: 'Green phosphor in displays. Makes screens 40% more energy efficient.',
                    extraction: 'One of the rarest REEs. Mining destroys 1 hectare per 10kg produced.',
                    alternatives: 'Quantum dots can produce similar colors without rare earths.',
                    recycling: 'Recovered from old CRT monitors and fluorescent bulbs.'
                },
                europium: {
                    name: 'Europium (Eu)',
                    atomicNumber: 63,
                    uses: 'Red and blue phosphors in LED displays. Euro banknotes use it for anti-counterfeiting.',
                    extraction: 'Produces toxic tailings with heavy metal concentrations 1000x safe levels.',
                    alternatives: 'Organic LEDs (OLEDs) reduce europium needs by 90%.',
                    recycling: 'High value makes recycling economical. Recovery rate could reach 98%.'
                },
                yttrium: {
                    name: 'Yttrium (Y)',
                    atomicNumber: 39,
                    uses: 'LED phosphors, camera lenses, and superconductors. Makes displays brighter.',
                    extraction: 'Often found with heavy metals like lead and arsenic that poison water.',
                    alternatives: 'Gallium nitride semiconductors can replace some yttrium applications.',
                    recycling: 'Recovered from display panels. One recycled TV = 10 new phone screens.'
                },
                lanthanum: {
                    name: 'Lanthanum (La)',
                    atomicNumber: 57,
                    uses: 'Camera lenses (high refractive index) and hybrid car batteries.',
                    extraction: 'Processing emits hydrogen fluoride gas that kills vegetation.',
                    alternatives: 'Lithium-only batteries improving. Glass alternatives for optics.',
                    recycling: 'Toyota recycles from old Prius batteries. 95% recovery possible.'
                }
            };
            
            const detail = details[material];
            const message = `
                <strong>Atomic Number:</strong> ${detail.atomicNumber}<br><br>
                <strong>Uses:</strong> ${detail.uses}<br><br>
                <strong>Extraction Impact:</strong> ${detail.extraction}<br><br>
                <strong>Alternatives:</strong> ${detail.alternatives}<br><br>
                <strong>Recycling:</strong> ${detail.recycling}
            `;
            
            // Create detailed popup (in real implementation, this would be a modal)
            alert(`${detail.name}\n\n${message.replace(/<br>/g, '\n').replace(/<strong>/g, '').replace(/<\/strong>/g, '')}`);
        }
        
        // Quiz functionality
        function initQuiz() {
            displayQuestion();
        }
        
        function displayQuestion() {
            const container = document.getElementById('quizContent');
            const question = quizQuestions[currentQuestion];
            
            // Update progress
            document.getElementById('quizProgress').style.width = ((currentQuestion + 1) / quizQuestions.length * 100) + '%';
            
            // Clear previous question
            container.innerHTML = '';
            
            // Create question card
            const card = document.createElement('div');
            card.className = 'question-card active';
            card.innerHTML = `
                <div class="question-number">Question ${currentQuestion + 1} of ${quizQuestions.length}</div>
                <div class="question-text">${question.question}</div>
                <div class="answer-options">
                    ${question.options.map((option, index) => `
                        <div class="answer-option" onclick="selectAnswer(${index})">
                            <div class="answer-radio"></div>
                            <div>${option}</div>
                        </div>
                    `).join('')}
                </div>
            `;
            
            container.appendChild(card);
            
            // Update navigation buttons
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('nextBtn').textContent = currentQuestion === quizQuestions.length - 1 ? 'Finish' : 'Next';
            
            // Restore selected answer if exists
            if (quizAnswers[currentQuestion] !== undefined) {
                document.querySelectorAll('.answer-option')[quizAnswers[currentQuestion]].classList.add('selected');
            }
        }
        
        function selectAnswer(index) {
            // Remove previous selection
            document.querySelectorAll('.answer-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Add new selection
            document.querySelectorAll('.answer-option')[index].classList.add('selected');
            
            // Store answer
            quizAnswers[currentQuestion] = index;
        }
        
        function nextQuestion() {
            if (currentQuestion < quizQuestions.length - 1) {
                currentQuestion++;
                displayQuestion();
            } else {
                finishQuiz();
            }
        }
        
        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                displayQuestion();
            }
        }
        
        function finishQuiz() {
            // Calculate score
            let correct = 0;
            quizAnswers.forEach((answer, index) => {
                if (answer === quizQuestions[index].correct) {
                    correct++;
                }
            });
            
            const percentage = Math.round((correct / quizQuestions.length) * 100);
            
            // Hide quiz content
            document.getElementById('quizContent').style.display = 'none';
            document.querySelector('.quiz-navigation').style.display = 'none';
            
            // Show results
            document.getElementById('quizResults').style.display = 'block';
            document.getElementById('finalScore').textContent = percentage + '%';
            
            // Set message based on score
            let message = '';
            if (percentage === 100) {
                message = 'Perfect! You have mastered the knowledge about rare earth mining!';
                document.getElementById('achievement').style.display = 'block';
            } else if (percentage >= 80) {
                message = 'Excellent! You have a strong understanding of the environmental impacts.';
                document.getElementById('achievement').style.display = 'block';
                document.querySelector('.achievement-title').textContent = 'Environmental Advocate!';
            } else if (percentage >= 60) {
                message = 'Good job! You understand the key concepts. Review the materials to improve.';
                document.getElementById('achievement').style.display = 'none';
            } else {
                message = 'Keep learning! Understanding these issues is the first step to making a difference.';
                document.getElementById('achievement').style.display = 'none';
            }
            
            document.getElementById('resultsMessage').textContent = message;
            
            // Show notification
            showNotification('Quiz Complete!', `You scored ${percentage}%`);
        }
        
        function restartQuiz() {
            currentQuestion = 0;
            quizAnswers = [];
            
            document.getElementById('quizContent').style.display = 'block';
            document.querySelector('.quiz-navigation').style.display = 'flex';
            document.getElementById('quizResults').style.display = 'none';
            
            displayQuestion();
        }
        
        // Notification system
        function showNotification(title, message) {
            const notif = document.getElementById('notification');
            document.getElementById('notifTitle').textContent = title;
            document.getElementById('notifMessage').textContent = message;
            
            notif.classList.add('show');
            
            setTimeout(() => {
                notif.classList.remove('show');
            }, 3000);
        }
        
        // Initialize on load
        window.onload = init;
    </script>
</body>
</html>