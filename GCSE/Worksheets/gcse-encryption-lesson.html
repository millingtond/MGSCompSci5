<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GCSE Computer Science: Encryption & Cryptography</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0f0f0f 0%, #1a1a2e 50%, #0f0f0f 100%);
            color: #e0e0e0;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        /* Matrix Rain Effect */
        #matrix-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.1;
            z-index: 1;
        }

        .matrix-column {
            position: absolute;
            color: #00ff41;
            font-family: monospace;
            font-size: 16px;
            white-space: nowrap;
            animation: fall linear infinite;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh);
            }
        }

        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 10;
        }

        /* Header Styles */
        header {
            text-align: center;
            padding: 40px 0;
            background: linear-gradient(135deg, rgba(0, 255, 65, 0.1) 0%, rgba(0, 100, 255, 0.1) 100%);
            border-radius: 10px;
            margin-bottom: 30px;
            border: 1px solid #00ff41;
        }

        h1 {
            font-size: 3em;
            background: linear-gradient(45deg, #00ff41, #00ccff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            text-shadow: 0 0 30px rgba(0, 255, 65, 0.5);
        }

        /* XP System */
        .xp-system {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #00ff41;
            z-index: 100;
        }

        .xp-bar {
            width: 200px;
            height: 20px;
            background: #1a1a1a;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 10px;
        }

        .xp-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff41, #00ccff);
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.5);
        }

        /* Achievement System */
        .achievements {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .achievement {
            width: 40px;
            height: 40px;
            background: #1a1a1a;
            border: 2px solid #333;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .achievement.unlocked {
            border-color: #00ff41;
            background: rgba(0, 255, 65, 0.2);
            animation: achievementPop 0.5s ease;
        }

        @keyframes achievementPop {
            0% { transform: scale(0); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        /* Navigation */
        nav {
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 30px;
            border: 1px solid #00ff41;
            position: sticky;
            top: 10px;
            z-index: 50;
        }

        nav ul {
            list-style: none;
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        nav a {
            color: #00ff41;
            text-decoration: none;
            padding: 10px 20px;
            border: 1px solid #00ff41;
            border-radius: 5px;
            transition: all 0.3s ease;
            display: block;
        }

        nav a:hover {
            background: rgba(0, 255, 65, 0.2);
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.5);
        }

        /* Content Sections */
        .content-section {
            background: rgba(0, 0, 0, 0.5);
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            border: 1px solid #00ff41;
        }

        h2 {
            color: #00ff41;
            margin-bottom: 20px;
            font-size: 2em;
            text-shadow: 0 0 10px rgba(0, 255, 65, 0.5);
        }

        h3 {
            color: #00ccff;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        /* Interactive Message Decoder */
        .decoder-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .message-card {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #00ff41;
            text-align: center;
        }

        .encrypted-message {
            font-family: monospace;
            font-size: 1.5em;
            color: #ff6600;
            margin: 10px 0;
            letter-spacing: 2px;
        }

        .decode-input {
            width: 100%;
            padding: 10px;
            background: #0f0f0f;
            color: #00ff41;
            border: 1px solid #00ff41;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
            text-transform: uppercase;
        }

        .check-button {
            background: #00ff41;
            color: #0f0f0f;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .check-button:hover {
            background: #00cc33;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.5);
        }

        .result-message {
            margin-top: 10px;
            font-weight: bold;
            min-height: 20px;
        }

        .correct {
            color: #00ff41;
        }

        .incorrect {
            color: #ff4444;
        }

        /* Caesar Cipher Wheel */
        .cipher-wheel-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 30px 0;
            position: relative;
            min-height: 450px;
        }

        .cipher-wheel {
            width: 400px;
            height: 400px;
            position: relative;
            margin: 0 auto;
        }

        .wheel {
            width: 100%;
            height: 100%;
            border: 3px solid #00ff41;
            border-radius: 50%;
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
            box-sizing: border-box;
        }

        .outer-wheel {
            background: radial-gradient(circle at center, transparent 65%, rgba(0, 255, 65, 0.05) 70%, rgba(0, 255, 65, 0.1) 100%);
            z-index: 1;
        }

        .inner-wheel {
            width: 280px;
            height: 280px;
            border: 2px solid #00ccff;
            background: radial-gradient(circle at center, rgba(0, 204, 255, 0.05) 0%, rgba(0, 204, 255, 0.1) 60%, transparent 65%);
            transition: transform 0.3s ease;
            z-index: 2;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }

        .wheel-letter {
            position: absolute;
            font-weight: bold;
            font-size: 20px;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            user-select: none;
        }

        /* Input/Output Areas */
        .io-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .io-box {
            background: #0f0f0f;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #00ff41;
        }

        textarea {
            width: 100%;
            height: 100px;
            background: #1a1a1a;
            color: #00ff41;
            border: 1px solid #00ff41;
            border-radius: 5px;
            padding: 10px;
            font-family: monospace;
            font-size: 16px;
            resize: none;
        }

        /* Buttons */
        .action-button {
            background: #00ff41;
            color: #0f0f0f;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px 5px;
        }

        .action-button:hover {
            background: #00cc33;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.5);
            transform: translateY(-2px);
        }

        /* Shift Controls */
        .shift-controls {
            text-align: center;
            margin: 20px 0;
        }

        .shift-display {
            font-size: 24px;
            color: #00ff41;
            margin: 10px 0;
            font-weight: bold;
        }

        /* Challenge Box */
        .challenge-box {
            background: linear-gradient(135deg, rgba(255, 0, 100, 0.1), rgba(0, 100, 255, 0.1));
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #ff0064;
            margin: 20px 0;
        }

        /* Frequency Analysis */
        .frequency-chart {
            background: #0f0f0f;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #00ff41;
            margin-top: 20px;
        }

        .bar-chart {
            display: flex;
            align-items: flex-end;
            height: 200px;
            gap: 3px;
            margin-top: 20px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 5px;
        }

        .bar {
            flex: 1;
            background: linear-gradient(to top, #00ff41, #00ccff);
            border-radius: 3px 3px 0 0;
            position: relative;
            min-height: 5px;
            transition: height 0.3s ease;
            min-width: 20px;
        }

        .bar-label {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 11px;
            color: #00ff41;
            font-weight: bold;
        }

        /* Modern Encryption Demo */
        .key-demo {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 20px;
            align-items: center;
            margin: 20px 0;
        }

        .key-box {
            background: #0f0f0f;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #00ff41;
            text-align: center;
        }

        .arrow {
            font-size: 30px;
            color: #00ff41;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.5; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        /* Password Strength */
        .password-meter {
            margin-top: 10px;
            height: 10px;
            background: #1a1a1a;
            border-radius: 5px;
            overflow: hidden;
        }

        .password-strength {
            height: 100%;
            transition: width 0.3s ease, background 0.3s ease;
        }

        .strength-text {
            margin-top: 10px;
            font-weight: bold;
        }

        /* Info Panel */
        .info-panel {
            background: rgba(0, 100, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #00ccff;
            margin: 20px 0;
            display: none;
        }

        .info-panel.show {
            display: block;
        }

        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            padding: 30px;
            border-radius: 10px;
            border: 2px solid #00ff41;
            text-align: center;
            max-width: 400px;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .modal.active .modal-content {
            transform: scale(1);
        }

        /* Extension Styles */
        .extension-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .extension-card {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #00ff41;
        }

        /* Enigma Machine Styles */
        .enigma-machine {
            margin-top: 15px;
        }

        .rotor-container {
            display: flex;
            gap: 10px;
            margin: 10px 0;
        }

        .rotor-select {
            flex: 1;
            padding: 8px;
            background: #0f0f0f;
            color: #00ff41;
            border: 1px solid #00ff41;
            border-radius: 5px;
        }

        .enigma-io {
            margin-top: 15px;
        }

        .enigma-input {
            width: 100%;
            padding: 10px;
            background: #0f0f0f;
            color: #00ff41;
            border: 1px solid #00ff41;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        .enigma-output {
            min-height: 40px;
            padding: 10px;
            background: #0f0f0f;
            border: 1px solid #00ff41;
            border-radius: 5px;
            margin-top: 10px;
            font-family: monospace;
        }

        /* Assessment Styles */
        .assessment-card {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            padding: 25px;
            border-radius: 10px;
            border: 1px solid #00ff41;
            margin-bottom: 20px;
        }

        .definition-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .definition-card {
            background: rgba(0, 255, 65, 0.1);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(0, 255, 65, 0.3);
        }

        .definition-card h4 {
            color: #00ff41;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .exam-question {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            border: 1px solid rgba(0, 255, 65, 0.2);
        }

        .exam-question h4 {
            color: #00ff41;
            margin-bottom: 15px;
        }

        .answer-input {
            width: 100%;
            padding: 10px;
            background: #0f0f0f;
            color: #00ff41;
            border: 1px solid #00ff41;
            border-radius: 5px;
            font-family: inherit;
            margin-bottom: 10px;
            resize: vertical;
        }

        .answer-input-short {
            width: 200px;
            padding: 8px;
            background: #0f0f0f;
            color: #00ff41;
            border: 1px solid #00ff41;
            border-radius: 5px;
            margin-right: 10px;
        }

        .check-answer-btn {
            background: #00ff41;
            color: #0f0f0f;
            padding: 8px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin-right: 10px;
        }

        .check-answer-btn:hover {
            background: #00cc33;
        }

        .feedback-box {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            display: none;
        }

        .feedback-box.correct {
            background: rgba(0, 255, 65, 0.2);
            border: 1px solid #00ff41;
            display: block;
        }

        .feedback-box.incorrect {
            background: rgba(255, 0, 0, 0.2);
            border: 1px solid #ff4444;
            display: block;
        }

        .mark-scheme {
            display: none;
            margin-top: 10px;
            padding: 15px;
            background: rgba(0, 100, 255, 0.1);
            border: 1px solid rgba(0, 100, 255, 0.3);
            border-radius: 5px;
            font-size: 0.9em;
        }

        .mark-scheme.show {
            display: block;
        }

        .practice-exam {
            background: linear-gradient(135deg, rgba(255, 0, 100, 0.1), rgba(0, 100, 255, 0.1));
            border: 2px solid #ff0064;
            margin-top: 30px;
        }

        .question-context {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
            font-style: italic;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            h1 { font-size: 2em; }
            .xp-system { position: static; margin-bottom: 20px; }
            .io-container { grid-template-columns: 1fr; }
            .key-demo { grid-template-columns: 1fr; }
            nav ul { flex-direction: column; }
            .cipher-wheel { width: 300px; height: 300px; }
            .inner-wheel { width: 200px; height: 200px; }
        }
    </style>
</head>
<body>
    <!-- Matrix Background Effect -->
    <div id="matrix-bg"></div>

    <!-- XP System -->
    <div class="xp-system">
        <div><strong>Level <span id="level">1</span></strong> - <span id="levelName">Cryptography Rookie</span></div>
        <div><span id="currentXP">0</span> / <span id="requiredXP">100</span> XP</div>
        <div class="xp-bar">
            <div class="xp-fill" id="xpFill" style="width: 0%"></div>
        </div>
        <div class="achievements">
            <div class="achievement" id="achievement1" title="First Decoder">🔓</div>
            <div class="achievement" id="achievement2" title="Pattern Breaker">🗝️</div>
            <div class="achievement" id="achievement3" title="Security Expert">🛡️</div>
            <div class="achievement" id="achievement4" title="Cryptanalyst">🎯</div>
            <div class="achievement" id="achievement5" title="Encryption Master">🏆</div>
        </div>
    </div>

    <div class="container">
        <!-- Header -->
        <header>
            <h1>🔐 Encryption & Cryptography</h1>
            <p>Master the art of secret messages and digital security</p>
        </header>

        <!-- Progress Tracker -->
        <div style="background: rgba(0, 255, 65, 0.1); padding: 15px; border-radius: 10px; margin-bottom: 30px; border: 1px solid #00ff41;">
            <h3 style="margin-bottom: 10px;">📊 Your Progress</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                <div>
                    <strong>🎯 Knowledge Checks:</strong> <span id="quiz-progress">0/7 completed</span>
                </div>
                <div>
                    <strong>🔓 Messages Decoded:</strong> <span id="decode-progress">0/4 completed</span>
                </div>
                <div>
                    <strong>⭐ Total XP:</strong> <span id="total-xp">0 XP</span>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <nav>
            <ul>
                <li><a href="#starter">🎯 Starter</a></li>
                <li><a href="#caesar">🔤 Caesar Cipher</a></li>
                <li><a href="#substitution">🔀 Substitution</a></li>
                <li><a href="#modern">🔐 Modern Encryption</a></li>
                <li><a href="#passwords">🔑 Passwords</a></li>
                <li><a href="#extensions">🚀 Extensions</a></li>
                <li><a href="#assessment">📝 Assessment</a></li>
            </ul>
        </nav>

        <!-- Starter Activity -->
        <section id="starter" class="content-section">
            <h2>🕵️ Starter: Secret Message Decoder</h2>
            <p>Can you decode these secret messages? Try to figure out what encryption method was used!</p>
            
            <div class="decoder-grid">
                <div class="message-card">
                    <h3>Message 1: Caesar Cipher</h3>
                    <div class="encrypted-message">WKLV LV VHFUHW</div>
                    <p>Hint: Each letter is shifted by the same amount</p>
                    <input type="text" class="decode-input" id="decode1" placeholder="Type your answer here">
                    <button class="check-button" onclick="checkDecode(1, 'THIS IS SECRET')">Check Answer</button>
                    <div class="result-message" id="result1"></div>
                </div>

                <div class="message-card">
                    <h3>Message 2: Reverse</h3>
                    <div class="encrypted-message">OLLEH DLROW</div>
                    <p>Hint: Sometimes the simplest methods work!</p>
                    <input type="text" class="decode-input" id="decode2" placeholder="Type your answer here">
                    <button class="check-button" onclick="checkDecode(2, 'HELLO WORLD')">Check Answer</button>
                    <div class="result-message" id="result2"></div>
                </div>

                <div class="message-card">
                    <h3>Message 3: Number Code</h3>
                    <div class="encrypted-message">3-15-4-5</div>
                    <p>Hint: A=1, B=2, C=3...</p>
                    <input type="text" class="decode-input" id="decode3" placeholder="Type your answer here">
                    <button class="check-button" onclick="checkDecode(3, 'CODE')">Check Answer</button>
                    <div class="result-message" id="result3"></div>
                </div>

                <div class="message-card">
                    <h3>Message 4: Binary</h3>
                    <div class="encrypted-message">01001000 01001001</div>
                    <p>Hint: Computers speak in 1s and 0s</p>
                    <input type="text" class="decode-input" id="decode4" placeholder="Type your answer here">
                    <button class="check-button" onclick="checkDecode(4, 'HI')">Check Answer</button>
                    <div class="result-message" id="result4"></div>
                </div>
            </div>

            <!-- Quick Knowledge Check -->
            <div class="challenge-box" style="margin-top: 30px;">
                <h3>🧠 Quick Check: Encryption vs Encoding</h3>
                <p>Which of these statements is TRUE?</p>
                <div style="margin: 15px 0;">
                    <label style="display: block; margin: 10px 0; cursor: pointer;">
                        <input type="radio" name="encvsenc" value="a" style="margin-right: 10px;">
                        Encryption and encoding are the same thing
                    </label>
                    <label style="display: block; margin: 10px 0; cursor: pointer;">
                        <input type="radio" name="encvsenc" value="b" style="margin-right: 10px;">
                        Encoding changes format, encryption provides security
                    </label>
                    <label style="display: block; margin: 10px 0; cursor: pointer;">
                        <input type="radio" name="encvsenc" value="c" style="margin-right: 10px;">
                        Binary is a type of encryption
                    </label>
                </div>
                <button class="check-button" onclick="checkQuickAnswer('encvsenc', 'b', 'encvsenc-result')">Check Answer</button>
                <div class="result-message" id="encvsenc-result"></div>
            </div>
        </section>

        <!-- Task 1: Caesar Cipher -->
        <section id="caesar" class="content-section">
            <h2>🔤 Task 1: Caesar Cipher Challenge</h2>
            <p>The Caesar Cipher shifts each letter by a fixed number. Julius Caesar used a shift of 3!</p>
            
            <div class="cipher-wheel-container">
                <div class="cipher-wheel">
                    <div class="wheel outer-wheel" id="outerWheel"></div>
                    <div class="wheel inner-wheel" id="innerWheel"></div>
                </div>
            </div>

            <div class="shift-controls">
                <button class="action-button" onclick="changeShift(-1)">← Decrease</button>
                <span class="shift-display">Shift: <span id="shiftValue">3</span></span>
                <button class="action-button" onclick="changeShift(1)">Increase →</button>
            </div>

            <div class="io-container">
                <div class="io-box">
                    <h3>Plain Text</h3>
                    <textarea id="caesarInput" placeholder="Enter your message here..." oninput="caesarEncrypt()">HELLO WORLD</textarea>
                    <p style="margin-top: 10px; font-size: 0.9em; color: #888;">Type any message to see it encrypted instantly!</p>
                </div>
                <div class="io-box">
                    <h3>Cipher Text</h3>
                    <textarea id="caesarOutput" oninput="caesarDecrypt()">KHOOR ZRUOG</textarea>
                    <p style="margin-top: 10px; font-size: 0.9em; color: #888;">Edit this to decrypt automatically!</p>
                </div>
            </div>

            <div class="challenge-box">
                <h3>🎯 Challenge: Crack the Code!</h3>
                <p>Can you decrypt this message? The shift is unknown!</p>
                <div class="encrypted-message">UIJT JT B TFDSFU NFTTBHF</div>
                <p>Try different shift values until you find readable text!</p>
                <input type="text" class="decode-input" id="caesarChallenge" placeholder="Type the decrypted message">
                <button class="check-button" onclick="checkCaesarChallenge()">Check Answer</button>
                <div class="result-message" id="caesarResult"></div>
            </div>

            <!-- Caesar Cipher Knowledge Check -->
            <div class="challenge-box" style="margin-top: 30px;">
                <h3>🧠 Knowledge Check: Caesar Cipher</h3>
                <div style="margin: 20px 0;">
                    <p><strong>1. How many possible Caesar cipher shifts are there?</strong></p>
                    <select id="caesar-q1" style="background: #0f0f0f; color: #00ff41; border: 1px solid #00ff41; padding: 5px;">
                        <option value="">Choose...</option>
                        <option value="10">10</option>
                        <option value="25">25</option>
                        <option value="26">26</option>
                        <option value="52">52</option>
                    </select>
                </div>
                <div style="margin: 20px 0;">
                    <p><strong>2. Why is the Caesar cipher considered weak?</strong></p>
                    <select id="caesar-q2" style="background: #0f0f0f; color: #00ff41; border: 1px solid #00ff41; padding: 5px;">
                        <option value="">Choose...</option>
                        <option value="old">It's too old</option>
                        <option value="few">Too few possible keys</option>
                        <option value="slow">It's too slow</option>
                        <option value="complex">It's too complex</option>
                    </select>
                </div>
                <button class="check-button" onclick="checkCaesarQuiz()">Check Answers</button>
                <div class="result-message" id="caesar-quiz-result"></div>
            </div>
        </section>

        // Task 2: Substitution Cipher -->
        <section id="substitution" class="content-section">
            <h2>🔀 Task 2: Substitution Cipher Workshop</h2>
            <p>Create your own secret alphabet by substituting letters!</p>
            
            <div class="io-container">
                <div class="io-box">
                    <h3>Create Your Cipher Alphabet</h3>
                    <p>Normal: ABCDEFGHIJKLMNOPQRSTUVWXYZ</p>
                    <input type="text" id="cipherAlphabet" value="ZYXWVUTSRQPONMLKJIHGFEDCBA" style="width: 100%; padding: 10px; background: #0f0f0f; color: #00ff41; border: 1px solid #00ff41; border-radius: 5px; font-family: monospace; margin: 10px 0;">
                    <button class="action-button" onclick="randomizeAlphabet()">Randomize</button>
                    <button class="action-button" onclick="reverseAlphabet()">Reverse</button>
                </div>
                <div class="io-box">
                    <h3>Test Your Cipher</h3>
                    <textarea id="subInput" placeholder="Enter message..." oninput="substitutionEncrypt()">THE QUICK BROWN FOX</textarea>
                    <p style="margin-top: 10px; font-size: 0.9em; color: #888;">Type to encrypt with your alphabet!</p>
                    <textarea id="subOutput" oninput="substitutionDecrypt()"></textarea>
                    <p style="margin-top: 10px; font-size: 0.9em; color: #888;">Edit the encrypted text to decrypt!</p>
                </div>
            </div>

            <div class="frequency-chart">
                <h3>Frequency Analysis</h3>
                <p>See which letters appear most often - this helps crack substitution ciphers!</p>
                <p style="font-size: 0.9em; color: #888;">In English, E is the most common letter, followed by T, A, O, I, N...</p>
                <div class="bar-chart" id="frequencyChart"></div>
            </div>

            <!-- Substitution Cipher Quiz -->
            <div class="challenge-box" style="margin-top: 30px;">
                <h3>🧠 Knowledge Check: Substitution Ciphers</h3>
                <p><strong>If the most common letter in your encrypted text is 'X', which letter is it likely to represent?</strong></p>
                <div style="margin: 15px 0;">
                    <label style="display: block; margin: 10px 0; cursor: pointer;">
                        <input type="radio" name="freq-quiz" value="a" style="margin-right: 10px;">
                        A - because it's first in the alphabet
                    </label>
                    <label style="display: block; margin: 10px 0; cursor: pointer;">
                        <input type="radio" name="freq-quiz" value="e" style="margin-right: 10px;">
                        E - because it's the most common letter in English
                    </label>
                    <label style="display: block; margin: 10px 0; cursor: pointer;">
                        <input type="radio" name="freq-quiz" value="x" style="margin-right: 10px;">
                        X - it stays the same
                    </label>
                </div>
                <button class="check-button" onclick="checkQuickAnswer('freq-quiz', 'e', 'freq-quiz-result')">Check Answer</button>
                <div class="result-message" id="freq-quiz-result"></div>
            </div>
        </section>

        <!-- Task 3: Modern Encryption -->
        <section id="modern" class="content-section">
            <h2>🔐 Task 3: Modern Encryption Explorer</h2>
            
            <div class="key-demo">
                <div class="key-box">
                    <h3>🔑 Public Key</h3>
                    <p>Anyone can use this to encrypt</p>
                    <div style="background: #0f0f0f; padding: 10px; border-radius: 5px; margin-top: 10px; font-family: monospace;">RSA-2048-PUBLIC</div>
                </div>
                <div class="arrow">→</div>
                <div class="key-box">
                    <h3>🗝️ Private Key</h3>
                    <p>Only you have this to decrypt</p>
                    <div style="background: #0f0f0f; padding: 10px; border-radius: 5px; margin-top: 10px; font-family: monospace;">RSA-2048-PRIVATE</div>
                </div>
            </div>

            <div style="margin-top: 30px;">
                <h3>🌐 Real-World Applications</h3>
                <div class="extension-grid">
                    <div class="extension-card">
                        <h4>🔒 HTTPS/SSL</h4>
                        <p>Secure websites use certificates</p>
                        <button class="action-button" onclick="showInfo('https')">Learn More</button>
                        <div id="https-info" class="info-panel">
                            <h4>How HTTPS Works:</h4>
                            <ol>
                                <li>Your browser connects to a secure website</li>
                                <li>The website sends its public key certificate</li>
                                <li>Your browser verifies the certificate is valid</li>
                                <li>A symmetric key is generated and encrypted with the public key</li>
                                <li>All data is then encrypted with the faster symmetric key</li>
                            </ol>
                            <p>This is why you see a padlock icon in your browser!</p>
                        </div>
                    </div>
                    <div class="extension-card">
                        <h4>💬 WhatsApp</h4>
                        <p>End-to-end encryption</p>
                        <button class="action-button" onclick="showInfo('whatsapp')">Learn More</button>
                        <div id="whatsapp-info" class="info-panel">
                            <h4>WhatsApp End-to-End Encryption:</h4>
                            <ul>
                                <li>Each user has a unique key pair</li>
                                <li>Messages are encrypted on the sender's device</li>
                                <li>Only the recipient's device can decrypt them</li>
                                <li>Not even WhatsApp can read your messages!</li>
                                <li>This protects over 2 billion users worldwide</li>
                            </ul>
                        </div>
                    </div>
                    <div class="extension-card">
                        <h4>🏦 Online Banking</h4>
                        <p>Multiple encryption layers</p>
                        <button class="action-button" onclick="showInfo('banking')">Learn More</button>
                        <div id="banking-info" class="info-panel">
                            <h4>Banking Security Layers:</h4>
                            <ol>
                                <li><strong>SSL/TLS:</strong> Encrypts all communication</li>
                                <li><strong>AES-256:</strong> Encrypts stored data</li>
                                <li><strong>Password Hashing:</strong> Passwords are never stored in plain text</li>
                                <li><strong>2FA:</strong> Additional security with codes sent to your phone</li>
                                <li><strong>Session Tokens:</strong> Temporary keys that expire quickly</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modern Encryption Quiz -->
            <div class="challenge-box" style="margin-top: 30px;">
                <h3>🧠 Knowledge Check: Public Key Encryption</h3>
                <div style="margin: 20px 0;">
                    <p><strong>1. In public key encryption, which key do you share with everyone?</strong></p>
                    <select id="public-q1" style="background: #0f0f0f; color: #00ff41; border: 1px solid #00ff41; padding: 5px; margin-bottom: 15px;">
                        <option value="">Choose...</option>
                        <option value="private">Private key</option>
                        <option value="public">Public key</option>
                        <option value="both">Both keys</option>
                        <option value="neither">Neither key</option>
                    </select>
                    
                    <p><strong>2. What makes HTTPS connections secure?</strong></p>
                    <select id="public-q2" style="background: #0f0f0f; color: #00ff41; border: 1px solid #00ff41; padding: 5px; margin-bottom: 15px;">
                        <option value="">Choose...</option>
                        <option value="fast">They're faster</option>
                        <option value="encrypt">They encrypt all data</option>
                        <option value="free">They're free</option>
                        <option value="simple">They're simpler</option>
                    </select>

                    <p><strong>3. True or False: WhatsApp can read your messages</strong></p>
                    <select id="public-q3" style="background: #0f0f0f; color: #00ff41; border: 1px solid #00ff41; padding: 5px;">
                        <option value="">Choose...</option>
                        <option value="true">True</option>
                        <option value="false">False - they use end-to-end encryption</option>
                    </select>
                </div>
                <button class="check-button" onclick="checkModernQuiz()">Check Answers</button>
                <div class="result-message" id="modern-quiz-result"></div>
            </div>
        </section>

        <!-- Task 4: Password & Hashing -->
        <section id="passwords" class="content-section">
            <h2>🔑 Task 4: Password & Hashing Lab</h2>
            
            <div class="io-box" style="max-width: 600px; margin: 0 auto;">
                <h3>Password Strength Analyzer</h3>
                <input type="password" id="passwordInput" placeholder="Enter a password..." style="width: 100%; padding: 10px; background: #0f0f0f; color: #00ff41; border: 1px solid #00ff41; border-radius: 5px; margin-bottom: 10px;" oninput="checkPasswordStrength()">
                <div class="password-meter">
                    <div class="password-strength" id="strengthBar"></div>
                </div>
                <div class="strength-text" id="strengthText">Enter a password to check strength</div>
                
                <h3 style="margin-top: 30px;">🔐 What is Hashing?</h3>
                <p><strong>Hashing is like a one-way blender for data!</strong></p>
                <ul style="list-style: none; padding: 0; margin: 15px 0;">
                    <li>🥤 <strong>Imagine a smoothie:</strong> You can blend fruits together, but you can't un-blend them back into whole fruits!</li>
                    <li>🔒 <strong>Same with hashing:</strong> "password123" → "5f4dcc3b5aa765d61d8327deb882cf99"</li>
                    <li>✅ <strong>Always the same:</strong> The same input always gives the same hash</li>
                    <li>❌ <strong>Can't reverse it:</strong> You can't turn the hash back into the password</li>
                    <li>🔐 <strong>How websites work:</strong> They store the hash, not your actual password!</li>
                </ul>
                <p style="margin-top: 15px;"><strong>Try it yourself:</strong></p>
                <input type="text" id="hashInput" placeholder="Enter text to hash..." style="width: 100%; padding: 10px; background: #0f0f0f; color: #00ff41; border: 1px solid #00ff41; border-radius: 5px; margin: 10px 0;" oninput="hashDemo()">
                <div id="hashOutput" style="background: #0f0f0f; padding: 10px; border-radius: 5px; margin-top: 10px; font-family: monospace; word-break: break-all; min-height: 40px;"></div>
            </div>

            <div class="challenge-box">
                <h3>🎮 Security Knowledge Check</h3>
                <p>Which defense works best against each threat?</p>
                <ul style="list-style: none; padding: 0;">
                    <li style="margin: 10px 0;">
                        <strong>Brute Force Attack</strong> (trying every possible password) → 
                        <select id="defense1" style="background: #0f0f0f; color: #00ff41; border: 1px solid #00ff41; padding: 5px;">
                            <option value="">Choose defense...</option>
                            <option value="long">Long, complex passwords</option>
                            <option value="2fa">Two-factor authentication</option>
                            <option value="salt">Adding salt to hashes</option>
                        </select>
                    </li>
                    <li style="margin: 10px 0;">
                        <strong>Dictionary Attack</strong> (trying common passwords) → 
                        <select id="defense2" style="background: #0f0f0f; color: #00ff41; border: 1px solid #00ff41; padding: 5px;">
                            <option value="">Choose defense...</option>
                            <option value="long">Long, complex passwords</option>
                            <option value="2fa">Two-factor authentication</option>
                            <option value="salt">Adding salt to hashes</option>
                        </select>
                    </li>
                    <li style="margin: 10px 0;">
                        <strong>Keyloggers</strong> (recording what you type) → 
                        <select id="defense3" style="background: #0f0f0f; color: #00ff41; border: 1px solid #00ff41; padding: 5px;">
                            <option value="">Choose defense...</option>
                            <option value="long">Long, complex passwords</option>
                            <option value="2fa">Two-factor authentication</option>
                            <option value="salt">Adding salt to hashes</option>
                        </select>
                    </li>
                </ul>
                <button class="check-button" onclick="checkSecurityAnswers()">Check Answers</button>
                <div class="result-message" id="securityResult"></div>
                <div class="info-panel" id="security-explanation" style="margin-top: 15px;">
                    <h4>Why these defenses work:</h4>
                    <ul>
                        <li><strong>Long passwords</strong> make brute force take too long (years instead of minutes!)</li>
                        <li><strong>Two-factor authentication (2FA)</strong> requires something you know AND something you have (like your phone)</li>
                        <li><strong>Salt</strong> is random data added to passwords before hashing, making each hash unique</li>
                    </ul>
                </div>
            </div>

            <!-- Password Knowledge Check -->
            <div class="challenge-box" style="margin-top: 30px;">
                <h3>🧠 Quick Quiz: Password Security</h3>
                <p><strong>Which password would take longest to crack?</strong></p>
                <div style="margin: 15px 0;">
                    <label style="display: block; margin: 10px 0; cursor: pointer;">
                        <input type="radio" name="pass-quiz" value="a" style="margin-right: 10px;">
                        password123
                    </label>
                    <label style="display: block; margin: 10px 0; cursor: pointer;">
                        <input type="radio" name="pass-quiz" value="b" style="margin-right: 10px;">
                        P@ssw0rd!
                    </label>
                    <label style="display: block; margin: 10px 0; cursor: pointer;">
                        <input type="radio" name="pass-quiz" value="c" style="margin-right: 10px;">
                        Tr0ub4dor&3
                    </label>
                    <label style="display: block; margin: 10px 0; cursor: pointer;">
                        <input type="radio" name="pass-quiz" value="d" style="margin-right: 10px;">
                        correct-horse-battery-staple
                    </label>
                </div>
                <button class="check-button" onclick="checkQuickAnswer('pass-quiz', 'd', 'pass-quiz-result', 'Long passphrases with multiple words are actually stronger than short complex passwords!')">Check Answer</button>
                <div class="result-message" id="pass-quiz-result"></div>
            </div>
        </section>

        <!-- Extension Activities -->
        <section id="extensions" class="content-section">
            <h2>🚀 Extension Activities</h2>
            
            <div class="extension-grid">
                <div class="extension-card">
                    <h3>🔮 Enigma Machine Simulator</h3>
                    <p>Experience the famous WWII encryption device</p>
                    
                    <div class="enigma-machine">
                        <h4>Rotor Settings</h4>
                        <div class="rotor-container">
                            <select id="rotor1" class="rotor-select">
                                <option value="1">Rotor I</option>
                                <option value="2">Rotor II</option>
                                <option value="3">Rotor III</option>
                            </select>
                            <select id="rotor2" class="rotor-select">
                                <option value="2">Rotor II</option>
                                <option value="3">Rotor III</option>
                                <option value="1">Rotor I</option>
                            </select>
                            <select id="rotor3" class="rotor-select">
                                <option value="3">Rotor III</option>
                                <option value="1">Rotor I</option>
                                <option value="2">Rotor II</option>
                            </select>
                        </div>
                        
                        <div class="enigma-io">
                            <input type="text" id="enigmaInput" placeholder="Enter message" class="enigma-input">
                            <button onclick="enigmaEncrypt()" class="action-button">Encrypt</button>
                            <div id="enigmaOutput" class="enigma-output"></div>
                        </div>
                    </div>
                </div>
                
                <div class="extension-card">
                    <h3>⛓️ Blockchain Basics</h3>
                    <p>See how encryption powers cryptocurrency</p>
                    <button class="action-button" onclick="showInfo('blockchain')">Learn More</button>
                    <div id="blockchain-info" class="info-panel">
                        <h4>How Blockchain Uses Encryption:</h4>
                        <ul>
                            <li><strong>Hashing:</strong> Each block contains a hash of the previous block</li>
                            <li><strong>Digital Signatures:</strong> Transactions are signed with private keys</li>
                            <li><strong>Proof of Work:</strong> Miners solve complex cryptographic puzzles</li>
                            <li><strong>Immutability:</strong> Changing one block would break the entire chain</li>
                        </ul>
                        <p>This creates a secure, decentralized ledger that powers Bitcoin and other cryptocurrencies!</p>
                    </div>
                </div>
                
                <div class="extension-card">
                    <h3>🚀 Quantum Encryption</h3>
                    <p>The future of unbreakable encryption</p>
                    <button class="action-button" onclick="showInfo('quantum')">Explore</button>
                    <div id="quantum-info" class="info-panel">
                        <h4>Quantum Key Distribution (QKD):</h4>
                        <ul>
                            <li>Uses quantum mechanics principles</li>
                            <li>Photons carry encryption keys</li>
                            <li>Any interception changes the quantum state</li>
                            <li>Eavesdropping is immediately detected!</li>
                            <li>Already used by some governments and banks</li>
                        </ul>
                        <p>When quantum computers arrive, only quantum encryption will be safe!</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Assessment Section -->
        <section id="assessment" class="content-section">
            <h2>📝 GCSE Assessment Questions</h2>
            
            <!-- Key Definitions -->
            <div class="assessment-card">
                <h3>🔑 Key Definitions to Remember</h3>
                <div class="definition-grid">
                    <div class="definition-card">
                        <h4>Encryption</h4>
                        <p>An algorithm that converts readable data (plaintext) into unintelligible characters (ciphertext) to prevent unauthorised access using an encryption key.</p>
                    </div>
                    <div class="definition-card">
                        <h4>Plain Text</h4>
                        <p>Message data before it is encrypted - the original, readable format.</p>
                    </div>
                    <div class="definition-card">
                        <h4>Cipher Text</h4>
                        <p>Data that has been encrypted - the scrambled, unreadable format.</p>
                    </div>
                </div>
            </div>

            <!-- Exam Questions -->
            <div class="assessment-card">
                <h3>📋 Exam-Style Questions</h3>
                
                <!-- Question 1 -->
                <div class="exam-question">
                    <h4>Question 1: Define encryption (2 marks)</h4>
                    <textarea class="answer-input" placeholder="Type your answer here..." rows="3"></textarea>
                    <button class="check-answer-btn" onclick="checkAnswer(1)">Check Answer</button>
                    <div id="feedback1" class="feedback-box"></div>
                    <div id="markscheme1" class="mark-scheme">
                        <strong>Mark Scheme:</strong><br>
                        • An algorithm/process that converts data (1 mark)<br>
                        • From readable/plaintext to unreadable/ciphertext (1 mark)<br>
                        <em>Accept: mentions encryption key, prevents unauthorised access</em>
                    </div>
                </div>

                <!-- Question 2 -->
                <div class="exam-question">
                    <h4>Question 2: Explain why encryption is important for a company storing customer data (4 marks)</h4>
                    <textarea class="answer-input" placeholder="Type your answer here..." rows="5"></textarea>
                    <button class="check-answer-btn" onclick="checkAnswer(2)">Check Answer</button>
                    <div id="feedback2" class="feedback-box"></div>
                    <div id="markscheme2" class="mark-scheme">
                        <strong>Mark Scheme (any 4 from):</strong><br>
                        • Data cannot be understood if intercepted/stolen (1 mark)<br>
                        • The data will be meaningless to unauthorised users (1 mark)<br>
                        • Only authorised users can access with the key (1 mark)<br>
                        • Protects confidential/personal customer data (1 mark)<br>
                        • Legal requirement/follows DPA/GDPR legislation (1 mark)<br>
                        • Duty to protect customer information (1 mark)<br>
                        • Allows secure remote working (1 mark)<br>
                        • Prevents data breaches/financial loss (1 mark)
                    </div>
                </div>

                <!-- Question 3 -->
                <div class="exam-question">
                    <h4>Question 3: A Caesar cipher shifts each letter by 3. Encrypt the word "DATA" (2 marks)</h4>
                    <input type="text" class="answer-input-short" placeholder="Your answer">
                    <button class="check-answer-btn" onclick="checkAnswer(3)">Check Answer</button>
                    <div id="feedback3" class="feedback-box"></div>
                    <div id="markscheme3" class="mark-scheme">
                        <strong>Answer: GDWD</strong><br>
                        • D→G, A→D, T→W, A→D (2 marks for correct answer)<br>
                        • 1 mark for showing working or getting 2-3 letters correct
                    </div>
                </div>

                <!-- Question 4 -->
                <div class="exam-question">
                    <h4>Question 4: Describe the difference between symmetric and asymmetric encryption (3 marks)</h4>
                    <textarea class="answer-input" placeholder="Type your answer here..." rows="4"></textarea>
                    <button class="check-answer-btn" onclick="checkAnswer(4)">Check Answer</button>
                    <div id="feedback4" class="feedback-box"></div>
                    <div id="markscheme4" class="mark-scheme">
                        <strong>Mark Scheme:</strong><br>
                        • Symmetric uses the same key for encryption and decryption (1 mark)<br>
                        • Asymmetric uses different keys/public and private keys (1 mark)<br>
                        • Symmetric is faster but less secure for key exchange OR Asymmetric is more secure but slower (1 mark)
                    </div>
                </div>

                <!-- Question 5 -->
                <div class="exam-question">
                    <h4>Question 5: State what is meant by 'plaintext' and 'ciphertext' (2 marks)</h4>
                    <textarea class="answer-input" placeholder="Type your answer here..." rows="3"></textarea>
                    <button class="check-answer-btn" onclick="checkAnswer(5)">Check Answer</button>
                    <div id="feedback5" class="feedback-box"></div>
                    <div id="markscheme5" class="mark-scheme">
                        <strong>Mark Scheme:</strong><br>
                        • Plaintext: the original/readable message before encryption (1 mark)<br>
                        • Ciphertext: the encrypted/scrambled/unreadable message (1 mark)
                    </div>
                </div>

                <!-- Question 6 -->
                <div class="exam-question">
                    <h4>Question 6: Explain how a brute force attack works on encrypted data (3 marks)</h4>
                    <textarea class="answer-input" placeholder="Type your answer here..." rows="4"></textarea>
                    <button class="check-answer-btn" onclick="checkAnswer(6)">Check Answer</button>
                    <div id="feedback6" class="feedback-box"></div>
                    <div id="markscheme6" class="mark-scheme">
                        <strong>Mark Scheme:</strong><br>
                        • Tries every possible key/combination (1 mark)<br>
                        • Until the correct key is found (1 mark)<br>
                        • Time taken depends on key length/complexity (1 mark)<br>
                        <em>Accept: automated process, computationally expensive</em>
                    </div>
                </div>

                <!-- Question 7 -->
                <div class="exam-question">
                    <h4>Question 7: Give two reasons why companies must encrypt employee data, not just customer data (2 marks)</h4>
                    <textarea class="answer-input" placeholder="Type your answer here..." rows="3"></textarea>
                    <button class="check-answer-btn" onclick="checkAnswer(7)">Check Answer</button>
                    <div id="feedback7" class="feedback-box"></div>
                    <div id="markscheme7" class="mark-scheme">
                        <strong>Mark Scheme (any 2 from):</strong><br>
                        • Legal duty to protect employee personal data (1 mark)<br>
                        • Employee data is also covered by DPA/GDPR (1 mark)<br>
                        • Prevent identity theft of employees (1 mark)<br>
                        • Protect sensitive information (salary, medical records) (1 mark)<br>
                        • Maintain trust with workforce (1 mark)
                    </div>
                </div>

                <!-- Practice Exam -->
                <div class="exam-question practice-exam">
                    <h4>🎯 6-Mark Question: Encryption in Online Banking</h4>
                    <p class="question-context">A bank uses encryption to protect customer data during online banking sessions.</p>
                    <p><strong>Discuss how encryption helps protect customer data and why different types of encryption might be used at different stages of an online banking session. (6 marks)</strong></p>
                    <textarea class="answer-input" placeholder="Plan your answer covering: types of encryption, where each is used, benefits, and importance..." rows="8"></textarea>
                    <button class="check-answer-btn" onclick="checkAnswer(8)">Check Answer</button>
                    <div id="feedback8" class="feedback-box"></div>
                    <div id="markscheme8" class="mark-scheme">
                        <strong>Mark Scheme - Level Response:</strong><br>
                        <strong>Level 3 (5-6 marks):</strong> Comprehensive understanding<br>
                        • Clear explanation of both symmetric and asymmetric encryption<br>
                        • Specific examples (e.g., SSL/TLS for connection, AES for data transfer)<br>
                        • Understands why different types are used (speed vs security)<br>
                        • Links to real scenarios (login credentials, transaction data)<br>
                        <br>
                        <strong>Level 2 (3-4 marks):</strong> Good understanding<br>
                        • Mentions different types of encryption<br>
                        • Some explanation of benefits<br>
                        • May lack specific examples or full reasoning<br>
                        <br>
                        <strong>Level 1 (1-2 marks):</strong> Basic understanding<br>
                        • States encryption protects data<br>
                        • Limited technical knowledge shown<br>
                        <br>
                        <strong>Key points to include:</strong><br>
                        • HTTPS/SSL uses asymmetric for initial handshake<br>
                        • Symmetric encryption for actual data transfer (faster)<br>
                        • Protects against man-in-the-middle attacks<br>
                        • Passwords are hashed, not just encrypted<br>
                        • End-to-end encryption prevents bank employees seeing data<br>
                        • Compliance with financial regulations
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Modal for Achievements -->
    <div class="modal" id="achievementModal">
        <div class="modal-content">
            <h2>🎉 Achievement Unlocked!</h2>
            <div id="achievementIcon" style="font-size: 60px; margin: 20px 0;"></div>
            <h3 id="achievementName"></h3>
            <p id="achievementDesc"></p>
            <button class="action-button" onclick="closeModal()">Awesome!</button>
        </div>
    </div>

    <script>
        // Game State with XP tracking
        let gameState = {
            xp: 0,
            level: 1,
            achievements: {
                1: false, // First Decoder
                2: false, // Pattern Breaker
                3: false, // Security Expert
                4: false, // Cryptanalyst
                5: false  // Encryption Master
            },
            caesarShift: 3,
            xpActions: new Set() // Track completed actions to prevent XP farming
        };

        const levels = [
            { name: "Cryptography Rookie", xp: 0 },
            { name: "Code Breaker", xp: 100 },
            { name: "Cipher Expert", xp: 250 },
            { name: "Security Analyst", xp: 400 },
            { name: "Master Codebreaker", xp: 500 }
        ];

        // XP and Achievement System
        function addXP(amount, actionId) {
            // Prevent XP farming by tracking actions
            if (actionId && gameState.xpActions.has(actionId)) {
                return; // Already got XP for this action
            }
            
            if (actionId) {
                gameState.xpActions.add(actionId);
            }
            
            gameState.xp += amount;
            updateUI();
            checkLevelUp();
        }

        function updateUI() {
            const currentLevel = getLevelInfo();
            document.getElementById('level').textContent = currentLevel.level;
            document.getElementById('levelName').textContent = currentLevel.name;
            document.getElementById('currentXP').textContent = gameState.xp;
            document.getElementById('requiredXP').textContent = currentLevel.nextLevelXP || 'MAX';
            
            const xpPercentage = currentLevel.nextLevelXP ? 
                ((gameState.xp - currentLevel.currentLevelXP) / (currentLevel.nextLevelXP - currentLevel.currentLevelXP)) * 100 : 100;
            document.getElementById('xpFill').style.width = xpPercentage + '%';
            
            // Update progress trackers
            const quizzes = ['encvsenc', 'caesar_quiz', 'freq-quiz', 'modern_quiz', 'pass-quiz', 'security_quiz', 'question_'];
            let quizCount = 0;
            quizzes.forEach(quiz => {
                if (Array.from(gameState.xpActions).some(action => action.includes(quiz))) {
                    quizCount++;
                }
            });
            document.getElementById('quiz-progress').textContent = `${quizCount}/7 completed`;
            
            // Update decode progress
            let decodeCount = 0;
            for (let i = 1; i <= 4; i++) {
                if (gameState.xpActions.has(`decode_${i}`)) decodeCount++;
            }
            document.getElementById('decode-progress').textContent = `${decodeCount}/4 completed`;
            
            // Update total XP
            document.getElementById('total-xp').textContent = `${gameState.xp} XP`;
        }

        function getLevelInfo() {
            let level = 1;
            let name = levels[0].name;
            let currentLevelXP = 0;
            let nextLevelXP = levels[1].xp;
            
            for (let i = 0; i < levels.length; i++) {
                if (gameState.xp >= levels[i].xp) {
                    level = i + 1;
                    name = levels[i].name;
                    currentLevelXP = levels[i].xp;
                    nextLevelXP = levels[i + 1] ? levels[i + 1].xp : null;
                }
            }
            
            return { level, name, currentLevelXP, nextLevelXP };
        }

        function checkLevelUp() {
            const level = getLevelInfo().level;
            if (level > gameState.level) {
                gameState.level = level;
                showModal('🎊', 'Level Up!', `You've reached Level ${level}: ${getLevelInfo().name}!`);
            }
        }

        function unlockAchievement(id, icon, name, desc) {
            if (!gameState.achievements[id]) {
                gameState.achievements[id] = true;
                document.getElementById(`achievement${id}`).classList.add('unlocked');
                showModal(icon, name, desc);
                addXP(50, `achievement_${id}`);
            }
        }

        function showModal(icon, name, desc) {
            document.getElementById('achievementIcon').textContent = icon;
            document.getElementById('achievementName').textContent = name;
            document.getElementById('achievementDesc').textContent = desc;
            document.getElementById('achievementModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('achievementModal').classList.remove('active');
        }

        // Starter Activity Functions
        function checkDecode(num, correctAnswer) {
            const input = document.getElementById(`decode${num}`).value.toUpperCase().trim();
            const result = document.getElementById(`result${num}`);
            
            if (input === correctAnswer) {
                result.textContent = '✓ Correct! Well done!';
                result.className = 'result-message correct';
                addXP(10, `decode_${num}`);
                
                // Check if all decoded for achievement
                let allDecoded = true;
                for (let i = 1; i <= 4; i++) {
                    if (!gameState.xpActions.has(`decode_${i}`)) {
                        allDecoded = false;
                        break;
                    }
                }
                if (allDecoded) {
                    unlockAchievement(1, '🔓', 'First Decoder', 'You decoded all the starter messages!');
                }
            } else {
                result.textContent = '✗ Not quite. Try again!';
                result.className = 'result-message incorrect';
            }
        }

        // Caesar Cipher Functions
        function createCipherWheel() {
            const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const outerWheel = document.getElementById('outerWheel');
            const innerWheel = document.getElementById('innerWheel');
            
            // Clear existing letters
            outerWheel.innerHTML = '';
            innerWheel.innerHTML = '';
            
            // Create outer wheel letters (fixed)
            for (let i = 0; i < 26; i++) {
                const angle = (i * 360 / 26) - 90; // Start from top
                const letter = document.createElement('div');
                letter.className = 'wheel-letter';
                letter.textContent = alphabet[i];
                letter.style.color = '#00ff41';
                letter.style.fontSize = '18px';
                letter.style.fontWeight = 'bold';
                
                // Position letter on circle
                const radius = 190; // Close to edge of outer wheel
                const angleRad = angle * Math.PI / 180;
                const x = Math.cos(angleRad) * radius;
                const y = Math.sin(angleRad) * radius;
                
                letter.style.position = 'absolute';
                letter.style.left = '50%';
                letter.style.top = '50%';
                letter.style.transform = `translate(-50%, -50%) translate(${x}px, ${y}px)`;
                
                outerWheel.appendChild(letter);
            }
            
            // Create inner wheel letters (rotatable)
            for (let i = 0; i < 26; i++) {
                const angle = (i * 360 / 26) - 90; // Start from top
                const letter = document.createElement('div');
                letter.className = 'wheel-letter';
                letter.textContent = alphabet[i];
                letter.style.color = '#00ccff';
                letter.style.fontSize = '18px';
                letter.style.fontWeight = 'bold';
                
                // Position letter on circle
                const radius = 130; // Close to edge of inner wheel
                const angleRad = angle * Math.PI / 180;
                const x = Math.cos(angleRad) * radius;
                const y = Math.sin(angleRad) * radius;
                
                letter.style.position = 'absolute';
                letter.style.left = '50%';
                letter.style.top = '50%';
                letter.style.transform = `translate(-50%, -50%) translate(${x}px, ${y}px)`;
                
                innerWheel.appendChild(letter);
            }
        }

        function changeShift(delta) {
            // Update shift value (0-25 range for easier calculation)
            gameState.caesarShift = (gameState.caesarShift + delta - 1 + 26) % 26 + 1;
            document.getElementById('shiftValue').textContent = gameState.caesarShift;
            
            // Rotate all inner wheel letters
            const innerWheel = document.getElementById('innerWheel');
            const letters = innerWheel.querySelectorAll('.wheel-letter');
            
            letters.forEach((letter, index) => {
                const baseAngle = (index * 360 / 26) - 90;
                const rotationAngle = -gameState.caesarShift * (360/26); // Negative for correct direction
                const finalAngle = baseAngle + rotationAngle;
                const angleRad = finalAngle * Math.PI / 180;
                
                const radius = 130;
                const x = Math.cos(angleRad) * radius;
                const y = Math.sin(angleRad) * radius;
                
                letter.style.transform = `translate(-50%, -50%) translate(${x}px, ${y}px)`;
            });
            
            caesarEncrypt();
        }

        function caesarEncrypt() {
            const input = document.getElementById('caesarInput').value.toUpperCase();
            let output = '';
            
            for (let char of input) {
                if (char >= 'A' && char <= 'Z') {
                    const shifted = ((char.charCodeAt(0) - 65 + gameState.caesarShift) % 26) + 65;
                    output += String.fromCharCode(shifted);
                } else {
                    output += char;
                }
            }
            
            document.getElementById('caesarOutput').value = output;
            addXP(5, `caesar_encrypt_${input.substring(0, 10)}`);
        }

        function caesarDecrypt() {
            const input = document.getElementById('caesarOutput').value.toUpperCase();
            let output = '';
            
            for (let char of input) {
                if (char >= 'A' && char <= 'Z') {
                    const shifted = ((char.charCodeAt(0) - 65 - gameState.caesarShift + 26) % 26) + 65;
                    output += String.fromCharCode(shifted);
                } else {
                    output += char;
                }
            }
            
            document.getElementById('caesarInput').value = output;
            addXP(5, `caesar_decrypt_${input.substring(0, 10)}`);
        }

        function checkCaesarChallenge() {
            const input = document.getElementById('caesarChallenge').value.toUpperCase().trim();
            const result = document.getElementById('caesarResult');
            
            if (input === 'THIS IS A SECRET MESSAGE') {
                result.textContent = '✓ Excellent! The shift was 1. You cracked the code!';
                result.className = 'result-message correct';
                addXP(20, 'caesar_challenge');
                unlockAchievement(4, '🎯', 'Cryptanalyst', 'You successfully cracked a Caesar cipher!');
            } else {
                result.textContent = '✗ Not quite. Hint: Try shift values between 1 and 5.';
                result.className = 'result-message incorrect';
            }
        }

        // Substitution Cipher Functions
        function randomizeAlphabet() {
            const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const shuffled = alphabet.split('').sort(() => Math.random() - 0.5).join('');
            document.getElementById('cipherAlphabet').value = shuffled;
            addXP(5, 'randomize_alphabet');
        }

        function reverseAlphabet() {
            document.getElementById('cipherAlphabet').value = 'ZYXWVUTSRQPONMLKJIHGFEDCBA';
            addXP(5, 'reverse_alphabet');
        }

        function substitutionEncrypt() {
            const input = document.getElementById('subInput').value.toUpperCase();
            const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const cipher = document.getElementById('cipherAlphabet').value.toUpperCase();
            
            if (cipher.length !== 26) {
                alert('Cipher alphabet must be exactly 26 characters!');
                return;
            }
            
            let output = '';
            for (let char of input) {
                const index = alphabet.indexOf(char);
                output += index >= 0 ? cipher[index] : char;
            }
            
            document.getElementById('subOutput').value = output;
            updateFrequencyChart(output);
            unlockAchievement(2, '🗝️', 'Pattern Breaker', 'You created a substitution cipher!');
            addXP(15, `sub_encrypt_${input.substring(0, 10)}`);
        }

        function substitutionDecrypt() {
            const input = document.getElementById('subOutput').value.toUpperCase();
            const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const cipher = document.getElementById('cipherAlphabet').value.toUpperCase();
            
            if (cipher.length !== 26) {
                alert('Cipher alphabet must be exactly 26 characters!');
                return;
            }
            
            let output = '';
            for (let char of input) {
                const index = cipher.indexOf(char);
                output += index >= 0 ? alphabet[index] : char;
            }
            
            document.getElementById('subInput').value = output;
            addXP(15, `sub_decrypt_${input.substring(0, 10)}`);
        }

        function updateFrequencyChart(text) {
            const frequency = {};
            const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            
            // Initialize frequency count
            for (let letter of alphabet) {
                frequency[letter] = 0;
            }
            
            // Count letters
            for (let char of text.toUpperCase()) {
                if (char >= 'A' && char <= 'Z') {
                    frequency[char]++;
                }
            }
            
            const chart = document.getElementById('frequencyChart');
            chart.innerHTML = '';
            
            const max = Math.max(...Object.values(frequency), 1);
            
            for (let letter of alphabet) {
                const bar = document.createElement('div');
                bar.className = 'bar';
                bar.style.height = (frequency[letter] / max * 100) + '%';
                
                const label = document.createElement('div');
                label.className = 'bar-label';
                label.textContent = letter;
                bar.appendChild(label);
                
                chart.appendChild(bar);
            }
        }

        // Show/Hide Info Panels
        function showInfo(topic) {
            const infoPanel = document.getElementById(`${topic}-info`);
            if (infoPanel.classList.contains('show')) {
                infoPanel.classList.remove('show');
            } else {
                // Hide all other info panels
                document.querySelectorAll('.info-panel').forEach(panel => {
                    panel.classList.remove('show');
                });
                infoPanel.classList.add('show');
                addXP(10, `info_${topic}`);
            }
        }

        // Password Functions
        function checkPasswordStrength() {
            const password = document.getElementById('passwordInput').value;
            let strength = 0;
            let feedback = '';
            
            if (password.length >= 8) strength += 25;
            if (password.length >= 12) strength += 25;
            if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength += 25;
            if (/[0-9]/.test(password)) strength += 12.5;
            if (/[^a-zA-Z0-9]/.test(password)) strength += 12.5;
            
            const bar = document.getElementById('strengthBar');
            bar.style.width = strength + '%';
            
            if (strength < 25) {
                bar.style.background = '#ff0000';
                feedback = 'Very Weak - Add more characters';
            } else if (strength < 50) {
                bar.style.background = '#ff6600';
                feedback = 'Weak - Try mixing cases and adding numbers';
            } else if (strength < 75) {
                bar.style.background = '#ffcc00';
                feedback = 'Fair - Add special characters for better security';
            } else {
                bar.style.background = '#00ff41';
                feedback = 'Strong - Excellent password!';
                if (strength === 100) {
                    unlockAchievement(3, '🛡️', 'Security Expert', 'You created a strong password!');
                }
            }
            
            document.getElementById('strengthText').textContent = feedback;
        }

        function hashDemo() {
            const input = document.getElementById('hashInput').value;
            if (!input) {
                document.getElementById('hashOutput').textContent = '';
                return;
            }
            
            // Simple hash simulation (not cryptographically secure - just for demo)
            let hash = 0;
            for (let i = 0; i < input.length; i++) {
                hash = ((hash << 5) - hash) + input.charCodeAt(i);
                hash = hash & hash;
            }
            
            // Convert to hex and make it look like a real hash
            const hashHex = Math.abs(hash).toString(16).padStart(8, '0');
            const fullHash = hashHex + hashHex + hashHex + hashHex + hashHex + hashHex + hashHex + hashHex;
            
            document.getElementById('hashOutput').innerHTML = `<strong>Hash:</strong> ${fullHash.toUpperCase()}<br>
            <span style="color: #888; font-size: 0.9em;">Notice: Same input = same hash, but you can't reverse it!</span>`;
            addXP(10, `hash_${input.substring(0, 10)}`);
        }

        function checkSecurityAnswers() {
            const defense1 = document.getElementById('defense1').value;
            const defense2 = document.getElementById('defense2').value;
            const defense3 = document.getElementById('defense3').value;
            const result = document.getElementById('securityResult');
            
            let correct = 0;
            let feedback = [];
            
            // Brute force - both long passwords AND 2FA work!
            if (defense1 === 'long' || defense1 === '2fa') {
                correct++;
                feedback.push('✓ Brute force: Correct!');
            } else {
                feedback.push('✗ Brute force: Long passwords make it take too long, and 2FA adds an extra barrier');
            }
            
            // Dictionary attack - complex passwords best
            if (defense2 === 'long') {
                correct++;
                feedback.push('✓ Dictionary attack: Correct! Complex passwords aren\'t in dictionaries');
            } else {
                feedback.push('✗ Dictionary attack: Complex passwords avoid common words');
            }
            
            // Keyloggers - 2FA is best
            if (defense3 === '2fa') {
                correct++;
                feedback.push('✓ Keyloggers: Correct! Even if they get your password, they need your phone too');
            } else {
                feedback.push('✗ Keyloggers: 2FA protects even if your password is stolen');
            }
            
            if (correct === 3) {
                result.innerHTML = `<strong>✓ Perfect! You understand security defenses!</strong><br>${feedback.join('<br>')}`;
                result.className = 'result-message correct';
                addXP(20, 'security_quiz');
            } else {
                result.innerHTML = `<strong>You got ${correct}/3 correct.</strong><br>${feedback.join('<br>')}`;
                result.className = 'result-message incorrect';
            }
            
            // Show explanation
            document.getElementById('security-explanation').style.display = 'block';
        }

        // Enigma Machine simulation
        function enigmaEncrypt() {
            const input = document.getElementById('enigmaInput').value.toUpperCase();
            const rotor1 = parseInt(document.getElementById('rotor1').value);
            const rotor2 = parseInt(document.getElementById('rotor2').value);
            const rotor3 = parseInt(document.getElementById('rotor3').value);
            
            let output = '';
            for (let i = 0; i < input.length; i++) {
                let char = input[i];
                if (char >= 'A' && char <= 'Z') {
                    let charCode = char.charCodeAt(0) - 65;
                    // Simple rotor simulation with position advancement
                    charCode = (charCode + rotor1 * 3 + rotor2 * 5 + rotor3 * 7 + i) % 26;
                    output += String.fromCharCode(charCode + 65);
                } else {
                    output += char;
                }
            }
            
            document.getElementById('enigmaOutput').textContent = output;
            addXP(15, `enigma_${input.substring(0, 10)}`);
        }

        // Assessment answer checking
        function checkAnswer(questionNum) {
            const feedback = document.getElementById(`feedback${questionNum}`);
            const markScheme = document.getElementById(`markscheme${questionNum}`);
            
            feedback.className = 'feedback-box correct';
            feedback.innerHTML = '<strong>✓ Answer submitted!</strong> Check the mark scheme below to see how you did.';
            markScheme.className = 'mark-scheme show';
            
            // Award XP for attempting questions
            addXP(10, `question_${questionNum}`);
            
            // Check if all questions attempted for achievement
            let allAttempted = true;
            for (let i = 1; i <= 8; i++) {
                if (!gameState.xpActions.has(`question_${i}`)) {
                    allAttempted = false;
                    break;
                }
            }
            
            if (allAttempted) {
                unlockAchievement(5, '🏆', 'Encryption Master', 'You completed all assessment questions!');
            }
        }

        // Quick answer checking function
        function checkQuickAnswer(name, correct, resultId, explanation = '') {
            const selected = document.querySelector(`input[name="${name}"]:checked`);
            const result = document.getElementById(resultId);
            
            if (!selected) {
                result.textContent = 'Please select an answer!';
                result.className = 'result-message incorrect';
                return;
            }
            
            if (selected.value === correct) {
                result.innerHTML = `<strong>✓ Correct!</strong> ${explanation}`;
                result.className = 'result-message correct';
                addXP(10, `quiz_${name}`);
            } else {
                result.textContent = '✗ Not quite. Try again!';
                result.className = 'result-message incorrect';
            }
        }

        // Caesar Cipher Quiz
        function checkCaesarQuiz() {
            const q1 = document.getElementById('caesar-q1').value;
            const q2 = document.getElementById('caesar-q2').value;
            const result = document.getElementById('caesar-quiz-result');
            
            let correct = 0;
            let feedback = [];
            
            if (q1 === '25') {
                correct++;
                feedback.push('✓ Q1: Correct! There are 25 useful shifts (shift 26 = shift 0)');
            } else {
                feedback.push('✗ Q1: There are 25 possible shifts (1-25)');
            }
            
            if (q2 === 'few') {
                correct++;
                feedback.push('✓ Q2: Correct! Only 25 possible keys makes it easy to crack');
            } else {
                feedback.push('✗ Q2: Too few possible keys makes it weak');
            }
            
            result.innerHTML = `<strong>You got ${correct}/2 correct</strong><br>${feedback.join('<br>')}`;
            result.className = correct === 2 ? 'result-message correct' : 'result-message incorrect';
            
            if (correct === 2) {
                addXP(15, 'caesar_quiz');
            }
        }

        // Modern Encryption Quiz
        function checkModernQuiz() {
            const q1 = document.getElementById('public-q1').value;
            const q2 = document.getElementById('public-q2').value;
            const q3 = document.getElementById('public-q3').value;
            const result = document.getElementById('modern-quiz-result');
            
            let correct = 0;
            let feedback = [];
            
            if (q1 === 'public') {
                correct++;
                feedback.push('✓ Q1: Correct! You share your public key, keep private key secret');
            } else {
                feedback.push('✗ Q1: You share your PUBLIC key with everyone');
            }
            
            if (q2 === 'encrypt') {
                correct++;
                feedback.push('✓ Q2: Correct! HTTPS encrypts all data between you and the website');
            } else {
                feedback.push('✗ Q2: HTTPS encrypts all transmitted data');
            }
            
            if (q3 === 'false') {
                correct++;
                feedback.push('✓ Q3: Correct! End-to-end encryption means only sender and receiver can read messages');
            } else {
                feedback.push('✗ Q3: WhatsApp cannot read your messages due to end-to-end encryption');
            }
            
            result.innerHTML = `<strong>You got ${correct}/3 correct</strong><br>${feedback.join('<br>')}`;
            result.className = correct === 3 ? 'result-message correct' : 'result-message incorrect';
            
            if (correct === 3) {
                addXP(20, 'modern_quiz');
            }
        }

        // Matrix Rain Effect
        function createMatrixRain() {
            const matrix = document.getElementById('matrix-bg');
            if (matrix.children.length < 50) {
                const column = document.createElement('div');
                column.className = 'matrix-column';
                column.style.left = Math.random() * 100 + '%';
                column.style.animationDuration = (Math.random() * 10 + 5) + 's';
                column.textContent = Math.random() > 0.5 ? '01' : Math.floor(Math.random() * 10);
                matrix.appendChild(column);
                
                setTimeout(() => column.remove(), 15000);
            }
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            updateUI();
            createCipherWheel();
            
            // Apply initial shift to the wheel
            changeShift(0); // This will apply the current shift (3) to the wheel
            
            // Initialize substitution cipher
            substitutionEncrypt();
            
            // Start matrix effect
            setInterval(createMatrixRain, 100);
        });
    </script>
</body>
</html>